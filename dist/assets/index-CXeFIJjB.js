(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function _I(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ax={exports:{}},fd={},lx={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var al=Symbol.for("react.element"),wI=Symbol.for("react.portal"),bI=Symbol.for("react.fragment"),SI=Symbol.for("react.strict_mode"),AI=Symbol.for("react.profiler"),II=Symbol.for("react.provider"),TI=Symbol.for("react.context"),NI=Symbol.for("react.forward_ref"),RI=Symbol.for("react.suspense"),CI=Symbol.for("react.memo"),kI=Symbol.for("react.lazy"),K0=Symbol.iterator;function OI(t){return t===null||typeof t!="object"?null:(t=K0&&t[K0]||t["@@iterator"],typeof t=="function"?t:null)}var cx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ux=Object.assign,dx={};function vo(t,e,n){this.props=t,this.context=e,this.refs=dx,this.updater=n||cx}vo.prototype.isReactComponent={};vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hx(){}hx.prototype=vo.prototype;function sm(t,e,n){this.props=t,this.context=e,this.refs=dx,this.updater=n||cx}var om=sm.prototype=new hx;om.constructor=sm;ux(om,vo.prototype);om.isPureReactComponent=!0;var Y0=Array.isArray,fx=Object.prototype.hasOwnProperty,am={current:null},px={key:!0,ref:!0,__self:!0,__source:!0};function mx(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fx.call(e,r)&&!px.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:al,type:t,key:s,ref:o,props:i,_owner:am.current}}function PI(t,e){return{$$typeof:al,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lm(t){return typeof t=="object"&&t!==null&&t.$$typeof===al}function LI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Q0=/\/+/g;function vh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LI(""+t.key):e.toString(36)}function Lc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case al:case wI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+vh(o,0):r,Y0(i)?(n="",t!=null&&(n=t.replace(Q0,"$&/")+"/"),Lc(i,e,n,"",function(d){return d})):i!=null&&(lm(i)&&(i=PI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Q0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Y0(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+vh(s,a);o+=Lc(s,e,n,c,i)}else if(c=OI(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+vh(s,a++),o+=Lc(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Zl(t,e,n){if(t==null)return t;var r=[],i=0;return Lc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function DI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},Dc={transition:null},MI={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Dc,ReactCurrentOwner:am};function gx(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Zl,forEach:function(t,e,n){Zl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zl(t,function(){e++}),e},toArray:function(t){return Zl(t,function(e){return e})||[]},only:function(t){if(!lm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=vo;we.Fragment=bI;we.Profiler=AI;we.PureComponent=sm;we.StrictMode=SI;we.Suspense=RI;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MI;we.act=gx;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ux({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=am.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)fx.call(e,c)&&!px.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:al,type:t.type,key:i,ref:s,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:TI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:II,_context:t},t.Consumer=t};we.createElement=mx;we.createFactory=function(t){var e=mx.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:NI,render:t}};we.isValidElement=lm;we.lazy=function(t){return{$$typeof:kI,_payload:{_status:-1,_result:t},_init:DI}};we.memo=function(t,e){return{$$typeof:CI,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=Dc.transition;Dc.transition={};try{t()}finally{Dc.transition=e}};we.unstable_act=gx;we.useCallback=function(t,e){return qt.current.useCallback(t,e)};we.useContext=function(t){return qt.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};we.useEffect=function(t,e){return qt.current.useEffect(t,e)};we.useId=function(){return qt.current.useId()};we.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return qt.current.useMemo(t,e)};we.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};we.useRef=function(t){return qt.current.useRef(t)};we.useState=function(t){return qt.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return qt.current.useTransition()};we.version="18.3.1";lx.exports=we;var N=lx.exports;const jI=_I(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VI=N,UI=Symbol.for("react.element"),FI=Symbol.for("react.fragment"),BI=Object.prototype.hasOwnProperty,zI=VI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$I={key:!0,ref:!0,__self:!0,__source:!0};function yx(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)BI.call(e,r)&&!$I.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:UI,type:t,key:s,ref:o,props:i,_owner:zI.current}}fd.Fragment=FI;fd.jsx=yx;fd.jsxs=yx;ax.exports=fd;var u=ax.exports,gf={},vx={exports:{}},pn={},Ex={exports:{}},xx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,W){var Q=V.length;V.push(W);e:for(;0<Q;){var te=Q-1>>>1,ae=V[te];if(0<i(ae,W))V[te]=W,V[Q]=ae,Q=te;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var W=V[0],Q=V.pop();if(Q!==W){V[0]=Q;e:for(var te=0,ae=V.length,$=ae>>>1;te<$;){var Y=2*(te+1)-1,X=V[Y],ne=Y+1,se=V[ne];if(0>i(X,Q))ne<ae&&0>i(se,X)?(V[te]=se,V[ne]=Q,te=ne):(V[te]=X,V[Y]=Q,te=Y);else if(ne<ae&&0>i(se,Q))V[te]=se,V[ne]=Q,te=ne;else break e}}return W}function i(V,W){var Q=V.sortIndex-W.sortIndex;return Q!==0?Q:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],h=1,p=null,f=3,g=!1,_=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=V)r(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(d)}}function P(V){if(x=!1,b(V),!_)if(n(c)!==null)_=!0,U(D);else{var W=n(d);W!==null&&K(P,W.startTime-V)}}function D(V,W){_=!1,x&&(x=!1,E(v),v=-1),g=!0;var Q=f;try{for(b(W),p=n(c);p!==null&&(!(p.expirationTime>W)||V&&!k());){var te=p.callback;if(typeof te=="function"){p.callback=null,f=p.priorityLevel;var ae=te(p.expirationTime<=W);W=t.unstable_now(),typeof ae=="function"?p.callback=ae:p===n(c)&&r(c),b(W)}else r(c);p=n(c)}if(p!==null)var $=!0;else{var Y=n(d);Y!==null&&K(P,Y.startTime-W),$=!1}return $}finally{p=null,f=Q,g=!1}}var j=!1,I=null,v=-1,S=5,A=-1;function k(){return!(t.unstable_now()-A<S)}function O(){if(I!==null){var V=t.unstable_now();A=V;var W=!0;try{W=I(!0,V)}finally{W?R():(j=!1,I=null)}}else j=!1}var R;if(typeof w=="function")R=function(){w(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,L=M.port2;M.port1.onmessage=O,R=function(){L.postMessage(null)}}else R=function(){C(O,0)};function U(V){I=V,j||(j=!0,R())}function K(V,W){v=C(function(){V(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,U(D))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var Q=f;f=W;try{return V()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=f;f=V;try{return W()}finally{f=Q}},t.unstable_scheduleCallback=function(V,W,Q){var te=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?te+Q:te):Q=te,V){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,V={id:h++,callback:W,priorityLevel:V,startTime:Q,expirationTime:ae,sortIndex:-1},Q>te?(V.sortIndex=Q,e(d,V),n(c)===null&&V===n(d)&&(x?(E(v),v=-1):x=!0,K(P,Q-te))):(V.sortIndex=ae,e(c,V),_||g||(_=!0,U(D))),V},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(V){var W=f;return function(){var Q=f;f=W;try{return V.apply(this,arguments)}finally{f=Q}}}})(xx);Ex.exports=xx;var HI=Ex.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GI=N,hn=HI;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _x=new Set,Ra={};function ds(t,e){Qs(t,e),Qs(t+"Capture",e)}function Qs(t,e){for(Ra[t]=e,t=0;t<e.length;t++)_x.add(e[t])}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yf=Object.prototype.hasOwnProperty,WI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X0={},Z0={};function qI(t){return yf.call(Z0,t)?!0:yf.call(X0,t)?!1:WI.test(t)?Z0[t]=!0:(X0[t]=!0,!1)}function KI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YI(t,e,n,r){if(e===null||typeof e>"u"||KI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var cm=/[\-:]([a-z])/g;function um(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cm,um);Tt[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cm,um);Tt[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cm,um);Tt[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function dm(t,e,n,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YI(e,n,i,r)&&(n=null),r||i===null?qI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fr=GI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jl=Symbol.for("react.element"),Is=Symbol.for("react.portal"),Ts=Symbol.for("react.fragment"),hm=Symbol.for("react.strict_mode"),vf=Symbol.for("react.profiler"),wx=Symbol.for("react.provider"),bx=Symbol.for("react.context"),fm=Symbol.for("react.forward_ref"),Ef=Symbol.for("react.suspense"),xf=Symbol.for("react.suspense_list"),pm=Symbol.for("react.memo"),Kr=Symbol.for("react.lazy"),Sx=Symbol.for("react.offscreen"),J0=Symbol.iterator;function Bo(t){return t===null||typeof t!="object"?null:(t=J0&&t[J0]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,Eh;function Jo(t){if(Eh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Eh=e&&e[1]||""}return`
`+Eh+t}var xh=!1;function _h(t,e){if(!t||xh)return"";xh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{xh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jo(t):""}function QI(t){switch(t.tag){case 5:return Jo(t.type);case 16:return Jo("Lazy");case 13:return Jo("Suspense");case 19:return Jo("SuspenseList");case 0:case 2:case 15:return t=_h(t.type,!1),t;case 11:return t=_h(t.type.render,!1),t;case 1:return t=_h(t.type,!0),t;default:return""}}function _f(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ts:return"Fragment";case Is:return"Portal";case vf:return"Profiler";case hm:return"StrictMode";case Ef:return"Suspense";case xf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bx:return(t.displayName||"Context")+".Consumer";case wx:return(t._context.displayName||"Context")+".Provider";case fm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pm:return e=t.displayName||null,e!==null?e:_f(t.type)||"Memo";case Kr:e=t._payload,t=t._init;try{return _f(t(e))}catch{}}return null}function XI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _f(e);case 8:return e===hm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ax(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZI(t){var e=Ax(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ec(t){t._valueTracker||(t._valueTracker=ZI(t))}function Ix(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ax(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function uu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wf(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ey(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Tx(t,e){e=e.checked,e!=null&&dm(t,"checked",e,!1)}function bf(t,e){Tx(t,e);var n=yi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sf(t,e.type,yi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ty(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sf(t,e,n){(e!=="number"||uu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ea=Array.isArray;function Us(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Af(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ny(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(ea(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yi(n)}}function Nx(t,e){var n=yi(e.value),r=yi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ry(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function If(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tc,Cx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tc=tc||document.createElement("div"),tc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ca(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JI=["Webkit","ms","Moz","O"];Object.keys(ma).forEach(function(t){JI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ma[e]=ma[t]})});function kx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ma.hasOwnProperty(t)&&ma[t]?(""+e).trim():e+"px"}function Ox(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var eT=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tf(t,e){if(e){if(eT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Nf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rf=null;function mm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cf=null,Fs=null,Bs=null;function iy(t){if(t=ul(t)){if(typeof Cf!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=vd(e),Cf(t.stateNode,t.type,e))}}function Px(t){Fs?Bs?Bs.push(t):Bs=[t]:Fs=t}function Lx(){if(Fs){var t=Fs,e=Bs;if(Bs=Fs=null,iy(t),e)for(t=0;t<e.length;t++)iy(e[t])}}function Dx(t,e){return t(e)}function Mx(){}var wh=!1;function jx(t,e,n){if(wh)return t(e,n);wh=!0;try{return Dx(t,e,n)}finally{wh=!1,(Fs!==null||Bs!==null)&&(Mx(),Lx())}}function ka(t,e){var n=t.stateNode;if(n===null)return null;var r=vd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var kf=!1;if(Rr)try{var zo={};Object.defineProperty(zo,"passive",{get:function(){kf=!0}}),window.addEventListener("test",zo,zo),window.removeEventListener("test",zo,zo)}catch{kf=!1}function tT(t,e,n,r,i,s,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var ga=!1,du=null,hu=!1,Of=null,nT={onError:function(t){ga=!0,du=t}};function rT(t,e,n,r,i,s,o,a,c){ga=!1,du=null,tT.apply(nT,arguments)}function iT(t,e,n,r,i,s,o,a,c){if(rT.apply(this,arguments),ga){if(ga){var d=du;ga=!1,du=null}else throw Error(ee(198));hu||(hu=!0,Of=d)}}function hs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sy(t){if(hs(t)!==t)throw Error(ee(188))}function sT(t){var e=t.alternate;if(!e){if(e=hs(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return sy(i),t;if(s===r)return sy(i),e;s=s.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function Ux(t){return t=sT(t),t!==null?Fx(t):null}function Fx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fx(t);if(e!==null)return e;t=t.sibling}return null}var Bx=hn.unstable_scheduleCallback,oy=hn.unstable_cancelCallback,oT=hn.unstable_shouldYield,aT=hn.unstable_requestPaint,at=hn.unstable_now,lT=hn.unstable_getCurrentPriorityLevel,gm=hn.unstable_ImmediatePriority,zx=hn.unstable_UserBlockingPriority,fu=hn.unstable_NormalPriority,cT=hn.unstable_LowPriority,$x=hn.unstable_IdlePriority,pd=null,Jn=null;function uT(t){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(pd,t,void 0,(t.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:fT,dT=Math.log,hT=Math.LN2;function fT(t){return t>>>=0,t===0?32:31-(dT(t)/hT|0)|0}var nc=64,rc=4194304;function ta(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ta(a):(s&=o,s!==0&&(r=ta(s)))}else o=n&~i,o!==0?r=ta(o):s!==0&&(r=ta(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Un(e),i=1<<n,r|=t[n],e&=~i;return r}function pT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Un(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=pT(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function Pf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hx(){var t=nc;return nc<<=1,!(nc&4194240)&&(nc=64),t}function bh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ll(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Un(e),t[e]=n}function gT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Un(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ym(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Un(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ve=0;function Gx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wx,vm,qx,Kx,Yx,Lf=!1,ic=[],ii=null,si=null,oi=null,Oa=new Map,Pa=new Map,Qr=[],yT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ay(t,e){switch(t){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":si=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":Oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pa.delete(e.pointerId)}}function $o(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ul(e),e!==null&&vm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function vT(t,e,n,r,i){switch(e){case"focusin":return ii=$o(ii,t,e,n,r,i),!0;case"dragenter":return si=$o(si,t,e,n,r,i),!0;case"mouseover":return oi=$o(oi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Oa.set(s,$o(Oa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pa.set(s,$o(Pa.get(s)||null,t,e,n,r,i)),!0}return!1}function Qx(t){var e=Fi(t.target);if(e!==null){var n=hs(e);if(n!==null){if(e=n.tag,e===13){if(e=Vx(n),e!==null){t.blockedOn=e,Yx(t.priority,function(){qx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Df(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rf=r,n.target.dispatchEvent(r),Rf=null}else return e=ul(n),e!==null&&vm(e),t.blockedOn=n,!1;e.shift()}return!0}function ly(t,e,n){Mc(t)&&n.delete(e)}function ET(){Lf=!1,ii!==null&&Mc(ii)&&(ii=null),si!==null&&Mc(si)&&(si=null),oi!==null&&Mc(oi)&&(oi=null),Oa.forEach(ly),Pa.forEach(ly)}function Ho(t,e){t.blockedOn===e&&(t.blockedOn=null,Lf||(Lf=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,ET)))}function La(t){function e(i){return Ho(i,t)}if(0<ic.length){Ho(ic[0],t);for(var n=1;n<ic.length;n++){var r=ic[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ii!==null&&Ho(ii,t),si!==null&&Ho(si,t),oi!==null&&Ho(oi,t),Oa.forEach(e),Pa.forEach(e),n=0;n<Qr.length;n++)r=Qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qr.length&&(n=Qr[0],n.blockedOn===null);)Qx(n),n.blockedOn===null&&Qr.shift()}var zs=Fr.ReactCurrentBatchConfig,mu=!0;function xT(t,e,n,r){var i=Ve,s=zs.transition;zs.transition=null;try{Ve=1,Em(t,e,n,r)}finally{Ve=i,zs.transition=s}}function _T(t,e,n,r){var i=Ve,s=zs.transition;zs.transition=null;try{Ve=4,Em(t,e,n,r)}finally{Ve=i,zs.transition=s}}function Em(t,e,n,r){if(mu){var i=Df(t,e,n,r);if(i===null)Ph(t,e,r,gu,n),ay(t,r);else if(vT(i,t,e,n,r))r.stopPropagation();else if(ay(t,r),e&4&&-1<yT.indexOf(t)){for(;i!==null;){var s=ul(i);if(s!==null&&Wx(s),s=Df(t,e,n,r),s===null&&Ph(t,e,r,gu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ph(t,e,r,null,n)}}var gu=null;function Df(t,e,n,r){if(gu=null,t=mm(r),t=Fi(t),t!==null)if(e=hs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gu=t,null}function Xx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lT()){case gm:return 1;case zx:return 4;case fu:case cT:return 16;case $x:return 536870912;default:return 16}default:return 16}}var ti=null,xm=null,jc=null;function Zx(){if(jc)return jc;var t,e=xm,n=e.length,r,i="value"in ti?ti.value:ti.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return jc=i.slice(t,1<r?1-r:void 0)}function Vc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sc(){return!0}function cy(){return!1}function mn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sc:cy,this.isPropagationStopped=cy,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),e}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_m=mn(Eo),cl=tt({},Eo,{view:0,detail:0}),wT=mn(cl),Sh,Ah,Go,md=tt({},cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Go&&(Go&&t.type==="mousemove"?(Sh=t.screenX-Go.screenX,Ah=t.screenY-Go.screenY):Ah=Sh=0,Go=t),Sh)},movementY:function(t){return"movementY"in t?t.movementY:Ah}}),uy=mn(md),bT=tt({},md,{dataTransfer:0}),ST=mn(bT),AT=tt({},cl,{relatedTarget:0}),Ih=mn(AT),IT=tt({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),TT=mn(IT),NT=tt({},Eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RT=mn(NT),CT=tt({},Eo,{data:0}),dy=mn(CT),kT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=PT[t])?!!e[t]:!1}function wm(){return LT}var DT=tt({},cl,{key:function(t){if(t.key){var e=kT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wm,charCode:function(t){return t.type==="keypress"?Vc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),MT=mn(DT),jT=tt({},md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hy=mn(jT),VT=tt({},cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wm}),UT=mn(VT),FT=tt({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),BT=mn(FT),zT=tt({},md,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$T=mn(zT),HT=[9,13,27,32],bm=Rr&&"CompositionEvent"in window,ya=null;Rr&&"documentMode"in document&&(ya=document.documentMode);var GT=Rr&&"TextEvent"in window&&!ya,Jx=Rr&&(!bm||ya&&8<ya&&11>=ya),fy=" ",py=!1;function e_(t,e){switch(t){case"keyup":return HT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ns=!1;function WT(t,e){switch(t){case"compositionend":return t_(e);case"keypress":return e.which!==32?null:(py=!0,fy);case"textInput":return t=e.data,t===fy&&py?null:t;default:return null}}function qT(t,e){if(Ns)return t==="compositionend"||!bm&&e_(t,e)?(t=Zx(),jc=xm=ti=null,Ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jx&&e.locale!=="ko"?null:e.data;default:return null}}var KT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function my(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KT[t.type]:e==="textarea"}function n_(t,e,n,r){Px(r),e=yu(e,"onChange"),0<e.length&&(n=new _m("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var va=null,Da=null;function YT(t){f_(t,0)}function gd(t){var e=ks(t);if(Ix(e))return t}function QT(t,e){if(t==="change")return e}var r_=!1;if(Rr){var Th;if(Rr){var Nh="oninput"in document;if(!Nh){var gy=document.createElement("div");gy.setAttribute("oninput","return;"),Nh=typeof gy.oninput=="function"}Th=Nh}else Th=!1;r_=Th&&(!document.documentMode||9<document.documentMode)}function yy(){va&&(va.detachEvent("onpropertychange",i_),Da=va=null)}function i_(t){if(t.propertyName==="value"&&gd(Da)){var e=[];n_(e,Da,t,mm(t)),jx(YT,e)}}function XT(t,e,n){t==="focusin"?(yy(),va=e,Da=n,va.attachEvent("onpropertychange",i_)):t==="focusout"&&yy()}function ZT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gd(Da)}function JT(t,e){if(t==="click")return gd(e)}function eN(t,e){if(t==="input"||t==="change")return gd(e)}function tN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zn=typeof Object.is=="function"?Object.is:tN;function Ma(t,e){if(zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yf.call(e,i)||!zn(t[i],e[i]))return!1}return!0}function vy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ey(t,e){var n=vy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vy(n)}}function s_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?s_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function o_(){for(var t=window,e=uu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uu(t.document)}return e}function Sm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nN(t){var e=o_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&s_(n.ownerDocument.documentElement,n)){if(r!==null&&Sm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ey(n,s);var o=Ey(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rN=Rr&&"documentMode"in document&&11>=document.documentMode,Rs=null,Mf=null,Ea=null,jf=!1;function xy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jf||Rs==null||Rs!==uu(r)||(r=Rs,"selectionStart"in r&&Sm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ea&&Ma(Ea,r)||(Ea=r,r=yu(Mf,"onSelect"),0<r.length&&(e=new _m("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rs)))}function oc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cs={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionend:oc("Transition","TransitionEnd")},Rh={},a_={};Rr&&(a_=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function yd(t){if(Rh[t])return Rh[t];if(!Cs[t])return t;var e=Cs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in a_)return Rh[t]=e[n];return t}var l_=yd("animationend"),c_=yd("animationiteration"),u_=yd("animationstart"),d_=yd("transitionend"),h_=new Map,_y="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wi(t,e){h_.set(t,e),ds(e,[t])}for(var Ch=0;Ch<_y.length;Ch++){var kh=_y[Ch],iN=kh.toLowerCase(),sN=kh[0].toUpperCase()+kh.slice(1);wi(iN,"on"+sN)}wi(l_,"onAnimationEnd");wi(c_,"onAnimationIteration");wi(u_,"onAnimationStart");wi("dblclick","onDoubleClick");wi("focusin","onFocus");wi("focusout","onBlur");wi(d_,"onTransitionEnd");Qs("onMouseEnter",["mouseout","mouseover"]);Qs("onMouseLeave",["mouseout","mouseover"]);Qs("onPointerEnter",["pointerout","pointerover"]);Qs("onPointerLeave",["pointerout","pointerover"]);ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ds("onBeforeInput",["compositionend","keypress","textInput","paste"]);ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oN=new Set("cancel close invalid load scroll toggle".split(" ").concat(na));function wy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,iT(r,e,void 0,t),t.currentTarget=null}function f_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;wy(i,a,d),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;wy(i,a,d),s=c}}}if(hu)throw t=Of,hu=!1,Of=null,t}function He(t,e){var n=e[zf];n===void 0&&(n=e[zf]=new Set);var r=t+"__bubble";n.has(r)||(p_(e,t,2,!1),n.add(r))}function Oh(t,e,n){var r=0;e&&(r|=4),p_(n,t,r,e)}var ac="_reactListening"+Math.random().toString(36).slice(2);function ja(t){if(!t[ac]){t[ac]=!0,_x.forEach(function(n){n!=="selectionchange"&&(oN.has(n)||Oh(n,!1,t),Oh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ac]||(e[ac]=!0,Oh("selectionchange",!1,e))}}function p_(t,e,n,r){switch(Xx(e)){case 1:var i=xT;break;case 4:i=_T;break;default:i=Em}n=i.bind(null,e,n,t),i=void 0,!kf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ph(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Fi(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}jx(function(){var d=s,h=mm(n),p=[];e:{var f=h_.get(t);if(f!==void 0){var g=_m,_=t;switch(t){case"keypress":if(Vc(n)===0)break e;case"keydown":case"keyup":g=MT;break;case"focusin":_="focus",g=Ih;break;case"focusout":_="blur",g=Ih;break;case"beforeblur":case"afterblur":g=Ih;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=uy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ST;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=UT;break;case l_:case c_:case u_:g=TT;break;case d_:g=BT;break;case"scroll":g=wT;break;case"wheel":g=$T;break;case"copy":case"cut":case"paste":g=RT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=hy}var x=(e&4)!==0,C=!x&&t==="scroll",E=x?f!==null?f+"Capture":null:f;x=[];for(var w=d,b;w!==null;){b=w;var P=b.stateNode;if(b.tag===5&&P!==null&&(b=P,E!==null&&(P=ka(w,E),P!=null&&x.push(Va(w,P,b)))),C)break;w=w.return}0<x.length&&(f=new g(f,_,null,n,h),p.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Rf&&(_=n.relatedTarget||n.fromElement)&&(Fi(_)||_[Cr]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=d,_=_?Fi(_):null,_!==null&&(C=hs(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=d),g!==_)){if(x=uy,P="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=hy,P="onPointerLeave",E="onPointerEnter",w="pointer"),C=g==null?f:ks(g),b=_==null?f:ks(_),f=new x(P,w+"leave",g,n,h),f.target=C,f.relatedTarget=b,P=null,Fi(h)===d&&(x=new x(E,w+"enter",_,n,h),x.target=b,x.relatedTarget=C,P=x),C=P,g&&_)t:{for(x=g,E=_,w=0,b=x;b;b=_s(b))w++;for(b=0,P=E;P;P=_s(P))b++;for(;0<w-b;)x=_s(x),w--;for(;0<b-w;)E=_s(E),b--;for(;w--;){if(x===E||E!==null&&x===E.alternate)break t;x=_s(x),E=_s(E)}x=null}else x=null;g!==null&&by(p,f,g,x,!1),_!==null&&C!==null&&by(p,C,_,x,!0)}}e:{if(f=d?ks(d):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var D=QT;else if(my(f))if(r_)D=eN;else{D=ZT;var j=XT}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=JT);if(D&&(D=D(t,d))){n_(p,D,n,h);break e}j&&j(t,f,d),t==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&Sf(f,"number",f.value)}switch(j=d?ks(d):window,t){case"focusin":(my(j)||j.contentEditable==="true")&&(Rs=j,Mf=d,Ea=null);break;case"focusout":Ea=Mf=Rs=null;break;case"mousedown":jf=!0;break;case"contextmenu":case"mouseup":case"dragend":jf=!1,xy(p,n,h);break;case"selectionchange":if(rN)break;case"keydown":case"keyup":xy(p,n,h)}var I;if(bm)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ns?e_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Jx&&n.locale!=="ko"&&(Ns||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ns&&(I=Zx()):(ti=h,xm="value"in ti?ti.value:ti.textContent,Ns=!0)),j=yu(d,v),0<j.length&&(v=new dy(v,t,null,n,h),p.push({event:v,listeners:j}),I?v.data=I:(I=t_(n),I!==null&&(v.data=I)))),(I=GT?WT(t,n):qT(t,n))&&(d=yu(d,"onBeforeInput"),0<d.length&&(h=new dy("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=I))}f_(p,e)})}function Va(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ka(t,n),s!=null&&r.unshift(Va(t,s,i)),s=ka(t,e),s!=null&&r.push(Va(t,s,i))),t=t.return}return r}function _s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function by(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,i?(c=ka(n,s),c!=null&&o.unshift(Va(n,c,a))):i||(c=ka(n,s),c!=null&&o.push(Va(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aN=/\r\n?/g,lN=/\u0000|\uFFFD/g;function Sy(t){return(typeof t=="string"?t:""+t).replace(aN,`
`).replace(lN,"")}function lc(t,e,n){if(e=Sy(e),Sy(t)!==e&&n)throw Error(ee(425))}function vu(){}var Vf=null,Uf=null;function Ff(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bf=typeof setTimeout=="function"?setTimeout:void 0,cN=typeof clearTimeout=="function"?clearTimeout:void 0,Ay=typeof Promise=="function"?Promise:void 0,uN=typeof queueMicrotask=="function"?queueMicrotask:typeof Ay<"u"?function(t){return Ay.resolve(null).then(t).catch(dN)}:Bf;function dN(t){setTimeout(function(){throw t})}function Lh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),La(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);La(e)}function ai(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Iy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xo=Math.random().toString(36).slice(2),Qn="__reactFiber$"+xo,Ua="__reactProps$"+xo,Cr="__reactContainer$"+xo,zf="__reactEvents$"+xo,hN="__reactListeners$"+xo,fN="__reactHandles$"+xo;function Fi(t){var e=t[Qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cr]||n[Qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Iy(t);t!==null;){if(n=t[Qn])return n;t=Iy(t)}return e}t=n,n=t.parentNode}return null}function ul(t){return t=t[Qn]||t[Cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function vd(t){return t[Ua]||null}var $f=[],Os=-1;function bi(t){return{current:t}}function Ge(t){0>Os||(t.current=$f[Os],$f[Os]=null,Os--)}function ze(t,e){Os++,$f[Os]=t.current,t.current=e}var vi={},Ft=bi(vi),Jt=bi(!1),Xi=vi;function Xs(t,e){var n=t.type.contextTypes;if(!n)return vi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function en(t){return t=t.childContextTypes,t!=null}function Eu(){Ge(Jt),Ge(Ft)}function Ty(t,e,n){if(Ft.current!==vi)throw Error(ee(168));ze(Ft,e),ze(Jt,n)}function m_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ee(108,XI(t)||"Unknown",i));return tt({},n,r)}function xu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vi,Xi=Ft.current,ze(Ft,t),ze(Jt,Jt.current),!0}function Ny(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=m_(t,e,Xi),r.__reactInternalMemoizedMergedChildContext=t,Ge(Jt),Ge(Ft),ze(Ft,t)):Ge(Jt),ze(Jt,n)}var gr=null,Ed=!1,Dh=!1;function g_(t){gr===null?gr=[t]:gr.push(t)}function pN(t){Ed=!0,g_(t)}function Si(){if(!Dh&&gr!==null){Dh=!0;var t=0,e=Ve;try{var n=gr;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gr=null,Ed=!1}catch(i){throw gr!==null&&(gr=gr.slice(t+1)),Bx(gm,Si),i}finally{Ve=e,Dh=!1}}return null}var Ps=[],Ls=0,_u=null,wu=0,En=[],xn=0,Zi=null,Er=1,xr="";function ji(t,e){Ps[Ls++]=wu,Ps[Ls++]=_u,_u=t,wu=e}function y_(t,e,n){En[xn++]=Er,En[xn++]=xr,En[xn++]=Zi,Zi=t;var r=Er;t=xr;var i=32-Un(r)-1;r&=~(1<<i),n+=1;var s=32-Un(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Er=1<<32-Un(e)+i|n<<i|r,xr=s+t}else Er=1<<s|n<<i|r,xr=t}function Am(t){t.return!==null&&(ji(t,1),y_(t,1,0))}function Im(t){for(;t===_u;)_u=Ps[--Ls],Ps[Ls]=null,wu=Ps[--Ls],Ps[Ls]=null;for(;t===Zi;)Zi=En[--xn],En[xn]=null,xr=En[--xn],En[xn]=null,Er=En[--xn],En[xn]=null}var dn=null,cn=null,Ke=!1,jn=null;function v_(t,e){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ry(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,cn=ai(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zi!==null?{id:Er,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,cn=null,!0):!1;default:return!1}}function Hf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gf(t){if(Ke){var e=cn;if(e){var n=e;if(!Ry(t,e)){if(Hf(t))throw Error(ee(418));e=ai(n.nextSibling);var r=dn;e&&Ry(t,e)?v_(r,n):(t.flags=t.flags&-4097|2,Ke=!1,dn=t)}}else{if(Hf(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Ke=!1,dn=t}}}function Cy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function cc(t){if(t!==dn)return!1;if(!Ke)return Cy(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ff(t.type,t.memoizedProps)),e&&(e=cn)){if(Hf(t))throw E_(),Error(ee(418));for(;e;)v_(t,e),e=ai(e.nextSibling)}if(Cy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){cn=ai(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}cn=null}}else cn=dn?ai(t.stateNode.nextSibling):null;return!0}function E_(){for(var t=cn;t;)t=ai(t.nextSibling)}function Zs(){cn=dn=null,Ke=!1}function Tm(t){jn===null?jn=[t]:jn.push(t)}var mN=Fr.ReactCurrentBatchConfig;function Wo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function uc(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ky(t){var e=t._init;return e(t._payload)}function x_(t){function e(E,w){if(t){var b=E.deletions;b===null?(E.deletions=[w],E.flags|=16):b.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function i(E,w){return E=di(E,w),E.index=0,E.sibling=null,E}function s(E,w,b){return E.index=b,t?(b=E.alternate,b!==null?(b=b.index,b<w?(E.flags|=2,w):b):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,w,b,P){return w===null||w.tag!==6?(w=zh(b,E.mode,P),w.return=E,w):(w=i(w,b),w.return=E,w)}function c(E,w,b,P){var D=b.type;return D===Ts?h(E,w,b.props.children,P,b.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Kr&&ky(D)===w.type)?(P=i(w,b.props),P.ref=Wo(E,w,b),P.return=E,P):(P=Gc(b.type,b.key,b.props,null,E.mode,P),P.ref=Wo(E,w,b),P.return=E,P)}function d(E,w,b,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=$h(b,E.mode,P),w.return=E,w):(w=i(w,b.children||[]),w.return=E,w)}function h(E,w,b,P,D){return w===null||w.tag!==7?(w=qi(b,E.mode,P,D),w.return=E,w):(w=i(w,b),w.return=E,w)}function p(E,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=zh(""+w,E.mode,b),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Jl:return b=Gc(w.type,w.key,w.props,null,E.mode,b),b.ref=Wo(E,null,w),b.return=E,b;case Is:return w=$h(w,E.mode,b),w.return=E,w;case Kr:var P=w._init;return p(E,P(w._payload),b)}if(ea(w)||Bo(w))return w=qi(w,E.mode,b,null),w.return=E,w;uc(E,w)}return null}function f(E,w,b,P){var D=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return D!==null?null:a(E,w,""+b,P);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jl:return b.key===D?c(E,w,b,P):null;case Is:return b.key===D?d(E,w,b,P):null;case Kr:return D=b._init,f(E,w,D(b._payload),P)}if(ea(b)||Bo(b))return D!==null?null:h(E,w,b,P,null);uc(E,b)}return null}function g(E,w,b,P,D){if(typeof P=="string"&&P!==""||typeof P=="number")return E=E.get(b)||null,a(w,E,""+P,D);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Jl:return E=E.get(P.key===null?b:P.key)||null,c(w,E,P,D);case Is:return E=E.get(P.key===null?b:P.key)||null,d(w,E,P,D);case Kr:var j=P._init;return g(E,w,b,j(P._payload),D)}if(ea(P)||Bo(P))return E=E.get(b)||null,h(w,E,P,D,null);uc(w,P)}return null}function _(E,w,b,P){for(var D=null,j=null,I=w,v=w=0,S=null;I!==null&&v<b.length;v++){I.index>v?(S=I,I=null):S=I.sibling;var A=f(E,I,b[v],P);if(A===null){I===null&&(I=S);break}t&&I&&A.alternate===null&&e(E,I),w=s(A,w,v),j===null?D=A:j.sibling=A,j=A,I=S}if(v===b.length)return n(E,I),Ke&&ji(E,v),D;if(I===null){for(;v<b.length;v++)I=p(E,b[v],P),I!==null&&(w=s(I,w,v),j===null?D=I:j.sibling=I,j=I);return Ke&&ji(E,v),D}for(I=r(E,I);v<b.length;v++)S=g(I,E,v,b[v],P),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?v:S.key),w=s(S,w,v),j===null?D=S:j.sibling=S,j=S);return t&&I.forEach(function(k){return e(E,k)}),Ke&&ji(E,v),D}function x(E,w,b,P){var D=Bo(b);if(typeof D!="function")throw Error(ee(150));if(b=D.call(b),b==null)throw Error(ee(151));for(var j=D=null,I=w,v=w=0,S=null,A=b.next();I!==null&&!A.done;v++,A=b.next()){I.index>v?(S=I,I=null):S=I.sibling;var k=f(E,I,A.value,P);if(k===null){I===null&&(I=S);break}t&&I&&k.alternate===null&&e(E,I),w=s(k,w,v),j===null?D=k:j.sibling=k,j=k,I=S}if(A.done)return n(E,I),Ke&&ji(E,v),D;if(I===null){for(;!A.done;v++,A=b.next())A=p(E,A.value,P),A!==null&&(w=s(A,w,v),j===null?D=A:j.sibling=A,j=A);return Ke&&ji(E,v),D}for(I=r(E,I);!A.done;v++,A=b.next())A=g(I,E,v,A.value,P),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?v:A.key),w=s(A,w,v),j===null?D=A:j.sibling=A,j=A);return t&&I.forEach(function(O){return e(E,O)}),Ke&&ji(E,v),D}function C(E,w,b,P){if(typeof b=="object"&&b!==null&&b.type===Ts&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Jl:e:{for(var D=b.key,j=w;j!==null;){if(j.key===D){if(D=b.type,D===Ts){if(j.tag===7){n(E,j.sibling),w=i(j,b.props.children),w.return=E,E=w;break e}}else if(j.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Kr&&ky(D)===j.type){n(E,j.sibling),w=i(j,b.props),w.ref=Wo(E,j,b),w.return=E,E=w;break e}n(E,j);break}else e(E,j);j=j.sibling}b.type===Ts?(w=qi(b.props.children,E.mode,P,b.key),w.return=E,E=w):(P=Gc(b.type,b.key,b.props,null,E.mode,P),P.ref=Wo(E,w,b),P.return=E,E=P)}return o(E);case Is:e:{for(j=b.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(E,w.sibling),w=i(w,b.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=$h(b,E.mode,P),w.return=E,E=w}return o(E);case Kr:return j=b._init,C(E,w,j(b._payload),P)}if(ea(b))return _(E,w,b,P);if(Bo(b))return x(E,w,b,P);uc(E,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(E,w.sibling),w=i(w,b),w.return=E,E=w):(n(E,w),w=zh(b,E.mode,P),w.return=E,E=w),o(E)):n(E,w)}return C}var Js=x_(!0),__=x_(!1),bu=bi(null),Su=null,Ds=null,Nm=null;function Rm(){Nm=Ds=Su=null}function Cm(t){var e=bu.current;Ge(bu),t._currentValue=e}function Wf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $s(t,e){Su=t,Nm=Ds=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xt=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(Nm!==t)if(t={context:t,memoizedValue:e,next:null},Ds===null){if(Su===null)throw Error(ee(308));Ds=t,Su.dependencies={lanes:0,firstContext:t}}else Ds=Ds.next=t;return e}var Bi=null;function km(t){Bi===null?Bi=[t]:Bi.push(t)}function w_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,km(e)):(n.next=i.next,i.next=n),e.interleaved=n,kr(t,r)}function kr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yr=!1;function Om(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function li(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,kr(t,n)}return i=r.interleaved,i===null?(e.next=e,km(r)):(e.next=i.next,i.next=e),r.interleaved=e,kr(t,n)}function Uc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ym(t,n)}}function Oy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Au(t,e,n,r){var i=t.updateQueue;Yr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?s=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;o=0,h=d=c=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,x=a;switch(f=e,g=n,x.tag){case 1:if(_=x.payload,typeof _=="function"){p=_.call(g,p,f);break e}p=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=x.payload,f=typeof _=="function"?_.call(g,p,f):_,f==null)break e;p=tt({},p,f);break e;case 2:Yr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=g,c=p):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);es|=o,t.lanes=o,t.memoizedState=p}}function Py(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var dl={},er=bi(dl),Fa=bi(dl),Ba=bi(dl);function zi(t){if(t===dl)throw Error(ee(174));return t}function Pm(t,e){switch(ze(Ba,e),ze(Fa,t),ze(er,dl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:If(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=If(e,t)}Ge(er),ze(er,e)}function eo(){Ge(er),Ge(Fa),Ge(Ba)}function S_(t){zi(Ba.current);var e=zi(er.current),n=If(e,t.type);e!==n&&(ze(Fa,t),ze(er,n))}function Lm(t){Fa.current===t&&(Ge(er),Ge(Fa))}var Ze=bi(0);function Iu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mh=[];function Dm(){for(var t=0;t<Mh.length;t++)Mh[t]._workInProgressVersionPrimary=null;Mh.length=0}var Fc=Fr.ReactCurrentDispatcher,jh=Fr.ReactCurrentBatchConfig,Ji=0,et=null,ht=null,gt=null,Tu=!1,xa=!1,za=0,gN=0;function Ot(){throw Error(ee(321))}function Mm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zn(t[n],e[n]))return!1;return!0}function jm(t,e,n,r,i,s){if(Ji=s,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fc.current=t===null||t.memoizedState===null?xN:_N,t=n(r,i),xa){s=0;do{if(xa=!1,za=0,25<=s)throw Error(ee(301));s+=1,gt=ht=null,e.updateQueue=null,Fc.current=wN,t=n(r,i)}while(xa)}if(Fc.current=Nu,e=ht!==null&&ht.next!==null,Ji=0,gt=ht=et=null,Tu=!1,e)throw Error(ee(300));return t}function Vm(){var t=za!==0;return za=0,t}function Yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?et.memoizedState=gt=t:gt=gt.next=t,gt}function Rn(){if(ht===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=gt===null?et.memoizedState:gt.next;if(e!==null)gt=e,ht=t;else{if(t===null)throw Error(ee(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},gt===null?et.memoizedState=gt=t:gt=gt.next=t}return gt}function $a(t,e){return typeof e=="function"?e(t):e}function Vh(t){var e=Rn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=ht,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,d=s;do{var h=d.lane;if((Ji&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=p,o=r):c=c.next=p,et.lanes|=h,es|=h}d=d.next}while(d!==null&&d!==s);c===null?o=r:c.next=a,zn(r,e.memoizedState)||(Xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,et.lanes|=s,es|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Uh(t){var e=Rn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);zn(s,e.memoizedState)||(Xt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function A_(){}function I_(t,e){var n=et,r=Rn(),i=e(),s=!zn(r.memoizedState,i);if(s&&(r.memoizedState=i,Xt=!0),r=r.queue,Um(R_.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,Ha(9,N_.bind(null,n,r,i,e),void 0,null),yt===null)throw Error(ee(349));Ji&30||T_(n,e,i)}return i}function T_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function N_(t,e,n,r){e.value=n,e.getSnapshot=r,C_(e)&&k_(t)}function R_(t,e,n){return n(function(){C_(e)&&k_(t)})}function C_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zn(t,n)}catch{return!0}}function k_(t){var e=kr(t,1);e!==null&&Fn(e,t,1,-1)}function Ly(t){var e=Yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:t},e.queue=t,t=t.dispatch=EN.bind(null,et,t),[e.memoizedState,t]}function Ha(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function O_(){return Rn().memoizedState}function Bc(t,e,n,r){var i=Yn();et.flags|=t,i.memoizedState=Ha(1|e,n,void 0,r===void 0?null:r)}function xd(t,e,n,r){var i=Rn();r=r===void 0?null:r;var s=void 0;if(ht!==null){var o=ht.memoizedState;if(s=o.destroy,r!==null&&Mm(r,o.deps)){i.memoizedState=Ha(e,n,s,r);return}}et.flags|=t,i.memoizedState=Ha(1|e,n,s,r)}function Dy(t,e){return Bc(8390656,8,t,e)}function Um(t,e){return xd(2048,8,t,e)}function P_(t,e){return xd(4,2,t,e)}function L_(t,e){return xd(4,4,t,e)}function D_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function M_(t,e,n){return n=n!=null?n.concat([t]):null,xd(4,4,D_.bind(null,e,t),n)}function Fm(){}function j_(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function V_(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function U_(t,e,n){return Ji&21?(zn(n,e)||(n=Hx(),et.lanes|=n,es|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=n)}function yN(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=jh.transition;jh.transition={};try{t(!1),e()}finally{Ve=n,jh.transition=r}}function F_(){return Rn().memoizedState}function vN(t,e,n){var r=ui(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},B_(t))z_(e,n);else if(n=w_(t,e,n,r),n!==null){var i=Gt();Fn(n,t,r,i),$_(n,e,r)}}function EN(t,e,n){var r=ui(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(B_(t))z_(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,zn(a,o)){var c=e.interleaved;c===null?(i.next=i,km(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=w_(t,e,i,r),n!==null&&(i=Gt(),Fn(n,t,r,i),$_(n,e,r))}}function B_(t){var e=t.alternate;return t===et||e!==null&&e===et}function z_(t,e){xa=Tu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ym(t,n)}}var Nu={readContext:Nn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},xN={readContext:Nn,useCallback:function(t,e){return Yn().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:Dy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bc(4194308,4,D_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bc(4,2,t,e)},useMemo:function(t,e){var n=Yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vN.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=Yn();return t={current:t},e.memoizedState=t},useState:Ly,useDebugValue:Fm,useDeferredValue:function(t){return Yn().memoizedState=t},useTransition:function(){var t=Ly(!1),e=t[0];return t=yN.bind(null,t[1]),Yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,i=Yn();if(Ke){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),yt===null)throw Error(ee(349));Ji&30||T_(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Dy(R_.bind(null,r,s,t),[t]),r.flags|=2048,Ha(9,N_.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Yn(),e=yt.identifierPrefix;if(Ke){var n=xr,r=Er;n=(r&~(1<<32-Un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_N={readContext:Nn,useCallback:j_,useContext:Nn,useEffect:Um,useImperativeHandle:M_,useInsertionEffect:P_,useLayoutEffect:L_,useMemo:V_,useReducer:Vh,useRef:O_,useState:function(){return Vh($a)},useDebugValue:Fm,useDeferredValue:function(t){var e=Rn();return U_(e,ht.memoizedState,t)},useTransition:function(){var t=Vh($a)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:A_,useSyncExternalStore:I_,useId:F_,unstable_isNewReconciler:!1},wN={readContext:Nn,useCallback:j_,useContext:Nn,useEffect:Um,useImperativeHandle:M_,useInsertionEffect:P_,useLayoutEffect:L_,useMemo:V_,useReducer:Uh,useRef:O_,useState:function(){return Uh($a)},useDebugValue:Fm,useDeferredValue:function(t){var e=Rn();return ht===null?e.memoizedState=t:U_(e,ht.memoizedState,t)},useTransition:function(){var t=Uh($a)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:A_,useSyncExternalStore:I_,useId:F_,unstable_isNewReconciler:!1};function Dn(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _d={isMounted:function(t){return(t=t._reactInternals)?hs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gt(),i=ui(t),s=Ir(r,i);s.payload=e,n!=null&&(s.callback=n),e=li(t,s,i),e!==null&&(Fn(e,t,i,r),Uc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gt(),i=ui(t),s=Ir(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=li(t,s,i),e!==null&&(Fn(e,t,i,r),Uc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gt(),r=ui(t),i=Ir(n,r);i.tag=2,e!=null&&(i.callback=e),e=li(t,i,r),e!==null&&(Fn(e,t,r,n),Uc(e,t,r))}};function My(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ma(n,r)||!Ma(i,s):!0}function H_(t,e,n){var r=!1,i=vi,s=e.contextType;return typeof s=="object"&&s!==null?s=Nn(s):(i=en(e)?Xi:Ft.current,r=e.contextTypes,s=(r=r!=null)?Xs(t,i):vi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_d,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function jy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_d.enqueueReplaceState(e,e.state,null)}function Kf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Om(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Nn(s):(s=en(e)?Xi:Ft.current,i.context=Xs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_d.enqueueReplaceState(i,i.state,null),Au(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function to(t,e){try{var n="",r=e;do n+=QI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Fh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bN=typeof WeakMap=="function"?WeakMap:Map;function G_(t,e,n){n=Ir(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cu||(Cu=!0,sp=r),Yf(t,e)},n}function W_(t,e,n){n=Ir(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Yf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Yf(t,e),typeof r!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Vy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=jN.bind(null,t,e,n),e.then(t,t))}function Uy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ir(-1,1),e.tag=2,li(n,e,1))),n.lanes|=1),t)}var SN=Fr.ReactCurrentOwner,Xt=!1;function $t(t,e,n,r){e.child=t===null?__(e,null,n,r):Js(e,t.child,n,r)}function By(t,e,n,r,i){n=n.render;var s=e.ref;return $s(e,i),r=jm(t,e,n,r,s,i),n=Vm(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Or(t,e,i)):(Ke&&n&&Am(e),e.flags|=1,$t(t,e,r,i),e.child)}function zy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Km(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,q_(t,e,s,r,i)):(t=Gc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ma,n(o,r)&&t.ref===e.ref)return Or(t,e,i)}return e.flags|=1,t=di(s,r),t.ref=e.ref,t.return=e,e.child=t}function q_(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ma(s,r)&&t.ref===e.ref)if(Xt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Xt=!0);else return e.lanes=t.lanes,Or(t,e,i)}return Qf(t,e,n,r,i)}function K_(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(js,ln),ln|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(js,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ze(js,ln),ln|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ze(js,ln),ln|=r;return $t(t,e,i,n),e.child}function Y_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qf(t,e,n,r,i){var s=en(n)?Xi:Ft.current;return s=Xs(e,s),$s(e,i),n=jm(t,e,n,r,s,i),r=Vm(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Or(t,e,i)):(Ke&&r&&Am(e),e.flags|=1,$t(t,e,n,i),e.child)}function $y(t,e,n,r,i){if(en(n)){var s=!0;xu(e)}else s=!1;if($s(e,i),e.stateNode===null)zc(t,e),H_(e,n,r),Kf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Nn(d):(d=en(n)?Xi:Ft.current,d=Xs(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==d)&&jy(e,o,r,d),Yr=!1;var f=e.memoizedState;o.state=f,Au(e,r,o,i),c=e.memoizedState,a!==r||f!==c||Jt.current||Yr?(typeof h=="function"&&(qf(e,n,h,r),c=e.memoizedState),(a=Yr||My(e,n,a,r,f,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,b_(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Dn(e.type,a),o.props=d,p=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Nn(c):(c=en(n)?Xi:Ft.current,c=Xs(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||f!==c)&&jy(e,o,r,c),Yr=!1,f=e.memoizedState,o.state=f,Au(e,r,o,i);var _=e.memoizedState;a!==p||f!==_||Jt.current||Yr?(typeof g=="function"&&(qf(e,n,g,r),_=e.memoizedState),(d=Yr||My(e,n,d,r,f,_,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Xf(t,e,n,r,s,i)}function Xf(t,e,n,r,i,s){Y_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ny(e,n,!1),Or(t,e,s);r=e.stateNode,SN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Js(e,t.child,null,s),e.child=Js(e,null,a,s)):$t(t,e,a,s),e.memoizedState=r.state,i&&Ny(e,n,!0),e.child}function Q_(t){var e=t.stateNode;e.pendingContext?Ty(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ty(t,e.context,!1),Pm(t,e.containerInfo)}function Hy(t,e,n,r,i){return Zs(),Tm(i),e.flags|=256,$t(t,e,n,r),e.child}var Zf={dehydrated:null,treeContext:null,retryLane:0};function Jf(t){return{baseLanes:t,cachePool:null,transitions:null}}function X_(t,e,n){var r=e.pendingProps,i=Ze.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ze(Ze,i&1),t===null)return Gf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Sd(o,r,0,null),t=qi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Jf(n),e.memoizedState=Zf,t):Bm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return AN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=di(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=di(a,s):(s=qi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Jf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Zf,r}return s=t.child,t=s.sibling,r=di(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bm(t,e){return e=Sd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dc(t,e,n,r){return r!==null&&Tm(r),Js(e,t.child,null,n),t=Bm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Fh(Error(ee(422))),dc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Sd({mode:"visible",children:r.children},i,0,null),s=qi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Js(e,t.child,null,o),e.child.memoizedState=Jf(o),e.memoizedState=Zf,s);if(!(e.mode&1))return dc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ee(419)),r=Fh(s,r,void 0),dc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Xt||a){if(r=yt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,kr(t,i),Fn(r,t,i,-1))}return qm(),r=Fh(Error(ee(421))),dc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=VN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,cn=ai(i.nextSibling),dn=e,Ke=!0,jn=null,t!==null&&(En[xn++]=Er,En[xn++]=xr,En[xn++]=Zi,Er=t.id,xr=t.overflow,Zi=e),e=Bm(e,r.children),e.flags|=4096,e)}function Gy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wf(t.return,e,n)}function Bh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Z_(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($t(t,e,r.children,n),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gy(t,n,e);else if(t.tag===19)Gy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ze(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Iu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Bh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Iu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Bh(e,!0,n,null,s);break;case"together":Bh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),es|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=di(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=di(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function IN(t,e,n){switch(e.tag){case 3:Q_(e),Zs();break;case 5:S_(e);break;case 1:en(e.type)&&xu(e);break;case 4:Pm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ze(bu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ze(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?X_(t,e,n):(ze(Ze,Ze.current&1),t=Or(t,e,n),t!==null?t.sibling:null);ze(Ze,Ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Z_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,K_(t,e,n)}return Or(t,e,n)}var J_,ep,ew,tw;J_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ep=function(){};ew=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,zi(er.current);var s=null;switch(n){case"input":i=wf(t,i),r=wf(t,r),s=[];break;case"select":i=tt({},i,{value:void 0}),r=tt({},r,{value:void 0}),s=[];break;case"textarea":i=Af(t,i),r=Af(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=vu)}Tf(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ra.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(a=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ra.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&He("scroll",t),s||a===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};tw=function(t,e,n,r){n!==r&&(e.flags|=4)};function qo(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function TN(t,e,n){var r=e.pendingProps;switch(Im(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return en(e.type)&&Eu(),Pt(e),null;case 3:return r=e.stateNode,eo(),Ge(Jt),Ge(Ft),Dm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(lp(jn),jn=null))),ep(t,e),Pt(e),null;case 5:Lm(e);var i=zi(Ba.current);if(n=e.type,t!==null&&e.stateNode!=null)ew(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return Pt(e),null}if(t=zi(er.current),cc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Qn]=e,r[Ua]=s,t=(e.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(i=0;i<na.length;i++)He(na[i],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":ey(r,s),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},He("invalid",r);break;case"textarea":ny(r,s),He("invalid",r)}Tf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&lc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&lc(r.textContent,a,t),i=["children",""+a]):Ra.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&He("scroll",r)}switch(n){case"input":ec(r),ty(r,s,!0);break;case"textarea":ec(r),ry(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=vu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qn]=e,t[Ua]=r,J_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Nf(n,r),n){case"dialog":He("cancel",t),He("close",t),i=r;break;case"iframe":case"object":case"embed":He("load",t),i=r;break;case"video":case"audio":for(i=0;i<na.length;i++)He(na[i],t);i=r;break;case"source":He("error",t),i=r;break;case"img":case"image":case"link":He("error",t),He("load",t),i=r;break;case"details":He("toggle",t),i=r;break;case"input":ey(t,r),i=wf(t,r),He("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=tt({},r,{value:void 0}),He("invalid",t);break;case"textarea":ny(t,r),i=Af(t,r),He("invalid",t);break;default:i=r}Tf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Ox(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Cx(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ca(t,c):typeof c=="number"&&Ca(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ra.hasOwnProperty(s)?c!=null&&s==="onScroll"&&He("scroll",t):c!=null&&dm(t,s,c,o))}switch(n){case"input":ec(t),ty(t,r,!1);break;case"textarea":ec(t),ry(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Us(t,!!r.multiple,s,!1):r.defaultValue!=null&&Us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=vu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)tw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=zi(Ba.current),zi(er.current),cc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qn]=e,(s=r.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:lc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qn]=e,e.stateNode=r}return Pt(e),null;case 13:if(Ge(Ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&cn!==null&&e.mode&1&&!(e.flags&128))E_(),Zs(),e.flags|=98560,s=!1;else if(s=cc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ee(317));s[Qn]=e}else Zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),s=!1}else jn!==null&&(lp(jn),jn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?pt===0&&(pt=3):qm())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return eo(),ep(t,e),t===null&&ja(e.stateNode.containerInfo),Pt(e),null;case 10:return Cm(e.type._context),Pt(e),null;case 17:return en(e.type)&&Eu(),Pt(e),null;case 19:if(Ge(Ze),s=e.memoizedState,s===null)return Pt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)qo(s,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Iu(t),o!==null){for(e.flags|=128,qo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(Ze,Ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&at()>no&&(e.flags|=128,r=!0,qo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Iu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ke)return Pt(e),null}else 2*at()-s.renderingStartTime>no&&n!==1073741824&&(e.flags|=128,r=!0,qo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=at(),e.sibling=null,n=Ze.current,ze(Ze,r?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return Wm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ln&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function NN(t,e){switch(Im(e),e.tag){case 1:return en(e.type)&&Eu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return eo(),Ge(Jt),Ge(Ft),Dm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lm(e),null;case 13:if(Ge(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Ze),null;case 4:return eo(),null;case 10:return Cm(e.type._context),null;case 22:case 23:return Wm(),null;case 24:return null;default:return null}}var hc=!1,Vt=!1,RN=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Ms(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){st(t,e,r)}else n.current=null}function tp(t,e,n){try{n()}catch(r){st(t,e,r)}}var Wy=!1;function CN(t,e){if(Vf=mu,t=o_(),Sm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,h=0,p=t,f=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)f=p,p=g;for(;;){if(p===t)break t;if(f===n&&++d===i&&(a=o),f===s&&++h===r&&(c=o),(g=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uf={focusedElem:t,selectionRange:n},mu=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var x=_.memoizedProps,C=_.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?x:Dn(e.type,x),C);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(P){st(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return _=Wy,Wy=!1,_}function _a(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&tp(e,n,s)}i=i.next}while(i!==r)}}function wd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function np(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nw(t){var e=t.alternate;e!==null&&(t.alternate=null,nw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qn],delete e[Ua],delete e[zf],delete e[hN],delete e[fN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rw(t){return t.tag===5||t.tag===3||t.tag===4}function qy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vu));else if(r!==4&&(t=t.child,t!==null))for(rp(t,e,n),t=t.sibling;t!==null;)rp(t,e,n),t=t.sibling}function ip(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ip(t,e,n),t=t.sibling;t!==null;)ip(t,e,n),t=t.sibling}var wt=null,Mn=!1;function Wr(t,e,n){for(n=n.child;n!==null;)iw(t,e,n),n=n.sibling}function iw(t,e,n){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(pd,n)}catch{}switch(n.tag){case 5:Vt||Ms(n,e);case 6:var r=wt,i=Mn;wt=null,Wr(t,e,n),wt=r,Mn=i,wt!==null&&(Mn?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(Mn?(t=wt,n=n.stateNode,t.nodeType===8?Lh(t.parentNode,n):t.nodeType===1&&Lh(t,n),La(t)):Lh(wt,n.stateNode));break;case 4:r=wt,i=Mn,wt=n.stateNode.containerInfo,Mn=!0,Wr(t,e,n),wt=r,Mn=i;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tp(n,e,o),i=i.next}while(i!==r)}Wr(t,e,n);break;case 1:if(!Vt&&(Ms(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){st(n,e,a)}Wr(t,e,n);break;case 21:Wr(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,Wr(t,e,n),Vt=r):Wr(t,e,n);break;default:Wr(t,e,n)}}function Ky(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RN),e.forEach(function(r){var i=UN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Pn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wt=a.stateNode,Mn=!1;break e;case 3:wt=a.stateNode.containerInfo,Mn=!0;break e;case 4:wt=a.stateNode.containerInfo,Mn=!0;break e}a=a.return}if(wt===null)throw Error(ee(160));iw(s,o,i),wt=null,Mn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){st(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sw(e,t),e=e.sibling}function sw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pn(e,t),qn(t),r&4){try{_a(3,t,t.return),wd(3,t)}catch(x){st(t,t.return,x)}try{_a(5,t,t.return)}catch(x){st(t,t.return,x)}}break;case 1:Pn(e,t),qn(t),r&512&&n!==null&&Ms(n,n.return);break;case 5:if(Pn(e,t),qn(t),r&512&&n!==null&&Ms(n,n.return),t.flags&32){var i=t.stateNode;try{Ca(i,"")}catch(x){st(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Tx(i,s),Nf(a,o);var d=Nf(a,s);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];h==="style"?Ox(i,p):h==="dangerouslySetInnerHTML"?Cx(i,p):h==="children"?Ca(i,p):dm(i,h,p,d)}switch(a){case"input":bf(i,s);break;case"textarea":Nx(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Us(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Us(i,!!s.multiple,s.defaultValue,!0):Us(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ua]=s}catch(x){st(t,t.return,x)}}break;case 6:if(Pn(e,t),qn(t),r&4){if(t.stateNode===null)throw Error(ee(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){st(t,t.return,x)}}break;case 3:if(Pn(e,t),qn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{La(e.containerInfo)}catch(x){st(t,t.return,x)}break;case 4:Pn(e,t),qn(t);break;case 13:Pn(e,t),qn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Hm=at())),r&4&&Ky(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(d=Vt)||h,Pn(e,t),Vt=d):Pn(e,t),qn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ue=t,h=t.child;h!==null;){for(p=ue=h;ue!==null;){switch(f=ue,g=f.child,f.tag){case 0:case 11:case 14:case 15:_a(4,f,f.return);break;case 1:Ms(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(x){st(r,n,x)}}break;case 5:Ms(f,f.return);break;case 22:if(f.memoizedState!==null){Qy(p);continue}}g!==null?(g.return=f,ue=g):Qy(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=kx("display",o))}catch(x){st(t,t.return,x)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(x){st(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Pn(e,t),qn(t),r&4&&Ky(t);break;case 21:break;default:Pn(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rw(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ca(i,""),r.flags&=-33);var s=qy(t);ip(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qy(t);rp(t,a,o);break;default:throw Error(ee(161))}}catch(c){st(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kN(t,e,n){ue=t,ow(t)}function ow(t,e,n){for(var r=(t.mode&1)!==0;ue!==null;){var i=ue,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||hc;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Vt;a=hc;var d=Vt;if(hc=o,(Vt=c)&&!d)for(ue=i;ue!==null;)o=ue,c=o.child,o.tag===22&&o.memoizedState!==null?Xy(i):c!==null?(c.return=o,ue=c):Xy(i);for(;s!==null;)ue=s,ow(s),s=s.sibling;ue=i,hc=a,Vt=d}Yy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ue=s):Yy(t)}}function Yy(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||wd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Dn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Py(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Py(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&La(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Vt||e.flags&512&&np(e)}catch(f){st(e,e.return,f)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function Qy(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function Xy(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wd(4,e)}catch(c){st(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){st(e,i,c)}}var s=e.return;try{np(e)}catch(c){st(e,s,c)}break;case 5:var o=e.return;try{np(e)}catch(c){st(e,o,c)}}}catch(c){st(e,e.return,c)}if(e===t){ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ue=a;break}ue=e.return}}var ON=Math.ceil,Ru=Fr.ReactCurrentDispatcher,zm=Fr.ReactCurrentOwner,Tn=Fr.ReactCurrentBatchConfig,ke=0,yt=null,ut=null,At=0,ln=0,js=bi(0),pt=0,Ga=null,es=0,bd=0,$m=0,wa=null,Yt=null,Hm=0,no=1/0,mr=null,Cu=!1,sp=null,ci=null,fc=!1,ni=null,ku=0,ba=0,op=null,$c=-1,Hc=0;function Gt(){return ke&6?at():$c!==-1?$c:$c=at()}function ui(t){return t.mode&1?ke&2&&At!==0?At&-At:mN.transition!==null?(Hc===0&&(Hc=Hx()),Hc):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:Xx(t.type)),t):1}function Fn(t,e,n,r){if(50<ba)throw ba=0,op=null,Error(ee(185));ll(t,n,r),(!(ke&2)||t!==yt)&&(t===yt&&(!(ke&2)&&(bd|=n),pt===4&&Xr(t,At)),tn(t,r),n===1&&ke===0&&!(e.mode&1)&&(no=at()+500,Ed&&Si()))}function tn(t,e){var n=t.callbackNode;mT(t,e);var r=pu(t,t===yt?At:0);if(r===0)n!==null&&oy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&oy(n),e===1)t.tag===0?pN(Zy.bind(null,t)):g_(Zy.bind(null,t)),uN(function(){!(ke&6)&&Si()}),n=null;else{switch(Gx(r)){case 1:n=gm;break;case 4:n=zx;break;case 16:n=fu;break;case 536870912:n=$x;break;default:n=fu}n=pw(n,aw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aw(t,e){if($c=-1,Hc=0,ke&6)throw Error(ee(327));var n=t.callbackNode;if(Hs()&&t.callbackNode!==n)return null;var r=pu(t,t===yt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ou(t,r);else{e=r;var i=ke;ke|=2;var s=cw();(yt!==t||At!==e)&&(mr=null,no=at()+500,Wi(t,e));do try{DN();break}catch(a){lw(t,a)}while(!0);Rm(),Ru.current=s,ke=i,ut!==null?e=0:(yt=null,At=0,e=pt)}if(e!==0){if(e===2&&(i=Pf(t),i!==0&&(r=i,e=ap(t,i))),e===1)throw n=Ga,Wi(t,0),Xr(t,r),tn(t,at()),n;if(e===6)Xr(t,r);else{if(i=t.current.alternate,!(r&30)&&!PN(i)&&(e=Ou(t,r),e===2&&(s=Pf(t),s!==0&&(r=s,e=ap(t,s))),e===1))throw n=Ga,Wi(t,0),Xr(t,r),tn(t,at()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:Vi(t,Yt,mr);break;case 3:if(Xr(t,r),(r&130023424)===r&&(e=Hm+500-at(),10<e)){if(pu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Gt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bf(Vi.bind(null,t,Yt,mr),e);break}Vi(t,Yt,mr);break;case 4:if(Xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Un(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ON(r/1960))-r,10<r){t.timeoutHandle=Bf(Vi.bind(null,t,Yt,mr),r);break}Vi(t,Yt,mr);break;case 5:Vi(t,Yt,mr);break;default:throw Error(ee(329))}}}return tn(t,at()),t.callbackNode===n?aw.bind(null,t):null}function ap(t,e){var n=wa;return t.current.memoizedState.isDehydrated&&(Wi(t,e).flags|=256),t=Ou(t,e),t!==2&&(e=Yt,Yt=n,e!==null&&lp(e)),t}function lp(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function PN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xr(t,e){for(e&=~$m,e&=~bd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Un(e),r=1<<n;t[n]=-1,e&=~r}}function Zy(t){if(ke&6)throw Error(ee(327));Hs();var e=pu(t,0);if(!(e&1))return tn(t,at()),null;var n=Ou(t,e);if(t.tag!==0&&n===2){var r=Pf(t);r!==0&&(e=r,n=ap(t,r))}if(n===1)throw n=Ga,Wi(t,0),Xr(t,e),tn(t,at()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vi(t,Yt,mr),tn(t,at()),null}function Gm(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(no=at()+500,Ed&&Si())}}function ts(t){ni!==null&&ni.tag===0&&!(ke&6)&&Hs();var e=ke;ke|=1;var n=Tn.transition,r=Ve;try{if(Tn.transition=null,Ve=1,t)return t()}finally{Ve=r,Tn.transition=n,ke=e,!(ke&6)&&Si()}}function Wm(){ln=js.current,Ge(js)}function Wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cN(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(Im(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Eu();break;case 3:eo(),Ge(Jt),Ge(Ft),Dm();break;case 5:Lm(r);break;case 4:eo();break;case 13:Ge(Ze);break;case 19:Ge(Ze);break;case 10:Cm(r.type._context);break;case 22:case 23:Wm()}n=n.return}if(yt=t,ut=t=di(t.current,null),At=ln=e,pt=0,Ga=null,$m=bd=es=0,Yt=wa=null,Bi!==null){for(e=0;e<Bi.length;e++)if(n=Bi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Bi=null}return t}function lw(t,e){do{var n=ut;try{if(Rm(),Fc.current=Nu,Tu){for(var r=et.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Tu=!1}if(Ji=0,gt=ht=et=null,xa=!1,za=0,zm.current=null,n===null||n.return===null){pt=1,Ga=e,ut=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=At,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Uy(o);if(g!==null){g.flags&=-257,Fy(g,o,a,s,e),g.mode&1&&Vy(s,d,e),e=g,c=d;var _=e.updateQueue;if(_===null){var x=new Set;x.add(c),e.updateQueue=x}else _.add(c);break e}else{if(!(e&1)){Vy(s,d,e),qm();break e}c=Error(ee(426))}}else if(Ke&&a.mode&1){var C=Uy(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Fy(C,o,a,s,e),Tm(to(c,a));break e}}s=c=to(c,a),pt!==4&&(pt=2),wa===null?wa=[s]:wa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=G_(s,c,e);Oy(s,E);break e;case 1:a=c;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ci===null||!ci.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=W_(s,a,e);Oy(s,P);break e}}s=s.return}while(s!==null)}dw(n)}catch(D){e=D,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function cw(){var t=Ru.current;return Ru.current=Nu,t===null?Nu:t}function qm(){(pt===0||pt===3||pt===2)&&(pt=4),yt===null||!(es&268435455)&&!(bd&268435455)||Xr(yt,At)}function Ou(t,e){var n=ke;ke|=2;var r=cw();(yt!==t||At!==e)&&(mr=null,Wi(t,e));do try{LN();break}catch(i){lw(t,i)}while(!0);if(Rm(),ke=n,Ru.current=r,ut!==null)throw Error(ee(261));return yt=null,At=0,pt}function LN(){for(;ut!==null;)uw(ut)}function DN(){for(;ut!==null&&!oT();)uw(ut)}function uw(t){var e=fw(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?dw(t):ut=e,zm.current=null}function dw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=NN(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ut=null;return}}else if(n=TN(n,e,ln),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);pt===0&&(pt=5)}function Vi(t,e,n){var r=Ve,i=Tn.transition;try{Tn.transition=null,Ve=1,MN(t,e,n,r)}finally{Tn.transition=i,Ve=r}return null}function MN(t,e,n,r){do Hs();while(ni!==null);if(ke&6)throw Error(ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(gT(t,s),t===yt&&(ut=yt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fc||(fc=!0,pw(fu,function(){return Hs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tn.transition,Tn.transition=null;var o=Ve;Ve=1;var a=ke;ke|=4,zm.current=null,CN(t,n),sw(n,t),nN(Uf),mu=!!Vf,Uf=Vf=null,t.current=n,kN(n),aT(),ke=a,Ve=o,Tn.transition=s}else t.current=n;if(fc&&(fc=!1,ni=t,ku=i),s=t.pendingLanes,s===0&&(ci=null),uT(n.stateNode),tn(t,at()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Cu)throw Cu=!1,t=sp,sp=null,t;return ku&1&&t.tag!==0&&Hs(),s=t.pendingLanes,s&1?t===op?ba++:(ba=0,op=t):ba=0,Si(),null}function Hs(){if(ni!==null){var t=Gx(ku),e=Tn.transition,n=Ve;try{if(Tn.transition=null,Ve=16>t?16:t,ni===null)var r=!1;else{if(t=ni,ni=null,ku=0,ke&6)throw Error(ee(331));var i=ke;for(ke|=4,ue=t.current;ue!==null;){var s=ue,o=s.child;if(ue.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(ue=d;ue!==null;){var h=ue;switch(h.tag){case 0:case 11:case 15:_a(8,h,s)}var p=h.child;if(p!==null)p.return=h,ue=p;else for(;ue!==null;){h=ue;var f=h.sibling,g=h.return;if(nw(h),h===d){ue=null;break}if(f!==null){f.return=g,ue=f;break}ue=g}}}var _=s.alternate;if(_!==null){var x=_.child;if(x!==null){_.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}ue=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ue=o;else e:for(;ue!==null;){if(s=ue,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_a(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,ue=E;break e}ue=s.return}}var w=t.current;for(ue=w;ue!==null;){o=ue;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ue=b;else e:for(o=w;ue!==null;){if(a=ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wd(9,a)}}catch(D){st(a,a.return,D)}if(a===o){ue=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,ue=P;break e}ue=a.return}}if(ke=i,Si(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(pd,t)}catch{}r=!0}return r}finally{Ve=n,Tn.transition=e}}return!1}function Jy(t,e,n){e=to(n,e),e=G_(t,e,1),t=li(t,e,1),e=Gt(),t!==null&&(ll(t,1,e),tn(t,e))}function st(t,e,n){if(t.tag===3)Jy(t,t,n);else for(;e!==null;){if(e.tag===3){Jy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ci===null||!ci.has(r))){t=to(n,t),t=W_(e,t,1),e=li(e,t,1),t=Gt(),e!==null&&(ll(e,1,t),tn(e,t));break}}e=e.return}}function jN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(At&n)===n&&(pt===4||pt===3&&(At&130023424)===At&&500>at()-Hm?Wi(t,0):$m|=n),tn(t,e)}function hw(t,e){e===0&&(t.mode&1?(e=rc,rc<<=1,!(rc&130023424)&&(rc=4194304)):e=1);var n=Gt();t=kr(t,e),t!==null&&(ll(t,e,n),tn(t,n))}function VN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hw(t,n)}function UN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),hw(t,n)}var fw;fw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jt.current)Xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xt=!1,IN(t,e,n);Xt=!!(t.flags&131072)}else Xt=!1,Ke&&e.flags&1048576&&y_(e,wu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zc(t,e),t=e.pendingProps;var i=Xs(e,Ft.current);$s(e,n),i=jm(null,e,r,t,i,n);var s=Vm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,en(r)?(s=!0,xu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Om(e),i.updater=_d,e.stateNode=i,i._reactInternals=e,Kf(e,r,t,n),e=Xf(null,e,r,!0,s,n)):(e.tag=0,Ke&&s&&Am(e),$t(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=BN(r),t=Dn(r,t),i){case 0:e=Qf(null,e,r,t,n);break e;case 1:e=$y(null,e,r,t,n);break e;case 11:e=By(null,e,r,t,n);break e;case 14:e=zy(null,e,r,Dn(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dn(r,i),Qf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dn(r,i),$y(t,e,r,i,n);case 3:e:{if(Q_(e),t===null)throw Error(ee(387));r=e.pendingProps,s=e.memoizedState,i=s.element,b_(t,e),Au(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=to(Error(ee(423)),e),e=Hy(t,e,r,n,i);break e}else if(r!==i){i=to(Error(ee(424)),e),e=Hy(t,e,r,n,i);break e}else for(cn=ai(e.stateNode.containerInfo.firstChild),dn=e,Ke=!0,jn=null,n=__(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zs(),r===i){e=Or(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return S_(e),t===null&&Gf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ff(r,i)?o=null:s!==null&&Ff(r,s)&&(e.flags|=32),Y_(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&Gf(e),null;case 13:return X_(t,e,n);case 4:return Pm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Js(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dn(r,i),By(t,e,r,i,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ze(bu,r._currentValue),r._currentValue=o,s!==null)if(zn(s.value,o)){if(s.children===i.children&&!Jt.current){e=Or(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Ir(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Wf(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Wf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$t(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,$s(e,n),i=Nn(i),r=r(i),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,i=Dn(r,e.pendingProps),i=Dn(r.type,i),zy(t,e,r,i,n);case 15:return q_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dn(r,i),zc(t,e),e.tag=1,en(r)?(t=!0,xu(e)):t=!1,$s(e,n),H_(e,r,i),Kf(e,r,i,n),Xf(null,e,r,!0,t,n);case 19:return Z_(t,e,n);case 22:return K_(t,e,n)}throw Error(ee(156,e.tag))};function pw(t,e){return Bx(t,e)}function FN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,e,n,r){return new FN(t,e,n,r)}function Km(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BN(t){if(typeof t=="function")return Km(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fm)return 11;if(t===pm)return 14}return 2}function di(t,e){var n=t.alternate;return n===null?(n=Sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Km(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ts:return qi(n.children,i,s,e);case hm:o=8,i|=8;break;case vf:return t=Sn(12,n,e,i|2),t.elementType=vf,t.lanes=s,t;case Ef:return t=Sn(13,n,e,i),t.elementType=Ef,t.lanes=s,t;case xf:return t=Sn(19,n,e,i),t.elementType=xf,t.lanes=s,t;case Sx:return Sd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wx:o=10;break e;case bx:o=9;break e;case fm:o=11;break e;case pm:o=14;break e;case Kr:o=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Sn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function qi(t,e,n,r){return t=Sn(7,t,r,e),t.lanes=n,t}function Sd(t,e,n,r){return t=Sn(22,t,r,e),t.elementType=Sx,t.lanes=n,t.stateNode={isHidden:!1},t}function zh(t,e,n){return t=Sn(6,t,null,e),t.lanes=n,t}function $h(t,e,n){return e=Sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bh(0),this.expirationTimes=bh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ym(t,e,n,r,i,s,o,a,c){return t=new zN(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Sn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Om(s),t}function $N(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mw(t){if(!t)return vi;t=t._reactInternals;e:{if(hs(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(en(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(en(n))return m_(t,n,e)}return e}function gw(t,e,n,r,i,s,o,a,c){return t=Ym(n,r,!0,t,i,s,o,a,c),t.context=mw(null),n=t.current,r=Gt(),i=ui(n),s=Ir(r,i),s.callback=e??null,li(n,s,i),t.current.lanes=i,ll(t,i,r),tn(t,r),t}function Ad(t,e,n,r){var i=e.current,s=Gt(),o=ui(i);return n=mw(n),e.context===null?e.context=n:e.pendingContext=n,e=Ir(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=li(i,e,o),t!==null&&(Fn(t,i,o,s),Uc(t,i,o)),o}function Pu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ev(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qm(t,e){ev(t,e),(t=t.alternate)&&ev(t,e)}function HN(){return null}var yw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xm(t){this._internalRoot=t}Id.prototype.render=Xm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Ad(t,e,null,null)};Id.prototype.unmount=Xm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ts(function(){Ad(null,t,null,null)}),e[Cr]=null}};function Id(t){this._internalRoot=t}Id.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qr.length&&e!==0&&e<Qr[n].priority;n++);Qr.splice(n,0,t),n===0&&Qx(t)}};function Zm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tv(){}function GN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Pu(o);s.call(d)}}var o=gw(e,r,t,0,null,!1,!1,"",tv);return t._reactRootContainer=o,t[Cr]=o.current,ja(t.nodeType===8?t.parentNode:t),ts(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var d=Pu(c);a.call(d)}}var c=Ym(t,0,!1,null,null,!1,!1,"",tv);return t._reactRootContainer=c,t[Cr]=c.current,ja(t.nodeType===8?t.parentNode:t),ts(function(){Ad(e,c,n,r)}),c}function Nd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Pu(o);a.call(c)}}Ad(e,o,t,i)}else o=GN(n,e,t,i,r);return Pu(o)}Wx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ta(e.pendingLanes);n!==0&&(ym(e,n|1),tn(e,at()),!(ke&6)&&(no=at()+500,Si()))}break;case 13:ts(function(){var r=kr(t,1);if(r!==null){var i=Gt();Fn(r,t,1,i)}}),Qm(t,1)}};vm=function(t){if(t.tag===13){var e=kr(t,134217728);if(e!==null){var n=Gt();Fn(e,t,134217728,n)}Qm(t,134217728)}};qx=function(t){if(t.tag===13){var e=ui(t),n=kr(t,e);if(n!==null){var r=Gt();Fn(n,t,e,r)}Qm(t,e)}};Kx=function(){return Ve};Yx=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};Cf=function(t,e,n){switch(e){case"input":if(bf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=vd(r);if(!i)throw Error(ee(90));Ix(r),bf(r,i)}}}break;case"textarea":Nx(t,n);break;case"select":e=n.value,e!=null&&Us(t,!!n.multiple,e,!1)}};Dx=Gm;Mx=ts;var WN={usingClientEntryPoint:!1,Events:[ul,ks,vd,Px,Lx,Gm]},Ko={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qN={bundleType:Ko.bundleType,version:Ko.version,rendererPackageName:Ko.rendererPackageName,rendererConfig:Ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ux(t),t===null?null:t.stateNode},findFiberByHostInstance:Ko.findFiberByHostInstance||HN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{pd=pc.inject(qN),Jn=pc}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WN;pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zm(e))throw Error(ee(200));return $N(t,e,null,n)};pn.createRoot=function(t,e){if(!Zm(t))throw Error(ee(299));var n=!1,r="",i=yw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ym(t,1,!1,null,null,n,!1,r,i),t[Cr]=e.current,ja(t.nodeType===8?t.parentNode:t),new Xm(e)};pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=Ux(e),t=t===null?null:t.stateNode,t};pn.flushSync=function(t){return ts(t)};pn.hydrate=function(t,e,n){if(!Td(e))throw Error(ee(200));return Nd(null,t,e,!0,n)};pn.hydrateRoot=function(t,e,n){if(!Zm(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=yw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gw(e,null,t,1,n??null,i,!1,s,o),t[Cr]=e.current,ja(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Id(e)};pn.render=function(t,e,n){if(!Td(e))throw Error(ee(200));return Nd(null,t,e,!1,n)};pn.unmountComponentAtNode=function(t){if(!Td(t))throw Error(ee(40));return t._reactRootContainer?(ts(function(){Nd(null,null,t,!1,function(){t._reactRootContainer=null,t[Cr]=null})}),!0):!1};pn.unstable_batchedUpdates=Gm;pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Td(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Nd(t,e,n,!1,r)};pn.version="18.3.1-next-f1338f8080-20240426";function vw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vw)}catch(t){console.error(t)}}vw(),vx.exports=pn;var KN=vx.exports,nv=KN;gf.createRoot=nv.createRoot,gf.hydrateRoot=nv.hydrateRoot;const YN="modulepreload",QN=function(t){return"/"+t},rv={},XN=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=QN(c),c in rv)return;rv[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":YN,d||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),d)return new Promise((f,g)=>{p.addEventListener("load",f),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var iv="popstate";function ZN(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return cp("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Wa(i)}return e1(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $n(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JN(){return Math.random().toString(36).substring(2,10)}function sv(t,e){return{usr:t.state,key:t.key,idx:e}}function cp(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?_o(e):e,state:n,key:e&&e.key||r||JN()}}function Wa({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function _o(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function e1(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",c=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function p(){a="POP";let C=h(),E=C==null?null:C-d;d=C,c&&c({action:a,location:x.location,delta:E})}function f(C,E){a="PUSH";let w=cp(x.location,C,E);d=h()+1;let b=sv(w,d),P=x.createHref(w);try{o.pushState(b,"",P)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(P)}s&&c&&c({action:a,location:x.location,delta:1})}function g(C,E){a="REPLACE";let w=cp(x.location,C,E);d=h();let b=sv(w,d),P=x.createHref(w);o.replaceState(b,"",P),s&&c&&c({action:a,location:x.location,delta:0})}function _(C){return t1(C)}let x={get action(){return a},get location(){return t(i,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(iv,p),c=C,()=>{i.removeEventListener(iv,p),c=null}},createHref(C){return e(i,C)},createURL:_,encodeLocation(C){let E=_(C);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:g,go(C){return o.go(C)}};return x}function t1(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Qe(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Wa(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Ew(t,e,n="/"){return n1(t,e,n,!1)}function n1(t,e,n,r){let i=typeof e=="string"?_o(e):e,s=Pr(i.pathname||"/",n);if(s==null)return null;let o=xw(t);r1(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let d=p1(s);a=h1(o[c],d,r)}return a}function xw(t,e=[],n=[],r="",i=!1){let s=(o,a,c=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;Qe(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=Tr([r,h.relativePath]),f=n.concat(h);o.children&&o.children.length>0&&(Qe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),xw(o.children,e,f,p,c)),!(o.path==null&&!o.index)&&e.push({path:p,score:u1(p,o.index),routesMeta:f})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,a);else for(let d of _w(o.path))s(o,a,!0,d)}),e}function _w(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=_w(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function r1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:d1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var i1=/^:[\w-]+$/,s1=3,o1=2,a1=1,l1=10,c1=-2,ov=t=>t==="*";function u1(t,e){let n=t.split("/"),r=n.length;return n.some(ov)&&(r+=c1),e&&(r+=o1),n.filter(i=>!ov(i)).reduce((i,s)=>i+(i1.test(s)?s1:s===""?a1:l1),r)}function d1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function h1(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],d=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=Lu({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),f=c.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=Lu({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Tr([s,p.pathname]),pathnameBase:v1(Tr([s,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(s=Tr([s,p.pathnameBase]))}return o}function Lu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=f1(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},f)=>{if(h==="*"){let _=a[f]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const g=a[f];return p&&!g?d[h]=void 0:d[h]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function f1(t,e=!1,n=!0){$n(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function p1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $n(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Pr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var m1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function g1(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?_o(t):t,s;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?s=av(n.substring(1),"/"):s=av(n,e)):s=e,{pathname:s,search:E1(r),hash:x1(i)}}function av(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Hh(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function y1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jm(t){let e=y1(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function eg(t,e,n,r=!1){let i;typeof t=="string"?i=_o(t):(i={...t},Qe(!i.pathname||!i.pathname.includes("?"),Hh("?","pathname","search",i)),Qe(!i.pathname||!i.pathname.includes("#"),Hh("#","pathname","hash",i)),Qe(!i.search||!i.search.includes("#"),Hh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),p-=1;i.pathname=f.join("/")}a=p>=0?e[p]:"/"}let c=g1(i,a),d=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var Tr=t=>t.join("/").replace(/\/\/+/g,"/"),v1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),E1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,x1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,_1=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function w1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function b1(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ww=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bw(t,e){let n=t;if(typeof n!="string"||!m1.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(ww)try{let s=new URL(window.location.href),o=n.startsWith("//")?new URL(s.protocol+n):new URL(n),a=Pr(o.pathname,e);o.origin===s.origin&&a!=null?n=a+o.search+o.hash:i=!0}catch{$n(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Sw=["POST","PUT","PATCH","DELETE"];new Set(Sw);var S1=["GET",...Sw];new Set(S1);var wo=N.createContext(null);wo.displayName="DataRouter";var Rd=N.createContext(null);Rd.displayName="DataRouterState";var A1=N.createContext(!1),Aw=N.createContext({isTransitioning:!1});Aw.displayName="ViewTransition";var I1=N.createContext(new Map);I1.displayName="Fetchers";var T1=N.createContext(null);T1.displayName="Await";var gn=N.createContext(null);gn.displayName="Navigation";var hl=N.createContext(null);hl.displayName="Location";var lr=N.createContext({outlet:null,matches:[],isDataRoute:!1});lr.displayName="Route";var tg=N.createContext(null);tg.displayName="RouteError";var Iw="REACT_ROUTER_ERROR",N1="REDIRECT",R1="ROUTE_ERROR_RESPONSE";function C1(t){if(t.startsWith(`${Iw}:${N1}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function k1(t){if(t.startsWith(`${Iw}:${R1}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new _1(e.status,e.statusText,e.data)}catch{}}function O1(t,{relative:e}={}){Qe(bo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=N.useContext(gn),{hash:i,pathname:s,search:o}=pl(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Tr([n,s])),r.createHref({pathname:a,search:o,hash:i})}function bo(){return N.useContext(hl)!=null}function Ai(){return Qe(bo(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(hl).location}var Tw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Nw(t){N.useContext(gn).static||N.useLayoutEffect(t)}function fl(){let{isDataRoute:t}=N.useContext(lr);return t?G1():P1()}function P1(){Qe(bo(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(wo),{basename:e,navigator:n}=N.useContext(gn),{matches:r}=N.useContext(lr),{pathname:i}=Ai(),s=JSON.stringify(Jm(r)),o=N.useRef(!1);return Nw(()=>{o.current=!0}),N.useCallback((c,d={})=>{if($n(o.current,Tw),!o.current)return;if(typeof c=="number"){n.go(c);return}let h=eg(c,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Tr([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,s,i,t])}N.createContext(null);function pl(t,{relative:e}={}){let{matches:n}=N.useContext(lr),{pathname:r}=Ai(),i=JSON.stringify(Jm(n));return N.useMemo(()=>eg(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function L1(t,e){return Rw(t,e)}function Rw(t,e,n,r,i){var w;Qe(bo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=N.useContext(gn),{matches:o}=N.useContext(lr),a=o[o.length-1],c=a?a.params:{},d=a?a.pathname:"/",h=a?a.pathnameBase:"/",p=a&&a.route;{let b=p&&p.path||"";kw(d,!p||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=Ai(),g;if(e){let b=typeof e=="string"?_o(e):e;Qe(h==="/"||((w=b.pathname)==null?void 0:w.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${b.pathname}" was given in the \`location\` prop.`),g=b}else g=f;let _=g.pathname||"/",x=_;if(h!=="/"){let b=h.replace(/^\//,"").split("/");x="/"+_.replace(/^\//,"").split("/").slice(b.length).join("/")}let C=Ew(t,{pathname:x});$n(p||C!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),$n(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=U1(C&&C.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:Tr([h,s.encodeLocation?s.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:Tr([h,s.encodeLocation?s.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),o,n,r,i);return e&&E?N.createElement(hl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},E):E}function D1(){let t=H1(),e=w1(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:s},"ErrorBoundary")," or"," ",N.createElement("code",{style:s},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,o)}var M1=N.createElement(D1,null),Cw=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=k1(t.digest);n&&(t=n)}let e=t!==void 0?N.createElement(lr.Provider,{value:this.props.routeContext},N.createElement(tg.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?N.createElement(j1,{error:t},e):e}};Cw.contextType=A1;var Gh=new WeakMap;function j1({children:t,error:e}){let{basename:n}=N.useContext(gn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=C1(e.digest);if(r){let i=Gh.get(e);if(i)throw i;let s=bw(r.location,n);if(ww&&!Gh.get(e))if(s.isExternal||r.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:r.replace}));throw Gh.set(e,o),o}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return t}function V1({routeContext:t,match:e,children:n}){let r=N.useContext(wo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(lr.Provider,{value:t},n)}function U1(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let h=s.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);Qe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let a=!1,c=-1;if(n)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:f,errors:g}=n,_=p.route.loader&&!f.hasOwnProperty(p.route.id)&&(!g||g[p.route.id]===void 0);if(p.route.lazy||_){a=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}let d=n&&r?(h,p)=>{var f,g;r(h,{location:n.location,params:((g=(f=n.matches)==null?void 0:f[0])==null?void 0:g.params)??{},unstable_pattern:b1(n.matches),errorInfo:p})}:void 0;return s.reduceRight((h,p,f)=>{let g,_=!1,x=null,C=null;n&&(g=o&&p.route.id?o[p.route.id]:void 0,x=p.route.errorElement||M1,a&&(c<0&&f===0?(kw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,C=null):c===f&&(_=!0,C=p.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,f+1)),w=()=>{let b;return g?b=x:_?b=C:p.route.Component?b=N.createElement(p.route.Component,null):p.route.element?b=p.route.element:b=h,N.createElement(V1,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:b})};return n&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?N.createElement(Cw,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:d}):w()},null)}function ng(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F1(t){let e=N.useContext(wo);return Qe(e,ng(t)),e}function B1(t){let e=N.useContext(Rd);return Qe(e,ng(t)),e}function z1(t){let e=N.useContext(lr);return Qe(e,ng(t)),e}function rg(t){let e=z1(t),n=e.matches[e.matches.length-1];return Qe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function $1(){return rg("useRouteId")}function H1(){var r;let t=N.useContext(tg),e=B1("useRouteError"),n=rg("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function G1(){let{router:t}=F1("useNavigate"),e=rg("useNavigate"),n=N.useRef(!1);return Nw(()=>{n.current=!0}),N.useCallback(async(i,s={})=>{$n(n.current,Tw),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var lv={};function kw(t,e,n){!e&&!lv[t]&&(lv[t]=!0,$n(!1,n))}N.memo(W1);function W1({routes:t,future:e,state:n,onError:r}){return Rw(t,void 0,n,r,e)}function mc({to:t,replace:e,state:n,relative:r}){Qe(bo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=N.useContext(gn);$n(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=N.useContext(lr),{pathname:o}=Ai(),a=fl(),c=eg(t,Jm(s),o,r==="path"),d=JSON.stringify(c);return N.useEffect(()=>{a(JSON.parse(d),{replace:e,state:n,relative:r})},[a,d,r,e,n]),null}function Kn(t){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function q1({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:o}){Qe(!bo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:a,navigator:i,static:s,unstable_useTransitions:o,future:{}}),[a,i,s,o]);typeof n=="string"&&(n=_o(n));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:g="default"}=n,_=N.useMemo(()=>{let x=Pr(d,a);return x==null?null:{location:{pathname:x,search:h,hash:p,state:f,key:g},navigationType:r}},[a,d,h,p,f,g,r]);return $n(_!=null,`<Router basename="${a}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:N.createElement(gn.Provider,{value:c},N.createElement(hl.Provider,{children:e,value:_}))}function K1({children:t,location:e}){return L1(up(t),e)}function up(t,e=[]){let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,up(r.props.children,s));return}Qe(r.type===Kn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=up(r.props.children,s)),n.push(o)}),n}var Wc="get",qc="application/x-www-form-urlencoded";function Cd(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Y1(t){return Cd(t)&&t.tagName.toLowerCase()==="button"}function Q1(t){return Cd(t)&&t.tagName.toLowerCase()==="form"}function X1(t){return Cd(t)&&t.tagName.toLowerCase()==="input"}function Z1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function J1(t,e){return t.button===0&&(!e||e==="_self")&&!Z1(t)}var gc=null;function eR(){if(gc===null)try{new FormData(document.createElement("form"),0),gc=!1}catch{gc=!0}return gc}var tR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wh(t){return t!=null&&!tR.has(t)?($n(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qc}"`),null):t}function nR(t,e){let n,r,i,s,o;if(Q1(t)){let a=t.getAttribute("action");r=a?Pr(a,e):null,n=t.getAttribute("method")||Wc,i=Wh(t.getAttribute("enctype"))||qc,s=new FormData(t)}else if(Y1(t)||X1(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||a.getAttribute("action");if(r=c?Pr(c,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Wc,i=Wh(t.getAttribute("formenctype"))||Wh(a.getAttribute("enctype"))||qc,s=new FormData(a,t),!eR()){let{name:d,type:h,value:p}=t;if(h==="image"){let f=d?`${d}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else d&&s.append(d,p)}}else{if(Cd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Wc,r=null,i=qc,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ig(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rR(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&Pr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function iR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function oR(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await iR(s,n);return o.links?o.links():[]}return[]}));return uR(r.flat(1).filter(sR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function cv(t,e,n,r,i,s){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,a=(c,d)=>{var h;return n[d].pathname!==c.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,d)=>o(c,d)||a(c,d)):s==="data"?e.filter((c,d)=>{var p;let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,d)||a(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function aR(t,e,{includeHydrateFallback:n}={}){return lR(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function lR(t){return[...new Set(t)]}function cR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function uR(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(cR(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function Ow(){let t=N.useContext(wo);return ig(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function dR(){let t=N.useContext(Rd);return ig(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var sg=N.createContext(void 0);sg.displayName="FrameworkContext";function Pw(){let t=N.useContext(sg);return ig(t,"You must render this element inside a <HydratedRouter> element"),t}function hR(t,e){let n=N.useContext(sg),[r,i]=N.useState(!1),[s,o]=N.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,f=N.useRef(null);N.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let x=E=>{E.forEach(w=>{o(w.isIntersecting)})},C=new IntersectionObserver(x,{threshold:.5});return f.current&&C.observe(f.current),()=>{C.disconnect()}}},[t]),N.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let g=()=>{i(!0)},_=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:Yo(a,g),onBlur:Yo(c,_),onMouseEnter:Yo(d,g),onMouseLeave:Yo(h,_),onTouchStart:Yo(p,g)}]:[!1,f,{}]}function Yo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function fR({page:t,...e}){let{router:n}=Ow(),r=N.useMemo(()=>Ew(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?N.createElement(mR,{page:t,matches:r,...e}):null}function pR(t){let{manifest:e,routeModules:n}=Pw(),[r,i]=N.useState([]);return N.useEffect(()=>{let s=!1;return oR(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function mR({page:t,matches:e,...n}){let r=Ai(),{future:i,manifest:s,routeModules:o}=Pw(),{basename:a}=Ow(),{loaderData:c,matches:d}=dR(),h=N.useMemo(()=>cv(t,e,d,s,r,"data"),[t,e,d,s,r]),p=N.useMemo(()=>cv(t,e,d,s,r,"assets"),[t,e,d,s,r]),f=N.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,C=!1;if(e.forEach(w=>{var P;let b=s.routes[w.route.id];!b||!b.hasLoader||(!h.some(D=>D.route.id===w.route.id)&&w.route.id in c&&((P=o[w.route.id])!=null&&P.shouldRevalidate)||b.hasClientLoader?C=!0:x.add(w.route.id))}),x.size===0)return[];let E=rR(t,a,i.unstable_trailingSlashAwareDataRequests,"data");return C&&x.size>0&&E.searchParams.set("_routes",e.filter(w=>x.has(w.route.id)).map(w=>w.route.id).join(",")),[E.pathname+E.search]},[a,i.unstable_trailingSlashAwareDataRequests,c,r,s,h,e,t,o]),g=N.useMemo(()=>aR(p,s),[p,s]),_=pR(p);return N.createElement(N.Fragment,null,f.map(x=>N.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),g.map(x=>N.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),_.map(({key:x,link:C})=>N.createElement("link",{key:x,nonce:n.nonce,...C,crossOrigin:C.crossOrigin??n.crossOrigin})))}function gR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var yR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yR&&(window.__reactRouterVersion="7.13.0")}catch{}function vR({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=N.useRef();i.current==null&&(i.current=ZN({window:r,v5Compat:!0}));let s=i.current,[o,a]=N.useState({action:s.action,location:s.location}),c=N.useCallback(d=>{n===!1?a(d):N.startTransition(()=>a(d))},[n]);return N.useLayoutEffect(()=>s.listen(c),[s,c]),N.createElement(q1,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:n})}var Lw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dw=N.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:c,to:d,preventScrollReset:h,viewTransition:p,unstable_defaultShouldRevalidate:f,...g},_){let{basename:x,unstable_useTransitions:C}=N.useContext(gn),E=typeof d=="string"&&Lw.test(d),w=bw(d,x);d=w.to;let b=O1(d,{relative:i}),[P,D,j]=hR(r,g),I=wR(d,{replace:o,state:a,target:c,preventScrollReset:h,relative:i,viewTransition:p,unstable_defaultShouldRevalidate:f,unstable_useTransitions:C});function v(A){e&&e(A),A.defaultPrevented||I(A)}let S=N.createElement("a",{...g,...j,href:w.absoluteURL||b,onClick:w.isExternal||s?e:v,ref:gR(_,D),target:c,"data-discover":!E&&n==="render"?"true":void 0});return P&&!E?N.createElement(N.Fragment,null,S,N.createElement(fR,{page:b})):S});Dw.displayName="Link";var ER=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:c,...d},h){let p=pl(o,{relative:d.relative}),f=Ai(),g=N.useContext(Rd),{navigator:_,basename:x}=N.useContext(gn),C=g!=null&&TR(p)&&a===!0,E=_.encodeLocation?_.encodeLocation(p).pathname:p.pathname,w=f.pathname,b=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(w=w.toLowerCase(),b=b?b.toLowerCase():null,E=E.toLowerCase()),b&&x&&(b=Pr(b,x)||b);const P=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let D=w===E||!i&&w.startsWith(E)&&w.charAt(P)==="/",j=b!=null&&(b===E||!i&&b.startsWith(E)&&b.charAt(E.length)==="/"),I={isActive:D,isPending:j,isTransitioning:C},v=D?e:void 0,S;typeof r=="function"?S=r(I):S=[r,D?"active":null,j?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let A=typeof s=="function"?s(I):s;return N.createElement(Dw,{...d,"aria-current":v,className:S,ref:h,style:A,to:o,viewTransition:a},typeof c=="function"?c(I):c)});ER.displayName="NavLink";var xR=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Wc,action:a,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:p,unstable_defaultShouldRevalidate:f,...g},_)=>{let{unstable_useTransitions:x}=N.useContext(gn),C=AR(),E=IR(a,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&Lw.test(a),P=D=>{if(c&&c(D),D.defaultPrevented)return;D.preventDefault();let j=D.nativeEvent.submitter,I=(j==null?void 0:j.getAttribute("formmethod"))||o,v=()=>C(j||D.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:i,state:s,relative:d,preventScrollReset:h,viewTransition:p,unstable_defaultShouldRevalidate:f});x&&n!==!1?N.startTransition(()=>v()):v()};return N.createElement("form",{ref:_,method:w,action:E,onSubmit:r?c:P,...g,"data-discover":!b&&t==="render"?"true":void 0})});xR.displayName="Form";function _R(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mw(t){let e=N.useContext(wo);return Qe(e,_R(t)),e}function wR(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:a,unstable_useTransitions:c}={}){let d=fl(),h=Ai(),p=pl(t,{relative:s});return N.useCallback(f=>{if(J1(f,e)){f.preventDefault();let g=n!==void 0?n:Wa(h)===Wa(p),_=()=>d(t,{replace:g,state:r,preventScrollReset:i,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:a});c?N.startTransition(()=>_()):_()}},[h,d,p,n,r,e,t,i,s,o,a,c])}var bR=0,SR=()=>`__${String(++bR)}__`;function AR(){let{router:t}=Mw("useSubmit"),{basename:e}=N.useContext(gn),n=$1(),r=t.fetch,i=t.navigate;return N.useCallback(async(s,o={})=>{let{action:a,method:c,encType:d,formData:h,body:p}=nR(s,e);if(o.navigate===!1){let f=o.fetcherKey||SR();await r(f,n,o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await i(o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,e,n])}function IR(t,{relative:e}={}){let{basename:n}=N.useContext(gn),r=N.useContext(lr);Qe(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...pl(t||".",{relative:e})},o=Ai();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),c=a.getAll("index");if(c.some(h=>h==="")){a.delete("index"),c.filter(p=>p).forEach(p=>a.append("index",p));let h=a.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Tr([n,s.pathname])),Wa(s)}function TR(t,{relative:e}={}){let n=N.useContext(Aw);Qe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Mw("useViewTransitionState"),i=pl(t,{relative:e});if(!n.isTransitioning)return!1;let s=Pr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Pr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Lu(i.pathname,o)!=null||Lu(i.pathname,s)!=null}var uv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},NR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Vw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let f=(a&15)<<2|d>>6,g=d&63;c||(g=64,o||(f=64)),r.push(n[h],n[p],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||d==null||p==null)throw new RR;const f=s<<2|a>>4;if(r.push(f),d!==64){const g=a<<4&240|d>>2;if(r.push(g),p!==64){const _=d<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CR=function(t){const e=jw(t);return Vw.encodeByteArray(e,!0)},Du=function(t){return CR(t).replace(/\./g,"")},Uw=function(t){try{return Vw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=()=>kR().__FIREBASE_DEFAULTS__,PR=()=>{if(typeof process>"u"||typeof uv>"u")return;const t=uv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Uw(t[1]);return e&&JSON.parse(e)},kd=()=>{try{return OR()||PR()||LR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Fw=t=>{var e,n;return(n=(e=kd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},DR=t=>{const e=Fw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bw=()=>{var t;return(t=kd())===null||t===void 0?void 0:t.config},zw=t=>{var e;return(e=kd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Du(JSON.stringify(n)),Du(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function UR(){var t;const e=(t=kd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $R(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function HR(){return!UR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GR(){try{return typeof indexedDB=="object"}catch{return!1}}function WR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="FirebaseError";class Br extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qR,Object.setPrototypeOf(this,Br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ml.prototype.create)}}class ml{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?KR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Br(i,a,r)}}function KR(t,e){return t.replace(YR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const YR=/\{\$([^}]+)}/g;function QR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(dv(s)&&dv(o)){if(!Mu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function dv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function XR(t,e){const n=new ZR(t,e);return n.subscribe.bind(n)}class ZR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=qh),i.error===void 0&&(i.error=qh),i.complete===void 0&&(i.complete=qh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return t&&t._delegate?t._delegate:t}class ns{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new MR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nC(e))try{this.getOrInitializeService({instanceIdentifier:Ui})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ui){return this.instances.has(e)}getOptions(e=Ui){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ui){return this.component?this.component.multipleInstances?e:Ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tC(t){return t===Ui?void 0:t}function nC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const iC={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},sC=Te.INFO,oC={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},aC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=oC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class og{constructor(e){this.name=e,this._logLevel=sC,this._logHandler=aC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const lC=(t,e)=>e.some(n=>t instanceof n);let hv,fv;function cC(){return hv||(hv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uC(){return fv||(fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $w=new WeakMap,dp=new WeakMap,Hw=new WeakMap,Kh=new WeakMap,ag=new WeakMap;function dC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(hi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$w.set(n,t)}).catch(()=>{}),ag.set(e,t),e}function hC(t){if(dp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});dp.set(t,e)}let hp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fC(t){hp=t(hp)}function pC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yh(this),e,...n);return Hw.set(r,e.sort?e.sort():[e]),hi(r)}:uC().includes(t)?function(...e){return t.apply(Yh(this),e),hi($w.get(this))}:function(...e){return hi(t.apply(Yh(this),e))}}function mC(t){return typeof t=="function"?pC(t):(t instanceof IDBTransaction&&hC(t),lC(t,cC())?new Proxy(t,hp):t)}function hi(t){if(t instanceof IDBRequest)return dC(t);if(Kh.has(t))return Kh.get(t);const e=mC(t);return e!==t&&(Kh.set(t,e),ag.set(e,t)),e}const Yh=t=>ag.get(t);function gC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=hi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(hi(o.result),c.oldVersion,c.newVersion,hi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const yC=["get","getKey","getAll","getAllKeys","count"],vC=["put","add","delete","clear"],Qh=new Map;function pv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qh.get(e))return Qh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=vC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yC.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),i&&c.done]))[0]};return Qh.set(e,s),s}fC(t=>({...t,get:(e,n,r)=>pv(e,n)||t.get(e,n,r),has:(e,n)=>!!pv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fp="@firebase/app",mv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new og("@firebase/app"),_C="@firebase/app-compat",wC="@firebase/analytics-compat",bC="@firebase/analytics",SC="@firebase/app-check-compat",AC="@firebase/app-check",IC="@firebase/auth",TC="@firebase/auth-compat",NC="@firebase/database",RC="@firebase/data-connect",CC="@firebase/database-compat",kC="@firebase/functions",OC="@firebase/functions-compat",PC="@firebase/installations",LC="@firebase/installations-compat",DC="@firebase/messaging",MC="@firebase/messaging-compat",jC="@firebase/performance",VC="@firebase/performance-compat",UC="@firebase/remote-config",FC="@firebase/remote-config-compat",BC="@firebase/storage",zC="@firebase/storage-compat",$C="@firebase/firestore",HC="@firebase/vertexai-preview",GC="@firebase/firestore-compat",WC="firebase",qC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="[DEFAULT]",KC={[fp]:"fire-core",[_C]:"fire-core-compat",[bC]:"fire-analytics",[wC]:"fire-analytics-compat",[AC]:"fire-app-check",[SC]:"fire-app-check-compat",[IC]:"fire-auth",[TC]:"fire-auth-compat",[NC]:"fire-rtdb",[RC]:"fire-data-connect",[CC]:"fire-rtdb-compat",[kC]:"fire-fn",[OC]:"fire-fn-compat",[PC]:"fire-iid",[LC]:"fire-iid-compat",[DC]:"fire-fcm",[MC]:"fire-fcm-compat",[jC]:"fire-perf",[VC]:"fire-perf-compat",[UC]:"fire-rc",[FC]:"fire-rc-compat",[BC]:"fire-gcs",[zC]:"fire-gcs-compat",[$C]:"fire-fst",[GC]:"fire-fst-compat",[HC]:"fire-vertex","fire-js":"fire-js",[WC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new Map,YC=new Map,mp=new Map;function gv(t,e){try{t.container.addComponent(e)}catch(n){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ro(t){const e=t.name;if(mp.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;mp.set(e,t);for(const n of ju.values())gv(n,t);for(const n of YC.values())gv(n,t);return!0}function lg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _r(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new ml("app","Firebase",QC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=qC;function Gw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:pp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw fi.create("bad-app-name",{appName:String(i)});if(n||(n=Bw()),!n)throw fi.create("no-options");const s=ju.get(i);if(s){if(Mu(n,s.options)&&Mu(r,s.config))return s;throw fi.create("duplicate-app",{appName:i})}const o=new rC(i);for(const c of mp.values())o.addComponent(c);const a=new XC(n,r,o);return ju.set(i,a),a}function Ww(t=pp){const e=ju.get(t);if(!e&&t===pp&&Bw())return Gw();if(!e)throw fi.create("no-app",{appName:t});return e}function pi(t,e,n){var r;let i=(r=KC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(a.join(" "));return}ro(new ns(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="firebase-heartbeat-database",JC=1,qa="firebase-heartbeat-store";let Xh=null;function qw(){return Xh||(Xh=gC(ZC,JC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qa)}catch(n){console.warn(n)}}}}).catch(t=>{throw fi.create("idb-open",{originalErrorMessage:t.message})})),Xh}async function ek(t){try{const n=(await qw()).transaction(qa),r=await n.objectStore(qa).get(Kw(t));return await n.done,r}catch(e){if(e instanceof Br)Lr.warn(e.message);else{const n=fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(n.message)}}}async function yv(t,e){try{const r=(await qw()).transaction(qa,"readwrite");await r.objectStore(qa).put(e,Kw(t)),await r.done}catch(n){if(n instanceof Br)Lr.warn(n.message);else{const r=fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lr.warn(r.message)}}}function Kw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=1024,nk=30*24*60*60*1e3;class rk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=nk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vv(),{heartbeatsToSend:r,unsentEntries:i}=ik(this._heartbeatsCache.heartbeats),s=Du(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Lr.warn(n),""}}}function vv(){return new Date().toISOString().substring(0,10)}function ik(t,e=tk){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Ev(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ev(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GR()?WR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ek(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ev(t){return Du(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){ro(new ns("platform-logger",e=>new EC(e),"PRIVATE")),ro(new ns("heartbeat",e=>new rk(e),"PRIVATE")),pi(fp,mv,t),pi(fp,mv,"esm2017"),pi("fire-js","")}ok("");function cg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Yw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ak=Yw,Qw=new ml("auth","Firebase",Yw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=new og("@firebase/auth");function lk(t,...e){Vu.logLevel<=Te.WARN&&Vu.warn(`Auth (${So}): ${t}`,...e)}function Kc(t,...e){Vu.logLevel<=Te.ERROR&&Vu.error(`Auth (${So}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,...e){throw dg(t,...e)}function Bn(t,...e){return dg(t,...e)}function ug(t,e,n){const r=Object.assign(Object.assign({},ak()),{[e]:n});return new ml("auth","Firebase",r).create(e,{appName:t.name})}function Ki(t){return ug(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ck(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&sr(t,"argument-error"),ug(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Qw.create(t,...e)}function me(t,e,...n){if(!t)throw dg(e,...n)}function wr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kc(e),new Error(e)}function Dr(t,e){t||wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uk(){return xv()==="http:"||xv()==="https:"}function xv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uk()||BR()||"connection"in navigator)?navigator.onLine:!0}function hk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Dr(n>e,"Short delay should be less than long delay!"),this.isMobile=VR()||zR()}get(){return dk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t,e){Dr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=new yl(3e4,6e4);function fg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ao(t,e,n,r,i={}){return Zw(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=gl(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},s);return FR()||(d.referrerPolicy="no-referrer"),Xw.fetch()(Jw(t,t.config.apiHost,n,a),d)})}async function Zw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},fk),e);try{const i=new gk(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw yc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw yc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw yc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw yc(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ug(t,h,d);sr(t,h)}}catch(i){if(i instanceof Br)throw i;sr(t,"network-request-failed",{message:String(i)})}}async function mk(t,e,n,r,i={}){const s=await Ao(t,e,n,r,i);return"mfaPendingCredential"in s&&sr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Jw(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?hg(t.config,i):`${t.config.apiScheme}://${i}`}class gk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bn(this.auth,"network-request-failed")),pk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Bn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e){return Ao(t,"POST","/v1/accounts:delete",e)}async function eb(t,e){return Ao(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vk(t,e=!1){const n=vt(t),r=await n.getIdToken(e),i=pg(r);me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Sa(Zh(i.auth_time)),issuedAtTime:Sa(Zh(i.iat)),expirationTime:Sa(Zh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Zh(t){return Number(t)*1e3}function pg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Kc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Uw(n);return i?JSON.parse(i):(Kc("Failed to decode base64 JWT payload"),null)}catch(i){return Kc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function _v(t){const e=pg(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Br&&Ek(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Ek({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sa(this.lastLoginAt),this.creationTime=Sa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ka(t,eb(n,{idToken:r}));me(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?tb(s.providerUserInfo):[],a=wk(t.providerData,o),c=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=c?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new yp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function _k(t){const e=vt(t);await Uu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wk(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tb(t){return t.map(e=>{var{providerId:n}=e,r=cg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(t,e){const n=await Zw(t,{},async()=>{const r=gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Jw(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Xw.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Sk(t,e){return Ao(t,"POST","/v2/accounts:revokeToken",fg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_v(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=_v(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await bk(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Gs;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(me(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gs,this.toJSON())}_performRefresh(){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class br{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=cg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new yp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ka(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vk(this,e)}reload(){return _k(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new br(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Uu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_r(this.auth.app))return Promise.reject(Ki(this.auth));const e=await this.getIdToken();return await Ka(this,yk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,d,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:P,isAnonymous:D,providerData:j,stsTokenManager:I}=n;me(b&&I,e,"internal-error");const v=Gs.fromJSON(this.name,I);me(typeof b=="string",e,"internal-error"),qr(p,e.name),qr(f,e.name),me(typeof P=="boolean",e,"internal-error"),me(typeof D=="boolean",e,"internal-error"),qr(g,e.name),qr(_,e.name),qr(x,e.name),qr(C,e.name),qr(E,e.name),qr(w,e.name);const S=new br({uid:b,auth:e,email:f,emailVerified:P,displayName:p,isAnonymous:D,photoURL:_,phoneNumber:g,tenantId:x,stsTokenManager:v,createdAt:E,lastLoginAt:w});return j&&Array.isArray(j)&&(S.providerData=j.map(A=>Object.assign({},A))),C&&(S._redirectEventId=C),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Gs;i.updateFromServerResponse(n);const s=new br({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Uu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];me(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?tb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Gs;a.updateFromIdToken(r);const c=new br({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new yp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=new Map;function Sr(t){Dr(t instanceof Function,"Expected a class definition");let e=wv.get(t);return e?(Dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nb.type="NONE";const bv=nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ws{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Yc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Yc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?br._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ws(Sr(bv),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Sr(bv);const o=Yc(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const h=await d._get(o);if(h){const p=br._fromJSON(e,h);d!==s&&(a=p),s=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ws(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new Ws(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ob(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lb(e))return"Blackberry";if(cb(e))return"Webos";if(ib(e))return"Safari";if((e.includes("chrome/")||sb(e))&&!e.includes("edge/"))return"Chrome";if(ab(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rb(t=Bt()){return/firefox\//i.test(t)}function ib(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sb(t=Bt()){return/crios\//i.test(t)}function ob(t=Bt()){return/iemobile/i.test(t)}function ab(t=Bt()){return/android/i.test(t)}function lb(t=Bt()){return/blackberry/i.test(t)}function cb(t=Bt()){return/webos/i.test(t)}function mg(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ak(t=Bt()){var e;return mg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ik(){return $R()&&document.documentMode===10}function ub(t=Bt()){return mg(t)||ab(t)||cb(t)||lb(t)||/windows phone/i.test(t)||ob(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t,e=[]){let n;switch(t){case"Browser":n=Sv(Bt());break;case"Worker":n=`${Sv(Bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${So}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(t,e={}){return Ao(t,"GET","/v2/passwordPolicy",fg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=6;class Ck{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Rk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Av(this),this.idTokenSubscription=new Av(this),this.beforeStateQueue=new Tk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ws.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eb(this,{idToken:e}),r=await br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_r(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Uu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_r(this.app))return Promise.reject(Ki(this));const n=e?vt(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _r(this.app)?Promise.reject(Ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _r(this.app)?Promise.reject(Ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Nk(this),n=new Ck(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ml("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Sk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Sr(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Ws.create(this,[Sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=db(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&lk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Od(t){return vt(t)}class Av{constructor(e){this.auth=e,this.observer=null,this.addObserver=XR(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ok(t){gg=t}function Pk(t){return gg.loadJS(t)}function Lk(){return gg.gapiScript}function Dk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t,e){const n=lg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Mu(s,e??{}))return i;sr(i,"already-initialized")}return n.initialize({options:e})}function jk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Vk(t,e,n){const r=Od(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=hb(e),{host:o,port:a}=Uk(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Fk()}function hb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Uk(t){const e=hb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Iv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Iv(o)}}}function Iv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Fk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wr("not implemented")}_getIdTokenResponse(e){return wr("not implemented")}_linkToIdToken(e,n){return wr("not implemented")}_getReauthenticationResolver(e){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t,e){return mk(t,"POST","/v1/accounts:signInWithIdp",fg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="http://localhost";class rs extends fb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=cg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new rs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qs(e,n)}buildRequest(){const e={requestUri:Bk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends yg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends vl{constructor(){super("facebook.com")}static credential(e){return rs._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rs._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yr.credential(n,r)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends vl{constructor(){super("github.com")}static credential(e){return rs._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.GITHUB_SIGN_IN_METHOD="github.com";Jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends vl{constructor(){super("twitter.com")}static credential(e,n){return rs._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ei.credential(n,r)}catch{return null}}}ei.TWITTER_SIGN_IN_METHOD="twitter.com";ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await br._fromIdTokenResponse(e,r,i),o=Tv(r);return new io({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Tv(r);return new io({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Tv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends Br{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Fu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Fu(e,n,r,i)}}function pb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fu._fromErrorAndOperation(t,s,e,r):s})}async function zk(t,e,n=!1){const r=await Ka(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return io._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $k(t,e,n=!1){const{auth:r}=t;if(_r(r.app))return Promise.reject(Ki(r));const i="reauthenticate";try{const s=await Ka(t,pb(r,i,e,t),n);me(s.idToken,r,"internal-error");const o=pg(s.idToken);me(o,r,"internal-error");const{sub:a}=o;return me(t.uid===a,r,"user-mismatch"),io._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&sr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(t,e,n=!1){if(_r(t.app))return Promise.reject(Ki(t));const r="signIn",i=await pb(t,r,e),s=await io._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function Gk(t,e,n,r){return vt(t).onIdTokenChanged(e,n,r)}function Wk(t,e,n){return vt(t).beforeAuthStateChanged(e,n)}function qk(t,e,n,r){return vt(t).onAuthStateChanged(e,n,r)}function Kk(t){return vt(t).signOut()}const Bu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bu,"1"),this.storage.removeItem(Bu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=1e3,Qk=10;class gb extends mb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ub(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Ik()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Qk):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Yk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gb.type="LOCAL";const Xk=gb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb extends mb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yb.type="SESSION";const vb=yb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Pd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async d=>d(n.origin,s)),c=await Zk(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const d=vg("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const f=p;if(f.data.eventId===d)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return window}function e2(t){tr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}async function t2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function r2(){return Eb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="firebaseLocalStorageDb",i2=1,zu="firebaseLocalStorage",_b="fbase_key";class El{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ld(t,e){return t.transaction([zu],e?"readwrite":"readonly").objectStore(zu)}function s2(){const t=indexedDB.deleteDatabase(xb);return new El(t).toPromise()}function vp(){const t=indexedDB.open(xb,i2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zu,{keyPath:_b})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zu)?e(r):(r.close(),await s2(),e(await vp()))})})}async function Nv(t,e,n){const r=Ld(t,!0).put({[_b]:e,value:n});return new El(r).toPromise()}async function o2(t,e){const n=Ld(t,!1).get(e),r=await new El(n).toPromise();return r===void 0?null:r.value}function Rv(t,e){const n=Ld(t,!0).delete(e);return new El(n).toPromise()}const a2=800,l2=3;class wb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>l2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Eb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pd._getInstance(r2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await t2(),!this.activeServiceWorker)return;this.sender=new Jk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||n2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vp();return await Nv(e,Bu,"1"),await Rv(e,Bu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Nv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>o2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Rv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ld(i,!1).getAll();return new El(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),a2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wb.type="LOCAL";const c2=wb;new yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t,e){return e?Sr(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends fb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function u2(t){return Hk(t.auth,new Eg(t),t.bypassAuthState)}function d2(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),$k(n,new Eg(t),t.bypassAuthState)}async function h2(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),zk(n,new Eg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return u2;case"linkViaPopup":case"linkViaRedirect":return h2;case"reauthViaPopup":case"reauthViaRedirect":return d2;default:sr(this.auth,"internal-error")}}resolve(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=new yl(2e3,1e4);async function p2(t,e,n){if(_r(t.app))return Promise.reject(Bn(t,"operation-not-supported-in-this-environment"));const r=Od(t);ck(t,e,yg);const i=bb(r,n);return new $i(r,"signInViaPopup",e,i).executeNotNull()}class $i extends Sb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,$i.currentPopupAction&&$i.currentPopupAction.cancel(),$i.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Dr(this.filter.length===1,"Popup operations only handle one event");const e=vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$i.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,f2.get())};e()}}$i.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="pendingRedirect",Qc=new Map;class g2 extends Sb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qc.get(this.auth._key());if(!e){try{const r=await y2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qc.set(this.auth._key(),e)}return this.bypassAuthState||Qc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y2(t,e){const n=x2(e),r=E2(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function v2(t,e){Qc.set(t._key(),e)}function E2(t){return Sr(t._redirectPersistence)}function x2(t){return Yc(m2,t.config.apiKey,t.name)}async function _2(t,e,n=!1){if(_r(t.app))return Promise.reject(Ki(t));const r=Od(t),i=bb(r,e),o=await new g2(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=10*60*1e3;class b2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!S2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ab(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Bn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=w2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cv(e))}saveEventToCache(e){this.cachedEventUids.add(Cv(e)),this.lastProcessedEventTime=Date.now()}}function Cv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ab({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function S2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ab(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(t,e={}){return Ao(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T2=/^https?/;async function N2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await A2(t);for(const n of e)try{if(R2(n))return}catch{}sr(t,"unauthorized-domain")}function R2(t){const e=gp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!T2.test(n))return!1;if(I2.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new yl(3e4,6e4);function kv(){const t=tr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function k2(t){return new Promise((e,n)=>{var r,i,s;function o(){kv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kv(),n(Bn(t,"network-request-failed"))},timeout:C2.get()})}if(!((i=(r=tr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=tr().gapi)===null||s===void 0)&&s.load)o();else{const a=Dk("iframefcb");return tr()[a]=()=>{gapi.load?o():n(Bn(t,"network-request-failed"))},Pk(`${Lk()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Xc=null,e})}let Xc=null;function O2(t){return Xc=Xc||k2(t),Xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=new yl(5e3,15e3),L2="__/auth/iframe",D2="emulator/auth/iframe",M2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V2(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hg(e,D2):`https://${t.config.authDomain}/${L2}`,r={apiKey:e.apiKey,appName:t.name,v:So},i=j2.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${gl(r).slice(1)}`}async function U2(t){const e=await O2(t),n=tr().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:V2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:M2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Bn(t,"network-request-failed"),a=tr().setTimeout(()=>{s(o)},P2.get());function c(){tr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B2=500,z2=600,$2="_blank",H2="http://localhost";class Ov{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G2(t,e,n,r=B2,i=z2){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},F2),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Bt().toLowerCase();n&&(a=sb(d)?$2:n),rb(d)&&(e=e||H2,c.scrollbars="yes");const h=Object.entries(c).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(Ak(d)&&a!=="_self")return W2(e||"",a),new Ov(null);const p=window.open(e||"",a,h);me(p,t,"popup-blocked");try{p.focus()}catch{}return new Ov(p)}function W2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="__/auth/handler",K2="emulator/auth/handler",Y2=encodeURIComponent("fac");async function Pv(t,e,n,r,i,s){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:So,eventId:i};if(e instanceof yg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",QR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof vl){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),d=c?`#${Y2}=${encodeURIComponent(c)}`:"";return`${Q2(t)}?${gl(a).slice(1)}${d}`}function Q2({config:t}){return t.emulator?hg(t,K2):`https://${t.authDomain}/${q2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="webStorageSupport";class X2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vb,this._completeRedirectFn=_2,this._overrideRedirectResult=v2}async _openPopup(e,n,r,i){var s;Dr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Pv(e,n,r,gp(),i);return G2(e,o,vg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Pv(e,n,r,gp(),i);return e2(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Dr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await U2(e),r=new b2(e);return n.register("authEvent",i=>(me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jh,{type:Jh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Jh];o!==void 0&&n(!!o),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=N2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ub()||ib()||mg()}}const Z2=X2;var Lv="@firebase/auth",Dv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tO(t){ro(new ns("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:db(t)},d=new kk(r,i,s,c);return jk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ro(new ns("auth-internal",e=>{const n=Od(e.getProvider("auth").getImmediate());return(r=>new J2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(Lv,Dv,eO(t)),pi(Lv,Dv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=5*60,rO=zw("authIdTokenMaxAge")||nO;let Mv=null;const iO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rO)return;const i=n==null?void 0:n.token;Mv!==i&&(Mv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sO(t=Ww()){const e=lg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Mk(t,{popupRedirectResolver:Z2,persistence:[c2,Xk,vb]}),r=zw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=iO(s.toString());Wk(n,o,()=>o(n.currentUser)),Gk(n,a=>o(a))}}const i=Fw("auth");return i&&Vk(n,`http://${i}`),n}function oO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Ok({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Bn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",oO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tO("Browser");var aO="firebase",lO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(aO,lO,"app");var jv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yi,Ib;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function S(){}S.prototype=v.prototype,I.D=v.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(A,k,O){for(var R=Array(arguments.length-2),M=2;M<arguments.length;M++)R[M-2]=arguments[M];return v.prototype[k].apply(A,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,S){S||(S=0);var A=Array(16);if(typeof v=="string")for(var k=0;16>k;++k)A[k]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(k=0;16>k;++k)A[k]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=I.g[0],S=I.g[1],k=I.g[2];var O=I.g[3],R=v+(O^S&(k^O))+A[0]+3614090360&4294967295;v=S+(R<<7&4294967295|R>>>25),R=O+(k^v&(S^k))+A[1]+3905402710&4294967295,O=v+(R<<12&4294967295|R>>>20),R=k+(S^O&(v^S))+A[2]+606105819&4294967295,k=O+(R<<17&4294967295|R>>>15),R=S+(v^k&(O^v))+A[3]+3250441966&4294967295,S=k+(R<<22&4294967295|R>>>10),R=v+(O^S&(k^O))+A[4]+4118548399&4294967295,v=S+(R<<7&4294967295|R>>>25),R=O+(k^v&(S^k))+A[5]+1200080426&4294967295,O=v+(R<<12&4294967295|R>>>20),R=k+(S^O&(v^S))+A[6]+2821735955&4294967295,k=O+(R<<17&4294967295|R>>>15),R=S+(v^k&(O^v))+A[7]+4249261313&4294967295,S=k+(R<<22&4294967295|R>>>10),R=v+(O^S&(k^O))+A[8]+1770035416&4294967295,v=S+(R<<7&4294967295|R>>>25),R=O+(k^v&(S^k))+A[9]+2336552879&4294967295,O=v+(R<<12&4294967295|R>>>20),R=k+(S^O&(v^S))+A[10]+4294925233&4294967295,k=O+(R<<17&4294967295|R>>>15),R=S+(v^k&(O^v))+A[11]+2304563134&4294967295,S=k+(R<<22&4294967295|R>>>10),R=v+(O^S&(k^O))+A[12]+1804603682&4294967295,v=S+(R<<7&4294967295|R>>>25),R=O+(k^v&(S^k))+A[13]+4254626195&4294967295,O=v+(R<<12&4294967295|R>>>20),R=k+(S^O&(v^S))+A[14]+2792965006&4294967295,k=O+(R<<17&4294967295|R>>>15),R=S+(v^k&(O^v))+A[15]+1236535329&4294967295,S=k+(R<<22&4294967295|R>>>10),R=v+(k^O&(S^k))+A[1]+4129170786&4294967295,v=S+(R<<5&4294967295|R>>>27),R=O+(S^k&(v^S))+A[6]+3225465664&4294967295,O=v+(R<<9&4294967295|R>>>23),R=k+(v^S&(O^v))+A[11]+643717713&4294967295,k=O+(R<<14&4294967295|R>>>18),R=S+(O^v&(k^O))+A[0]+3921069994&4294967295,S=k+(R<<20&4294967295|R>>>12),R=v+(k^O&(S^k))+A[5]+3593408605&4294967295,v=S+(R<<5&4294967295|R>>>27),R=O+(S^k&(v^S))+A[10]+38016083&4294967295,O=v+(R<<9&4294967295|R>>>23),R=k+(v^S&(O^v))+A[15]+3634488961&4294967295,k=O+(R<<14&4294967295|R>>>18),R=S+(O^v&(k^O))+A[4]+3889429448&4294967295,S=k+(R<<20&4294967295|R>>>12),R=v+(k^O&(S^k))+A[9]+568446438&4294967295,v=S+(R<<5&4294967295|R>>>27),R=O+(S^k&(v^S))+A[14]+3275163606&4294967295,O=v+(R<<9&4294967295|R>>>23),R=k+(v^S&(O^v))+A[3]+4107603335&4294967295,k=O+(R<<14&4294967295|R>>>18),R=S+(O^v&(k^O))+A[8]+1163531501&4294967295,S=k+(R<<20&4294967295|R>>>12),R=v+(k^O&(S^k))+A[13]+2850285829&4294967295,v=S+(R<<5&4294967295|R>>>27),R=O+(S^k&(v^S))+A[2]+4243563512&4294967295,O=v+(R<<9&4294967295|R>>>23),R=k+(v^S&(O^v))+A[7]+1735328473&4294967295,k=O+(R<<14&4294967295|R>>>18),R=S+(O^v&(k^O))+A[12]+2368359562&4294967295,S=k+(R<<20&4294967295|R>>>12),R=v+(S^k^O)+A[5]+4294588738&4294967295,v=S+(R<<4&4294967295|R>>>28),R=O+(v^S^k)+A[8]+2272392833&4294967295,O=v+(R<<11&4294967295|R>>>21),R=k+(O^v^S)+A[11]+1839030562&4294967295,k=O+(R<<16&4294967295|R>>>16),R=S+(k^O^v)+A[14]+4259657740&4294967295,S=k+(R<<23&4294967295|R>>>9),R=v+(S^k^O)+A[1]+2763975236&4294967295,v=S+(R<<4&4294967295|R>>>28),R=O+(v^S^k)+A[4]+1272893353&4294967295,O=v+(R<<11&4294967295|R>>>21),R=k+(O^v^S)+A[7]+4139469664&4294967295,k=O+(R<<16&4294967295|R>>>16),R=S+(k^O^v)+A[10]+3200236656&4294967295,S=k+(R<<23&4294967295|R>>>9),R=v+(S^k^O)+A[13]+681279174&4294967295,v=S+(R<<4&4294967295|R>>>28),R=O+(v^S^k)+A[0]+3936430074&4294967295,O=v+(R<<11&4294967295|R>>>21),R=k+(O^v^S)+A[3]+3572445317&4294967295,k=O+(R<<16&4294967295|R>>>16),R=S+(k^O^v)+A[6]+76029189&4294967295,S=k+(R<<23&4294967295|R>>>9),R=v+(S^k^O)+A[9]+3654602809&4294967295,v=S+(R<<4&4294967295|R>>>28),R=O+(v^S^k)+A[12]+3873151461&4294967295,O=v+(R<<11&4294967295|R>>>21),R=k+(O^v^S)+A[15]+530742520&4294967295,k=O+(R<<16&4294967295|R>>>16),R=S+(k^O^v)+A[2]+3299628645&4294967295,S=k+(R<<23&4294967295|R>>>9),R=v+(k^(S|~O))+A[0]+4096336452&4294967295,v=S+(R<<6&4294967295|R>>>26),R=O+(S^(v|~k))+A[7]+1126891415&4294967295,O=v+(R<<10&4294967295|R>>>22),R=k+(v^(O|~S))+A[14]+2878612391&4294967295,k=O+(R<<15&4294967295|R>>>17),R=S+(O^(k|~v))+A[5]+4237533241&4294967295,S=k+(R<<21&4294967295|R>>>11),R=v+(k^(S|~O))+A[12]+1700485571&4294967295,v=S+(R<<6&4294967295|R>>>26),R=O+(S^(v|~k))+A[3]+2399980690&4294967295,O=v+(R<<10&4294967295|R>>>22),R=k+(v^(O|~S))+A[10]+4293915773&4294967295,k=O+(R<<15&4294967295|R>>>17),R=S+(O^(k|~v))+A[1]+2240044497&4294967295,S=k+(R<<21&4294967295|R>>>11),R=v+(k^(S|~O))+A[8]+1873313359&4294967295,v=S+(R<<6&4294967295|R>>>26),R=O+(S^(v|~k))+A[15]+4264355552&4294967295,O=v+(R<<10&4294967295|R>>>22),R=k+(v^(O|~S))+A[6]+2734768916&4294967295,k=O+(R<<15&4294967295|R>>>17),R=S+(O^(k|~v))+A[13]+1309151649&4294967295,S=k+(R<<21&4294967295|R>>>11),R=v+(k^(S|~O))+A[4]+4149444226&4294967295,v=S+(R<<6&4294967295|R>>>26),R=O+(S^(v|~k))+A[11]+3174756917&4294967295,O=v+(R<<10&4294967295|R>>>22),R=k+(v^(O|~S))+A[2]+718787259&4294967295,k=O+(R<<15&4294967295|R>>>17),R=S+(O^(k|~v))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+O&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var S=v-this.blockSize,A=this.B,k=this.h,O=0;O<v;){if(k==0)for(;O<=S;)i(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<v;)if(A[k++]=I.charCodeAt(O++),k==this.blockSize){i(this,A),k=0;break}}else for(;O<v;)if(A[k++]=I[O++],k==this.blockSize){i(this,A),k=0;break}}this.h=k,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var S=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=S&255,S/=256;for(this.u(I),I=Array(16),v=S=0;4>v;++v)for(var A=0;32>A;A+=8)I[S++]=this.g[v]>>>A&255;return I};function s(I,v){var S=a;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=v(I)}function o(I,v){this.h=v;for(var S=[],A=!0,k=I.length-1;0<=k;k--){var O=I[k]|0;A&&O==v||(S[k]=O,A=!1)}this.g=S}var a={};function c(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return C(d(-I));for(var v=[],S=1,A=0;I>=S;A++)v[A]=I/S|0,S*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return C(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(v,8)),A=p,k=0;k<I.length;k+=8){var O=Math.min(8,I.length-k),R=parseInt(I.substring(k,k+O),v);8>O?(O=d(Math.pow(v,O)),A=A.j(O).add(d(R))):(A=A.j(S),A=A.add(d(R)))}return A}var p=c(0),f=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-C(this).m();for(var I=0,v=1,S=0;S<this.g.length;S++){var A=this.i(S);I+=(0<=A?A:4294967296+A)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(x(this))return"-"+C(this).toString(I);for(var v=d(Math.pow(I,6)),S=this,A="";;){var k=P(S,v).g;S=E(S,k.j(v));var O=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=k,_(S))return O+A;for(;6>O.length;)O="0"+O;A=O+A}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function x(I){return I.h==-1}t.l=function(I){return I=E(this,I),x(I)?-1:_(I)?0:1};function C(I){for(var v=I.g.length,S=[],A=0;A<v;A++)S[A]=~I.g[A];return new o(S,~I.h).add(f)}t.abs=function(){return x(this)?C(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],A=0,k=0;k<=v;k++){var O=A+(this.i(k)&65535)+(I.i(k)&65535),R=(O>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);A=R>>>16,O&=65535,R&=65535,S[k]=R<<16|O}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(I,v){return I.add(C(v))}t.j=function(I){if(_(this)||_(I))return p;if(x(this))return x(I)?C(this).j(C(I)):C(C(this).j(I));if(x(I))return C(this.j(C(I)));if(0>this.l(g)&&0>I.l(g))return d(this.m()*I.m());for(var v=this.g.length+I.g.length,S=[],A=0;A<2*v;A++)S[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<I.g.length;k++){var O=this.i(A)>>>16,R=this.i(A)&65535,M=I.i(k)>>>16,L=I.i(k)&65535;S[2*A+2*k]+=R*L,w(S,2*A+2*k),S[2*A+2*k+1]+=O*L,w(S,2*A+2*k+1),S[2*A+2*k+1]+=R*M,w(S,2*A+2*k+1),S[2*A+2*k+2]+=O*M,w(S,2*A+2*k+2)}for(A=0;A<v;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=v;A<2*v;A++)S[A]=0;return new o(S,0)};function w(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function b(I,v){this.g=I,this.h=v}function P(I,v){if(_(v))throw Error("division by zero");if(_(I))return new b(p,p);if(x(I))return v=P(C(I),v),new b(C(v.g),C(v.h));if(x(v))return v=P(I,C(v)),new b(C(v.g),v.h);if(30<I.g.length){if(x(I)||x(v))throw Error("slowDivide_ only works with positive integers.");for(var S=f,A=v;0>=A.l(I);)S=D(S),A=D(A);var k=j(S,1),O=j(A,1);for(A=j(A,2),S=j(S,2);!_(A);){var R=O.add(A);0>=R.l(I)&&(k=k.add(S),O=R),A=j(A,1),S=j(S,1)}return v=E(I,k.j(v)),new b(k,v)}for(k=p;0<=I.l(v);){for(S=Math.max(1,Math.floor(I.m()/v.m())),A=Math.ceil(Math.log(S)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),O=d(S),R=O.j(v);x(R)||0<R.l(I);)S-=A,O=d(S),R=O.j(v);_(O)&&(O=f),k=k.add(O),I=E(I,R)}return new b(k,I)}t.A=function(I){return P(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)&I.i(A);return new o(S,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)|I.i(A);return new o(S,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)^I.i(A);return new o(S,this.h^I.h)};function D(I){for(var v=I.g.length+1,S=[],A=0;A<v;A++)S[A]=I.i(A)<<1|I.i(A-1)>>>31;return new o(S,I.h)}function j(I,v){var S=v>>5;v%=32;for(var A=I.g.length-S,k=[],O=0;O<A;O++)k[O]=0<v?I.i(O+S)>>>v|I.i(O+S+1)<<32-v:I.i(O+S);return new o(k,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ib=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Yi=o}).apply(typeof jv<"u"?jv:typeof self<"u"?self:typeof window<"u"?window:{});var vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tb,ra,Nb,Zc,Ep,Rb,Cb,kb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,y){return l==Array.prototype||l==Object.prototype||(l[m]=y.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof vc=="object"&&vc];for(var m=0;m<l.length;++m){var y=l[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(l,m){if(m)e:{var y=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var F=l[T];if(!(F in y))break e;y=y[F]}l=l[l.length-1],T=y[l],m=m(T),m!=T&&m!=null&&e(y,l,{configurable:!0,writable:!0,value:m})}}function s(l,m){l instanceof String&&(l+="");var y=0,T=!1,F={next:function(){if(!T&&y<l.length){var H=y++;return{value:m(H,l[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(l){return l||function(){return s(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function d(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function h(l,m,y){return l.call.apply(l.bind,arguments)}function p(l,m,y){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),l.apply(m,F)}}return function(){return l.apply(m,arguments)}}function f(l,m,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,f.apply(null,arguments)}function g(l,m){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function _(l,m){function y(){}y.prototype=m.prototype,l.aa=m.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(T,F,H){for(var oe=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)oe[Fe-2]=arguments[Fe];return m.prototype[F].apply(T,oe)}}function x(l){const m=l.length;if(0<m){const y=Array(m);for(let T=0;T<m;T++)y[T]=l[T];return y}return[]}function C(l,m){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(c(T)){const F=l.length||0,H=T.length||0;l.length=F+H;for(let oe=0;oe<H;oe++)l[F+oe]=T[oe]}else l.push(T)}}class E{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function w(l){return/^[\s\xa0]*$/.test(l)}function b(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function P(l){return P[" "](l),l}P[" "]=function(){};var D=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function j(l,m,y){for(const T in l)m.call(y,l[T],T,l)}function I(l,m){for(const y in l)m.call(void 0,l[y],y,l)}function v(l){const m={};for(const y in l)m[y]=l[y];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,m){let y,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(y in T)l[y]=T[y];for(let H=0;H<S.length;H++)y=S[H],Object.prototype.hasOwnProperty.call(T,y)&&(l[y]=T[y])}}function k(l){var m=1;l=l.split(":");const y=[];for(;0<m&&l.length;)y.push(l.shift()),m--;return l.length&&y.push(l.join(":")),y}function O(l){a.setTimeout(()=>{throw l},0)}function R(){var l=W;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class M{constructor(){this.h=this.g=null}add(m,y){const T=L.get();T.set(m,y),this.h?this.h.next=T:this.g=T,this.h=T}}var L=new E(()=>new U,l=>l.reset());class U{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let K,V=!1,W=new M,Q=()=>{const l=a.Promise.resolve(void 0);K=()=>{l.then(te)}};var te=()=>{for(var l;l=R();){try{l.h.call(l.g)}catch(y){O(y)}var m=L;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}V=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};a.addEventListener("test",y,m),a.removeEventListener("test",y,m)}catch{}return l}();function X(l,m){if($.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(D){e:{try{P(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else y=="mouseover"?m=l.fromElement:y=="mouseout"&&(m=l.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ne[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&X.aa.h.call(this)}}_(X,$);var ne={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),ye=0;function De(l,m,y,T,F){this.listener=l,this.proxy=null,this.src=m,this.type=y,this.capture=!!T,this.ha=F,this.key=++ye,this.da=this.fa=!1}function rt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function be(l){this.src=l,this.g={},this.h=0}be.prototype.add=function(l,m,y,T,F){var H=l.toString();l=this.g[H],l||(l=this.g[H]=[],this.h++);var oe=q(l,m,T,F);return-1<oe?(m=l[oe],y||(m.fa=!1)):(m=new De(m,this.src,H,!!T,F),m.fa=y,l.push(m)),m};function Se(l,m){var y=m.type;if(y in l.g){var T=l.g[y],F=Array.prototype.indexOf.call(T,m,void 0),H;(H=0<=F)&&Array.prototype.splice.call(T,F,1),H&&(rt(m),l.g[y].length==0&&(delete l.g[y],l.h--))}}function q(l,m,y,T){for(var F=0;F<l.length;++F){var H=l[F];if(!H.da&&H.listener==m&&H.capture==!!y&&H.ha==T)return F}return-1}var z="closure_lm_"+(1e6*Math.random()|0),le={};function ve(l,m,y,T,F){if(Array.isArray(m)){for(var H=0;H<m.length;H++)ve(l,m[H],y,T,F);return null}return y=zr(y),l&&l[se]?l.K(m,y,d(T)?!!T.capture:!1,F):Ee(l,m,y,!1,T,F)}function Ee(l,m,y,T,F,H){if(!m)throw Error("Invalid event type");var oe=d(F)?!!F.capture:!!F,Fe=yn(l);if(Fe||(l[z]=Fe=new be(l)),y=Fe.add(m,y,T,oe,H),y.proxy)return y;if(T=Le(),y.proxy=T,T.src=l,T.listener=y,l.addEventListener)Y||(F=oe),F===void 0&&(F=!1),l.addEventListener(m.toString(),T,F);else if(l.attachEvent)l.attachEvent(Rt(m.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Le(){function l(y){return m.call(l.src,l.listener,y)}const m=rn;return l}function Ie(l,m,y,T,F){if(Array.isArray(m))for(var H=0;H<m.length;H++)Ie(l,m[H],y,T,F);else T=d(T)?!!T.capture:!!T,y=zr(y),l&&l[se]?(l=l.i,m=String(m).toString(),m in l.g&&(H=l.g[m],y=q(H,y,T,F),-1<y&&(rt(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete l.g[m],l.h--)))):l&&(l=yn(l))&&(m=l.g[m.toString()],l=-1,m&&(l=q(m,y,T,F)),(y=-1<l?m[l]:null)&&Me(y))}function Me(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[se])Se(m.i,l);else{var y=l.type,T=l.proxy;m.removeEventListener?m.removeEventListener(y,T,l.capture):m.detachEvent?m.detachEvent(Rt(y),T):m.addListener&&m.removeListener&&m.removeListener(T),(y=yn(m))?(Se(y,l),y.h==0&&(y.src=null,m[z]=null)):rt(l)}}}function Rt(l){return l in le?le[l]:le[l]="on"+l}function rn(l,m){if(l.da)l=!0;else{m=new X(m,this);var y=l.listener,T=l.ha||l.src;l.fa&&Me(l),l=y.call(T,m)}return l}function yn(l){return l=l[z],l instanceof be?l:null}var vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function zr(l){return typeof l=="function"?l:(l[vn]||(l[vn]=function(m){return l.handleEvent(m)}),l[vn])}function lt(){ae.call(this),this.i=new be(this),this.M=this,this.F=null}_(lt,ae),lt.prototype[se]=!0,lt.prototype.removeEventListener=function(l,m,y,T){Ie(this,l,m,y,T)};function Et(l,m){var y,T=l.F;if(T)for(y=[];T;T=T.F)y.push(T);if(l=l.M,T=m.type||m,typeof m=="string")m=new $(m,l);else if(m instanceof $)m.target=m.target||l;else{var F=m;m=new $(T,l),A(m,F)}if(F=!0,y)for(var H=y.length-1;0<=H;H--){var oe=m.g=y[H];F=ms(oe,T,!0,m)&&F}if(oe=m.g=l,F=ms(oe,T,!0,m)&&F,F=ms(oe,T,!1,m)&&F,y)for(H=0;H<y.length;H++)oe=m.g=y[H],F=ms(oe,T,!1,m)&&F}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var y=l.g[m],T=0;T<y.length;T++)rt(y[T]);delete l.g[m],l.h--}}this.F=null},lt.prototype.K=function(l,m,y,T){return this.i.add(String(l),m,!1,y,T)},lt.prototype.L=function(l,m,y,T){return this.i.add(String(l),m,!0,y,T)};function ms(l,m,y,T){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,H=0;H<m.length;++H){var oe=m[H];if(oe&&!oe.da&&oe.capture==y){var Fe=oe.listener,_t=oe.ha||oe.src;oe.fa&&Se(l.i,oe),F=Fe.call(_t,T)!==!1&&F}}return F&&!T.defaultPrevented}function Ol(l,m,y){if(typeof l=="function")y&&(l=f(l,y));else if(l&&typeof l.handleEvent=="function")l=f(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(l,m||0)}function Pl(l){l.g=Ol(()=>{l.g=null,l.i&&(l.i=!1,Pl(l))},l.l);const m=l.h;l.h=null,l.m.apply(null,m)}class ih extends ae{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Pl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sn(l){ae.call(this),this.h=l,this.g={}}_(sn,ae);var ur=[];function Ri(l){j(l.g,function(m,y){this.g.hasOwnProperty(y)&&Me(m)},l),l.g={}}sn.prototype.N=function(){sn.aa.N.call(this),Ri(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ci=a.JSON.stringify,Ll=a.JSON.parse,sh=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Ro(){}Ro.prototype.h=null;function Dl(l){return l.h||(l.h=l.i())}function Ml(){}var ki={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Co(){$.call(this,"d")}_(Co,$);function ko(){$.call(this,"c")}_(ko,$);var dr={},jl=null;function gs(){return jl=jl||new lt}dr.La="serverreachability";function Vl(l){$.call(this,dr.La,l)}_(Vl,$);function ce(l){const m=gs();Et(m,new Vl(m))}dr.STAT_EVENT="statevent";function ie(l,m){$.call(this,dr.STAT_EVENT,l),this.stat=m}_(ie,$);function re(l){const m=gs();Et(m,new ie(m,l))}dr.Ma="timingevent";function pe(l,m){$.call(this,dr.Ma,l),this.size=m}_(pe,$);function Xe(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},m)}function je(){this.g=!0}je.prototype.xa=function(){this.g=!1};function zt(l,m,y,T,F,H){l.info(function(){if(l.g)if(H)for(var oe="",Fe=H.split("&"),_t=0;_t<Fe.length;_t++){var Oe=Fe[_t].split("=");if(1<Oe.length){var Ct=Oe[0];Oe=Oe[1];var kt=Ct.split("_");oe=2<=kt.length&&kt[1]=="type"?oe+(Ct+"="+Oe+"&"):oe+(Ct+"=redacted&")}}else oe=null;else oe=H;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+m+`
`+y+`
`+oe})}function Wn(l,m,y,T,F,H,oe){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+m+`
`+y+`
`+H+" "+oe})}function xt(l,m,y,T){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+on(l,y)+(T?" "+T:"")})}function Oo(l,m){l.info(function(){return"TIMEOUT: "+m})}je.prototype.info=function(){};function on(l,m){if(!l.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var T=y[l];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var H=F[0];if(H!="noop"&&H!="stop"&&H!="close")for(var oe=1;oe<F.length;oe++)F[oe]=""}}}}return Ci(y)}catch{return m}}var ys={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},c0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oh;function Ul(){}_(Ul,Ro),Ul.prototype.g=function(){return new XMLHttpRequest},Ul.prototype.i=function(){return{}},oh=new Ul;function $r(l,m,y,T){this.j=l,this.i=m,this.l=y,this.R=T||1,this.U=new sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new u0}function u0(){this.i=null,this.g="",this.h=!1}var d0={},ah={};function lh(l,m,y){l.L=1,l.v=$l(hr(m)),l.m=y,l.P=!0,h0(l,null)}function h0(l,m){l.F=Date.now(),Fl(l),l.A=hr(l.v);var y=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),I0(y.i,"t",T),l.C=0,y=l.j.J,l.h=new u0,l.g=H0(l.j,y?m:null,!l.m),0<l.O&&(l.M=new ih(f(l.Y,l,l.g),l.O)),m=l.U,y=l.g,T=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(ur[0]=F.toString()),F=ur);for(var H=0;H<F.length;H++){var oe=ve(y,F[H],T||m.handleEvent,!1,m.h||m);if(!oe)break;m.g[oe.key]=oe}m=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),ce(),zt(l.i,l.u,l.A,l.l,l.R,l.m)}$r.prototype.ca=function(l){l=l.target;const m=this.M;m&&fr(l)==3?m.j():this.Y(l)},$r.prototype.Y=function(l){try{if(l==this.g)e:{const kt=fr(this.g);var m=this.g.Ba();const xs=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||P0(this.g)))){this.J||kt!=4||m==7||(m==8||0>=xs?ce(3):ce(2)),ch(this);var y=this.g.Z();this.X=y;t:if(f0(this)){var T=P0(this.g);l="";var F=T.length,H=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Oi(this),Po(this);var oe="";break t}this.h.i=new a.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,l+=this.h.i.decode(T[m],{stream:!(H&&m==F-1)});T.length=0,this.h.g+=l,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=y==200,Wn(this.i,this.u,this.A,this.l,this.R,kt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,_t=this.g;if((Fe=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Fe)){var Oe=Fe;break t}}Oe=null}if(y=Oe)xt(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uh(this,y);else{this.o=!1,this.s=3,re(12),Oi(this),Po(this);break e}}if(this.P){y=!0;let On;for(;!this.J&&this.C<oe.length;)if(On=nI(this,oe),On==ah){kt==4&&(this.s=4,re(14),y=!1),xt(this.i,this.l,null,"[Incomplete Response]");break}else if(On==d0){this.s=4,re(15),xt(this.i,this.l,oe,"[Invalid Chunk]"),y=!1;break}else xt(this.i,this.l,On,null),uh(this,On);if(f0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||oe.length!=0||this.h.h||(this.s=1,re(16),y=!1),this.o=this.o&&y,!y)xt(this.i,this.l,oe,"[Invalid Chunked Response]"),Oi(this),Po(this);else if(0<oe.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),gh(Ct),Ct.M=!0,re(11))}}else xt(this.i,this.l,oe,null),uh(this,oe);kt==4&&Oi(this),this.o&&!this.J&&(kt==4?F0(this.j,this):(this.o=!1,Fl(this)))}else EI(this.g),y==400&&0<oe.indexOf("Unknown SID")?(this.s=3,re(12)):(this.s=0,re(13)),Oi(this),Po(this)}}}catch{}finally{}};function f0(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function nI(l,m){var y=l.C,T=m.indexOf(`
`,y);return T==-1?ah:(y=Number(m.substring(y,T)),isNaN(y)?d0:(T+=1,T+y>m.length?ah:(m=m.slice(T,T+y),l.C=T+y,m)))}$r.prototype.cancel=function(){this.J=!0,Oi(this)};function Fl(l){l.S=Date.now()+l.I,p0(l,l.I)}function p0(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Xe(f(l.ba,l),m)}function ch(l){l.B&&(a.clearTimeout(l.B),l.B=null)}$r.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Oo(this.i,this.A),this.L!=2&&(ce(),re(17)),Oi(this),this.s=2,Po(this)):p0(this,this.S-l)};function Po(l){l.j.G==0||l.J||F0(l.j,l)}function Oi(l){ch(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,Ri(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function uh(l,m){try{var y=l.j;if(y.G!=0&&(y.g==l||dh(y.h,l))){if(!l.K&&dh(y.h,l)&&y.G==3){try{var T=y.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)Yl(y),ql(y);else break e;mh(y),re(18)}}else y.za=F[1],0<y.za-y.T&&37500>F[2]&&y.F&&y.v==0&&!y.C&&(y.C=Xe(f(y.Za,y),6e3));if(1>=y0(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Li(y,11)}else if((l.K||y.g==l)&&Yl(y),!w(m))for(F=y.Da.g.parse(m),m=0;m<F.length;m++){let Oe=F[m];if(y.T=Oe[0],Oe=Oe[1],y.G==2)if(Oe[0]=="c"){y.K=Oe[1],y.ia=Oe[2];const Ct=Oe[3];Ct!=null&&(y.la=Ct,y.j.info("VER="+y.la));const kt=Oe[4];kt!=null&&(y.Aa=kt,y.j.info("SVER="+y.Aa));const xs=Oe[5];xs!=null&&typeof xs=="number"&&0<xs&&(T=1.5*xs,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const On=l.g;if(On){const Xl=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xl){var H=T.h;H.g||Xl.indexOf("spdy")==-1&&Xl.indexOf("quic")==-1&&Xl.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(hh(H,H.h),H.h=null))}if(T.D){const yh=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;yh&&(T.ya=yh,$e(T.I,T.D,yh))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var oe=l;if(T.qa=$0(T,T.J?T.ia:null,T.W),oe.K){v0(T.h,oe);var Fe=oe,_t=T.L;_t&&(Fe.I=_t),Fe.B&&(ch(Fe),Fl(Fe)),T.g=oe}else V0(T);0<y.i.length&&Kl(y)}else Oe[0]!="stop"&&Oe[0]!="close"||Li(y,7);else y.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Li(y,7):ph(y):Oe[0]!="noop"&&y.l&&y.l.ta(Oe),y.v=0)}}ce(4)}catch{}}var rI=class{constructor(l,m){this.g=l,this.map=m}};function m0(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function g0(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function y0(l){return l.h?1:l.g?l.g.size:0}function dh(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function hh(l,m){l.g?l.g.add(m):l.h=m}function v0(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}m0.prototype.cancel=function(){if(this.i=E0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function E0(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(const y of l.g.values())m=m.concat(y.D);return m}return x(l.i)}function iI(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var m=[],y=l.length,T=0;T<y;T++)m.push(l[T]);return m}m=[],y=0;for(T in l)m[y++]=l[T];return m}function sI(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var m=[];l=l.length;for(var y=0;y<l;y++)m.push(y);return m}m=[],y=0;for(const T in l)m[y++]=T;return m}}}function x0(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var y=sI(l),T=iI(l),F=T.length,H=0;H<F;H++)m.call(void 0,T[H],y&&y[H],l)}var _0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oI(l,m){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var T=l[y].indexOf("="),F=null;if(0<=T){var H=l[y].substring(0,T);F=l[y].substring(T+1)}else H=l[y];m(H,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Pi(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Pi){this.h=l.h,Bl(this,l.j),this.o=l.o,this.g=l.g,zl(this,l.s),this.l=l.l;var m=l.i,y=new Mo;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),w0(this,y),this.m=l.m}else l&&(m=String(l).match(_0))?(this.h=!1,Bl(this,m[1]||"",!0),this.o=Lo(m[2]||""),this.g=Lo(m[3]||"",!0),zl(this,m[4]),this.l=Lo(m[5]||"",!0),w0(this,m[6]||"",!0),this.m=Lo(m[7]||"")):(this.h=!1,this.i=new Mo(null,this.h))}Pi.prototype.toString=function(){var l=[],m=this.j;m&&l.push(Do(m,b0,!0),":");var y=this.g;return(y||m=="file")&&(l.push("//"),(m=this.o)&&l.push(Do(m,b0,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Do(y,y.charAt(0)=="/"?cI:lI,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Do(y,dI)),l.join("")};function hr(l){return new Pi(l)}function Bl(l,m,y){l.j=y?Lo(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function zl(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function w0(l,m,y){m instanceof Mo?(l.i=m,hI(l.i,l.h)):(y||(m=Do(m,uI)),l.i=new Mo(m,l.h))}function $e(l,m,y){l.i.set(m,y)}function $l(l){return $e(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Lo(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Do(l,m,y){return typeof l=="string"?(l=encodeURI(l).replace(m,aI),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function aI(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var b0=/[#\/\?@]/g,lI=/[#\?:]/g,cI=/[#\?]/g,uI=/[#\?@]/g,dI=/#/g;function Mo(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function Hr(l){l.g||(l.g=new Map,l.h=0,l.i&&oI(l.i,function(m,y){l.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Mo.prototype,t.add=function(l,m){Hr(this),this.i=null,l=vs(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(m),this.h+=1,this};function S0(l,m){Hr(l),m=vs(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function A0(l,m){return Hr(l),m=vs(l,m),l.g.has(m)}t.forEach=function(l,m){Hr(this),this.g.forEach(function(y,T){y.forEach(function(F){l.call(m,F,T,this)},this)},this)},t.na=function(){Hr(this);const l=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let T=0;T<m.length;T++){const F=l[T];for(let H=0;H<F.length;H++)y.push(m[T])}return y},t.V=function(l){Hr(this);let m=[];if(typeof l=="string")A0(this,l)&&(m=m.concat(this.g.get(vs(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)m=m.concat(l[y])}return m},t.set=function(l,m){return Hr(this),this.i=null,l=vs(this,l),A0(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},t.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function I0(l,m,y){S0(l,m),0<y.length&&(l.i=null,l.g.set(vs(l,m),x(y)),l.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var T=m[y];const H=encodeURIComponent(String(T)),oe=this.V(T);for(T=0;T<oe.length;T++){var F=H;oe[T]!==""&&(F+="="+encodeURIComponent(String(oe[T]))),l.push(F)}}return this.i=l.join("&")};function vs(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function hI(l,m){m&&!l.j&&(Hr(l),l.i=null,l.g.forEach(function(y,T){var F=T.toLowerCase();T!=F&&(S0(this,T),I0(this,F,y))},l)),l.j=m}function fI(l,m){const y=new je;if(a.Image){const T=new Image;T.onload=g(Gr,y,"TestLoadImage: loaded",!0,m,T),T.onerror=g(Gr,y,"TestLoadImage: error",!1,m,T),T.onabort=g(Gr,y,"TestLoadImage: abort",!1,m,T),T.ontimeout=g(Gr,y,"TestLoadImage: timeout",!1,m,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else m(!1)}function pI(l,m){const y=new je,T=new AbortController,F=setTimeout(()=>{T.abort(),Gr(y,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:T.signal}).then(H=>{clearTimeout(F),H.ok?Gr(y,"TestPingServer: ok",!0,m):Gr(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),Gr(y,"TestPingServer: error",!1,m)})}function Gr(l,m,y,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(y)}catch{}}function mI(){this.g=new sh}function gI(l,m,y){const T=y||"";try{x0(l,function(F,H){let oe=F;d(F)&&(oe=Ci(F)),m.push(T+H+"="+encodeURIComponent(oe))})}catch(F){throw m.push(T+"type="+encodeURIComponent("_badmap")),F}}function Hl(l){this.l=l.Ub||null,this.j=l.eb||!1}_(Hl,Ro),Hl.prototype.g=function(){return new Gl(this.l,this.j)},Hl.prototype.i=function(l){return function(){return l}}({});function Gl(l,m){lt.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Gl,lt),t=Gl.prototype,t.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,Vo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Vo(this)),this.g&&(this.readyState=3,Vo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;T0(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function T0(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?jo(this):Vo(this),this.readyState==3&&T0(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,jo(this))},t.Qa=function(l){this.g&&(this.response=l,jo(this))},t.ga=function(){this.g&&jo(this)};function jo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Vo(l)}t.setRequestHeader=function(l,m){this.u.append(l,m)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=m.next();return l.join(`\r
`)};function Vo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function N0(l){let m="";return j(l,function(y,T){m+=T,m+=":",m+=y,m+=`\r
`}),m}function fh(l,m,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=N0(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):$e(l,m,y))}function it(l){lt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(it,lt);var yI=/^https?$/i,vI=["POST","PUT"];t=it.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,m,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oh.g(),this.v=this.o?Dl(this.o):Dl(oh),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch(H){R0(this,H);return}if(l=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)y.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())y.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),F=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(vI,m,void 0))||T||F||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,oe]of y)this.g.setRequestHeader(H,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{O0(this),this.u=!0,this.g.send(l),this.u=!1}catch(H){R0(this,H)}};function R0(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,C0(l),Wl(l)}function C0(l){l.A||(l.A=!0,Et(l,"complete"),Et(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Et(this,"complete"),Et(this,"abort"),Wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wl(this,!0)),it.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?k0(this):this.bb())},t.bb=function(){k0(this)};function k0(l){if(l.h&&typeof o<"u"&&(!l.v[1]||fr(l)!=4||l.Z()!=2)){if(l.u&&fr(l)==4)Ol(l.Ea,0,l);else if(Et(l,"readystatechange"),fr(l)==4){l.h=!1;try{const oe=l.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var T;if(T=oe===0){var F=String(l.D).match(_0)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),T=!yI.test(F?F.toLowerCase():"")}y=T}if(y)Et(l,"complete"),Et(l,"success");else{l.m=6;try{var H=2<fr(l)?l.g.statusText:""}catch{H=""}l.l=H+" ["+l.Z()+"]",C0(l)}}finally{Wl(l)}}}}function Wl(l,m){if(l.g){O0(l);const y=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||Et(l,"ready");try{y.onreadystatechange=T}catch{}}}function O0(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function fr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),Ll(m)}};function P0(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function EI(l){const m={};l=(l.g&&2<=fr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(w(l[T]))continue;var y=k(l[T]);const F=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=m[F]||[];m[F]=H,H.push(y)}I(m,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Uo(l,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||m}function L0(l){this.Aa=0,this.i=[],this.j=new je,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Uo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Uo("baseRetryDelayMs",5e3,l),this.cb=Uo("retryDelaySeedMs",1e4,l),this.Wa=Uo("forwardChannelMaxRetries",2,l),this.wa=Uo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new m0(l&&l.concurrentRequestLimit),this.Da=new mI,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=L0.prototype,t.la=8,t.G=1,t.connect=function(l,m,y,T){re(0),this.W=l,this.H=m||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=$0(this,null,this.W),Kl(this)};function ph(l){if(D0(l),l.G==3){var m=l.U++,y=hr(l.I);if($e(y,"SID",l.K),$e(y,"RID",m),$e(y,"TYPE","terminate"),Fo(l,y),m=new $r(l,l.j,m),m.L=2,m.v=$l(hr(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=m.v,y=!0),y||(m.g=H0(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Fl(m)}z0(l)}function ql(l){l.g&&(gh(l),l.g.cancel(),l.g=null)}function D0(l){ql(l),l.u&&(a.clearTimeout(l.u),l.u=null),Yl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Kl(l){if(!g0(l.h)&&!l.s){l.s=!0;var m=l.Ga;K||Q(),V||(K(),V=!0),W.add(m,l),l.B=0}}function xI(l,m){return y0(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Xe(f(l.Ga,l,m),B0(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const F=new $r(this,this.j,l);let H=this.o;if(this.S&&(H?(H=v(H),A(H,this.S)):H=this.S),this.m!==null||this.O||(F.H=H,H=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=j0(this,F,m),y=hr(this.I),$e(y,"RID",l),$e(y,"CVER",22),this.D&&$e(y,"X-HTTP-Session-Id",this.D),Fo(this,y),H&&(this.O?m="headers="+encodeURIComponent(String(N0(H)))+"&"+m:this.m&&fh(y,this.m,H)),hh(this.h,F),this.Ua&&$e(y,"TYPE","init"),this.P?($e(y,"$req",m),$e(y,"SID","null"),F.T=!0,lh(F,y,null)):lh(F,y,m),this.G=2}}else this.G==3&&(l?M0(this,l):this.i.length==0||g0(this.h)||M0(this))};function M0(l,m){var y;m?y=m.l:y=l.U++;const T=hr(l.I);$e(T,"SID",l.K),$e(T,"RID",y),$e(T,"AID",l.T),Fo(l,T),l.m&&l.o&&fh(T,l.m,l.o),y=new $r(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),m&&(l.i=m.D.concat(l.i)),m=j0(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),hh(l.h,y),lh(y,T,m)}function Fo(l,m){l.H&&j(l.H,function(y,T){$e(m,T,y)}),l.l&&x0({},function(y,T){$e(m,T,y)})}function j0(l,m,y){y=Math.min(l.i.length,y);var T=l.l?f(l.l.Na,l.l,l):null;e:{var F=l.i;let H=-1;for(;;){const oe=["count="+y];H==-1?0<y?(H=F[0].g,oe.push("ofs="+H)):H=0:oe.push("ofs="+H);let Fe=!0;for(let _t=0;_t<y;_t++){let Oe=F[_t].g;const Ct=F[_t].map;if(Oe-=H,0>Oe)H=Math.max(0,F[_t].g-100),Fe=!1;else try{gI(Ct,oe,"req"+Oe+"_")}catch{T&&T(Ct)}}if(Fe){T=oe.join("&");break e}}}return l=l.i.splice(0,y),m.D=l,T}function V0(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;K||Q(),V||(K(),V=!0),W.add(m,l),l.v=0}}function mh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Xe(f(l.Fa,l),B0(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,U0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Xe(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,re(10),ql(this),U0(this))};function gh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function U0(l){l.g=new $r(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=hr(l.qa);$e(m,"RID","rpc"),$e(m,"SID",l.K),$e(m,"AID",l.T),$e(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&$e(m,"TO",l.ja),$e(m,"TYPE","xmlhttp"),Fo(l,m),l.m&&l.o&&fh(m,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=$l(hr(m)),y.m=null,y.P=!0,h0(y,l)}t.Za=function(){this.C!=null&&(this.C=null,ql(this),mh(this),re(19))};function Yl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function F0(l,m){var y=null;if(l.g==m){Yl(l),gh(l),l.g=null;var T=2}else if(dh(l.h,m))y=m.D,v0(l.h,m),T=1;else return;if(l.G!=0){if(m.o)if(T==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var F=l.B;T=gs(),Et(T,new pe(T,y)),Kl(l)}else V0(l);else if(F=m.s,F==3||F==0&&0<m.X||!(T==1&&xI(l,m)||T==2&&mh(l)))switch(y&&0<y.length&&(m=l.h,m.i=m.i.concat(y)),F){case 1:Li(l,5);break;case 4:Li(l,10);break;case 3:Li(l,6);break;default:Li(l,2)}}}function B0(l,m){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*m}function Li(l,m){if(l.j.info("Error code "+m),m==2){var y=f(l.fb,l),T=l.Xa;const F=!T;T=new Pi(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bl(T,"https"),$l(T),F?fI(T.toString(),y):pI(T.toString(),y)}else re(2);l.G=0,l.l&&l.l.sa(m),z0(l),D0(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),re(2)):(this.j.info("Failed to ping google.com"),re(1))};function z0(l){if(l.G=0,l.ka=[],l.l){const m=E0(l.h);(m.length!=0||l.i.length!=0)&&(C(l.ka,m),C(l.ka,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.ra()}}function $0(l,m,y){var T=y instanceof Pi?hr(y):new Pi(y);if(T.g!="")m&&(T.g=m+"."+T.g),zl(T,T.s);else{var F=a.location;T=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var H=new Pi(null);T&&Bl(H,T),m&&(H.g=m),F&&zl(H,F),y&&(H.l=y),T=H}return y=l.D,m=l.ya,y&&m&&$e(T,y,m),$e(T,"VER",l.la),Fo(l,T),T}function H0(l,m,y){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new it(new Hl({eb:y})):new it(l.pa),m.Ha(l.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function G0(){}t=G0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ql(){}Ql.prototype.g=function(l,m){return new an(l,m)};function an(l,m){lt.call(this),this.g=new L0(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!w(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!w(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new Es(this)}_(an,lt),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){ph(this.g)},an.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=Ci(l),l=y);m.i.push(new rI(m.Ya++,l)),m.G==3&&Kl(m)},an.prototype.N=function(){this.g.l=null,delete this.j,ph(this.g),delete this.g,an.aa.N.call(this)};function W0(l){Co.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(const y in m){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}_(W0,Co);function q0(){ko.call(this),this.status=1}_(q0,ko);function Es(l){this.g=l}_(Es,G0),Es.prototype.ua=function(){Et(this.g,"a")},Es.prototype.ta=function(l){Et(this.g,new W0(l))},Es.prototype.sa=function(l){Et(this.g,new q0)},Es.prototype.ra=function(){Et(this.g,"b")},Ql.prototype.createWebChannel=Ql.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,kb=function(){return new Ql},Cb=function(){return gs()},Rb=dr,Ep={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ys.NO_ERROR=0,ys.TIMEOUT=8,ys.HTTP_ERROR=6,Zc=ys,c0.COMPLETE="complete",Nb=c0,Ml.EventType=ki,ki.OPEN="a",ki.CLOSE="b",ki.ERROR="c",ki.MESSAGE="d",lt.prototype.listen=lt.prototype.K,ra=Ml,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,Tb=it}).apply(typeof vc<"u"?vc:typeof self<"u"?self:typeof window<"u"?window:{});const Vv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new og("@firebase/firestore");function Qo(){return is.logLevel}function de(t,...e){if(is.logLevel<=Te.DEBUG){const n=e.map(xg);is.debug(`Firestore (${Io}): ${t}`,...n)}}function Mr(t,...e){if(is.logLevel<=Te.ERROR){const n=e.map(xg);is.error(`Firestore (${Io}): ${t}`,...n)}}function so(t,...e){if(is.logLevel<=Te.WARN){const n=e.map(xg);is.warn(`Firestore (${Io}): ${t}`,...n)}}function xg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t="Unexpected state"){const e=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: `+t;throw Mr(e),new Error(e)}function Ue(t,e){t||ge()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Br{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jt.UNAUTHENTICATED))}shutdown(){}}class uO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dO{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Nr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Nr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string"),new Ob(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new jt(e)}}class hO{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fO{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ue(this.o===void 0);const r=s=>{s.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,de("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string"),this.R=n.token,new pO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=gO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Pe(t,e){return t<e?-1:t>e?1:0}function oo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new dt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new dt(0,0))}static max(){return new xe(new dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(),r===void 0?r=e.length-n:r>e.length-n&&ge(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ya.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ya?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ye extends Ya{construct(e,n,r){return new Ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const yO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Ya{construct(e,n,r){return new St(e,n,r)}static isValidIdentifier(e){return yO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new St(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(Ye.fromString(e))}static fromName(e){return new fe(Ye.fromString(e).popFirst(5))}static empty(){return new fe(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new Ye(e.slice()))}}function vO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new dt(n+1,0):new dt(n,r));return new Ei(i,fe.empty(),e)}function EO(t){return new Ei(t.readTime,t.key,-1)}class Ei{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ei(xe.min(),fe.empty(),-1)}static max(){return new Ei(xe.max(),fe.empty(),-1)}}function xO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==_O)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,r)=>{n(e)})}static reject(e){return new J((n,r)=>{r(e)})}static waitFor(e){return new J((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next(i=>i?J.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new J((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new J((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function bO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _l(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_g.oe=-1;function Dd(t){return t==null}function $u(t){return t===0&&1/t==-1/0}function SO(t){return typeof t=="number"&&Number.isInteger(t)&&!$u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Lb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||bt.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ec(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ec(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ec(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ec(this.root,e,this.comparator,!0)}}class Ec{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??bt.RED,this.left=i??bt.EMPTY,this.right=s??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new bt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return bt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,n,r,i,s){return this}insert(e,n,r){return new bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fv(this.data.getIterator())}getIteratorFrom(e){return new Fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class Fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new un([])}unionWith(e){let n=new It(St.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Db("Invalid base64 string: "+s):s}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const AO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(t){if(Ue(!!t),typeof t=="string"){let e=0;const n=AO.exec(t);if(Ue(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(t.seconds),nanos:ot(t.nanos)}}function ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ss(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bg(t){const e=t.mapValue.fields.__previous_value__;return wg(e)?bg(e):e}function Qa(t){const e=xi(t.mapValue.fields.__local_write_time__.timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,n,r,i,s,o,a,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d}}class Xa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc={mapValue:{}};function os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wg(t)?4:NO(t)?9007199254740991:TO(t)?10:11:ge()}function or(t,e){if(t===e)return!0;const n=os(t);if(n!==os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qa(t).isEqual(Qa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=xi(i.timestampValue),a=xi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ss(i.bytesValue).isEqual(ss(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ot(i.geoPointValue.latitude)===ot(s.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ot(i.integerValue)===ot(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ot(i.doubleValue),a=ot(s.doubleValue);return o===a?$u(o)===$u(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return oo(t.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Uv(o)!==Uv(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!or(o[c],a[c])))return!1;return!0}(t,e);default:return ge()}}function Za(t,e){return(t.values||[]).find(n=>or(n,e))!==void 0}function ao(t,e){if(t===e)return 0;const n=os(t),r=os(e);if(n!==r)return Pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ot(s.integerValue||s.doubleValue),c=ot(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Bv(t.timestampValue,e.timestampValue);case 4:return Bv(Qa(t),Qa(e));case 5:return Pe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ss(s),c=ss(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){const h=Pe(a[d],c[d]);if(h!==0)return h}return Pe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Pe(ot(s.latitude),ot(o.latitude));return a!==0?a:Pe(ot(s.longitude),ot(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,d,h;const p=s.fields||{},f=o.fields||{},g=(a=p.value)===null||a===void 0?void 0:a.arrayValue,_=(c=f.value)===null||c===void 0?void 0:c.arrayValue,x=Pe(((d=g==null?void 0:g.values)===null||d===void 0?void 0:d.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:zv(g,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===xc.mapValue&&o===xc.mapValue)return 0;if(s===xc.mapValue)return 1;if(o===xc.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const f=Pe(c[p],h[p]);if(f!==0)return f;const g=ao(a[c[p]],d[h[p]]);if(g!==0)return g}return Pe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ge()}}function Bv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=xi(t),r=xi(e),i=Pe(n.seconds,r.seconds);return i!==0?i:Pe(n.nanos,r.nanos)}function zv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ao(n[i],r[i]);if(s)return s}return Pe(n.length,r.length)}function lo(t){return xp(t)}function xp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=xp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${xp(n.fields[o])}`;return i+"}"}(t.mapValue):ge()}function _p(t){return!!t&&"integerValue"in t}function Sg(t){return!!t&&"arrayValue"in t}function $v(t){return!!t&&"nullValue"in t}function Hv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jc(t){return!!t&&"mapValue"in t}function TO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Aa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Aa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Aa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function NO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Aa(n)}setAll(e){let n=St.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Aa(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Jc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Jc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Qt(Aa(this.value))}}function Mb(t){const e=[];return fs(t.fields,(n,r)=>{const i=new St([n]);if(Jc(r)){const s=Mb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,xe.min(),xe.min(),xe.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ut(e,1,n,xe.min(),r,i,0)}static newNoDocument(e,n){return new Ut(e,2,n,xe.min(),xe.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,xe.min(),xe.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n){this.position=e,this.inclusive=n}}function Gv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=ao(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Wv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!or(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n="asc"){this.field=e,this.dir=n}}function RO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{}class ft extends jb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kO(e,n,r):n==="array-contains"?new LO(e,r):n==="in"?new DO(e,r):n==="not-in"?new MO(e,r):n==="array-contains-any"?new jO(e,r):new ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new OO(e,r):new PO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ao(n,this.value)):n!==null&&os(this.value)===os(n)&&this.matchesComparison(ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ar extends jb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ar(e,n)}matches(e){return Vb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vb(t){return t.op==="and"}function Ub(t){return CO(t)&&Vb(t)}function CO(t){for(const e of t.filters)if(e instanceof ar)return!1;return!0}function wp(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+lo(t.value);if(Ub(t))return t.filters.map(e=>wp(e)).join(",");{const e=t.filters.map(n=>wp(n)).join(",");return`${t.op}(${e})`}}function Fb(t,e){return t instanceof ft?function(r,i){return i instanceof ft&&r.op===i.op&&r.field.isEqual(i.field)&&or(r.value,i.value)}(t,e):t instanceof ar?function(r,i){return i instanceof ar&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Fb(o,i.filters[a]),!0):!1}(t,e):void ge()}function Bb(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${lo(n.value)}`}(t):t instanceof ar?function(n){return n.op.toString()+" {"+n.getFilters().map(Bb).join(" ,")+"}"}(t):"Filter"}class kO extends ft{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class OO extends ft{constructor(e,n){super(e,"in",n),this.keys=zb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class PO extends ft{constructor(e,n){super(e,"not-in",n),this.keys=zb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class LO extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sg(n)&&Za(n.arrayValue,this.value)}}class DO extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Za(this.value.arrayValue,n)}}class MO extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Za(this.value.arrayValue,n)}}class jO extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Za(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function qv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new VO(t,e,n,r,i,s,o)}function Ag(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Dd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>lo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>lo(r)).join(",")),e.ue=n}return e.ue}function Ig(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Fb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wv(t.startAt,e.startAt)&&Wv(t.endAt,e.endAt)}function bp(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function UO(t,e,n,r,i,s,o,a){return new Md(t,e,n,r,i,s,o,a)}function Tg(t){return new Md(t)}function Kv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FO(t){return t.collectionGroup!==null}function Ia(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new It(St.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Gu(s,r))}),n.has(St.keyField().canonicalString())||e.ce.push(new Gu(St.keyField(),r))}return e.ce}function nr(t){const e=_e(t);return e.le||(e.le=BO(e,Ia(t))),e.le}function BO(t,e){if(t.limitType==="F")return qv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Gu(i.field,s)});const n=t.endAt?new Hu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hu(t.startAt.position,t.startAt.inclusive):null;return qv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sp(t,e,n){return new Md(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jd(t,e){return Ig(nr(t),nr(e))&&t.limitType===e.limitType}function $b(t){return`${Ag(nr(t))}|lt:${t.limitType}`}function ws(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Bb(i)).join(", ")}]`),Dd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>lo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>lo(i)).join(",")),`Target(${r})`}(nr(t))}; limitType=${t.limitType})`}function Vd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ia(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){const d=Gv(o,a,c);return o.inclusive?d<=0:d<0}(r.startAt,Ia(r),i)||r.endAt&&!function(o,a,c){const d=Gv(o,a,c);return o.inclusive?d>=0:d>0}(r.endAt,Ia(r),i))}(t,e)}function zO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hb(t){return(e,n)=>{let r=!1;for(const i of Ia(t)){const s=$O(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $O(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?ao(c,d):ge()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Lb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new nt(fe.comparator);function jr(){return HO}const Gb=new nt(fe.comparator);function ia(...t){let e=Gb;for(const n of t)e=e.insert(n.key,n);return e}function Wb(t){let e=Gb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hi(){return Ta()}function qb(){return Ta()}function Ta(){return new To(t=>t.toString(),(t,e)=>t.isEqual(e))}const GO=new nt(fe.comparator),WO=new It(fe.comparator);function Ae(...t){let e=WO;for(const n of t)e=e.add(n);return e}const qO=new It(Pe);function KO(){return qO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$u(e)?"-0":e}}function Kb(t){return{integerValue:""+t}}function YO(t,e){return SO(e)?Kb(e):Ng(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this._=void 0}}function QO(t,e,n){return t instanceof Wu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&wg(s)&&(s=bg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ja?Qb(t,e):t instanceof el?Xb(t,e):function(i,s){const o=Yb(i,s),a=Yv(o)+Yv(i.Pe);return _p(o)&&_p(i.Pe)?Kb(a):Ng(i.serializer,a)}(t,e)}function XO(t,e,n){return t instanceof Ja?Qb(t,e):t instanceof el?Xb(t,e):n}function Yb(t,e){return t instanceof qu?function(r){return _p(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Wu extends Ud{}class Ja extends Ud{constructor(e){super(),this.elements=e}}function Qb(t,e){const n=Zb(e);for(const r of t.elements)n.some(i=>or(i,r))||n.push(r);return{arrayValue:{values:n}}}class el extends Ud{constructor(e){super(),this.elements=e}}function Xb(t,e){let n=Zb(e);for(const r of t.elements)n=n.filter(i=>!or(i,r));return{arrayValue:{values:n}}}class qu extends Ud{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Yv(t){return ot(t.integerValue||t.doubleValue)}function Zb(t){return Sg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ZO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ja&&i instanceof Ja||r instanceof el&&i instanceof el?oo(r.elements,i.elements,or):r instanceof qu&&i instanceof qu?or(r.Pe,i.Pe):r instanceof Wu&&i instanceof Wu}(t.transform,e.transform)}class JO{constructor(e,n){this.version=e,this.transformResults=n}}class Wt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fd{}function Jb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Bd(t.key,Wt.none()):new wl(t.key,t.data,Wt.none());{const n=t.data,r=Qt.empty();let i=new It(St.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ii(t.key,r,new un(i.toArray()),Wt.none())}}function eP(t,e,n){t instanceof wl?function(i,s,o){const a=i.value.clone(),c=Xv(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ii?function(i,s,o){if(!eu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Xv(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(eS(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Na(t,e,n,r){return t instanceof wl?function(s,o,a,c){if(!eu(s.precondition,o))return a;const d=s.value.clone(),h=Zv(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ii?function(s,o,a,c){if(!eu(s.precondition,o))return a;const d=Zv(s.fieldTransforms,c,o),h=o.data;return h.setAll(eS(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return eu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function tP(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Yb(r.transform,i||null);s!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,s))}return n||null}function Qv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oo(r,i,(s,o)=>ZO(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wl extends Fd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ii extends Fd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function eS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xv(t,e,n){const r=new Map;Ue(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,XO(o,a,n[i]))}return r}function Zv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,QO(s,o,e))}return r}class Bd extends Fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nP extends Fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&eP(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Na(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Na(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=qb();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=Jb(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,(n,r)=>Qv(n,r))&&oo(this.baseMutations,e.baseMutations,(n,r)=>Qv(n,r))}}class Rg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ue(e.mutations.length===r.length);let i=function(){return GO}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Rg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Ce;function oP(t){switch(t){default:return ge();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function tS(t){if(t===void 0)return Mr("GRPC error has no .code"),Z.UNKNOWN;switch(t){case ct.OK:return Z.OK;case ct.CANCELLED:return Z.CANCELLED;case ct.UNKNOWN:return Z.UNKNOWN;case ct.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case ct.INTERNAL:return Z.INTERNAL;case ct.UNAVAILABLE:return Z.UNAVAILABLE;case ct.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case ct.NOT_FOUND:return Z.NOT_FOUND;case ct.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case ct.ABORTED:return Z.ABORTED;case ct.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case ct.DATA_LOSS:return Z.DATA_LOSS;default:return ge()}}(Ce=ct||(ct={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new Yi([4294967295,4294967295],0);function Jv(t){const e=aP().encode(t),n=new Ib;return n.update(e),new Uint8Array(n.digest())}function eE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Yi([n,r],0),new Yi([i,s],0)]}class Cg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new sa(`Invalid padding: ${n}`);if(r<0)throw new sa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new sa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Yi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Yi.fromNumber(r)));return i.compare(lP)===1&&(i=new Yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Jv(e),[r,i]=eE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Cg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Jv(e),[r,i]=eE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class sa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,bl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zd(xe.min(),i,new nt(Pe),jr(),Ae())}}class bl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bl(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class nS{constructor(e,n){this.targetId=e,this.me=n}}class rS{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class tE{constructor(){this.fe=0,this.ge=rE(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ae(),n=Ae(),r=Ae();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ge()}}),new bl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=rE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cP{constructor(e){this.Le=e,this.Be=new Map,this.ke=jr(),this.qe=nE(),this.Qe=new nt(Pe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ge()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(bp(s))if(r===0){const o=new fe(s.path);this.Ue(n,o,Ut.newNoDocument(o,xe.min()))}else Ue(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ss(r).toUint8Array()}catch(c){if(c instanceof Db)return so("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Cg(o,i,s)}catch(c){return so(c instanceof sa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&bp(a.target)){const c=new fe(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Ut.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ae();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new zd(e,n,this.Qe,this.ke,r);return this.ke=jr(),this.qe=nE(),this.Qe=new nt(Pe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new tE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new It(Pe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function nE(){return new nt(fe.comparator)}function rE(){return new nt(fe.comparator)}const uP={asc:"ASCENDING",desc:"DESCENDING"},dP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hP={and:"AND",or:"OR"};class fP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ap(t,e){return t.useProto3Json||Dd(e)?e:{value:e}}function Ku(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pP(t,e){return Ku(t,e.toTimestamp())}function rr(t){return Ue(!!t),xe.fromTimestamp(function(n){const r=xi(n);return new dt(r.seconds,r.nanos)}(t))}function kg(t,e){return Ip(t,e).canonicalString()}function Ip(t,e){const n=function(i){return new Ye(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sS(t){const e=Ye.fromString(t);return Ue(uS(e)),e}function Tp(t,e){return kg(t.databaseId,e.path)}function ef(t,e){const n=sS(e);if(n.get(1)!==t.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(aS(n))}function oS(t,e){return kg(t.databaseId,e)}function mP(t){const e=sS(t);return e.length===4?Ye.emptyPath():aS(e)}function Np(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aS(t){return Ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function iE(t,e,n){return{name:Tp(t,e),fields:n.value.mapValue.fields}}function gP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(Ue(h===void 0||typeof h=="string"),Nt.fromBase64String(h||"")):(Ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const h=d.code===void 0?Z.UNKNOWN:tS(d.code);return new he(h,d.message||"")}(o);n=new rS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ef(t,r.document.name),s=rr(r.document.updateTime),o=r.document.createTime?rr(r.document.createTime):xe.min(),a=new Qt({mapValue:{fields:r.document.fields}}),c=Ut.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];n=new tu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ef(t,r.document),s=r.readTime?rr(r.readTime):xe.min(),o=Ut.newNoDocument(i,s),a=r.removedTargetIds||[];n=new tu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ef(t,r.document),s=r.removedTargetIds||[];n=new tu([],s,i,null)}else{if(!("filter"in e))return ge();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new sP(i,s),a=r.targetId;n=new nS(a,o)}}return n}function yP(t,e){let n;if(e instanceof wl)n={update:iE(t,e.key,e.value)};else if(e instanceof Bd)n={delete:Tp(t,e.key)};else if(e instanceof Ii)n={update:iE(t,e.key,e.data),updateMask:IP(e.fieldMask)};else{if(!(e instanceof nP))return ge();n={verify:Tp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Wu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ja)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof el)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ge()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:pP(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ge()}(t,e.precondition)),n}function vP(t,e){return t&&t.length>0?(Ue(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?rr(i.updateTime):rr(s);return o.isEqual(xe.min())&&(o=rr(s)),new JO(o,i.transformResults||[])}(n,e))):[]}function EP(t,e){return{documents:[oS(t,e.path)]}}function xP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oS(t,i);const s=function(d){if(d.length!==0)return cS(ar.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(h=>function(f){return{field:bs(f.field),direction:bP(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ap(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function _P(t){let e=mP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ue(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const f=lS(p);return f instanceof ar&&Ub(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(f=>function(_){return new Gu(Ss(_.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(p){let f;return f=typeof p=="object"?p.value:p,Dd(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(p){const f=!!p.before,g=p.values||[];return new Hu(g,f)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const f=!p.before,g=p.values||[];return new Hu(g,f)}(n.endAt)),UO(e,i,o,s,a,"F",c,d)}function wP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ss(n.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ss(n.unaryFilter.field);return ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ss(n.unaryFilter.field);return ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ss(n.unaryFilter.field);return ft.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(t):t.fieldFilter!==void 0?function(n){return ft.create(Ss(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ar.create(n.compositeFilter.filters.map(r=>lS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ge()}}(n.compositeFilter.op))}(t):ge()}function bP(t){return uP[t]}function SP(t){return dP[t]}function AP(t){return hP[t]}function bs(t){return{fieldPath:t.canonicalString()}}function Ss(t){return St.fromServerFormat(t.fieldPath)}function cS(t){return t instanceof ft?function(n){if(n.op==="=="){if(Hv(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NAN"}};if($v(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hv(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NOT_NAN"}};if($v(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bs(n.field),op:SP(n.op),value:n.value}}}(t):t instanceof ar?function(n){const r=n.getFilters().map(i=>cS(i));return r.length===1?r[0]:{compositeFilter:{op:AP(n.op),filters:r}}}(t):ge()}function IP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,r,i,s=xe.min(),o=xe.min(),a=Nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.ct=e}}function NP(t){const e=_P({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.un=new CP}addToCollectionParentIndex(e,n){return this.un.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(Ei.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class CP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new It(Ye.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new It(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new co(0)}static kn(){return new co(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.changes=new To(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Na(r.mutation,i,un.empty(),dt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const i=Hi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ia();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=jr();const o=Ta(),a=function(){return Ta()}();return n.forEach((c,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Ii)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Na(h.mutation,d,h.mutation.getFieldMask(),dt.now())):o.set(d.key,un.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var p;return a.set(d,new OP(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ta();let i=new nt((o,a)=>o-a),s=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||un.empty();h=a.applyToLocalView(d,h),r.set(c,h);const p=(i.get(a.batchId)||Ae()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),d=c.key,h=c.value,p=qb();h.forEach(f=>{if(!s.has(f)){const g=Jb(n.get(f),r.get(f));g!==null&&p.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return J.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):J.resolve(Hi());let a=-1,c=s;return o.next(d=>J.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?J.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{c=c.insert(h,f)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Ae())).next(h=>({batchId:a,changes:Wb(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let i=ia();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ia();return this.indexManager.getCollectionParents(e,s).next(a=>J.forEach(a,c=>{const d=function(p,f){return new Md(f,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,f)=>{o=o.insert(p,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ut.newInvalidDocument(h)))});let a=ia();return o.forEach((c,d)=>{const h=s.get(c);h!==void 0&&Na(h.mutation,d,un.empty(),dt.now()),Vd(n,d)&&(a=a.insert(c,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return J.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:rr(i.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:NP(i.bundledQuery),readTime:rr(i.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.overlays=new nt(fe.comparator),this.Ir=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hi();return J.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),J.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const i=Hi(),s=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return J.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new nt((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Hi(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const a=Hi(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return J.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iP(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ae(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.Tr=new It(mt.Er),this.dr=new It(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new fe(new Ye([])),r=new mt(n,e),i=new mt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new fe(new Ye([])),r=new mt(n,e),i=new mt(n,e+1);let s=Ae();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return fe.comparator(e.key,n.key)||Pe(e.wr,n.wr)}static Ar(e,n){return Pe(e.wr,n.wr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new It(mt.Er)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rP(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new mt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,n){return J.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),i=new mt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Pe);return n.forEach(i=>{const s=new mt(i,0),o=new mt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),J.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;fe.isDocumentKey(s)||(s=s.child(""));const o=new mt(new fe(s),0);let a=new It(Pe);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.wr)),!0)},o),J.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ue(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return J.forEach(n.mutations,i=>{const s=new mt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new mt(n,0),i=this.br.firstAfterOrEqual(r);return J.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.Mr=e,this.docs=function(){return new nt(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=jr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ut.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=jr();const o=n.path,a=new fe(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||xO(EO(h),r)<=0||(i.has(h.key)||Vd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ge()}Or(e,n){return J.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new UP(this)}getSize(e){return J.resolve(this.size)}}class UP extends kP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),J.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.persistence=e,this.Nr=new To(n=>Ag(n),Ig),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Og,this.targetCount=0,this.kr=co.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),J.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new co(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Kn(n),J.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),J.waitFor(s).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new _g(0),this.Kr=!1,this.Kr=!0,this.$r=new MP,this.referenceDelegate=e(this),this.Ur=new FP(this),this.indexManager=new RP,this.remoteDocumentCache=function(i){return new VP(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new TP(n),this.Gr=new LP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new jP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const i=new zP(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return J.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class zP extends wO{constructor(e){super(),this.currentSequenceNumber=e}}class Pg{constructor(e){this.persistence=e,this.Jr=new Og,this.Yr=null}static Zr(e){return new Pg(e)}get Xr(){if(this.Yr)return this.Yr;throw ge()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),J.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,r=>{const i=fe.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,xe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return J.or([()=>J.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ae(),i=Ae();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Lg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return HR()?8:bO(Bt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $P;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Qo()<=Te.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(Qo()<=Te.DEBUG&&de("QueryEngine","Query:",ws(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Qo()<=Te.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nr(n))):J.resolve())}Yi(e,n){if(Kv(n))return J.resolve(null);let r=nr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Sp(n,null,"F"),r=nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ae(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,a);return this.ns(n,d,o,c.readTime)?this.Yi(e,Sp(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,i){return Kv(n)||i.isEqual(xe.min())?J.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?J.resolve(null):(Qo()<=Te.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ws(n)),this.rs(e,o,n,vO(i,-1)).next(a=>a))})}ts(e,n){let r=new It(Hb(e));return n.forEach((i,s)=>{Vd(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Qo()<=Te.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ws(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ei.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new nt(Pe),this._s=new To(s=>Ag(s),Ig),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function WP(t,e,n,r){return new GP(t,e,n,r)}async function dS(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=Ae();for(const d of i){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})}function qP(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,h){const p=d.batch,f=p.keys();let g=J.resolve();return f.forEach(_=>{g=g.next(()=>h.getEntry(c,_)).next(x=>{const C=d.docVersions.get(_);Ue(C!==null),x.version.compareTo(C)<0&&(p.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),h.addEntry(x)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ae();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function hS(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function KP(t,e){const n=_e(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,p)=>{const f=i.get(p);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(Nt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(p,g),function(x,C,E){return x.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let c=jr(),d=Ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(YP(s,o,e.documentUpdates).next(h=>{c=h.Ps,d=h.Is})),!r.isEqual(xe.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return J.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.os=i,s))}function YP(t,e,n){let r=Ae(),i=Ae();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=jr();return n.forEach((a,c)=>{const d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(xe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):de("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function QP(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XP(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,J.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ri(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Rp(t,e,n){const r=_e(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!_l(o))throw o;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function sE(t,e,n){const r=_e(t);let i=xe.min(),s=Ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const p=_e(c),f=p._s.get(h);return f!==void 0?J.resolve(p.os.get(f)):p.Ur.getTargetData(d,h)}(r,o,nr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:xe.min(),n?s:Ae())).next(a=>(ZP(r,zO(e),a),{documents:a,Ts:s})))}function ZP(t,e,n){let r=t.us.get(e)||xe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class oE{constructor(){this.activeTargetIds=KO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JP{constructor(){this.so=new oE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new oE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c=null;function tf(){return _c===null?_c=function(){return 268435456+Math.round(2147483648*Math.random())}():_c++,"0x"+_c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class rL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=tf(),c=this.xo(n,r.toUriEncodedString());de("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(n,c,d,i).then(h=>(de("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw so("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Io}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=tL[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=tf();return new Promise((o,a)=>{const c=new Tb;c.setWithCredentials(!0),c.listenOnce(Nb.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Zc.NO_ERROR:const h=c.getResponseJson();de(Lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Zc.TIMEOUT:de(Lt,`RPC '${e}' ${s} timed out`),a(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const p=c.getStatus();if(de(Lt,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const _=function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(E)>=0?E:Z.UNKNOWN}(g.status);a(new he(_,g.message))}else a(new he(Z.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new he(Z.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{de(Lt,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);de(Lt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=tf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kb(),a=Cb(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=s.join("");de(Lt,`Creating RPC '${e}' stream ${i}: ${h}`,c);const p=o.createWebChannel(h,c);let f=!1,g=!1;const _=new nL({Io:C=>{g?de(Lt,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(f||(de(Lt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),f=!0),de(Lt,`RPC '${e}' stream ${i} sending:`,C),p.send(C))},To:()=>p.close()}),x=(C,E,w)=>{C.listen(E,b=>{try{w(b)}catch(P){setTimeout(()=>{throw P},0)}})};return x(p,ra.EventType.OPEN,()=>{g||(de(Lt,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),x(p,ra.EventType.CLOSE,()=>{g||(g=!0,de(Lt,`RPC '${e}' stream ${i} transport closed`),_.So())}),x(p,ra.EventType.ERROR,C=>{g||(g=!0,so(Lt,`RPC '${e}' stream ${i} transport errored:`,C),_.So(new he(Z.UNAVAILABLE,"The operation could not be completed")))}),x(p,ra.EventType.MESSAGE,C=>{var E;if(!g){const w=C.data[0];Ue(!!w);const b=w,P=b.error||((E=b[0])===null||E===void 0?void 0:E.error);if(P){de(Lt,`RPC '${e}' stream ${i} received error:`,P);const D=P.status;let j=function(S){const A=ct[S];if(A!==void 0)return tS(A)}(D),I=P.message;j===void 0&&(j=Z.INTERNAL,I="Unknown error status: "+D+" with message "+P.message),g=!0,_.So(new he(j,I)),p.close()}else de(Lt,`RPC '${e}' stream ${i} received:`,w),_.bo(w)}}),x(a,Rb.STAT_EVENT,C=>{C.stat===Ep.PROXY?de(Lt,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Ep.NOPROXY&&de(Lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function nf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t){return new fP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Mr(n.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new he(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iL extends pS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=gP(this.serializer,e),r=function(s){if(!("targetChange"in s))return xe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?rr(o.readTime):xe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Np(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=bp(c)?{documents:EP(s,c)}:{query:xP(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=iS(s,o.resumeToken);const d=Ap(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(xe.min())>0){a.readTime=Ku(s,o.snapshotVersion.toTimestamp());const d=Ap(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=wP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Np(this.serializer),n.removeTarget=e,this.a_(n)}}class sL extends pS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=vP(e.writeResults,e.commitTime),r=rr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Np(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ip(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new he(Z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Ip(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(Z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class aL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Mr(n),this.D_=!1):de("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ps(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=_e(c);d.L_.add(4),await Sl(d),d.q_.set("Unknown"),d.L_.delete(4),await Hd(d)}(this))})}),this.q_=new aL(r,i)}}async function Hd(t){if(ps(t))for(const e of t.B_)await e(!0)}async function Sl(t){for(const e of t.B_)await e(!1)}function mS(t,e){const n=_e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Vg(n)?jg(n):No(n).r_()&&Mg(n,e))}function Dg(t,e){const n=_e(t),r=No(n);n.N_.delete(e),r.r_()&&gS(n,e),n.N_.size===0&&(r.r_()?r.o_():ps(n)&&n.q_.set("Unknown"))}function Mg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}No(t).A_(e)}function gS(t,e){t.Q_.xe(e),No(t).R_(e)}function jg(t){t.Q_=new cP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),No(t).start(),t.q_.v_()}function Vg(t){return ps(t)&&!No(t).n_()&&t.N_.size>0}function ps(t){return _e(t).L_.size===0}function yS(t){t.Q_=void 0}async function cL(t){t.q_.set("Online")}async function uL(t){t.N_.forEach((e,n)=>{Mg(t,e)})}async function dL(t,e){yS(t),Vg(t)?(t.q_.M_(e),jg(t)):t.q_.set("Unknown")}async function hL(t,e,n){if(t.q_.set("Online"),e instanceof rS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yu(t,r)}else if(e instanceof tu?t.Q_.Ke(e):e instanceof nS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(xe.min()))try{const r=await hS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=s.N_.get(d);h&&s.N_.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{const h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(Nt.EMPTY_BYTE_STRING,h.snapshotVersion)),gS(s,c);const p=new ri(h.target,c,d,h.sequenceNumber);Mg(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){de("RemoteStore","Failed to raise snapshot:",r),await Yu(t,r)}}async function Yu(t,e,n){if(!_l(e))throw e;t.L_.add(1),await Sl(t),t.q_.set("Offline"),n||(n=()=>hS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Hd(t)})}function vS(t,e){return e().catch(n=>Yu(t,n,e))}async function Gd(t){const e=_e(t),n=_i(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fL(e);)try{const i=await QP(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,pL(e,i)}catch(i){await Yu(e,i)}ES(e)&&xS(e)}function fL(t){return ps(t)&&t.O_.length<10}function pL(t,e){t.O_.push(e);const n=_i(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ES(t){return ps(t)&&!_i(t).n_()&&t.O_.length>0}function xS(t){_i(t).start()}async function mL(t){_i(t).p_()}async function gL(t){const e=_i(t);for(const n of t.O_)e.m_(n.mutations)}async function yL(t,e,n){const r=t.O_.shift(),i=Rg.from(r,e,n);await vS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gd(t)}async function vL(t,e){e&&_i(t).V_&&await async function(r,i){if(function(o){return oP(o)&&o!==Z.ABORTED}(i.code)){const s=r.O_.shift();_i(r).s_(),await vS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Gd(r)}}(t,e),ES(t)&&xS(t)}async function lE(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const r=ps(n);n.L_.add(3),await Sl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Hd(n)}async function EL(t,e){const n=_e(t);e?(n.L_.delete(2),await Hd(n)):e||(n.L_.add(2),await Sl(n),n.q_.set("Unknown"))}function No(t){return t.K_||(t.K_=function(n,r,i){const s=_e(n);return s.w_(),new iL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:cL.bind(null,t),Ro:uL.bind(null,t),mo:dL.bind(null,t),d_:hL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Vg(t)?jg(t):t.q_.set("Unknown")):(await t.K_.stop(),yS(t))})),t.K_}function _i(t){return t.U_||(t.U_=function(n,r,i){const s=_e(n);return s.w_(),new sL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mL.bind(null,t),mo:vL.bind(null,t),f_:gL.bind(null,t),g_:yL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Gd(t)):(await t.U_.stop(),t.O_.length>0&&(de("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Ug(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fg(t,e){if(Mr("AsyncQueue",`${e}: ${t}`),_l(t))return new he(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=ia(),this.sortedSet=new nt(this.comparator)}static emptySet(e){return new Ks(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ks)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ks;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.W_=new nt(fe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ge():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class uo{constructor(e,n,r,i,s,o,a,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new uo(e,n,Ks.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _L{constructor(){this.queries=uE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=_e(n),s=i.queries;i.queries=uE(),s.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function uE(){return new To(t=>$b(t),jd)}async function _S(t,e){const n=_e(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new xL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Fg(o,`Initialization of query '${ws(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Bg(n)}async function wS(t,e){const n=_e(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wL(t,e){const n=_e(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Bg(n)}function bL(t,e,n){const r=_e(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Bg(t){t.Y_.forEach(e=>{e.next()})}var Cp,dE;(dE=Cp||(Cp={})).ea="default",dE.Cache="cache";class bS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.key=e}}class AS{constructor(e){this.key=e}}class SL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ae(),this.mutatedKeys=Ae(),this.Aa=Hb(e),this.Ra=new Ks(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new cE,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const f=i.get(h),g=Vd(this.query,p)?p:null,_=!!f&&this.mutatedKeys.has(f.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;f&&g?f.data.isEqual(g.data)?_!==x&&(r.track({type:3,doc:g}),C=!0):this.ga(f,g)||(r.track({type:2,doc:g}),C=!0,(c&&this.Aa(g,c)>0||d&&this.Aa(g,d)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),C=!0):f&&!g&&(r.track({type:1,doc:f}),C=!0,(c||d)&&(a=!0)),C&&(g?(o=o.add(g),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,p)=>function(g,_){const x=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return x(g)-x(_)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new uo(this.query,e.Ra,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new cE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new AS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new SS(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return uo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class AL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class IL{constructor(e){this.key=e,this.va=!1}}class TL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new To(a=>$b(a),jd),this.Ma=new Map,this.xa=new Set,this.Oa=new nt(fe.comparator),this.Na=new Map,this.La=new Og,this.Ba={},this.ka=new Map,this.qa=co.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function NL(t,e,n=!0){const r=kS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await IS(r,e,n,!0),i}async function RL(t,e){const n=kS(t);await IS(n,e,!0,!1)}async function IS(t,e,n,r){const i=await XP(t.localStore,nr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await CL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&mS(t.remoteStore,i),a}async function CL(t,e,n,r,i){t.Ka=(p,f,g)=>async function(x,C,E,w){let b=C.view.ma(E);b.ns&&(b=await sE(x.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,b)));const P=w&&w.targetChanges.get(C.targetId),D=w&&w.targetMismatches.get(C.targetId)!=null,j=C.view.applyChanges(b,x.isPrimaryClient,P,D);return fE(x,C.targetId,j.wa),j.snapshot}(t,p,f,g);const s=await sE(t.localStore,e,!0),o=new SL(e,s.Ts),a=o.ma(s.documents),c=bl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(a,t.isPrimaryClient,c);fE(t,n,d.wa);const h=new AL(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function kL(t,e,n){const r=_e(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!jd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Dg(r.remoteStore,i.targetId),kp(r,i.targetId)}).catch(xl)):(kp(r,i.targetId),await Rp(r.localStore,i.targetId,!0))}async function OL(t,e){const n=_e(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dg(n.remoteStore,r.targetId))}async function PL(t,e,n){const r=FL(t);try{const i=await function(o,a){const c=_e(o),d=dt.now(),h=a.reduce((g,_)=>g.add(_.key),Ae());let p,f;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=jr(),x=Ae();return c.cs.getEntries(g,h).next(C=>{_=C,_.forEach((E,w)=>{w.isValidDocument()||(x=x.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,_)).next(C=>{p=C;const E=[];for(const w of a){const b=tP(w,p.get(w.key).overlayedDocument);b!=null&&E.push(new Ii(w.key,b,Mb(b.value.mapValue),Wt.exists(!0)))}return c.mutationQueue.addMutationBatch(g,d,E,a)}).next(C=>{f=C;const E=C.applyToLocalDocumentSet(p,x);return c.documentOverlayCache.saveOverlays(g,C.batchId,E)})}).then(()=>({batchId:f.batchId,changes:Wb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new nt(Pe)),d=d.insert(a,c),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,n),await Al(r,i.changes),await Gd(r.remoteStore)}catch(i){const s=Fg(i,"Failed to persist write");n.reject(s)}}async function TS(t,e){const n=_e(t);try{const r=await KP(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ue(o.va):i.removedDocuments.size>0&&(Ue(o.va),o.va=!1))}),await Al(n,r,e)}catch(r){await xl(r)}}function hE(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=_e(o);c.onlineState=a;let d=!1;c.queries.forEach((h,p)=>{for(const f of p.j_)f.Z_(a)&&(d=!0)}),d&&Bg(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LL(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new nt(fe.comparator);o=o.insert(s,Ut.newNoDocument(s,xe.min()));const a=Ae().add(s),c=new zd(xe.min(),new Map,new nt(Pe),o,a);await TS(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),zg(r)}else await Rp(r.localStore,e,!1).then(()=>kp(r,e,n)).catch(xl)}async function DL(t,e){const n=_e(t),r=e.batch.batchId;try{const i=await qP(n.localStore,e);RS(n,r,null),NS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Al(n,i)}catch(i){await xl(i)}}async function ML(t,e,n){const r=_e(t);try{const i=await function(o,a){const c=_e(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(p=>(Ue(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);RS(r,e,n),NS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Al(r,i)}catch(i){await xl(i)}}function NS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function RS(t,e,n){const r=_e(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function kp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||CS(t,r)})}function CS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Dg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),zg(t))}function fE(t,e,n){for(const r of n)r instanceof SS?(t.La.addReference(r.key,e),jL(t,r)):r instanceof AS?(de("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||CS(t,r.key)):ge()}function jL(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(de("SyncEngine","New document in limbo: "+n),t.xa.add(r),zg(t))}function zg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new fe(Ye.fromString(e)),r=t.qa.next();t.Na.set(r,new IL(n)),t.Oa=t.Oa.insert(n,r),mS(t.remoteStore,new ri(nr(Tg(n.path)),r,"TargetPurposeLimboResolution",_g.oe))}}async function Al(t,e,n){const r=_e(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=Lg.Wi(c.targetId,d);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(c,d){const h=_e(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>J.forEach(d,f=>J.forEach(f.$i,g=>h.persistence.referenceDelegate.addReference(p,f.targetId,g)).next(()=>J.forEach(f.Ui,g=>h.persistence.referenceDelegate.removeReference(p,f.targetId,g)))))}catch(p){if(!_l(p))throw p;de("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const f=p.targetId;if(!p.fromCache){const g=h.os.get(f),_=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(f,x)}}}(r.localStore,s))}async function VL(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const r=await dS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new he(Z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Al(n,r.hs)}}function UL(t,e){const n=_e(t),r=n.Na.get(e);if(r&&r.va)return Ae().add(r.key);{let i=Ae();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function kS(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LL.bind(null,e),e.Ca.d_=wL.bind(null,e.eventManager),e.Ca.$a=bL.bind(null,e.eventManager),e}function FL(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ML.bind(null,e),e}class Qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$d(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return WP(this.persistence,new HP,e.initialUser,this.serializer)}Ga(e){return new BP(Pg.Zr,this.serializer)}Wa(e){return new JP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qu.provider={build:()=>new Qu};class Op{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VL.bind(null,this.syncEngine),await EL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _L}()}createDatastore(e){const n=$d(e.databaseInfo.databaseId),r=function(s){return new rL(s)}(e.databaseInfo);return function(s,o,a,c){return new oL(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new lL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>hE(this.syncEngine,n,0),function(){return aE.D()?new aE:new eL}())}createSyncEngine(e,n){return function(i,s,o,a,c,d,h){const p=new TL(i,s,o,a,c,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=_e(i);de("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Sl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Op.provider={build:()=>new Op};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=jt.UNAUTHENTICATED,this.clientId=Pb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{de("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(de("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rf(t,e){t.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await dS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zL(t);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>lE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>lE(e.remoteStore,i)),t._onlineComponents=e}async function zL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await rf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;so("Error using user provided cache. Falling back to memory cache: "+n),await rf(t,new Qu)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await rf(t,new Qu);return t._offlineComponents}async function PS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await pE(t,t._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await pE(t,new Op))),t._onlineComponents}function $L(t){return PS(t).then(e=>e.syncEngine)}async function LS(t){const e=await PS(t),n=e.eventManager;return n.onListen=NL.bind(null,e.syncEngine),n.onUnlisten=kL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OL.bind(null,e.syncEngine),n}function HL(t,e,n={}){const r=new Nr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,d){const h=new OS({next:f=>{h.Za(),o.enqueueAndForget(()=>wS(s,p));const g=f.docs.has(a);!g&&f.fromCache?d.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&c&&c.source==="server"?d.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(f)},error:f=>d.reject(f)}),p=new bS(Tg(a.path),h,{includeMetadataChanges:!0,_a:!0});return _S(s,p)}(await LS(t),t.asyncQueue,e,n,r)),r.promise}function GL(t,e,n={}){const r=new Nr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,d){const h=new OS({next:f=>{h.Za(),o.enqueueAndForget(()=>wS(s,p)),f.fromCache&&c.source==="server"?d.reject(new he(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(f)},error:f=>d.reject(f)}),p=new bS(a,h,{includeMetadataChanges:!0,_a:!0});return _S(s,p)}(await LS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t,e,n){if(!n)throw new he(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WL(t,e,n,r){if(e===!0&&r===!0)throw new he(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gE(t){if(!fe.isDocumentKey(t))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yE(t){if(fe.isDocumentKey(t))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $g(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge()}function Cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$g(t);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cO;switch(r.type){case"firstParty":return new fO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mE.get(n);r&&(de("ComponentProvider","Removing Datastore"),mE.delete(n),r.terminate())}(this),Promise.resolve()}}function qL(t,e,n,r={}){var i;const s=(t=Cn(t,Wd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=jt.MOCK_USER;else{a=jR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new jt(d)}t._authCredentials=new uO(new Ob(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qd(this.firestore,e,this._query)}}class nn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}}class mi extends qd{constructor(e,n,r){super(e,n,Tg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new fe(e))}withConverter(e){return new mi(this.firestore,e,this._path)}}function Kd(t,e,...n){if(t=vt(t),MS("collection","path",e),t instanceof Wd){const r=Ye.fromString(e,...n);return yE(r),new mi(t,null,r)}{if(!(t instanceof nn||t instanceof mi))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return yE(r),new mi(t.firestore,null,r)}}function Ti(t,e,...n){if(t=vt(t),arguments.length===1&&(e=Pb.newId()),MS("doc","path",e),t instanceof Wd){const r=Ye.fromString(e,...n);return gE(r),new nn(t,null,new fe(r))}{if(!(t instanceof nn||t instanceof mi))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return gE(r),new nn(t.firestore,t instanceof mi?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fS(this,"async_queue_retry"),this.Vu=()=>{const r=nf();r&&de("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=nf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=nf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Nr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_l(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Mr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Ug.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ge()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ni extends Wd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new EE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new EE(e),this._firestoreClient=void 0,await e}}}function KL(t,e){const n=typeof t=="object"?t:Ww(),r=typeof t=="string"?t:"(default)",i=lg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=DR("firestore");s&&qL(i,...s)}return i}function Yd(t){if(t._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YL(t),t._firestoreClient}function YL(t){var e,n,r;const i=t._freezeSettings(),s=function(a,c,d,h){return new IO(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,DS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new BL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ho(Nt.fromBase64String(e))}catch(n){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ho(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=/^__.*__$/;class XL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ii(e,this.data,this.fieldMask,n,this.fieldTransforms):new wl(e,this.data,n,this.fieldTransforms)}}class jS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ii(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function VS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class qg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(VS(this.Cu)&&QL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ZL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$d(e)}Qu(e,n,r,i=!1){return new qg({Cu:e,methodName:n,qu:r,path:St.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qd(t){const e=t._freezeSettings(),n=$d(t._databaseId);return new ZL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Kg(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Yg("Data must be an object, but it was:",o,r);const a=BS(r,o);let c,d;if(s.merge)c=new un(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const f=Pp(e,p,n);if(!o.contains(f))throw new he(Z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);$S(h,f)||h.push(f)}c=new un(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new XL(new Qt(a),c,d)}class Xd extends Hg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xd}}function US(t,e,n,r){const i=t.Qu(1,e,n);Yg("Data must be an object, but it was:",i,r);const s=[],o=Qt.empty();fs(r,(c,d)=>{const h=Qg(e,c,n);d=vt(d);const p=i.Nu(h);if(d instanceof Xd)s.push(h);else{const f=Zd(d,p);f!=null&&(s.push(h),o.set(h,f))}});const a=new un(s);return new jS(o,a,i.fieldTransforms)}function FS(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Pp(e,r,n)],c=[i];if(s.length%2!=0)throw new he(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Pp(e,s[f])),c.push(s[f+1]);const d=[],h=Qt.empty();for(let f=a.length-1;f>=0;--f)if(!$S(d,a[f])){const g=a[f];let _=c[f];_=vt(_);const x=o.Nu(g);if(_ instanceof Xd)d.push(g);else{const C=Zd(_,x);C!=null&&(d.push(g),h.set(g,C))}}const p=new un(d);return new jS(h,p,o.fieldTransforms)}function Zd(t,e){if(zS(t=vt(t)))return Yg("Unsupported field value:",e,t),BS(t,e);if(t instanceof Hg)return function(r,i){if(!VS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Zd(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=dt.fromDate(r);return{timestampValue:Ku(i.serializer,s)}}if(r instanceof dt){const s=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ku(i.serializer,s)}}if(r instanceof Gg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ho)return{bytesValue:iS(i.serializer,r._byteString)};if(r instanceof nn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Wg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Ng(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${$g(r)}`)}(t,e)}function BS(t,e){const n={};return Lb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(t,(r,i)=>{const s=Zd(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function zS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dt||t instanceof Gg||t instanceof ho||t instanceof nn||t instanceof Hg||t instanceof Wg)}function Yg(t,e,n){if(!zS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=$g(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Pp(t,e,n){if((e=vt(e))instanceof Il)return e._internalPath;if(typeof e=="string")return Qg(t,e);throw Xu("Field path arguments must be of type string or ",t,!1,void 0,n)}const JL=new RegExp("[~\\*/\\[\\]]");function Qg(t,e,n){if(e.search(JL)>=0)throw Xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Il(...e.split("."))._internalPath}catch{throw Xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new he(Z.INVALID_ARGUMENT,a+t+c)}function $S(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(GS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eD extends HS{data(){return super.data()}}function GS(t,e){return typeof e=="string"?Qg(t,e):e instanceof Il?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nD{convertValue(e,n="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ot(o.doubleValue));return new Wg(s)}convertGeoPoint(e){return new Gg(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qa(e));default:return null}}convertTimestamp(e){const n=xi(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ye.fromString(e);Ue(uS(r));const i=new Xa(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(n)||Mr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class WS extends HS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(GS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nu extends WS{data(e={}){return super.data(e)}}class rD{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new oa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nu(this._firestore,this._userDataWriter,r.key,r,new oa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new nu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new oa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new nu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new oa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:iD(a.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function iD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){t=Cn(t,nn);const e=Cn(t.firestore,Ni);return HL(Yd(e),t._key).then(n=>aD(e,t,n))}class qS extends nD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ho(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,n)}}function KS(t){t=Cn(t,qd);const e=Cn(t.firestore,Ni),n=Yd(e),r=new qS(e);return tD(t._query),GL(n,t._query).then(i=>new rD(e,r,t,i))}function YS(t,e,n){t=Cn(t,nn);const r=Cn(t.firestore,Ni),i=Xg(t.converter,e,n);return Tl(r,[Kg(Qd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Wt.none())])}function oD(t,e,n,...r){t=Cn(t,nn);const i=Cn(t.firestore,Ni),s=Qd(i);let o;return o=typeof(e=vt(e))=="string"||e instanceof Il?FS(s,"updateDoc",t._key,e,n,r):US(s,"updateDoc",t._key,e),Tl(i,[o.toMutation(t._key,Wt.exists(!0))])}function QS(t){return Tl(Cn(t.firestore,Ni),[new Bd(t._key,Wt.none())])}function XS(t,e){const n=Cn(t.firestore,Ni),r=Ti(t),i=Xg(t.converter,e);return Tl(n,[Kg(Qd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Wt.exists(!1))]).then(()=>r)}function Tl(t,e){return function(r,i){const s=new Nr;return r.asyncQueue.enqueueAndForget(async()=>PL(await $L(r),i,s)),s.promise}(Yd(t),e)}function aD(t,e,n){const r=n.docs.get(e._key),i=new qS(t);return new WS(t,i,e._key,r,new oa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Qd(e)}set(e,n,r){this._verifyNotCommitted();const i=sf(e,this._firestore),s=Xg(i.converter,n,r),o=Kg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Wt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=sf(e,this._firestore);let o;return o=typeof(n=vt(n))=="string"||n instanceof Il?FS(this._dataReader,"WriteBatch.update",s._key,n,r,i):US(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Wt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=sf(e,this._firestore);return this._mutations=this._mutations.concat(new Bd(n._key,Wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sf(t,e){if((t=vt(t)).firestore!==e)throw new he(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t){return Yd(t=Cn(t,Ni)),new lD(t,e=>Tl(t,e))}(function(e,n=!0){(function(i){Io=i})(So),ro(new ns("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ni(new dO(r.getProvider("auth-internal")),new mO(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(d.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),pi(Vv,"4.7.3",e),pi(Vv,"4.7.3","esm2017")})();const uD={},Di=uD||{},ru={apiKey:Di.VITE_FIREBASE_API_KEY,authDomain:Di.VITE_FIREBASE_AUTH_DOMAIN,projectId:Di.VITE_FIREBASE_PROJECT_ID,storageBucket:Di.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:Di.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:Di.VITE_FIREBASE_APP_ID,measurementId:Di.VITE_FIREBASE_MEASUREMENT_ID};let of,ZS=null,JS=null;const dD=ru.apiKey&&ru.apiKey!=="PLACEHOLDER_API_KEY"&&!ru.apiKey.includes("Pega_Aqui");if(dD)try{of=Gw(ru),ZS=sO(of),JS=KL(of),console.log(" Firebase inicializado correctamente")}catch(t){console.error(" Error al inicializar Firebase:",t)}else console.warn(" AVISO: No se detectaron claves vlidas de Firebase en .env.local. La app funcionar en modo limitado.");const gi=ZS,qe=JS,Hn={es:{header:{project:"PROYECTO: LZARO",failure:"FALLO DE CONTENCIN",biohazard:"PELIGRO BIOLGICO",clearance:"NIVEL DE ACCESO: OMEGA",saving:"GUARDANDO...",saved:"GUARDADO",logout:"SALIR"},sidebar:{threatLevelTitle:"NIVEL DE AMENAZA",threatLevelValue:"CRTICO",infectionRate:"TASA DE INFECCIN: 89%",hiveBtn:"ACCESO COLMENA",bunkerBtn:"ACCESO BNKER",campaignMode:"MODO CAMPAA",activeMissions:"MISIONES ACTIVAS",noMissions:"NO HAY MISIONES DISPONIBLES",replayStory:"REPETIR INTRO"},map:{sector:"SECTOR",loading:"CARGANDO DATOS SATELITALES...",error:"ERROR DE CONEXIN",hive:"COLMENA",bunker:"BNKER"},factions:{magneto:{name:"Edn Roto (Magneto)"},kingpin:{name:"Imperio de la Carne"},hulk:{name:"Tierras Baldas (Hulk)"},doom:{name:"Doomsberg (Latveria)"},neutral:{name:"Zona Neutral"}},login:{title:"SHIELD OS",subtitle:"SISTEMA DE RESPUESTA A ZOMBIES",clearance:"AUTORIZACIN REQUERIDA",idPrompt:"ESCANEAR IDENTIFICACIN BIOMTRICA",scanning:"ESCANEANDO...",granted:"ACCESO CONCEDIDO",scanBtn:"INICIAR ESCANEO DE RETINA",googleBtn:"ACCESO OFICIAL DE SHIELD (GOOGLE)",editorBtn:"ACCESO DE EDITOR",editorPass:"CONTRASEA DE MANDO",error:"ERROR DE AUTENTICACIN",passError:"CONTRASEA INCORRECTA"},missionModal:{title:"ARCHIVO DE MISIN",threat:"NIVEL DE AMENAZA",briefing:"INFORME DE MISIN",objectives:"OBJETIVOS PRIMARIOS",downloadPdf:"DESCARGAR INFORME TCTICO COMPLETO",cancel:"CANCELAR",reactivate:"REACTIVAR",sending:"ENVIANDO...",sent:"INFORME ENVIADO",complete:"REPORTAR XITO",accept:"ACEPTAR MISIN",outcomeTitle:"INFORME DE DESENLACE",closeReport:"ARCHIVAR INFORME"},bunker:{title:"PUESTO DE MANDO AVANZADO",hiveTitle:"NEXO DE LA COLMENA",return:"VOLVER AL MAPA",roster:"LISTA DE ACTIVOS",recruit:"RECLUTAR",currentStory:"ESTADO ACTUAL",objectives:"OBJETIVOS PERSONALES",status:"ESTADO",unassign:"RETIRAR",assign:"ASIGNAR A MISIN",viewFile:"VER FICHA TCNICA",manageSquad:"GESTIONAR ESCUADRN",assignModalTitle:"SELECCIONAR MISIN",squadModalTitle:"ASIGNACIN DE ESCUADRN",addToMission:"AADIR A MISIN",removeFromMission:"RETIRAR DE MISIN",noMissions:"NO HAY MISIONES DISPONIBLES",cancel:"CANCELAR",maxHeroes:"CAPACIDAD MXIMA ALCANZADA",omega:{title:"CILINDROS OMEGA",desc:"Nanobots reprogramados capaces de revertir la infeccin.",empty:"RESERVAS AGOTADAS",find:"BUSCAR SUMINISTROS",found:"CILINDRO ENCONTRADO!",notFound:"BSQUEDA FALLIDA"},rooms:{command:"SALA DE GUERRA",commandDesc:"Misiones activas y despliegue tctico.",barracks:"BARRACONES",barracksDesc:"Agentes en reserva listos para el servicio.",medbay:"ALA MDICA / CONTENCIN",medbayDesc:"Tratamiento y escaneo de nuevos sujetos.",cerebro:"INTERFAZ CEREBRO",cerebroDesc:"Bsqueda y reclutamiento global."}},recruit:{title:"RECLUTAMIENTO DE HROES",selectDb:"BASE DE DATOS DE S.H.I.E.L.D.",loadingDb:"ACCEDIENDO A ARCHIVOS...",alias:"NOMBRE EN CLAVE",name:"NOMBRE REAL",fileUrl:"URL DE FICHA (IMAGEN/PDF)",scanZombie:"ESCANEAR: SEALES ZOMBIE (CURAR)",scanHuman:"ESCANEAR: CARNE FRESCA (INFECTAR)",adminSeed:"ADMIN: REINICIAR DB",seedSuccess:"DB REINICIADA",submit:"RECLUTAR AGENTE"},missionEditor:{title:"EDITOR DE MISIONES",missionTitle:"TTULO DE LA MISIN",location:"UBICACIN (ESTADO)",threat:"NIVEL DE AMENAZA",type:"TIPO DE MISIN",prereq:"CONTINUACIN DE (REQUISITO)",pdfUrl:"URL DEL PDF (OPCIONAL)",description:"DESCRIPCIN",outcome:"DESENLACE (OPCIONAL)",objectives:"OBJETIVOS",addObjective:"AADIR OBJETIVO",objTitle:"Ttulo del Objetivo",objDesc:"Descripcin del Objetivo",cancel:"CANCELAR",save:"GUARDAR CAMBIOS"},events:{anomaly:{alive:{title:"ANOMALA CSMICA DETECTADA",desc:"LECTURAS DE ENERGA DESCONOCIDA EN EL ESPACIO PROFUNDO. REED RICHARDS CONFIRMA: UN PLANETA DEL SISTEMA VEGA HA DEJADO DE EXISTIR INSTANTNEAMENTE.",ack:"CONTINUAR MONITORIZACIN"},zombie:{title:"COMPETENCIA DETECTADA",desc:"EL HAMBRE SIENTE UNA PERTURBACIN. HANK PYM (ZOMBIE) INFORMA: ALGO MS EST DEVORANDO PLANETAS EN EL ESPACIO PROFUNDO. ES COMIDA O UN RIVAL?",ack:"RASTREAR PRESA"}},surfer:{alive:{title:"LA CADA DEL HERALDO",desc:"OBJETO PLATEADO ENTR EN LA ATMSFERA. INTERCEPTADO POR HULK EN KANSAS. VDEO CONFIRMA INFECCIN. SILVER SURFER HA CADO ANTE EL HAMBRE. REPITO: TENEMOS A UN HERALDO ZOMBIE EN JUEGO.",ack:"ACTIVAR PROTOCOLO OMEGA",image:"https://i.pinimg.com/1200x/ed/22/4b/ed224b12777f7372e1a4b6ca74912cf9.jpg"},zombie:{title:"COMIDA A DOMICILIO",desc:"UN SER DE PLATA HA ENTRADO EN LA ATMSFERA. TIENE SABOR A PODER CSMICO. HULK YA LE HA DADO EL PRIMER MORDISCO. EL HERALDO ES NUESTRO.",ack:"CONSUMIR PODER",image:"https://i.pinimg.com/1200x/ed/22/4b/ed224b12777f7372e1a4b6ca74912cf9.jpg"}},galactus:{alive:{title:"LLEGADA DE GALACTUS",desc:"EL DEVORADOR DE MUNDOS EST EN RBITA. EL CIELO SE HA VUELTO PRPURA. NO VIENE A SALVARNOS. VIENE A COMER. LA LTIMA BATALLA POR LA TIERRA HA COMENZADO.",ack:"PREPARARSE PARA EL JUICIO FINAL",image:"https://i.pinimg.com/736x/03/c7/6c/03c76c56fccbdc6bc57aff5c1b506089.jpg"},zombie:{title:"EL PLATO PRINCIPAL",desc:"GALACTUS HA LLEGADO. ES GIGANTE. EST LLENO DE ENERGA. SI NOS COMEMOS A ESTE DIOS ESPACIAL, NUNCA MS TENDREMOS HAMBRE. A LA MESA!",ack:"DEVORAR AL DEVORADOR",image:"https://i.pinimg.com/736x/03/c7/6c/03c76c56fccbdc6bc57aff5c1b506089.jpg"}}},missions:{kraven:{title:"LA CACERA DE KRAVEN",description:["Kraven el Cazador ha establecido una zona de caza en Central Park. Est usando supervivientes como cebo.","Debemos detenerlo antes de que mate a ms inocentes."],objectives:[{title:"Localizar a Kraven",desc:"Rastrear sus movimientos en Central Park."},{title:"Neutralizar a Kraven",desc:"Acabar con la amenaza."}]},fleshSleeps:{title:"DONDE DUERME LA CARNE",description:["Hemos detectado una instalacin subterrnea donde Kingpin almacena 'carne fresca'.","Es una granja de humanos. Debemos liberarlos."],objectives:[{title:"Infiltracin",desc:"Entrar en la instalacin sin ser detectados."},{title:"Liberacin",desc:"Liberar a los prisioneros."}]},bases:{alpha:"BASE ALPHA",beta:"BASE BETA",gamma:"BASE GAMMA",delta:"BASE DELTA",epsilon:"BASE EPSILON",zeta:"BASE ZETA",desc:"Antigua base de operaciones de S.H.I.E.L.D. Puede contener suministros vitales.",objSecure:"Asegurar el permetro",objRetrieve:"Recuperar datos"},galactus:{title:"EL JUICIO FINAL",description:["Galactus ha comenzado a alimentarse. Debemos detenerlo o la Tierra ser destruida.","Todos los hroes disponibles deben converger en su posicin."],objectives:[{title:"Atacar a Galactus",desc:"Coordinar un ataque masivo."},{title:"Salvar la Tierra",desc:"Evitar la destruccin total."}]}},heroes:{hawkeye:{alias:"HAWKEYE",bio:"Maestro arquero y asesino. Nunca falla."},lukecage:{alias:"LUKE CAGE",bio:"Piel impenetrable y fuerza sobrehumana."},daredevil:{alias:"DAREDEVIL",bio:"El hombre sin miedo. Sentidos aumentados."},thor:{alias:"THOR",bio:"Dios del Trueno. Posee el poder de Mjolnir."},storm:{alias:"STORM",bio:"Controla el clima. Una diosa entre mortales."}},introSequence:{alive:[{text:"El zumbido en tus odos es lo nico que ahoga los gritos de los moribundos. Sientes sabor a cobre; sangre. El transporte blindado de la Trada, esa jaula con ruedas que os llevaba al matadero, es ahora un amasijo de metal retorcido y carne quemada. Iban a venderos, a usaros como cobayas o entretenimiento... pero el destino ha tirado los dados.",image:"https://i.postimg.cc/s2krL4L6/Video-con-humo-llamas-y-nubes-1.gif"},{text:"Te tocas el cuello. El piloto LED del collar inhibidor est apagado. El impacto ha frito los circuitos. Estis libres. Pero en este mundo, la libertad tiene un precio: ahora sois presas. El humo negro es una baliza; el ruido del choque, una campana de cena para cada mordedor hambriento en cinco kilmetros a la redonda. Ya puedes or sus gruidos mezclndose con sirenas distantes.",image:"https://i.postimg.cc/JnyLZtZn/Animacion-realista-de-imagen-estatica.gif"},{text:"Una figura aparece recortada por las llamas. No lleva el uniforme de la Trada. Os tiende una mano llena de cicatrices y grasa. Podis quedaros ah tirados y ser el aperitivo, o podis levantaros y ser los que aprietan el gatillo. El refugio est cerca pero el asfalto se va a teir de rojo antes de que lleguemos.",image:"https://i.postimg.cc/4xpjWHtk/Mind-Video-20251212162510-850.gif"}],zombie:[{text:"Nosotros no fuimos a pelear una guerra. Fuimos a terminar con una. Jennifer Walters (She-Hulk) nos haba llamado a gritos. La Trada (Doom, Magneto, Fisk) haba secuestrado a Bruce Banner. Su plan: usar el 'Pulso Nulificador' para convertir a los superhumanos en esclavos. Nuestra misin era sencilla: infiltrarnos en ese laboratorio de hormign, liberar a Bruce y desmantelar el arma. Estbamos all, apretando los dientes, listos para la pelea... Pero no pudimos llegar. El Pulso se activ, y todo fue demasiado rpido. Un segundo de retraso fue nuestra condena. El arma fall.",image:"https://i.postimg.cc/m2jR0zNC/Animacion-sutil-de-imagen-original.gif"},{text:"Cuando las alarmas sonaron, ya estbamos en los pasillos, y el color verde lo inund todo. El virus nos toc. Y, en lugar de matarnos, nos despert. El dolor se desvaneci, y en su lugar lleg el Hambre. No como un grito, sino como un fro constante, un vaco que ningn poder puede apagar. ramos hroes, y ahora somos el error. El laboratorio es ahora nuestro matadero personal. Y en el corazn del complejo, lo omos. Hulk no muri. El monstruo despert. Sin alma, sin freno. Cada latido suyo extiende la plaga Gamma. Ahora entendemos: Hulk es el origen, y lo ltimo que intentamos fue lo que desat la catstrofe.",image:"https://i.postimg.cc/RhvyRdYX/Animacion-sutil-de-vineta-comica.gif"},{text:"S.H.I.E.L.D. lleg tarde. Sellaron el complejo, bombardearon las coordenadas. Llaman a nuestra casa 'Zona Perdida'. El mundo exterior an cree que puede contener esto, que puede revertirlo. No saben que el origen sigue rugiendo. No saben que el virus nos ha otorgado un poder que nunca conocimos. Ya no se trata de salvacin. Se trata de expansin. Hemos aprendido a caminar con este vaco. Hemos aprendido a usar esta rabia. El virus aprendi a caminar. Y nosotros... vamos a cazarlo todo.",image:"https://i.postimg.cc/nhGFfZgp/Image-to-Video-(1).gif"}]},story:{loading:{line1:"INICIALIZANDO...",line2:"CARGANDO ARCHIVOS...",line3:"ACCEDIENDO A MEMORIA...",line4:"SISTEMA LISTO"},slides:[{text:"No hubo trompetas. No hubo cielos rojos ni profecas antiguas cumplindose. El fin del mundo no vino del espacio exterior, ni de una dimensin oscura.",image:"https://i.pinimg.com/1200x/18/99/ec/1899ec756f8731e015eb941d7122fbec.jpg"},{text:`Lo construimos nosotros. Aqu. En casa.
O mejor dicho, lo construyeron ellos.`,image:"https://i.pinimg.com/1200x/71/06/7d/71067db72856dfd6ca03d0d51a679bd6.jpg"},{text:`Fue en un laboratorio estril. Tres hombres se reunieron all: Victor Von Doom, Magneto y Wilson Fisk.
Decidieron que la humanidad era demasiado catica. Su solucin fue la ciencia fra y dura: el Pulso Nulificador.`,image:"https://i.pinimg.com/1200x/71/06/7d/71067db72856dfd6ca03d0d51a679bd6.jpg"},{text:"Necesitaban cuerpos para afinar la frmula. Usaron a Jamie Madrox para ver cmo se multiplicaba la infeccin. Usaron a los Reavers para ver si el metal poda enfermar. Y funcion.",image:"https://i.pinimg.com/1200x/99/80/1e/99801e7603e4a770127ce29530f13f87.jpg"},{text:"Pero la arrogancia es una pistola cargada que siempre apunta hacia atrs.",image:"https://i.pinimg.com/1200x/19/26/53/1926533335a2b27c4a79c9d2632ec83d.jpg"},{text:"Decidieron probar su obra maestra en Bruce Banner. Buscaban una fuente de energa infinita; lo que consiguieron fue una bomba biolgica.",image:"https://i.pinimg.com/1200x/b2/06/15/b20615925dfa53cdf9622fb596cdd5e3.jpg"},{text:"Cuando el virus toc la sangre gamma, no muri. Se enfureci. Banner no cay. La cosa que despert ya no tena a nadie al volante.",image:"https://i.pinimg.com/1200x/a8/e9/b7/a8e9b76d6a9a87de0cfba509d5fef534.jpg"},{text:"El estallido no fue de fuego, fue de contagio. Hulk roared, y en ese rugido viajaba la extincin.",image:"https://i.pinimg.com/1200x/eb/db/e8/ebdbe8d5738acd105654dc8ddad8216f.jpg"},{text:"En cuestin de horas, Nueva York era un matadero. Los Vengadores cayeron primero, destrozados por los amigos que intentaban salvar.",image:"https://i.pinimg.com/1200x/b9/0a/18/b90a18369639b131f91273f019b699cd.jpg"},{text:"Y la Trada? Doom, Magneto, y Fisk fueron alcanzados por su propia creacin. Pero el destino tiene un sentido del humor cruel.",image:"https://i.pinimg.com/1200x/e1/02/86/e102864e130bfa5b5f2ffc5a9d9ed9c0.jpg"},{text:"No perdieron la mente. Sus cuerpos se pudrieron, pero su intelecto permaneci intacto. Ahora se sientan en tronos de huesos, gobernando facciones de pesadilla.",image:"https://i.pinimg.com/1200x/e2/5c/3a/e25c3ac26e5fc65f9119b6073912e856.jpg"},{text:"Pero hay algo ms ah fuera. S.H.I.E.L.D. sigue activo. No es una agencia; es un fantasma armado. Una IA paranoica que ha decidido que la nica forma de mantener el orden es eliminar todo lo que se mueva.",image:"https://i.pinimg.com/1200x/39/c8/cd/39c8cde0a5b56acc78b41c4eecf91f0a.jpg"},{text:"As que aqu ests. De pie sobre las cenizas. Ya no se trata de salvar el mundo. Se trata de ver quin queda en pie.",image:"https://i.pinimg.com/1200x/45/7d/c5/457dc515c61d470eb26cf1727ebd67ea.jpg"},{text:"Dime, superviviente... en esta nueva era de monstruos y mquinas: QU ERES T?",image:"https://i.pinimg.com/1200x/18/85/ee/1885ee42132b6976d36896a81f33ad8c.jpg"}],choose:"ELIGE TU DESTINO",optionA:"SUPERVIVIENTE",optionB:"ZOMBIE",skip:"OMITIR",prev:"ANTERIOR",next:"SIGUIENTE"},tutorial:{welcome:{title:"BIENVENIDO A SHIELD",text:"El mundo ha cado, pero la resistencia contina. Esta es tu interfaz de mando."},map_zones:{title:"ZONAS DE CONTROL",text:"El mapa muestra los territorios controlados por las facciones. Ten cuidado al desplegar tus agentes."},hulk:{title:"AMENAZA MVIL",text:"Hulk Zombie vaga por el mapa. Evita el contacto directo a menos que ests preparado."},missions:{title:"MISIONES ACTIVAS",text:"Aqu aparecern las misiones disponibles. Compltalas para obtener recursos y avanzar en la historia."},bunker_entry:{title:"ACCESO AL BNKER",text:"Gestiona tu equipo, recluta nuevos hroes y revisa el estado de tus agentes aqu."},roster:{title:"LISTA DE AGENTES",text:"Tus hroes disponibles. Haz clic para ver detalles y asignar misiones."},file:{title:"EXPEDIENTE",text:"Informacin detallada del agente. Aqu puedes ver su historia y objetivos personales."},recruit:{title:"RECLUTAMIENTO",text:"Busca y recluta nuevos hroes de la base de datos de SHIELD."},finish:{title:"LISTO PARA EL COMBATE",text:"Buena suerte, Comandante. La humanidad depende de ti."},finishBtn:"FINALIZAR",skip:"OMITIR",next:"SIGUIENTE"}},en:{header:{project:"PROJECT: LAZARUS",failure:"CONTAINMENT FAILURE",biohazard:"BIOHAZARD",clearance:"CLEARANCE: OMEGA",saving:"SAVING...",saved:"SAVED",logout:"LOGOUT"},sidebar:{threatLevelTitle:"THREAT LEVEL",threatLevelValue:"CRITICAL",infectionRate:"INFECTION RATE: 89%",hiveBtn:"HIVE ACCESS",bunkerBtn:"BUNKER ACCESS",campaignMode:"CAMPAIGN MODE",activeMissions:"ACTIVE MISSIONS",noMissions:"NO MISSIONS AVAILABLE",replayStory:"REPLAY INTRO"},map:{sector:"SECTOR",loading:"LOADING SATELLITE DATA...",error:"CONNECTION ERROR",hive:"HIVE",bunker:"BUNKER"},factions:{magneto:{name:"Broken Eden (Magneto)"},kingpin:{name:"Empire of Flesh"},hulk:{name:"Hulk's Wasteland"},doom:{name:"Doomsberg (Latveria)"},neutral:{name:"Neutral Zone"}},login:{title:"SHIELD OS",subtitle:"ZOMBIE RESPONSE SYSTEM",clearance:"AUTHORIZATION REQUIRED",idPrompt:"SCAN BIOMETRIC ID",scanning:"SCANNING...",granted:"ACCESS GRANTED",scanBtn:"INITIATE RETINA SCAN",googleBtn:"SHIELD OFFICIAL ACCESS (GOOGLE)",editorBtn:"EDITOR ACCESS",editorPass:"COMMAND PASSWORD",error:"AUTHENTICATION ERROR",passError:"INCORRECT PASSWORD"},missionModal:{title:"MISSION FILE",threat:"THREAT LEVEL",briefing:"MISSION BRIEFING",objectives:"PRIMARY OBJECTIVES",downloadPdf:"DOWNLOAD FULL TACTICAL REPORT",cancel:"CANCEL",reactivate:"REACTIVATE",sending:"SENDING...",sent:"REPORT SENT",complete:"REPORT SUCCESS",accept:"ACCEPT MISSION",outcomeTitle:"MISSION DEBRIEF",closeReport:"ARCHIVE REPORT"},bunker:{title:"FORWARD COMMAND POST",hiveTitle:"HIVE NEXUS",return:"RETURN TO MAP",roster:"ASSET LIST",recruit:"RECRUIT",currentStory:"CURRENT STATUS",objectives:"PERSONAL OBJECTIVES",status:"STATUS",unassign:"WITHDRAW",assign:"ASSIGN TO MISSION",viewFile:"VIEW PERSONNEL FILE",manageSquad:"MANAGE SQUAD",assignModalTitle:"SELECT MISSION",squadModalTitle:"SQUAD ASSIGNMENT",addToMission:"ADD TO MISSION",removeFromMission:"REMOVE FROM MISSION",noMissions:"NO MISSIONS AVAILABLE",cancel:"CANCEL",maxHeroes:"MAXIMUM CAPACITY REACHED",omega:{title:"OMEGA CYLINDERS",desc:"Reprogrammed nanobots capable of reversing the infection.",empty:"RESERVES DEPLETED",find:"SCAVENGE SUPPLIES",found:"CYLINDER FOUND!",notFound:"SEARCH FAILED"},rooms:{command:"WAR ROOM",commandDesc:"Active missions and tactical deployment.",barracks:"BARRACKS",barracksDesc:"Reserve agents ready for deployment.",medbay:"MEDBAY / CONTAINMENT",medbayDesc:"Treatment and scanning of new subjects.",cerebro:"CEREBRO INTERFACE",cerebroDesc:"Global search and recruitment."}},recruit:{title:"HERO RECRUITMENT",selectDb:"S.H.I.E.L.D. DATABASE",loadingDb:"ACCESSING FILES...",alias:"CODENAME",name:"REAL NAME",fileUrl:"FILE URL (IMAGE/PDF)",scanZombie:"SCAN: ZOMBIE SIGNALS (CURE)",scanHuman:"SCAN: FRESH MEAT (INFECT)",adminSeed:"ADMIN: RESET DB",seedSuccess:"DB RESET",submit:"RECLUTAR AGENTE"},missionEditor:{title:"MISSION EDITOR",missionTitle:"MISSION TITLE",location:"LOCATION (STATE)",threat:"THREAT LEVEL",type:"MISSION TYPE",prereq:"PREREQUISITE MISSION",pdfUrl:"PDF URL (OPTIONAL)",description:"DESCRIPTION",outcome:"OUTCOME TEXT (OPTIONAL)",objectives:"OBJECTIVES",addObjective:"ADD OBJECTIVE",objTitle:"Objective Title",objDesc:"Objective Description",cancel:"CANCEL",save:"SAVE CHANGES"},events:{anomaly:{alive:{title:"COSMIC ANOMALY DETECTED",desc:"UNKNOWN ENERGY READINGS IN DEEP SPACE. REED RICHARDS CONFIRMA: A PLANET IN THE VEGA SYSTEM CEASED TO EXIST INSTANTANEOUSLY.",ack:"CONTINUE MONITORING"},zombie:{title:"COMPETITION DETECTED",desc:"THE HUNGER SENSES A DISTURBANCE. ZOMBIE PYM REPORTS: SOMETHING ELSE IS DEVOURING PLANETS IN DEEP SPACE. IS IT FOOD OR A RIVAL?",ack:"TRACK PREY"}},surfer:{alive:{title:"FALL OF THE HERALD",desc:"SILVER OBJECT ENTERED ATMOSPHERE. INTERCEPTED BY HULK IN KANSAS. FOOTAGE CONFIRMS INFECTION. SILVER SURFER HAS FALLEN TO THE HUNGER.",ack:"ACTIVATE OMEGA PROTOCOL",image:"https://i.pinimg.com/1200x/ed/22/4b/ed224b12777f7372e1a4b6ca74912cf9.jpg"},zombie:{title:"FAST FOOD DELIVERY",desc:"A SILVER BEING HAS ENTERED THE ATMOSPHERE. TASTES LIKE COSMIC POWER. HULK HAS ALREADY TAKEN A BITE. THE HERALD IS OURS.",ack:"CONSUME POWER",image:"https://i.pinimg.com/1200x/ed/22/4b/ed224b12777f7372e1a4b6ca74912cf9.jpg"}},galactus:{alive:{title:"ARRIVAL OF GALACTUS",desc:"THE DEVOURER OF WORLDS IS IN ORBIT. THE SKY HAS TURNED PURPLE. HE IS NOT HERE TO SAVE US. HE IS HERE TO EAT. THE FINAL BATTLE FOR EARTH HAS BEGUN.",ack:"PREPARE FOR JUDGMENT",image:"https://i.pinimg.com/736x/03/c7/6c/03c76c56fccbdc6bc57aff5c1b506089.jpg"},zombie:{title:"THE MAIN COURSE",desc:"GALACTUS IS HERE. HE IS GIANT. HE IS FULL OF ENERGY. IF WE EAT THIS SPACE GOD, WE WILL NEVER HUNGER AGAIN. DINNER IS SERVED!",ack:"DEVOUR THE DEVOURER",image:"https://i.pinimg.com/736x/03/c7/6c/03c76c56fccbdc6bc57aff5c1b506089.jpg"}}},missions:{kraven:{title:"KRAVEN'S HUNT",description:["Kraven the Hunter has established a hunting zone in Central Park. He is using survivors as bait.","We must stop him before he kills more innocents."],objectives:[{title:"Locate Kraven",desc:"Track his movements in Central Park."},{title:"Neutralize Kraven",desc:"End the threat."}]},fleshSleeps:{title:"WHERE FLESH SLEEPS",description:["We have detected an underground facility where Kingpin stores 'fresh meat'.","It's a human farm. We must liberate them."],objectives:[{title:"Infiltration",desc:"Enter the facility undetected."},{title:"Liberation",desc:"Free the prisoners."}]},bases:{alpha:"BASE ALPHA",beta:"BASE BETA",gamma:"BASE GAMMA",delta:"BASE DELTA",epsilon:"BASE EPSILON",zeta:"BASE ZETA",desc:"Former S.H.I.E.L.D. operating base. May contain vital supplies.",objSecure:"Secure the perimeter",objRetrieve:"Retrieve data"},galactus:{title:"JUDGMENT DAY",description:["Galactus has begun to feed. We must stop him or Earth will be destroyed.","All available heroes must converge on his position."],objectives:[{title:"Attack Galactus",desc:"Coordinate a massive attack."},{title:"Save Earth",desc:"Prevent total destruction."}]}},heroes:{hawkeye:{alias:"HAWKEYE",bio:"Master archer and assassin. Never misses."},lukecage:{alias:"LUKE CAGE",bio:"Unbreakable skin and superhuman strength."},daredevil:{alias:"DAREDEVIL",bio:"The Man Without Fear. Heightened senses."},thor:{alias:"THOR",bio:"God of Thunder. Wields the power of Mjolnir."},storm:{alias:"STORM",bio:"Controls the weather. A goddess among mortals."}},introSequence:{alive:[{text:"The ringing in your ears is the only thing drowning out the screams of the dying. You taste copper; blood. The Triad's armored transport, that cage on wheels taking you to the slaughterhouse, is now a twisted mass of metal and burnt flesh. They were going to sell you, use you as guinea pigs or entertainment... but fate has rolled the dice.",image:"https://i.postimg.cc/s2krL4L6/Video-con-humo-llamas-y-nubes-1.gif"},{text:"You touch your neck. The inhibitor collar's LED is off. The impact fried the circuits. You are free. But in this world, freedom comes at a price: now you are prey. The black smoke is a beacon; the crash noise, a dinner bell for every hungry biter within five kilometers. You can already hear their growls mixing with distant sirens.",image:"https://i.postimg.cc/JnyLZtZn/Animacion-realista-de-imagen-estatica.gif"},{text:"A figure appears silhouetted by the flames. She doesn't wear the Triad uniform. She extends a hand covered in scars and grease. 'You can stay there lying down and be the appetizer, or you can get up and be the ones pulling the trigger. The shelter is close... but the asphalt is going to run red before we get there.'",image:"https://i.postimg.cc/4xpjWHtk/Mind-Video-20251212162510-850.gif"}],zombie:[{text:"We didn't go to fight a war. We went to end one. Jennifer Walters (She-Hulk) had screamed for us. The Triad (Doom, Magneto, Fisk) had kidnapped Bruce Banner. Their plan: use the 'Nullifier Pulse' to turn superhumans into slaves. Our mission was simple: infiltrate that concrete lab, free Bruce, and dismantle the weapon. We were there, gritting our teeth, ready for the fight... But we couldn't make it. The Pulse activated, and everything happened too fast. A second of delay was our doom. The weapon failed.",image:"https://i.postimg.cc/m2jR0zNC/Animacion-sutil-de-imagen-original.gif"},{text:"When the alarms rang, we were already in the hallways, and the green color flooded everything. The virus touched us. And, instead of killing us, it woke us up. The pain vanished, and in its place came the Hunger. Not like a scream, but like a constant cold, a void that no power can quench. We were heroes, and now we are the mistake. The lab is now our personal slaughterhouse. And in the heart of the complex, we hear him. Hulk didn't die. The monster woke up. Soulless, unrestrained. Every beat of his heart spreads the Gamma plague. Now we understand: Hulk is the origin, and the last thing we tried was what unleashed the catastrophe.",image:"https://i.postimg.cc/RhvyRdYX/Animacion-sutil-de-vineta-comica.gif"},{text:"S.H.I.E.L.D. arrived too late. They sealed the complex, bombed the coordinates. They call our home 'Lost Zone'. The outside world still believes it can contain this, that it can reverse it. They don't know the origin is still roaring. They don't know the virus has granted us a power we never knew. It's no longer about salvation. It's about expansion. We have learned to walk with this void. We have learned to use this rage. The virus learned to walk. And we... are going to hunt it all.",image:"https://i.postimg.cc/nhGFfZgp/Image-to-Video-(1).gif"}]},story:{loading:{line1:"INITIALIZING...",line2:"LOADING FILES...",line3:"ACCESSING MEMORY...",line4:"SYSTEM READY"},slides:[{text:"There were no trumpets. No red skies or ancient prophecies being fulfilled. The end of the world didn't come from outer space, nor from a dark dimension.",image:"https://i.pinimg.com/1200x/18/99/ec/1899ec756f8731e015eb941d7122fbec.jpg"},{text:`We built it. Here. At home.
Or rather, *they* built it.`,image:"https://i.pinimg.com/1200x/71/06/7d/71067db72856dfd6ca03d0d51a679bd6.jpg"},{text:`It happened in a sterile laboratory. Three men met there: Victor Von Doom, Magneto, and Wilson Fisk.
They decided that humanity was too chaotic. Their solution was cold, hard science: the Nullifier Pulse.`,image:"https://i.pinimg.com/1200x/71/06/7d/71067db72856dfd6ca03d0d51a679bd6.jpg"},{text:"They needed bodies to fine-tune the formula. They used Jamie Madrox to see how the infection multiplied. They used the Reavers to see if metal could get sick. And it worked.",image:"https://i.pinimg.com/1200x/99/80/1e/99801e7603e4a770127ce29530f13f87.jpg"},{text:"But arrogance is a loaded gun that always points back at you.",image:"https://i.pinimg.com/1200x/19/26/53/1926533335a2b27c4a79c9d2632ec83d.jpg"},{text:"They decided to test their masterpiece on Bruce Banner. They sought an infinite power source; what they got was a biological bomb.",image:"https://i.pinimg.com/1200x/b2/06/15/b20615925dfa53cdf9622fb596cdd5e3.jpg"},{text:"When the virus touched the gamma blood, it didn't die. It became enraged. Banner didn't fall. The thing that woke up had no one at the wheel anymore.",image:"https://i.pinimg.com/1200x/a8/e9/b7/a8e9b76d6a9a87de0cfba509d5fef534.jpg"},{text:"The blast wasn't fire, it was contagion. Hulk roared, and extinction traveled in that roar.",image:"https://i.pinimg.com/1200x/eb/db/e8/ebdbe8d5738acd105654dc8ddad8216f.jpg"},{text:"In a matter of hours, New York was a slaughterhouse. The Avengers fell first, torn apart by the friends they were trying to save.",image:"https://i.pinimg.com/1200x/b9/0a/18/b90a18369639b131f91273f019b699cd.jpg"},{text:"And the Triad? Doom, Magneto, and Fisk were caught by their own creation. But fate has a cruel sense of humor.",image:"https://i.pinimg.com/1200x/e1/02/86/e102864e130bfa5b5f2ffc5a9d9ed9c0.jpg"},{text:"They didn't lose their minds. Their bodies rotted, but their intellect remained intact. Now they sit on thrones of bone, ruling nightmare factions.",image:"https://i.pinimg.com/1200x/e2/5c/3a/e25c3ac26e5fc65f9119b6073912e856.jpg"},{text:"But there is something else out there. S.H.I.E.L.D. is still active. It is not an agency; it is a weaponized ghost. A paranoid AI that has decided the only way to maintain order is to eliminate everything that moves.",image:"https://i.pinimg.com/1200x/39/c8/cd/39c8cde0a5b56acc78b41c4eecf91f0a.jpg"},{text:"So here you are. Standing on the ashes. It's no longer about saving the world. It's about seeing who is left standing.",image:"https://i.pinimg.com/1200x/45/7d/c5/457dc515c61d470eb26cf1727ebd67ea.jpg"},{text:"Tell me, survivor... in this new era of monsters and machines: WHAT ARE YOU?",image:"https://i.pinimg.com/1200x/18/85/ee/1885ee42132b6976d36896a81f33ad8c.jpg"}],choose:"CHOOSE YOUR DESTINY",optionA:"SURVIVOR",optionB:"ZOMBIE",skip:"SKIP",prev:"PREV",next:"NEXT"},tutorial:{welcome:{title:"WELCOME TO SHIELD",text:"The world has fallen, but the resistance continues. This is your command interface."},map_zones:{title:"CONTROL ZONES",text:"The map shows territories controlled by factions. Be careful when deploying your agents."},hulk:{title:"MOBILE THREAT",text:"Zombie Hulk roams the map. Avoid direct contact unless you are prepared."},missions:{title:"ACTIVE MISSIONS",text:"Available missions will appear here. Complete them to gain resources and advance the story."},bunker_entry:{title:"BUNKER ACCESS",text:"Manage your team, recruit new heroes, and check the status of your agents here."},roster:{title:"AGENT LIST",text:"Your available heroes. Click to view details and assign missions."},file:{title:"DOSSIER",text:"Detailed agent information. Here you can view their history and personal objectives."},recruit:{title:"RECRUITMENT",text:"Search and recruit new heroes from the SHIELD database."},finish:{title:"READY FOR COMBAT",text:"Good luck, Commander. Humanity depends on you."},finishBtn:"FINISH",skip:"SKIP",next:"NEXT"}}},B=(t,e,n,r,i,s,o)=>({id:t,templateId:t,name:e,alias:n,class:r,bio:i,status:"AVAILABLE",currentStory:"",objectives:[],completedObjectiveIndices:[],imageUrl:s,characterSheetUrl:"",stats:{strength:o.s,agility:o.a,intellect:o.i},assignedMissionId:null}),G="https://i.pinimg.com/736x/63/1e/3a/631e3a68228c97963e78381ad11bf3bb.jpg",wn=[{id:"core_box",name:"Marvel Zombies (Core Box)",heroes:[B("h_panther","T'Challa","BLACK PANTHER","BRAWLER","Rey de Wakanda.","https://i.pinimg.com/736x/22/16/63/2216634b075306cb6de8e099f92b95b6.jpg",{s:8,a:9,i:9}),B("h_strange","Stephen Strange","DOCTOR STRANGE","BLASTER","Hechicero Supremo.","https://i.pinimg.com/736x/5c/e3/38/5ce3385c44cd7c8023c1ddf62d3d954a.jpg",{s:4,a:5,i:10}),B("h_msmarvel","Kamala Khan","MS. MARVEL","BRAWLER","Inhumana elstica.","https://i.pinimg.com/736x/a5/8f/e9/a58fe99516a31f494c1d4dcb22231c46.jpg",{s:7,a:7,i:6}),B("h_scarlet","Wanda Maximoff","SCARLET WITCH","BLASTER","Magia del Caos.","https://i.pinimg.com/736x/13/4c/e4/134ce4e1ef6112ad48a0883e1c5e4f23.jpg",{s:5,a:6,i:10}),B("h_spidey","Peter Parker","SPIDER-MAN","SCOUT","Tu vecino y amigo.","https://i.pinimg.com/736x/97/f1/96/97f1965bf162c5eb2f7aa8cb4be4bf97.jpg",{s:7,a:10,i:8}),B("h_thor","Thor Odinson","THOR","BRAWLER","Dios del Trueno.","https://i.pinimg.com/736x/43/45/8b/43458b29272370723226334336066223.jpg",{s:10,a:6,i:5})],zombieHeroes:[B("z_cap","Steve Rogers","CAPTAIN AMERICA","TACTICIAN","El Primer Vengador... cado.","https://i.pinimg.com/736x/be/82/49/be8249c6a34eb0a40c3429cca8504bab.jpg",{s:8,a:7,i:8}),B("z_marvel","Carol Danvers","CAPTAIN MARVEL","BLASTER","Energa csmica corrupta.","https://i.pinimg.com/736x/b2/89/d4/b289d415b0b846ffc85a7956d576915b.jpg",{s:9,a:7,i:6}),B("z_deadpool","Wade Wilson","DEADPOOL","SCOUT","El mercenario bocazas (y mordedor).","https://i.pinimg.com/736x/26/e3/38/26e3385c44cd7c8023c1ddf62d3d954a.jpg",{s:7,a:8,i:5}),B("z_hulk","Bruce Banner","HULK","BRAWLER","HULK TIENE HAMBRE.","https://i.pinimg.com/736x/bb/2a/f6/bb2af63dbdbf782daf9af337915489c0.jpg",{s:10,a:5,i:3}),B("z_ironman","Tony Stark","IRON MAN","BLASTER","Tecnologa canbal.","https://i.pinimg.com/736x/3a/ad/5b/3aad5b8a9b89b928e33bd8e71a047de1.jpg",{s:7,a:6,i:10}),B("z_wasp","Janet Van Dyne","WASP","SCOUT","Pequea y letal.","https://i.pinimg.com/736x/5c/e8/83/5ce883dd3030f0b7f85a847bcaf47486.jpg",{s:4,a:10,i:6})]},{id:"xmen_resistance",name:"X-Men Resistance",heroes:[B("h_colossus","Piotr Rasputin","COLOSSUS","BRAWLER","Acero orgnico.","https://i.pinimg.com/736x/ec/e9/87/ece98736e0cca78734ed0d4a29e222b1.jpg",{s:10,a:4,i:5}),B("h_magneto","Erik Lehnsherr","MAGNETO","TACTICIAN","Amo del magnetismo.","https://i.pinimg.com/736x/c0/b5/d5/c0b5d511f39d428725dd24e5d883a548.jpg",{s:6,a:5,i:10}),B("h_mystique","Raven Darkholme","MYSTIQUE","SCOUT","Cambiaformas letal.","https://i.pinimg.com/736x/a5/8f/e9/a58fe99516a31f494c1d4dcb22231c46.jpg",{s:5,a:9,i:8}),B("h_rogue","Anna Marie","ROGUE","BRAWLER","Absorcin de poderes.","https://i.pinimg.com/736x/3d/04/bd/3d04bd41a1f395cf2bf4324729734f1e.jpg",{s:9,a:6,i:5}),B("h_storm","Ororo Munroe","STORM","BLASTER","Diosa del clima.","https://i.pinimg.com/736x/32/33/21/32332155621526365215151216515151.jpg",{s:5,a:8,i:8}),B("h_wolverine","Logan","WOLVERINE","BRAWLER","El mejor en lo que hace.","https://i.pinimg.com/736x/31/eb/4c/31eb4c0f0dba5c96c80da093a4d83a50.jpg",{s:8,a:8,i:6})],zombieHeroes:[B("z_cyclops","Scott Summers","CYCLOPS","TACTICIAN","Lder cado.","https://i.pinimg.com/736x/c0/b5/d5/c0b5d511f39d428725dd24e5d883a548.jpg",{s:6,a:6,i:8}),B("z_phoenix","Jean Grey","DARK PHOENIX","BLASTER","Fuego csmico.","https://i.pinimg.com/736x/77/26/00/772600dfc2f3599608a19f4618aedcb8.jpg",{s:10,a:6,i:7}),B("z_iceman","Bobby Drake","ICEMAN","BLASTER","Cero absoluto.","https://i.pinimg.com/736x/e6/bf/cb/e6bfcb7bc171610a028f1f2bbda38e29.jpg",{s:5,a:7,i:5}),B("z_juggernaut","Cain Marko","JUGGERNAUT","BRAWLER","Imparable.","https://i.pinimg.com/736x/ec/e9/87/ece98736e0cca78734ed0d4a29e222b1.jpg",{s:10,a:4,i:3}),B("z_psylocke","Betsy Braddock","PSYLOCKE","SCOUT","Cuchillo psquico.","https://i.pinimg.com/736x/3d/04/bd/3d04bd41a1f395cf2bf4324729734f1e.jpg",{s:6,a:9,i:7}),B("z_sabretooth","Victor Creed","SABRETOOTH","BRAWLER","Depredador.","https://i.pinimg.com/736x/31/eb/4c/31eb4c0f0dba5c96c80da093a4d83a50.jpg",{s:9,a:7,i:4})]},{id:"f4_siege",name:"Fantastic 4: Under Siege",heroes:[B("h_humantorch","Johnny Storm","HUMAN TORCH","BLASTER","Llamas a m!","https://i.pinimg.com/736x/43/45/8b/43458b29272370723226334336066223.jpg",{s:6,a:9,i:5}),B("h_invisiblewoman","Sue Storm","INVISIBLE WOMAN","SCOUT","Campos de fuerza.","https://i.pinimg.com/736x/b8/33/d5/b833d599d8b2049ff72014182c1d98ea.jpg",{s:5,a:6,i:8}),B("h_mrfantastic","Reed Richards","MISTER FANTASTIC","TACTICIAN","Mente elstica.","https://i.pinimg.com/736x/58/3c/d3/583cd39457c96e1858ecfbab1db06cce.jpg",{s:5,a:7,i:10}),B("h_superskull","Kl'rt","SUPER-SKRULL","TACTICIAN","El poder de los 4.",G,{s:9,a:7,i:7}),B("h_thing","Ben Grimm","THE THING","BRAWLER","Es la hora de las tortas.","https://i.pinimg.com/736x/ec/e9/87/ece98736e0cca78734ed0d4a29e222b1.jpg",{s:10,a:4,i:6})],zombieHeroes:[B("z_blackbolt","Blackagar Boltagon","BLACK BOLT","BLASTER","Voz destructiva.",G,{s:9,a:6,i:7}),B("z_doom","Victor Von Doom","DOCTOR DOOM","TACTICIAN","Gobernante de Latveria.",G,{s:8,a:6,i:10}),B("z_invisiblewoman","Sue Storm","INVISIBLE WOMAN (Z)","SCOUT","Invisible y mortal.",G,{s:5,a:6,i:8}),B("z_mrfantastic","Reed Richards","MISTER FANTASTIC (Z)","TACTICIAN","Cerebro podrido.",G,{s:5,a:7,i:10}),B("z_namor","Namor","NAMOR","BRAWLER","Imperius Rex.",G,{s:9,a:7,i:6}),B("z_superskull","Kl'rt","SUPER-SKRULL (Z)","TACTICIAN","Todos los poderes.",G,{s:9,a:7,i:7}),B("z_thing","Ben Grimm","THE THING (Z)","BRAWLER","Roca muerta.",G,{s:10,a:4,i:6})]},{id:"sinister_six",name:"Clash of the Sinister Six",heroes:[B("h_blackcat","Felicia Hardy","BLACK CAT","SCOUT","Mala suerte.",G,{s:5,a:9,i:6}),B("h_greengoblin","Norman Osborn","GREEN GOBLIN","BLASTER","Bombas calabaza.",G,{s:7,a:8,i:9}),B("h_kraven","Sergei Kravinoff","KRAVEN","SCOUT","El cazador.",G,{s:8,a:8,i:6}),B("h_mysterio","Quentin Beck","MYSTERIO","TACTICIAN","Maestro de la ilusin.",G,{s:4,a:6,i:9}),B("h_rhino","Aleksei Sytsevich","RHINO","BRAWLER","Carga brutal.",G,{s:9,a:4,i:3}),B("h_sandman","William Baker","SANDMAN","BRAWLER","Cuerpo de arena.",G,{s:8,a:5,i:4}),B("h_scorpion","Mac Gargan","SCORPION","BRAWLER","Cola letal.",G,{s:8,a:7,i:4}),B("h_venom","Eddie Brock","VENOM","BRAWLER","Simbionte letal.",G,{s:9,a:7,i:5})],zombieHeroes:[B("z_docock","Otto Octavius","DOCTOR OCTOPUS","TACTICIAN","Brazos mecnicos.",G,{s:7,a:6,i:10}),B("z_electro","Max Dillon","ELECTRO","BLASTER","Alto voltaje.",G,{s:6,a:7,i:5}),B("z_greengoblin","Norman Osborn","GREEN GOBLIN (Z)","BLASTER","Locura verde.",G,{s:7,a:8,i:9}),B("z_lizard","Curt Connors","LIZARD","BRAWLER","Instinto reptil.",G,{s:8,a:7,i:7}),B("z_mysterio","Quentin Beck","MYSTERIO (Z)","TACTICIAN","Ilusin mortal.",G,{s:4,a:6,i:9}),B("z_rhino","Aleksei Sytsevich","RHINO (Z)","BRAWLER","Carga zombie.",G,{s:9,a:4,i:3}),B("z_venom","Eddie Brock","VENOM (Z)","BRAWLER","Hambre simbionte.",G,{s:9,a:7,i:5}),B("z_vulture","Adrian Toomes","VULTURE","SCOUT","Ataque areo.",G,{s:5,a:8,i:7})]},{id:"hydra_resurrection",name:"Hydra Resurrection",heroes:[B("h_antman","Scott Lang","ANT-MAN","SCOUT","Tamao variable.",G,{s:4,a:8,i:7}),B("h_blackwidow","Natasha Romanoff","BLACK WIDOW","SCOUT","Espa maestra.",G,{s:5,a:9,i:8}),B("h_falcon","Sam Wilson","FALCON","SCOUT","Vuelo tctico.",G,{s:6,a:8,i:6}),B("h_quicksilver","Pietro Maximoff","QUICKSILVER","SCOUT","Velocidad snica.",G,{s:6,a:10,i:5}),B("h_redskull","Johann Schmidt","RED SKULL","TACTICIAN","Hail Hydra.",G,{s:6,a:6,i:9}),B("h_shehulk","Jennifer Walters","SHE-HULK","BRAWLER","Fuerza legal.",G,{s:10,a:5,i:7}),B("h_vision","Vision","VISION","BLASTER","Densidad variable.",G,{s:9,a:6,i:10})],zombieHeroes:[B("z_blackwidow","Natasha Romanoff","BLACK WIDOW (Z)","SCOUT","Asesina silenciosa.",G,{s:5,a:9,i:8}),B("z_falcon","Sam Wilson","FALCON (Z)","SCOUT","Depredador areo.",G,{s:6,a:8,i:6}),B("z_hawkeye","Clint Barton","HAWKEYE (Z)","SCOUT","Puntera muerta.",G,{s:6,a:9,i:6}),B("z_loki","Loki Laufeyson","LOKI","TACTICIAN","Dios del engao.",G,{s:7,a:7,i:9}),B("z_quicksilver","Pietro Maximoff","QUICKSILVER (Z)","SCOUT","Muerte rpida.",G,{s:6,a:10,i:5}),B("z_shehulk","Jennifer Walters","SHE-HULK (Z)","BRAWLER","Furia gamma.",G,{s:10,a:5,i:7})]},{id:"guardians_galaxy",name:"Guardians of the Galaxy Set",heroes:[B("h_drax","Drax","DRAX","BRAWLER","El Destructor.",G,{s:9,a:5,i:4}),B("h_gamora","Gamora","GAMORA","BRAWLER","La mujer ms letal.",G,{s:7,a:9,i:6}),B("h_groot","Groot","GROOT","BRAWLER","Yo soy Groot.",G,{s:9,a:4,i:5}),B("h_mantis","Mantis","MANTIS","TACTICIAN","Empata.",G,{s:4,a:7,i:8}),B("h_nebula","Nebula","NEBULA","SCOUT","Cyborg asesina.",G,{s:7,a:8,i:7}),B("h_nova","Richard Rider","NOVA","BLASTER","Cohete humano.",G,{s:8,a:9,i:6}),B("h_rocket","Rocket","ROCKET","BLASTER","Armas pesadas.",G,{s:4,a:8,i:9})],zombieHeroes:[B("z_drax","Drax","DRAX (Z)","BRAWLER","Destructor hambriento.",G,{s:9,a:5,i:4}),B("z_mantis","Mantis","MANTIS (Z)","TACTICIAN","Mente colmena.",G,{s:4,a:7,i:8}),B("z_nebula","Nebula","NEBULA (Z)","SCOUT","Mejora necrtica.",G,{s:7,a:8,i:7}),B("z_rocket","Rocket","ROCKET (Z)","BLASTER","Rabia pura.",G,{s:4,a:8,i:9}),B("z_starlord","Peter Quill","STAR-LORD (Z)","TACTICIAN","Lder cado.",G,{s:6,a:7,i:7}),B("z_thanos","Thanos","THANOS","BRAWLER","La muerte inevitable.",G,{s:10,a:5,i:10})]},{id:"galactus",name:"Galactus the Devourer",heroes:[B("h_surfer","Norrin Radd","SILVER SURFER","BLASTER","Poder csmico.",G,{s:9,a:10,i:8})],zombieHeroes:[B("z_surfer","Norrin Radd","SILVER SURFER (Z)","BLASTER","Heraldo del hambre.",G,{s:9,a:10,i:8})]},{id:"sentinel_strike",name:"Sentinel Strike",heroes:[B("h_nana","Nana","NANA","TACTICIAN","Centinela reprogramado.",G,{s:8,a:4,i:6}),B("h_profx","Charles Xavier","PROFESSOR X","TACTICIAN","Mente suprema.",G,{s:2,a:3,i:10})],zombieHeroes:[B("z_profx","Charles Xavier","PROFESSOR X (Z)","TACTICIAN","Cerebro muerto.",G,{s:2,a:3,i:10})]},{id:"artist_special",name:"Artist's Special Edition Set",heroes:[B("h_daredevil_art","Matt Murdock","DAREDEVIL (ARTIST)","BRAWLER","Edicin especial.",G,{s:7,a:9,i:8}),B("h_elektra_art","Elektra Natchios","DAREDEVIL ELEKTRA","SCOUT","La nueva Daredevil.",G,{s:6,a:10,i:7}),B("h_bullseye_art","Lester","MARSHALL BULLSEYE","BLASTER","La ley del oeste.",G,{s:6,a:9,i:6}),B("h_hawkeye_old","Clint Barton","OLD MAN HAWKEYE","SCOUT","El ltimo vengador.",G,{s:5,a:8,i:7}),B("h_logan_old","Logan","OLD MAN LOGAN","BRAWLER","Viejo y cansado.",G,{s:8,a:7,i:6}),B("h_spidey_art","Peter Parker","SPIDER-MAN (ARTIST)","SCOUT","Edicin especial.",G,{s:7,a:10,i:8})],zombieHeroes:[]},{id:"stretch_goals",name:"Stretch Goals (Promos)",heroes:[B("sg_baronzemo","Helmut Zemo","BARON ZEMO","TACTICIAN","Estratega.",G,{s:6,a:7,i:9}),B("sg_beast","Hank McCoy","BEAST","TACTICIAN","Genio bestial.",G,{s:8,a:8,i:9}),B("sg_blackbolt","Blackagar Boltagon","BLACK BOLT","BLASTER","Voz real.",G,{s:9,a:6,i:7}),B("sg_blackknight","Dane Whitman","BLACK KNIGHT","BRAWLER","Espada de bano.",G,{s:7,a:7,i:6}),B("sg_blade","Eric Brooks","BLADE","BRAWLER","Cazavampiros.",G,{s:8,a:8,i:6}),B("sg_bullseye","Lester","BULLSEYE","BLASTER","Puntera perfecta.",G,{s:6,a:9,i:5}),B("sg_cap","Steve Rogers","CAPTAIN AMERICA","TACTICIAN","El Capi.",G,{s:7,a:7,i:8}),B("sg_marvel","Carol Danvers","CAPTAIN MARVEL","BLASTER","Binaria.",G,{s:9,a:7,i:6}),B("sg_carnage","Cletus Kasady","CARNAGE","BRAWLER","Caos.",G,{s:9,a:8,i:3}),B("sg_crossbones","Brock Rumlow","CROSSBONES","BRAWLER","Mercenario.",G,{s:8,a:6,i:5}),B("sg_cyclops","Scott Summers","CYCLOPS","TACTICIAN","Lder X.",G,{s:6,a:6,i:8}),B("sg_daredevil","Matt Murdock","DAREDEVIL","BRAWLER","Sin miedo.",G,{s:7,a:9,i:8}),B("sg_darkphoenix","Jean Grey","DARK PHOENIX","BLASTER","Fuerza csmica.",G,{s:10,a:6,i:7}),B("sg_deadpool","Wade Wilson","DEADPOOL","BRAWLER","Regeneracin.",G,{s:7,a:8,i:5}),B("sg_doom","Victor Von Doom","DOCTOR DOOM","TACTICIAN","Latveria.",G,{s:8,a:6,i:10}),B("sg_docock","Otto Octavius","DOCTOR OCTOPUS","TACTICIAN","Tentculos.",G,{s:7,a:6,i:10}),B("sg_electro","Max Dillon","ELECTRO","BLASTER","Rayo vivo.",G,{s:6,a:7,i:5}),B("sg_elektra","Elektra Natchios","ELEKTRA","SCOUT","Ninja.",G,{s:6,a:9,i:6}),B("sg_emmafrost","Emma Frost","EMMA FROST","TACTICIAN","Diamante.",G,{s:5,a:6,i:9}),B("sg_gambit","Remy LeBeau","GAMBIT","BLASTER","Cartas.",G,{s:6,a:8,i:6}),B("sg_ghostrider","Johnny Blaze","GHOST RIDER","BRAWLER","Fuego infernal.",G,{s:9,a:7,i:5}),B("sg_hawkeye","Clint Barton","HAWKEYE","SCOUT","Arquero.",G,{s:6,a:9,i:6}),B("sg_hulk","Bruce Banner","HULK","BRAWLER","Aplasta.",G,{s:10,a:5,i:7}),B("sg_iceman","Bobby Drake","ICEMAN","BLASTER","Hielo.",G,{s:5,a:7,i:5}),B("sg_ironman","Tony Stark","IRON MAN","BLASTER","Stark Tech.",G,{s:7,a:6,i:10}),B("sg_jessicajones","Jessica Jones","JESSICA JONES","BRAWLER","Investigadora.",G,{s:8,a:6,i:6}),B("sg_juggernaut","Cain Marko","JUGGERNAUT","BRAWLER","Cyttorak.",G,{s:10,a:4,i:3}),B("sg_kingpin","Wilson Fisk","KINGPIN","BRAWLER","El Rey.",G,{s:9,a:4,i:8}),B("sg_kittypryde","Kitty Pryde","KITTY PRYDE","SCOUT","Fase.",G,{s:5,a:9,i:8}),B("sg_lizard","Curt Connors","LIZARD","BRAWLER","Reptil.",G,{s:8,a:7,i:7}),B("sg_loki","Loki","LOKI","TACTICIAN","Travesura.",G,{s:7,a:7,i:9}),B("sg_lukecage","Luke Cage","LUKE CAGE","BRAWLER","Piel dura.",G,{s:9,a:6,i:5}),B("sg_miles","Miles Morales","MILES MORALES","SCOUT","Spider-Man II.",G,{s:6,a:10,i:7}),B("sg_moonknight","Marc Spector","MOON KNIGHT","BRAWLER","Khonshu.",G,{s:7,a:8,i:6}),B("sg_morbius","Michael Morbius","MORBIUS","SCOUT","Vampiro.",G,{s:7,a:8,i:7}),B("sg_namor","Namor","NAMOR","BRAWLER","Atlantis.",G,{s:9,a:7,i:6}),B("sg_nightcrawler","Kurt Wagner","NIGHTCRAWLER","SCOUT","BAMF.",G,{s:5,a:10,i:6}),B("sg_psylocke","Betsy Braddock","PSYLOCKE","SCOUT","Mariposa.",G,{s:6,a:9,i:7}),B("sg_sabretooth","Victor Creed","SABRETOOTH","BRAWLER","Garras.",G,{s:9,a:7,i:4}),B("sg_shangchi","Shang-Chi","SHANG-CHI","BRAWLER","Kung Fu.",G,{s:7,a:10,i:7}),B("sg_spiderwoman","Jessica Drew","SPIDER-WOMAN","SCOUT","Veneno.",G,{s:7,a:8,i:7}),B("sg_starlord","Peter Quill","STAR-LORD","TACTICIAN","Legendario.",G,{s:6,a:7,i:7}),B("sg_vulture","Adrian Toomes","VULTURE","SCOUT","Alas.",G,{s:5,a:8,i:7}),B("sg_warmachine","James Rhodes","WAR MACHINE","BLASTER","Artillera.",G,{s:8,a:5,i:6}),B("sg_wasp","Janet Van Dyne","WASP","SCOUT","Tamao.",G,{s:4,a:10,i:7}),B("sg_wintersoldier","Bucky Barnes","WINTER SOLDIER","SCOUT","Brazo metal.",G,{s:7,a:8,i:6})],zombieHeroes:[B("sg_z_beast","Hank McCoy","BEAST (Z)","TACTICIAN","Bestia azul.",G,{s:8,a:8,i:9}),B("sg_z_blackcat","Felicia Hardy","BLACK CAT (Z)","SCOUT","Mala suerte.",G,{s:5,a:9,i:6}),B("sg_z_bullseye","Lester","BULLSEYE (Z)","BLASTER","Blanco fijo.",G,{s:6,a:9,i:5}),B("sg_z_colossus","Piotr Rasputin","COLOSSUS (Z)","BRAWLER","Metal muerto.",G,{s:10,a:4,i:5}),B("sg_z_daredevil","Matt Murdock","DAREDEVIL (Z)","BRAWLER","Sin miedo.",G,{s:7,a:9,i:8}),B("sg_z_strange","Stephen Strange","DOCTOR STRANGE (Z)","BLASTER","Magia negra.",G,{s:4,a:5,i:10}),B("sg_z_elektra","Elektra Natchios","ELEKTRA (Z)","SCOUT","Ninja zombie.",G,{s:6,a:9,i:6}),B("sg_z_gambit","Remy LeBeau","GAMBIT (Z)","BLASTER","Cartas.",G,{s:6,a:8,i:6}),B("sg_z_gamora","Gamora","GAMORA (Z)","BRAWLER","Asesina.",G,{s:7,a:9,i:6}),B("sg_z_giantman","Hank Pym","GIANT-MAN (Z)","BRAWLER","Hambre gigante.",G,{s:10,a:4,i:9}),B("sg_z_humantorch","Johnny Storm","HUMAN TORCH (Z)","BLASTER","Fuego.",G,{s:6,a:9,i:5}),B("sg_z_kingpin","Wilson Fisk","KINGPIN (Z)","BRAWLER","Jefe zombie.",G,{s:9,a:4,i:8}),B("sg_z_kraven","Sergei Kravinoff","KRAVEN (Z)","SCOUT","Cazador.",G,{s:8,a:8,i:6}),B("sg_z_lukecage","Luke Cage","LUKE CAGE (Z)","BRAWLER","Piel muerta.",G,{s:9,a:6,i:5}),B("sg_z_magneto","Erik Lehnsherr","MAGNETO (Z)","TACTICIAN","Magnetismo.",G,{s:6,a:5,i:10}),B("sg_z_moonknight","Marc Spector","MOON KNIGHT (Z)","BRAWLER","Luna muerta.",G,{s:7,a:8,i:6}),B("sg_z_msmarvel","Kamala Khan","MS. MARVEL (Z)","BRAWLER","Elstica.",G,{s:7,a:7,i:6}),B("sg_z_multipleman","Jamie Madrox","MULTIPLE MAN (Z)","SCOUT","Legin.",G,{s:5,a:7,i:6}),B("sg_z_mystique","Raven Darkholme","MYSTIQUE (Z)","SCOUT","Cambiaformas.",G,{s:5,a:9,i:8}),B("sg_z_nightcrawler","Kurt Wagner","NIGHTCRAWLER (Z)","SCOUT","Teleport.",G,{s:5,a:10,i:6}),B("sg_z_nova","Richard Rider","NOVA (Z)","BLASTER","Cohete.",G,{s:8,a:9,i:6}),B("sg_z_rogue","Anna Marie","ROGUE (Z)","BRAWLER","Absorcin.",G,{s:9,a:6,i:5}),B("sg_z_scarlet","Wanda Maximoff","SCARLET WITCH (Z)","BLASTER","Caos.",G,{s:5,a:6,i:10}),B("sg_z_scorpion","Mac Gargan","SCORPION (Z)","BRAWLER","Veneno.",G,{s:8,a:7,i:4}),B("sg_z_storm","Ororo Munroe","STORM (Z)","BLASTER","Tormenta.",G,{s:5,a:8,i:8}),B("sg_z_thor","Thor Odinson","THOR (Z)","BRAWLER","Trueno.",G,{s:10,a:6,i:5}),B("sg_z_wintersoldier","Bucky Barnes","WINTER SOLDIER (Z)","SCOUT","Soldado.",G,{s:7,a:8,i:6}),B("sg_z_wolverine","Logan","WOLVERINE (Z)","BRAWLER","Garras.",G,{s:8,a:8,i:6})]}],Jd="heroes",Dt=(t,e)=>{const n=Object.keys(t);for(const r of e){if(t[r]!==void 0)return t[r];const i=n.find(s=>s.trim().toLowerCase()===r.trim().toLowerCase());if(i)return t[i]}},hD=()=>qe?!0:(console.warn(" Operacin de base de datos omitida: Firebase no est inicializado."),!1),Nl=async()=>{if(!qe)return[];try{const t=await KS(Kd(qe,Jd)),e=[];return t.forEach(n=>{const r=n.data(),i=Dt(r,["defaultName","nombre_Real","nombreReal","realName","name","nombre"]),s=Dt(r,["defaultClass","clase","class","rol"]),o=Dt(r,["defaultStats","stats","estadisticas"]),a=Dt(r,["strength","fuerza","str"]),c=Dt(r,["agility","agilidad","agi"]),d=Dt(r,["intellect","intelecto","int"]),h=Dt(r,["imageUrl","foto","image","img","url","picture"]),p=Dt(r,["characterSheetUrl","ficha","gameCard","sheet","carta"]),f=Dt(r,["bio","biografia","biography","historia","history"]),g=Dt(r,["alias","codename","nombre_en_clave","heroname"]),_=Dt(r,["currentStory","historia_actual","historiaActual","current_story"]),x=Dt(r,["objectives","objetivos","goals","misiones"]),C=Dt(r,["defaultAlignment","alignment","bando","tipo"]),E=Dt(r,["expansionId","expansion","caja"]),w=Dt(r,["relatedHeroId","relatedId","counterpart","version_contraria"]),b=Dt(r,["imageParams","ajusteImagen","crop"]);e.push({id:n.id,defaultName:i||"Unknown Agent",defaultClass:s||"BRAWLER",defaultStats:o||{strength:Number(a)||5,agility:Number(c)||5,intellect:Number(d)||5},imageUrl:h||"",characterSheetUrl:p||"",bio:f||"",alias:g||"",currentStory:_||"",objectives:Array.isArray(x)?x:[],defaultAlignment:C||"ALIVE",expansionId:E||"unknown",relatedHeroId:w||void 0,imageParams:b||void 0})}),e}catch(t){return console.error("Error fetching hero templates:",t),[]}},fD=async(t,e)=>{if(qe)try{const n=Ti(qe,Jd,t);await oD(n,e)}catch(n){throw console.error("Error updating hero:",n),n}},pD=async t=>{if(!qe)throw new Error("DB no disponible");try{return(await XS(Kd(qe,Jd),t)).id}catch(e){throw console.error("Error creating hero template:",e),e}},mD=async t=>{if(!hD()||!qe)throw new Error("DB no disponible");try{const e=Ti(qe,Jd,t);await QS(e)}catch(e){throw console.error("Error deleting hero:",e),e}},Rl="missions",Zu=async()=>{if(!qe)return[];try{const t=await KS(Kd(qe,Rl)),e=[];return t.forEach(n=>{const r=n.data();let i=[];r.prereqs&&Array.isArray(r.prereqs)?i=r.prereqs:r.prereq&&(i=[r.prereq]),e.push({...r,id:n.id,prereqs:i,prereq:i.length>0?i[0]:void 0})}),e}catch(t){return console.error("Error fetching missions:",t),[]}},eA=async t=>{if(!qe)throw new Error("DB no disponible");try{return(await XS(Kd(qe,Rl),t)).id}catch(e){throw console.error("Error creating mission:",e),e}},tA=async(t,e)=>{if(!qe)throw new Error("DB no disponible");try{const n=Ti(qe,Rl,t),{id:r,...i}=e;await YS(n,i,{merge:!0})}catch(n){throw console.error("Error updating mission:",n),n}},Zg=async t=>{if(!qe)throw new Error("DB no disponible");try{const e=Ti(qe,Rl,t);await QS(e)}catch(e){throw console.error("Error deleting mission:",e),e}},gD=async t=>{if(!qe)throw new Error("DB no disponible");try{const e=cD(qe);let n=0;t.forEach(r=>{if(r.id){const i=Ti(qe,Rl,r.id),s=JSON.parse(JSON.stringify(r));e.set(i,s),n++}}),await e.commit(),alert(`XITO: Se han copiado ${n} misiones locales a la base de datos.`)}catch(e){throw console.error("Error subiendo misiones locales:",e),alert("ERROR al subir misiones."),e}},yD=Object.freeze(Object.defineProperty({__proto__:null,createMissionInDB:eA,deleteMissionInDB:Zg,getCustomMissions:Zu,updateMissionInDB:tA,uploadLocalMissionsToDB:gD},Symbol.toStringTag,{value:"Module"})),nA="users",rA=()=>qe?!0:(console.warn(" Operacin de base de datos omitida: Firebase no est inicializado."),!1),xE=async(t,e)=>{if(!rA()||!qe)return null;try{const n=Ti(qe,nA,t),r=await sD(n);if(r.exists()){const i=r.data(),s=i[e];if(s)return{heroes:s.heroes||[],completedMissionIds:s.missions||[],resources:s.resources||{omegaCylinders:0},lastUpdated:i.lastUpdated}}return null}catch(n){return console.error("Error fetching user profile:",n),null}},vD=async(t,e,n,r,i)=>{if(!(!rA()||!qe))try{const s=Ti(qe,nA,t),o={[e]:{heroes:n,missions:r,resources:i||{omegaCylinders:0}},lastUpdated:dt.now()};await YS(s,o,{merge:!0})}catch(s){console.error("Error saving user profile:",s)}},ED=new yr,xD=async()=>{try{return(await p2(gi,ED)).user}catch(t){throw console.error("Error signing in with Google",t),t}},_D=async()=>{try{await Kk(gi)}catch(t){console.error("Error signing out",t)}},wD=t=>[{id:"m_intro_0",title:"MH0: CADENAS ROTAS",description:["SITUACIN CRTICA: El transporte ha sido neutralizado. Estamos heridos, desorientados y en territorio hostil.","Black Widow ha establecido un permetro temporal, pero el humo del accidente es una baliza para los infectados.","OBJETIVO: No morir hoy. Debemos movernos hacia el bnker de seguridad antes de que la horda converja en nuestra posicin."],objectives:[{title:"Sobrevivir al Impacto",desc:"Recuperar el conocimiento y evaluar heridas."},{title:"Romper el Cerco",desc:"Abrirse paso a travs de la primera oleada de infectados."},{title:"Llegar al Bnker",desc:"Alcanzar las coordenadas seguras en Ohio."}],location:{state:"Ohio",coordinates:[-82.5,40.2]},threatLevel:"INMINENTE",type:"INTRODUCTORY",alignment:"BOTH",outcomeText:"Lo logramos. Las puertas del bnker se han sellado tras nosotros. Estamos a salvo... por ahora. S.H.I.E.L.D. OS se est reiniciando."},{id:"m_kraven",title:t.missions.kraven.title,description:t.missions.kraven.description,objectives:t.missions.kraven.objectives,location:{state:"New York",coordinates:[-74.006,40.7128]},threatLevel:"ALTA",type:"STANDARD",alignment:"ALIVE",prereqs:["m_intro_0"]},{id:"m_zombie_feast",title:"EL FESTN DE LOS MUTANTES",description:["La Escuela de Xavier est fortificada.","Cerebro detecta mucha carne fresca dentro."],objectives:[{title:"Romper las defensas",desc:"Destruir los muros."}],location:{state:"New York",coordinates:[-73.8,41]},threatLevel:"EXTREMA",type:"STANDARD",alignment:"ZOMBIE",prereqs:["m_intro_0"]},{id:"m_flesh",title:t.missions.fleshSleeps.title,description:t.missions.fleshSleeps.description,objectives:t.missions.fleshSleeps.objectives,location:{state:"Nevada",coordinates:[-115.1398,36.1699]},threatLevel:"MEDIA",type:"STANDARD",alignment:"BOTH",prereqs:["m_intro_0"]},{id:"m_base_alpha",title:t.missions.bases.alpha,description:[t.missions.bases.desc],objectives:[{title:t.missions.bases.objSecure,desc:t.missions.bases.objRetrieve}],location:{state:"Colorado",coordinates:[-104.9903,39.7392]},threatLevel:"BAJA",type:"SHIELD_BASE",alignment:"BOTH"},{id:"m_surfer",type:"GALACTUS",triggerStage:"SURFER",title:t.events.surfer.alive.title,description:[t.events.surfer.alive.desc],objectives:[{title:"Interceptar",desc:"Detener al Heraldo."}],location:{state:"Kansas",coordinates:[-98,38]},threatLevel:"OMEGA",alignment:"BOTH"},{id:"boss-galactus",type:"GALACTUS",triggerStage:"GALACTUS",title:t.missions.galactus.title,description:t.missions.galactus.description,objectives:t.missions.galactus.objectives,location:{state:"Kansas",coordinates:[-98,38]},threatLevel:"OMEGA++",alignment:"BOTH"}],aa={magneto:new Set(["Washington","Oregon","California","Nevada","Idaho","Montana","Wyoming","Utah","Arizona","Colorado","Alaska","Hawaii"]),kingpin:new Set(["Maine","New Hampshire","Vermont","New York","Massachusetts","Rhode Island","Connecticut","New Jersey","Pennsylvania","Delaware","Maryland","West Virginia","Virginia","District of Columbia"]),hulk:new Set(["North Dakota","South Dakota","Nebraska","Kansas","Oklahoma","Texas","New Mexico","Minnesota","Iowa","Missouri","Wisconsin","Illinois","Michigan","Indiana","Ohio"]),doom:new Set(["Arkansas","Louisiana","Mississippi","Alabama","Tennessee","Kentucky","Georgia","Florida","South Carolina","North Carolina"])},bD=t=>aa.magneto.has(t)?"magneto":aa.kingpin.has(t)?"kingpin":aa.hulk.has(t)?"hulk":aa.doom.has(t)?"doom":"neutral",SD=()=>{const t=fl(),[e,n]=N.useState(null),[r,i]=N.useState(!0),[s,o]=N.useState(!0),[a,c]=N.useState("es"),[d,h]=N.useState(null),[p,f]=N.useState([]),[g,_]=N.useState(new Set),[x,C]=N.useState(0),[E,w]=N.useState("NORMAL"),[b,P]=N.useState(null),[D,j]=N.useState(!1),[I,v]=N.useState(!1),[S,A]=N.useState(null),[k,O]=N.useState(0),[R,M]=N.useState(!1),L=N.useRef(!1),[U,K]=N.useState(!1),[V,W]=N.useState(!1),[Q,te]=N.useState(null),[ae,$]=N.useState(!1),[Y,X]=N.useState(!1),[ne,se]=N.useState([]),[ye,De]=N.useState(null),[rt,be]=N.useState(!1),[Se,q]=N.useState(!1),[z,le]=N.useState(new Set(["kingpin","magneto","hulk","doom","neutral"])),[ve,Ee]=N.useState(!1),[Le,Ie]=N.useState(new Set(["core_box"])),[Me,Rt]=N.useState(!1),rn=Hn[a];N.useEffect(()=>{const ce=localStorage.getItem("shield_owned_expansions");if(ce)try{Ie(new Set(JSON.parse(ce)))}catch(ie){console.error(ie)}},[]),N.useEffect(()=>{if(!gi){console.warn("Auth no inicializado. Modo offline/limitado."),o(!1),i(!1);return}const ce=qk(gi,async ie=>{if(n(ie),o(!1),ie){localStorage.getItem(`shield_intro_seen_${ie.uid}`)?t("/map"):(be(!0),M(!1),t("/story"));try{const pe=await xE(ie.uid,"ALIVE");pe&&(f(pe.heroes),_(new Set(pe.completedMissionIds)),C(pe.resources.omegaCylinders),h("ALIVE"),L.current=!0)}catch(pe){console.error(pe)}}else D||t("/");i(!1)});return()=>ce()},[D,t]),N.useEffect(()=>{(async()=>{const ie=await Zu();se(ie)})()},[U]);const yn=N.useCallback(async(ce,ie,re)=>{if(!(U||!e||!d||!L.current)){v(!0);try{await vD(e.uid,d,ce,Array.from(ie),{omegaCylinders:re})}catch(pe){console.error("Auto-save failed",pe)}finally{setTimeout(()=>v(!1),1e3)}}},[e,d,U]);N.useEffect(()=>{if(p.length===0)return;const ce=setTimeout(()=>{yn(p,g,x)},2e3);return()=>clearTimeout(ce)},[p,g,x,yn]),N.useEffect(()=>{if(!d||rt||U)return;const ce=e?`shield_tutorial_seen_${e.uid}`:"shield_tutorial_seen_guest";localStorage.getItem(ce)},[d,rt,e,U]);const vn=ce=>{Ie(ce),localStorage.setItem("shield_owned_expansions",JSON.stringify(Array.from(ce)))},zr=ce=>{const ie=new Set(Le);ie.has(ce)?ie.delete(ce):ie.add(ce),vn(ie)},lt=ce=>{if(ce){const ie=wn.map(re=>re.id);vn(new Set(ie))}else vn(new Set(["core_box"]))},Et=()=>{j(!0),K(!0),h("ALIVE"),be(!1),q(!1),t("/map");const ce=wn.find(ie=>ie.id==="core_box");f(ce?ce.heroes:[]),_(new Set),C(99),w("NORMAL"),L.current=!0},ms=()=>{j(!0),h("ALIVE"),be(!0),M(!1),t("/story")},Ol=ce=>{d&&(f(ce),e&&localStorage.setItem(`shield_intro_seen_${e.uid}`,"true"),t("/intro"),L.current=!0)},Pl=async()=>{gi&&await _D(),j(!1),K(!1),L.current=!1,h(null),t("/")},ih=()=>{const ce=d==="ALIVE"?"ZOMBIE":"ALIVE";h(ce);const ie=wn.find(re=>re.id==="core_box");ie&&f(ce==="ZOMBIE"?ie.zombieHeroes:ie.heroes),t("/map"),e&&xE(e.uid,ce).then(re=>{re&&(f(re.heroes),_(new Set(re.completedMissionIds)),C(re.resources.omegaCylinders))})},sn=ce=>A(ce),ur=N.useMemo(()=>(ne.length>0?ne:wD(rn)).map(ie=>{let[re,pe]=ie.location.coordinates;return re===0&&pe===0?{...ie,location:{...ie.location,coordinates:[-82.5,40.2]}}:re>0&&pe<0?{...ie,location:{...ie.location,coordinates:[pe,re]}}:ie}),[ne,rn]),Ri=N.useMemo(()=>{if(!d)return null;const ce=ur.find(ie=>ie.isIntroMission===!0&&(ie.alignment===d||ie.alignment==="BOTH"));return ce||ur.find(ie=>ie.id==="m_intro_0")},[ur,d]),Ci=N.useMemo(()=>{const ie=ur.filter(re=>!re.alignment||re.alignment==="BOTH"?!0:re.alignment===d).filter(re=>!re.requirements||re.requirements.length===0?!0:re.requirements.every(pe=>{if(Le.has(pe))return!0;const Xe=wn.find(je=>je.name===pe);return!!(Xe&&Le.has(Xe.id))}));return U?ie:ie.filter(re=>{if(!re)return!1;const pe=g.has(re.id);if(pe)return!0;let Xe=!0;if(re.prereqs&&re.prereqs.length>0?Xe=re.prereqs.every(Wn=>g.has(Wn)):re.prereq&&(Xe=g.has(re.prereq)),Ri&&re.id===Ri.id&&!pe)return!0;const je=re.type==="GALACTUS",zt=re.type==="BOSS"||re.type&&re.type.startsWith("BOSS_");return je?re.triggerStage==="SURFER"?E==="SURFER"||E==="GALACTUS":re.triggerStage==="GALACTUS"?E==="GALACTUS":!1:E==="GALACTUS"?pe||!!zt:pe||Xe})},[ur,g,U,E,d,Le,Ri]),Ll=ce=>{const ie=ce.size;ce.has("boss-galactus")||(ie>=15&&E!=="GALACTUS"?(P({stage:"GALACTUS",title:"",description:""}),w("GALACTUS"),sn("ALERTA OMEGA! GALACTUS HA LLEGADO. TODAS LAS MISIONES SECUNDARIAS CANCELADAS.")):ie>=10&&ie<15&&E!=="SURFER"&&E!=="GALACTUS"?(P({stage:"SURFER",title:"",description:""}),w("SURFER"),O(0),sn("OBJETO PLATEADO ENTRANDO EN LA ATMSFERA. PREPARAR INTERCEPCIN.")):ie>=4&&ie<10&&E==="NORMAL"&&(P({stage:"ANOMALY",title:"",description:""}),w("ANOMALY"),sn("LECTURAS DE ENERGA ANMALAS EN EL ESPACIO PROFUNDO.")))},sh=async ce=>{console.log("Completando misin:",ce);const ie=new Set(g);ie.add(ce),_(ie),De(null),E==="SURFER"&&O(re=>re+1),e&&d&&await yn(p,ie,x),ce==="boss-galactus"?(w("NORMAL"),P(null),sn("AMENAZA OMEGA NEUTRALIZADA. BUEN TRABAJO, AGENTES.")):Ll(ie)},Ro=ce=>{E==="GALACTUS"&&ce.type!=="BOSS"&&ce.type!=="GALACTUS"||De(ce)},Dl=ce=>{const ie=new Set(g);ie.delete(ce),_(ie)},Ml=async ce=>{if(window.confirm("ELIMINAR MISIN?"))try{await Zg(ce);const ie=await Zu();se(ie),De(null)}catch{alert("Error al eliminar")}},ki=ce=>{const ie=new Set(g);for(let re=0;re<ce;re++)ie.add(`sim_${Date.now()}_${Math.random()}`);_(ie),Ll(ie)},Co=()=>{_(new Set),w("NORMAL"),P(null),C(0),O(0)},ko=()=>P(null),dr=(ce,ie)=>{const re=p.findIndex(pe=>pe.id===ce);if(re>=0){const pe=[...p],Xe=pe[re],je=Xe.completedObjectiveIndices?[...Xe.completedObjectiveIndices]:[];je.includes(ie)?pe[re]={...Xe,completedObjectiveIndices:je.filter(zt=>zt!==ie)}:pe[re]={...Xe,completedObjectiveIndices:[...je,ie]},f(pe)}},jl=async(ce,ie)=>{const re=p.findIndex(zt=>zt.id===ce);if(re===-1)return;const pe=p[re],Xe=await Nl();let je;if(pe.relatedHeroId&&pe.relatedHeroId!=="NO_VARIANT"&&(je=Xe.find(zt=>zt.id===pe.relatedHeroId)),!je){const zt=xt=>xt.toLowerCase().replace(/\(z\)/g,"").replace(/\(artist\)/g,"").replace(/\(old man\)/g,"").replace(/zombie/g,"").replace(/hero/g,"").replace(/[^a-z0-9]/g,"").trim(),Wn=zt(pe.alias);if(je=Xe.find(xt=>xt.defaultAlignment!==ie?!1:zt(xt.alias)===Wn),!je)for(const xt of wn){const on=(ie==="ALIVE"?xt.heroes:xt.zombieHeroes).find(ys=>zt(ys.alias)===Wn);if(on){je={id:on.id,defaultName:on.name,alias:on.alias,defaultClass:on.class,defaultStats:on.stats,imageUrl:on.imageUrl||"",bio:on.bio,defaultAlignment:ie,objectives:on.objectives,currentStory:on.currentStory,imageParams:on.imageParams};break}}}if(je){const zt=je.imageUrl||pe.imageUrl||"",Wn={id:`trans_${Date.now()}`,templateId:je.id,name:je.defaultName,alias:je.alias||pe.alias,class:je.defaultClass,stats:je.defaultStats,imageUrl:zt,bio:je.bio||pe.bio,status:"AVAILABLE",assignedMissionId:null,objectives:je.objectives||[],completedObjectiveIndices:[],currentStory:je.currentStory||"",relatedHeroId:pe.templateId||pe.id,imageParams:je.imageParams},xt=[...p];xt[re]=Wn,f(xt),ie==="ALIVE"?(sn(`SUJETO ${Wn.alias} CURADO. ADN REESTRUCTURADO.`),C(Oo=>Math.max(0,Oo-1))):sn(`SUJETO ${Wn.alias} INFECTADO. BIENVENIDO AL HAMBRE.`)}else alert(`ERROR: No se encontr una versin compatible de ${pe.alias} (${pe.name}) para el bando contrario.`)},gs=ce=>{le(ie=>{const re=new Set(ie);return re.has(ce)?re.delete(ce):re.add(ce),re})},Vl=N.useMemo(()=>{const ce=Ci.filter(re=>re&&!g.has(re.id)),ie={galactus:[],kingpin:[],shield_kingpin:[],magneto:[],shield_magneto:[],hulk:[],shield_hulk:[],doom:[],shield_doom:[],neutral:[],shield_neutral:[]};return ce.forEach(re=>{if(re.type==="GALACTUS")ie.galactus.push(re);else{const pe=bD(re.location.state);if(re.type==="SHIELD_BASE"){const Xe=`shield_${pe}`;ie[Xe]?ie[Xe].push(re):ie.shield_neutral.push(re)}else ie[pe]?ie[pe].push(re):ie.neutral.push(re)}}),ie},[Ci,g,E]);return{state:{user:e,loading:r,loadingAuth:s,lang:a,playerAlignment:d,heroes:p,completedMissionIds:g,omegaCylinders:x,worldStage:E,activeGlobalEvent:b,surferTurnCount:k,isGuest:D,isSaving:I,tickerMessage:S,isEditorMode:U,showMissionEditor:V,missionToEdit:Q,showCharacterEditor:ae,showDbManager:Y,customMissions:ne,selectedMission:ye,showStory:rt,showTutorial:Se,expandedZones:z,isSidebarCollapsed:ve,ownedExpansions:Le,showExpansionConfig:Me,startStoryAtChoice:R,introMission:Ri,allMissions:ur,visibleMissions:Ci,groupedMissions:Vl,FACTION_STATES:aa},actions:{setLang:c,setPlayerAlignment:h,setHeroes:f,setCompletedMissionIds:_,setOmegaCylinders:C,setWorldStage:w,setActiveGlobalEvent:P,setIsGuest:j,setIsEditorMode:K,setIsSaving:v,setTickerMessage:A,setStartStoryAtChoice:M,setShowMissionEditor:W,setMissionToEdit:te,setShowCharacterEditor:$,setShowDbManager:X,setCustomMissions:se,setSelectedMission:De,setShowStory:be,setShowTutorial:q,setExpandedZones:le,setIsSidebarCollapsed:Ee,setOwnedExpansions:Ie,setShowExpansionConfig:Rt,updateOwnedExpansions:vn,toggleExpansion:zr,toggleAllExpansions:lt,handleEditorLogin:Et,handleGuestLogin:ms,handleExpansionConfirm:Ol,handleLogout:Pl,toggleDimension:ih,handleTickerUpdate:sn,handleMissionComplete:sh,handleMissionSelect:Ro,handleMissionReactivate:Dl,handleDeleteMission:Ml,handleSimulateProgress:ki,handleResetProgress:Co,handleEventAcknowledge:ko,handleToggleHeroObjective:dr,handleTransformHero:jl,toggleZone:gs,setSurferTurnCount:O}}},iA=N.createContext(void 0),AD=({children:t})=>{const e=SD();return u.jsx(iA.Provider,{value:e,children:t})},sA=()=>{const t=N.useContext(iA);if(t===void 0)throw new Error("useGame must be used within a GameProvider");return t},ID=({onLogin:t,onGoogleLogin:e,onEditorLogin:n,language:r,setLanguage:i})=>{const[s,o]=N.useState(!1),[a,c]=N.useState(!1),[d,h]=N.useState(null),[p,f]=N.useState(!1),[g,_]=N.useState(""),x=Hn[r],C=()=>{o(!0),h(null),setTimeout(()=>{c(!0),setTimeout(()=>{t()},1500)},2e3)},E=async()=>{try{o(!0),h(null),await xD(),c(!0)}catch(b){console.error(b),o(!1),h(x.login.error)}},w=b=>{b.preventDefault(),g==="123456789"?(c(!0),setTimeout(()=>{n()},1e3)):(h(x.login.passError),_(""))};return u.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-950 flex flex-col items-center justify-center font-sans text-cyan-400 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2306b6d4' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-slate-950/50 to-slate-950 pointer-events-none"}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center w-full max-w-md p-10 glass-panel shadow-2xl rounded-sm shadow-cyan-900/20",children:[u.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-cyan-500"}),u.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-cyan-500"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 border-cyan-500"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-cyan-500"}),u.jsx("div",{className:"absolute top-4 right-4 flex gap-1",children:["es","en"].map(b=>u.jsx("button",{onClick:()=>i(b),className:`text-[9px] font-bold px-2 py-1 border transition-all ${r===b?"bg-cyan-500 text-black border-cyan-400":"text-cyan-700 border-cyan-900 hover:text-cyan-400"}`,children:b.toUpperCase()},b))}),u.jsxs("div",{className:"relative w-32 h-32 mb-8 flex items-center justify-center",children:[u.jsx("div",{className:"absolute inset-0 border-2 border-cyan-900 rounded-full"}),u.jsx("div",{className:"absolute inset-0 border-t-2 border-cyan-400 rounded-full animate-spin",style:{animationDuration:"3s"}}),u.jsx("div",{className:"absolute inset-2 border-b-2 border-cyan-600 rounded-full animate-spin",style:{animationDuration:"2s",animationDirection:"reverse"}}),u.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-cyan-500/50 shadow-[0_0_30px_rgba(6,182,212,0.4)] bg-black relative z-10",children:u.jsx("img",{src:"https://i.pinimg.com/736x/63/1e/3a/631e3a68228c97963e78381ad11bf3bb.jpg",className:"w-full h-full object-cover opacity-80 mix-blend-screen",alt:"S.H.I.E.L.D.",referrerPolicy:"no-referrer"})})]}),u.jsx("h1",{className:"text-4xl font-black tracking-[0.2em] mb-1 text-white text-shadow-neon text-center",children:x.login.title}),u.jsx("h2",{className:"text-[10px] font-bold tracking-[0.4em] text-cyan-600 mb-10 text-center uppercase",children:x.login.subtitle}),u.jsxs("div",{className:"w-full border-x border-cyan-900/30 bg-black/40 p-2 mb-6 h-16 flex items-center justify-center relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-scan opacity-10 pointer-events-none"}),d&&u.jsxs("div",{className:"text-red-500 font-bold tracking-widest text-xs animate-pulse",children:[" ",d]}),!s&&!a&&!d&&u.jsxs("div",{className:"flex flex-col items-center animate-flicker",children:[u.jsx("p",{className:"text-red-500 font-bold tracking-widest text-[10px] mb-1 border border-red-900 px-2 bg-red-900/10",children:"LOCKED"}),u.jsx("p",{className:"text-cyan-600 text-[9px]",children:x.login.idPrompt})]}),s&&!a&&!d&&u.jsxs("div",{className:"w-full px-4",children:[u.jsxs("div",{className:"flex justify-between text-[9px] text-cyan-400 mb-1",children:[u.jsx("span",{children:"ANALYZING RETINA..."}),u.jsx("span",{className:"animate-pulse",children:"PROCESSING"})]}),u.jsx("div",{className:"w-full h-1 bg-cyan-900/50",children:u.jsx("div",{className:"h-full bg-cyan-400 shadow-[0_0_10px_#06b6d4] animate-[expandWidth_2s_ease-out_forwards]",style:{width:"0%"}})}),u.jsx("style",{children:"@keyframes expandWidth { to { width: 100%; } }"})]}),a&&u.jsx("div",{className:"text-emerald-400 font-bold tracking-[0.2em] text-sm animate-pulse text-shadow-neon",children:x.login.granted})]}),u.jsxs("div",{className:"w-full space-y-3",children:[u.jsxs("button",{onClick:C,disabled:s||a,className:`
                    w-full py-4 border relative overflow-hidden group transition-all duration-200
                    ${a?"bg-emerald-500 border-emerald-400 text-black":"bg-cyan-950/30 border-cyan-500 text-cyan-300 hover:bg-cyan-500 hover:text-black"}
                `,children:[u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),u.jsx("span",{className:"relative z-10 font-black tracking-widest text-xs uppercase flex items-center justify-center gap-2",children:s?"...":a?"SYSTEM UNLOCKED":u.jsxs(u.Fragment,{children:[x.login.scanBtn," ",u.jsx("span",{className:"text-lg",children:""})]})})]}),u.jsx("button",{onClick:E,disabled:s||a,className:"w-full py-3 border border-slate-700 bg-slate-900/50 text-slate-400 text-[10px] font-bold tracking-widest hover:border-white hover:text-white transition-all uppercase",children:x.login.googleBtn})]}),u.jsx("div",{className:"mt-8 w-full border-t border-cyan-900/30 pt-4 flex justify-center",children:p?u.jsxs("form",{onSubmit:w,className:"flex gap-2 w-full max-w-[200px] animate-fade-in",children:[u.jsx("input",{type:"password",value:g,onChange:b=>_(b.target.value),placeholder:"PWD...",className:"flex-1 bg-black border border-cyan-800 px-2 py-1 text-[10px] text-cyan-500 outline-none focus:border-cyan-500",autoFocus:!0}),u.jsx("button",{type:"submit",className:"bg-cyan-900 text-cyan-400 px-2 text-[10px] border border-cyan-700 hover:bg-cyan-700 hover:text-white",children:">"})]}):u.jsxs("button",{onClick:()=>f(!0),className:"text-[8px] text-cyan-900 hover:text-cyan-500 transition-colors uppercase tracking-widest",children:["[ ",x.login.editorBtn," ]"]})}),u.jsx("div",{className:"absolute bottom-2 right-4 text-[8px] text-cyan-900 font-mono",children:"SECURE_LINK::AES-256"})]})]})},TD=({language:t,onComplete:e,startAtChoice:n=!1})=>{const r=Hn[t].story,i=r.slides,[s,o]=N.useState(n?i.length:0),[a,c]=N.useState(!1),[d,h]=N.useState(""),[p,f]=N.useState(!1),[g,_]=N.useState(null),x=s>=i.length;N.useEffect(()=>{const D=setTimeout(()=>c(!0),800);return()=>clearTimeout(D)},[]);const C=()=>{o(i.length)},E=()=>{p||x||(f(!0),h("turning-next"),setTimeout(()=>{o(D=>{const j=D+1;return j>i.length?i.length:j}),h(""),f(!1)},600))},w=()=>{p||s===0||(f(!0),h("turning-prev"),setTimeout(()=>{o(D=>Math.max(0,D-1)),h(""),f(!1)},600))},b=D=>{g||(_(D),setTimeout(()=>{e(D)},2e3))},P=()=>{if(x)return u.jsxs("div",{className:"fixed inset-0 z-[70] bg-slate-950 flex flex-col font-mono overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none bg-[linear-gradient(0deg,transparent_24%,rgba(6,182,212,0.3)_25%,rgba(6,182,212,0.3)_26%,transparent_27%,transparent_74%,rgba(6,182,212,0.3)_75%,rgba(6,182,212,0.3)_76%,transparent_77%,transparent),linear-gradient(90deg,transparent_24%,rgba(6,182,212,0.3)_25%,rgba(6,182,212,0.3)_26%,transparent_27%,transparent_74%,rgba(6,182,212,0.3)_75%,rgba(6,182,212,0.3)_76%,transparent_77%,transparent)] bg-[length:50px_50px]"}),u.jsxs("div",{className:"relative z-10 text-center pt-12 pb-6",children:[u.jsx("h2",{className:"text-3xl md:text-5xl font-black tracking-[0.2em] text-white uppercase drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]",children:r.choose}),u.jsx("div",{className:"w-64 h-1 bg-gradient-to-r from-transparent via-cyan-500 to-transparent mx-auto mt-4"}),u.jsx("p",{className:"text-cyan-500 text-xs mt-2 tracking-widest animate-pulse",children:"SYSTEM OVERRIDE REQUIRED"})]}),u.jsxs("div",{className:"flex-1 flex flex-col md:flex-row relative z-10",children:[u.jsxs("div",{className:`flex-1 relative group cursor-pointer transition-all duration-700 border-r border-slate-800 overflow-hidden
                              ${g==="ZOMBIE"?"opacity-20 grayscale pointer-events-none":""}
                              ${g==="ALIVE"?"flex-[2] bg-cyan-950/30":"hover:flex-[1.5] hover:bg-cyan-900/10"}
                          `,onClick:()=>b("ALIVE"),children:[u.jsx("div",{className:"absolute inset-0 opacity-20 group-hover:opacity-40 transition-opacity duration-500 mix-blend-luminosity",children:u.jsx("img",{src:"https://i.pinimg.com/736x/43/45/8b/43458b29272370723226334336066223.jpg",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-slate-950"}),u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-8 text-center",children:[u.jsx("div",{className:"w-24 h-24 rounded-full border-2 border-cyan-500 flex items-center justify-center mb-6 shadow-[0_0_30px_rgba(6,182,212,0.4)] group-hover:scale-110 transition-transform duration-300 bg-slate-900/80 backdrop-blur-sm overflow-hidden",children:u.jsx("img",{src:"https://i.pinimg.com/736x/63/1e/3a/631e3a68228c97963e78381ad11bf3bb.jpg",alt:"SHIELD Logo",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"})}),u.jsx("h3",{className:"text-3xl font-black text-cyan-400 tracking-widest uppercase mb-2 group-hover:text-white transition-colors",children:"S.H.I.E.L.D."}),u.jsx("p",{className:"text-cyan-200/70 font-mono text-sm max-w-sm",children:'"Salva lo que queda. Protege a los inocentes. Restaura el orden."'}),u.jsx("div",{className:`mt-8 px-8 py-3 border border-cyan-500 text-cyan-400 text-xs font-bold tracking-[0.3em] uppercase transition-all duration-300 ${g==="ALIVE"?"bg-cyan-500 text-black scale-110":"group-hover:bg-cyan-500/20"}`,children:g==="ALIVE"?"ACCESS GRANTED":"INITIATE PROTOCOL"})]})]}),u.jsx("div",{className:"hidden md:block absolute left-1/2 top-0 bottom-0 w-[1px] bg-white/20 z-20",children:u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-slate-950 border border-slate-700 rotate-45 flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500 -rotate-45 font-bold",children:"VS"})})}),u.jsxs("div",{className:`flex-1 relative group cursor-pointer transition-all duration-700 border-l border-slate-800 overflow-hidden
                              ${g==="ALIVE"?"opacity-20 grayscale pointer-events-none":""}
                              ${g==="ZOMBIE"?"flex-[2] bg-lime-950/30":"hover:flex-[1.5] hover:bg-lime-900/10"}
                          `,onClick:()=>b("ZOMBIE"),children:[u.jsx("div",{className:"absolute inset-0 opacity-20 group-hover:opacity-40 transition-opacity duration-500 mix-blend-luminosity",children:u.jsx("img",{src:"https://ca-times.brightspotcdn.com/f2/8c/dc0c619b48c1871a27e77b6131f4/marvel-zombies-01.jpg",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-slate-950"}),u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-8 text-center",children:[u.jsx("div",{className:"w-24 h-24 rounded-full border-2 border-lime-600 flex items-center justify-center mb-6 shadow-[0_0_30px_rgba(101,163,13,0.4)] group-hover:scale-110 transition-transform duration-300 bg-slate-900/80 backdrop-blur-sm overflow-hidden",children:u.jsx("img",{src:"https://i.pinimg.com/736x/7b/e8/d2/7be8d2f25242523d131ff8d81b1385fc.jpg",alt:"Zombie Logo",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"})}),u.jsx("h3",{className:"text-3xl font-black text-lime-500 tracking-widest uppercase mb-2 group-hover:text-white transition-colors",children:"THE HUNGER"}),u.jsx("p",{className:"text-lime-200/70 font-mono text-sm max-w-sm",children:'"Consume todo. Expande la plaga. Evoluciona."'}),u.jsx("div",{className:`mt-8 px-8 py-3 border border-lime-600 text-lime-500 text-xs font-bold tracking-[0.3em] uppercase transition-all duration-300 ${g==="ZOMBIE"?"bg-lime-600 text-black scale-110":"group-hover:bg-lime-600/20"}`,children:g==="ZOMBIE"?"VIRUS RELEASED":"UNLEASH PATHOGEN"})]})]})]})]});const D=i[s];if(!D)return null;const j=s%2===0?"-rotate-2":"rotate-1";return u.jsxs("div",{className:"flex flex-col md:flex-row h-full w-full bg-white shadow-inner",children:[u.jsxs("div",{className:"w-full md:w-[55%] h-1/2 md:h-full relative bg-[#2d3748] border-r border-slate-400 flex items-center justify-center overflow-hidden shadow-[inset_-10px_0_20px_rgba(0,0,0,0.3)]",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/leather.png')]"}),u.jsxs("div",{className:`relative bg-white p-3 pb-8 shadow-2xl transform transition-all duration-500 ease-out hover:rotate-0 hover:scale-105 cursor-zoom-in group ${j} max-w-[85%] max-h-[85%] flex flex-col`,children:[u.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 w-8 h-16 rounded-full border-4 border-gray-300 z-20 shadow-md bg-transparent pointer-events-none"}),u.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 w-8 h-10 bg-[#2d3748] z-10 pointer-events-none"}),u.jsxs("div",{className:"relative overflow-hidden border border-gray-200 bg-black",children:[u.jsx("img",{src:D.image,alt:"Evidence",className:"w-full h-full object-contain max-h-[60vh]",referrerPolicy:"no-referrer"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-40 transition-opacity pointer-events-none"})]}),u.jsxs("div",{className:"mt-3 flex justify-between items-end px-2",children:[u.jsxs("div",{className:"font-mono text-[10px] text-gray-500",children:["FIG. ",s+1,"A"]}),u.jsxs("div",{className:"font-handwriting text-sm text-blue-900 rotate-[-1deg]",style:{fontFamily:'"Courier New", monospace'},children:["Evidence #",1024+s]})]})]})]}),u.jsxs("div",{className:"w-full md:w-[45%] h-1/2 md:h-full p-6 md:p-10 flex flex-col bg-[#fdfbf7] relative",children:[u.jsx("div",{className:"absolute inset-0 opacity-40 pointer-events-none",style:{backgroundImage:"linear-gradient(#e5e7eb 1px, transparent 1px)",backgroundSize:"100% 2rem"}}),u.jsxs("div",{className:"relative z-10 flex-1 overflow-y-auto pr-2",children:[u.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-2 mb-6",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Incident Report"}),u.jsxs("h2",{className:"text-xl font-black text-slate-900 font-mono",children:["FILE #",1024+s]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[10px] font-mono text-slate-400",children:"DATE: 2025-10-31"}),u.jsx("div",{className:"text-xs font-bold text-red-700 border-2 border-red-700 px-1 inline-block mt-1 rotate-[-2deg] opacity-80",children:"TOP SECRET"})]})]}),u.jsx("div",{className:"font-mono text-sm md:text-base text-slate-900 leading-relaxed space-y-4 text-justify font-medium",children:D.text.split(`
`).map((I,v)=>u.jsx("p",{children:I},v))})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-300 flex justify-between items-center",children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 tracking-widest",children:"S.H.I.E.L.D. ARCHIVES // DO NOT COPY"}),u.jsxs("div",{className:"text-xs font-mono text-slate-500",children:["PG. ",s+1]})]})]})]})};return u.jsxs("div",{className:"fixed inset-0 z-[60] bg-[#0f172a] flex items-center justify-center perspective-[1500px] overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_#1e293b_0%,_#020617_100%)]"}),u.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(#334155 1px, transparent 1px), linear-gradient(90deg, #334155 1px, transparent 1px)",backgroundSize:"40px 40px"}}),!x&&u.jsx("button",{onClick:C,className:"absolute top-8 right-8 z-50 text-cyan-500 text-xs font-bold tracking-[0.2em] hover:text-white transition-colors border border-cyan-900 px-4 py-2 bg-slate-900/80 backdrop-blur",children:"SKIP INTRO >>"}),!x&&u.jsxs("div",{className:`relative w-[95%] h-[85%] max-w-6xl bg-[#d1d5db] shadow-[0_20px_50px_rgba(0,0,0,0.6)] transition-all duration-1000 ease-out transform-style-3d rounded-r-md border-l-8 border-slate-400 ${a?"rotate-x-0 translate-y-0 opacity-100":"rotate-x-20 translate-y-[100px] opacity-0"}`,children:[u.jsx("div",{className:"absolute -top-6 left-0 w-48 h-8 bg-[#9ca3af] rounded-t-lg border-t border-x border-white/20 flex items-center px-4 shadow-inner",children:u.jsx("span",{className:"text-[10px] font-bold text-slate-800 tracking-widest",children:"PROJECT: LAZARUS"})}),u.jsxs("div",{className:"w-full h-full bg-white relative overflow-hidden flex rounded-r-sm",children:[P(),d&&u.jsx("div",{className:`absolute inset-0 bg-black/10 z-50 transition-opacity duration-500 ${d?"opacity-100":"opacity-0"}`})]}),a&&u.jsxs("div",{className:"absolute -bottom-16 w-full flex justify-center gap-4",children:[u.jsx("button",{onClick:w,disabled:s===0||p,className:`w-12 h-12 rounded-full bg-slate-800 border border-slate-600 flex items-center justify-center text-white hover:bg-cyan-600 transition-all ${s===0?"opacity-30 cursor-not-allowed":""}`,children:""}),u.jsxs("div",{className:"h-12 px-6 bg-slate-900/90 border border-slate-700 rounded-full flex items-center justify-center text-cyan-400 font-mono text-xs tracking-widest shadow-lg",children:["SLIDE ",s+1," / ",i.length]}),u.jsx("button",{onClick:E,disabled:p,className:"w-12 h-12 rounded-full bg-slate-800 border border-slate-600 flex items-center justify-center text-white hover:bg-cyan-600 transition-all",children:""})]})]}),x&&P()]})},ND=({isZombie:t})=>{const[e,n]=N.useState(0),[r,i]=N.useState(""),a=t?["HUNTING SIGNAL...","CORRUPTING DATA...","INFECTING SYSTEM...","CONSUMING BANDWIDTH...","SPREADING VIRUS..."]:["HANDSHAKE_INIT...","BYPASSING FIREWALL...","DECRYPTING PACKET...","BUFFERING VIDEO STREAM...","SECURING CONNECTION..."],c=t?"text-lime-500":"text-cyan-500",d=t?"bg-lime-600":"bg-cyan-600";return N.useEffect(()=>{const h=setInterval(()=>{n(p=>p>=100?100:p+Math.random()*15),i(a[Math.floor(Math.random()*a.length)])},150);return()=>clearInterval(h)},[t]),u.jsxs("div",{className:"absolute inset-0 z-50 bg-black flex flex-col items-center justify-center font-sans p-8",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] animate-pulse"}),u.jsx("div",{className:`text-4xl mb-4 animate-spin ${c}`,children:t?"":""}),u.jsx("div",{className:`text-xl font-black tracking-[0.3em] mb-2 ${c} animate-pulse`,children:t?"FEEDING...":"LOADING..."}),u.jsx("div",{className:"w-64 h-2 bg-gray-800 border border-gray-600 relative overflow-hidden mb-2",children:u.jsx("div",{className:`h-full ${d} transition-all duration-200 ease-out`,style:{width:`${e}%`}})}),u.jsxs("div",{className:"text-[10px] text-gray-500 h-4",children:["> ",r]})]})},RD=({language:t,onComplete:e,playerAlignment:n})=>{const[r,i]=N.useState(0),[s,o]=N.useState(!1),[a,c]=N.useState(!1),d=Hn[t].introSequence[n==="ZOMBIE"?"zombie":"alive"],h=d[r];N.useEffect(()=>{if(!s){c(!1);const w=setTimeout(()=>c(!0),300);return()=>clearTimeout(w)}},[r,s]);const p=()=>{if(s)return;const w=r+1;if(w>=d.length){e();return}o(!0),c(!1);const b=new Image;b.src=d[w].image;const P=new Promise(j=>setTimeout(j,1500)),D=new Promise(j=>{b.onload=j,b.onerror=j});Promise.all([D,P]).then(()=>{i(w),o(!1)})};if(!h)return null;const f=n==="ZOMBIE",g=f?"text-lime-400":"text-cyan-400",_=f?"border-lime-500":"border-cyan-500",x=f?"bg-lime-950":"bg-cyan-950",C=f?"shadow-lime-500/20":"shadow-cyan-500/20",E=f?"bg-lime-500":"bg-cyan-500";return u.jsxs("div",{className:"fixed inset-0 z-[100] bg-black font-sans overflow-hidden flex flex-col md:flex-row",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-30 pointer-events-none",children:u.jsx("img",{src:h.image,className:"absolute inset-0 w-full h-full object-cover blur-3xl scale-110 opacity-100 transition-all duration-1000",referrerPolicy:"no-referrer",alt:""})}),u.jsx("div",{className:"absolute inset-0 z-[50] pointer-events-none bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] bg-[length:100%_4px,6px_100%]"}),u.jsx("div",{className:"relative flex-1 flex items-center justify-center p-4 md:p-12 z-10 h-[50vh] md:h-auto border-b md:border-b-0 md:border-r border-gray-800 bg-black/40 backdrop-blur-sm",children:u.jsxs("div",{className:`relative w-full h-full max-w-5xl max-h-[80vh] border ${_} ${C} shadow-[0_0_50px_rgba(0,0,0,0.5)] p-1 flex items-center justify-center bg-black overflow-hidden group`,children:[u.jsx("div",{className:`absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 ${_} z-20`}),u.jsx("div",{className:`absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 ${_} z-20`}),u.jsx("div",{className:`absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 ${_} z-20`}),u.jsx("div",{className:`absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 ${_} z-20`}),s&&u.jsx(ND,{isZombie:f}),u.jsx("img",{src:h.image,alt:"Evidence",className:`w-full h-full object-contain transition-opacity duration-500 ${s?"opacity-0":"opacity-100"}`,referrerPolicy:"no-referrer"},r),!s&&u.jsxs("div",{className:"absolute top-4 left-4 bg-black/80 px-3 py-1 border border-gray-700 flex items-center gap-2 animate-fade-in",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-red-500 animate-pulse":"bg-green-500"}`}),u.jsxs("span",{className:"text-[10px] text-gray-300 tracking-widest font-bold",children:["IMG_SEQ_",1024+r," // ",f?"CORRUPTED":"RESTORED"]})]})]})}),u.jsxs("div",{className:"relative w-full md:w-[450px] flex flex-col z-20 bg-slate-950 border-l border-gray-800 shadow-2xl",children:[u.jsxs("div",{className:`p-6 border-b border-gray-800 ${x} bg-opacity-10`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("h2",{className:`text-xl font-black tracking-[0.2em] uppercase ${g}`,children:f?"HUNGER_LOG":"MH0_PROTOCOL"}),u.jsx("span",{className:"text-xs text-gray-500 font-bold",children:"v.9.0.1"})]}),u.jsx("div",{className:"w-full h-1 bg-gray-800 mt-2",children:u.jsx("div",{className:`h-full ${E} transition-all duration-500 ease-out`,style:{width:`${(r+1)/d.length*100}%`}})}),u.jsxs("div",{className:"flex justify-between text-[9px] text-gray-500 mt-1 font-mono",children:[u.jsxs("span",{children:["SEGMENT ",r+1," OF ",d.length]}),u.jsxs("span",{children:[Math.round((r+1)/d.length*100),"% COMPLETE"]})]})]}),u.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto relative",children:s?u.jsxs("div",{className:"flex flex-col gap-2 opacity-50 animate-pulse",children:[u.jsx("div",{className:"h-2 bg-gray-800 w-3/4"}),u.jsx("div",{className:"h-2 bg-gray-800 w-full"}),u.jsx("div",{className:"h-2 bg-gray-800 w-5/6"}),u.jsx("div",{className:"h-2 bg-gray-800 w-1/2"})]}):u.jsxs("div",{className:`transition-all duration-500 ${a?"opacity-100 translate-x-0":"opacity-0 translate-x-4"}`,children:[u.jsxs("div",{className:"text-[10px] text-gray-600 mb-4 font-mono select-none",children:["> DECRYPTING AUDIO LOG...",u.jsx("br",{}),"> SUBJECT: UNKNOWN",u.jsx("br",{}),"> LOCATION: SECTOR 7",u.jsx("br",{}),"> STATUS: ",u.jsx("span",{className:f?"text-red-500":"text-emerald-500",children:f?"CRITICAL":"STABLE"})]}),u.jsx("p",{className:"text-sm md:text-base text-gray-300 leading-relaxed font-mono whitespace-pre-wrap border-l-2 border-gray-800 pl-4",children:h.text}),u.jsx("span",{className:`inline-block w-2 h-4 ml-1 align-middle ${E} animate-pulse`})]})}),u.jsx("div",{className:"p-6 border-t border-gray-800 bg-black/20",children:u.jsxs("button",{onClick:p,disabled:s,className:`
                            w-full py-4 text-xs font-black tracking-[0.3em] uppercase border transition-all duration-300 group relative overflow-hidden
                            ${f?"border-lime-600 text-lime-500 hover:bg-lime-900/20":"border-cyan-600 text-cyan-500 hover:bg-cyan-900/20"}
                            ${s?"opacity-50 cursor-wait":""}
                        `,children:[u.jsx("span",{className:"relative z-10 group-hover:translate-x-2 transition-transform inline-block",children:s?f?"HUNTING...":"BUFFERING...":r===d.length-1?"INICIAR SIMULACIN":"SIGUIENTE ENTRADA >>"}),u.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity ${E}`})]})})]})]})},CD=({language:t,onComplete:e,onStepChange:n})=>{const[r,i]=N.useState(0),[s,o]=N.useState(null),a=Hn[t].tutorial,c=[{targetId:null,translationKey:"welcome",position:"center"},{targetId:"tutorial-map",translationKey:"map_zones",position:"center"},{targetId:"hulk-token",translationKey:"hulk",position:"center"},{targetId:"tutorial-sidebar-missions",translationKey:"missions",position:"right"},{targetId:"tutorial-bunker-btn",translationKey:"bunker_entry",position:"right"},{targetId:"tutorial-bunker-roster",translationKey:"roster",position:"right"},{targetId:"tutorial-bunker-file",translationKey:"file",position:"left"},{targetId:"tutorial-recruit-btn",translationKey:"recruit",position:"left"},{targetId:null,translationKey:"finish",position:"center"}],d=c[r],p=(()=>{if(!d)return{title:"",text:""};const _=a[d.translationKey];return _&&typeof _=="object"&&"title"in _?_:{title:"TUTORIAL",text:""}})();N.useEffect(()=>{const _=()=>{if(d&&d.targetId){const x=document.getElementById(d.targetId);o(x?x.getBoundingClientRect():null)}else o(null)};return setTimeout(_,300),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[r,d]);const f=()=>{if(r<c.length-1){const _=r+1;i(_),n&&n(c[_].translationKey)}else e()},g=()=>{if(!s||!(d!=null&&d.targetId)||d.position==="center")return{top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:"450px"};if(window.innerWidth<768)return{bottom:"20px",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"400px"};const _=20,x=s.top+s.height/2-100,C=Math.max(20,Math.min(window.innerHeight-300,x));return d.position==="left"?{top:`${C}px`,right:`${window.innerWidth-s.left+_}px`,width:"350px"}:{top:`${C}px`,left:`${s.right+_}px`,width:"350px"}};return p.title?u.jsxs("div",{className:`fixed inset-0 z-[100] transition-all duration-500 ${s?"bg-transparent":"bg-slate-950/80 backdrop-blur-sm"}`,children:[s&&u.jsxs("div",{className:"absolute border-2 border-cyan-400 shadow-[0_0_50px_rgba(6,182,212,0.5)] transition-all duration-300 pointer-events-none",style:{top:s.top-5,left:s.left-5,width:s.width+10,height:s.height+10,boxShadow:"0 0 0 9999px rgba(15, 23, 42, 0.85)"},children:[u.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 bg-cyan-400"}),u.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-cyan-400"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 bg-cyan-400"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 bg-cyan-400"}),u.jsx("div",{className:`absolute top-1/2 w-10 h-[1px] bg-cyan-500 hidden md:block ${(d==null?void 0:d.position)==="left"?"-right-10":"-left-10"}`})]}),u.jsxs("div",{className:"absolute p-6 bg-slate-900/95 border-l-4 border-cyan-500 shadow-2xl transition-all duration-500",style:g(),children:[u.jsx("h3",{className:"text-xl font-bold text-cyan-300 mb-2 tracking-widest border-b border-cyan-800 pb-2",children:p.title}),u.jsx("p",{className:"text-sm text-cyan-100/90 leading-relaxed font-mono mb-6",children:p.text}),u.jsxs("div",{className:"flex justify-between items-center gap-4",children:[u.jsx("button",{onClick:e,className:"text-xs text-gray-500 hover:text-cyan-400 underline",children:a.skip}),u.jsx("button",{onClick:f,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold text-xs tracking-widest shadow-[0_0_15px_rgba(6,182,212,0.4)]",children:r===c.length-1?a.finishBtn:a.next})]})]})]}):null};class as{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(n[r++]=a),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,i=e[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function*kD(t){for(const e of t)yield*e}function oA(t){return Array.from(kD(t))}var OD={value:()=>{}};function Jg(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new iu(n)}function iu(t){this._=t}function PD(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}iu.prototype=Jg.prototype={constructor:iu,on:function(t,e){var n=this._,r=PD(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=LD(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=_E(n[i],t.name,e);else if(e==null)for(i in n)n[i]=_E(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new iu(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function LD(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function _E(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=OD,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Lp="http://www.w3.org/1999/xhtml";const wE={svg:"http://www.w3.org/2000/svg",xhtml:Lp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function eh(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),wE.hasOwnProperty(e)?{space:wE[e],local:t}:t}function DD(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Lp&&e.documentElement.namespaceURI===Lp?e.createElement(t):e.createElementNS(n,t)}}function MD(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function aA(t){var e=eh(t);return(e.local?MD:DD)(e)}function jD(){}function e0(t){return t==null?jD:function(){return this.querySelector(t)}}function VD(t){typeof t!="function"&&(t=e0(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),c,d,h=0;h<o;++h)(c=s[h])&&(d=t.call(c,c.__data__,h,s))&&("__data__"in c&&(d.__data__=c.__data__),a[h]=d);return new fn(r,this._parents)}function UD(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function FD(){return[]}function lA(t){return t==null?FD:function(){return this.querySelectorAll(t)}}function BD(t){return function(){return UD(t.apply(this,arguments))}}function zD(t){typeof t=="function"?t=BD(t):t=lA(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,c,d=0;d<a;++d)(c=o[d])&&(r.push(t.call(c,c.__data__,d,o)),i.push(c));return new fn(r,i)}function cA(t){return function(){return this.matches(t)}}function uA(t){return function(e){return e.matches(t)}}var $D=Array.prototype.find;function HD(t){return function(){return $D.call(this.children,t)}}function GD(){return this.firstElementChild}function WD(t){return this.select(t==null?GD:HD(typeof t=="function"?t:uA(t)))}var qD=Array.prototype.filter;function KD(){return Array.from(this.children)}function YD(t){return function(){return qD.call(this.children,t)}}function QD(t){return this.selectAll(t==null?KD:YD(typeof t=="function"?t:uA(t)))}function XD(t){typeof t!="function"&&(t=cA(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],c,d=0;d<o;++d)(c=s[d])&&t.call(c,c.__data__,d,s)&&a.push(c);return new fn(r,this._parents)}function dA(t){return new Array(t.length)}function ZD(){return new fn(this._enter||this._groups.map(dA),this._parents)}function Ju(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ju.prototype={constructor:Ju,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function JD(t){return function(){return t}}function eM(t,e,n,r,i,s){for(var o=0,a,c=e.length,d=s.length;o<d;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new Ju(t,s[o]);for(;o<c;++o)(a=e[o])&&(i[o]=a)}function tM(t,e,n,r,i,s,o){var a,c,d=new Map,h=e.length,p=s.length,f=new Array(h),g;for(a=0;a<h;++a)(c=e[a])&&(f[a]=g=o.call(c,c.__data__,a,e)+"",d.has(g)?i[a]=c:d.set(g,c));for(a=0;a<p;++a)g=o.call(t,s[a],a,s)+"",(c=d.get(g))?(r[a]=c,c.__data__=s[a],d.delete(g)):n[a]=new Ju(t,s[a]);for(a=0;a<h;++a)(c=e[a])&&d.get(f[a])===c&&(i[a]=c)}function nM(t){return t.__data__}function rM(t,e){if(!arguments.length)return Array.from(this,nM);var n=e?tM:eM,r=this._parents,i=this._groups;typeof t!="function"&&(t=JD(t));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),d=0;d<s;++d){var h=r[d],p=i[d],f=p.length,g=iM(t.call(h,h&&h.__data__,d,r)),_=g.length,x=a[d]=new Array(_),C=o[d]=new Array(_),E=c[d]=new Array(f);n(h,p,x,C,E,g,e);for(var w=0,b=0,P,D;w<_;++w)if(P=x[w]){for(w>=b&&(b=w+1);!(D=C[b])&&++b<_;);P._next=D||null}}return o=new fn(o,r),o._enter=a,o._exit=c,o}function iM(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function sM(){return new fn(this._exit||this._groups.map(dA),this._parents)}function oM(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function aM(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var d=n[c],h=r[c],p=d.length,f=a[c]=new Array(p),g,_=0;_<p;++_)(g=d[_]||h[_])&&(f[_]=g);for(;c<i;++c)a[c]=n[c];return new fn(a,this._parents)}function lM(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function cM(t){t||(t=uM);function e(p,f){return p&&f?t(p.__data__,f.__data__):!p-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,c=i[s]=new Array(a),d,h=0;h<a;++h)(d=o[h])&&(c[h]=d);c.sort(e)}return new fn(i,this._parents).order()}function uM(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function dM(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function hM(){return Array.from(this)}function fM(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function pM(){let t=0;for(const e of this)++t;return t}function mM(){return!this.node()}function gM(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function yM(t){return function(){this.removeAttribute(t)}}function vM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function EM(t,e){return function(){this.setAttribute(t,e)}}function xM(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _M(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function wM(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function bM(t,e){var n=eh(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?vM:yM:typeof e=="function"?n.local?wM:_M:n.local?xM:EM)(n,e))}function hA(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function SM(t){return function(){this.style.removeProperty(t)}}function AM(t,e,n){return function(){this.style.setProperty(t,e,n)}}function IM(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function TM(t,e,n){return arguments.length>1?this.each((e==null?SM:typeof e=="function"?IM:AM)(t,e,n??"")):fo(this.node(),t)}function fo(t,e){return t.style.getPropertyValue(e)||hA(t).getComputedStyle(t,null).getPropertyValue(e)}function NM(t){return function(){delete this[t]}}function RM(t,e){return function(){this[t]=e}}function CM(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function kM(t,e){return arguments.length>1?this.each((e==null?NM:typeof e=="function"?CM:RM)(t,e)):this.node()[t]}function fA(t){return t.trim().split(/^|\s+/)}function t0(t){return t.classList||new pA(t)}function pA(t){this._node=t,this._names=fA(t.getAttribute("class")||"")}pA.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function mA(t,e){for(var n=t0(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function gA(t,e){for(var n=t0(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function OM(t){return function(){mA(this,t)}}function PM(t){return function(){gA(this,t)}}function LM(t,e){return function(){(e.apply(this,arguments)?mA:gA)(this,t)}}function DM(t,e){var n=fA(t+"");if(arguments.length<2){for(var r=t0(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?LM:e?OM:PM)(n,e))}function MM(){this.textContent=""}function jM(t){return function(){this.textContent=t}}function VM(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function UM(t){return arguments.length?this.each(t==null?MM:(typeof t=="function"?VM:jM)(t)):this.node().textContent}function FM(){this.innerHTML=""}function BM(t){return function(){this.innerHTML=t}}function zM(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function $M(t){return arguments.length?this.each(t==null?FM:(typeof t=="function"?zM:BM)(t)):this.node().innerHTML}function HM(){this.nextSibling&&this.parentNode.appendChild(this)}function GM(){return this.each(HM)}function WM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qM(){return this.each(WM)}function KM(t){var e=typeof t=="function"?t:aA(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function YM(){return null}function QM(t,e){var n=typeof t=="function"?t:aA(t),r=e==null?YM:typeof e=="function"?e:e0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function XM(){var t=this.parentNode;t&&t.removeChild(this)}function ZM(){return this.each(XM)}function JM(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ej(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tj(t){return this.select(t?ej:JM)}function nj(t){return arguments.length?this.property("__data__",t):this.node().__data__}function rj(t){return function(e){t.call(this,e,this.__data__)}}function ij(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function sj(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function oj(t,e,n){return function(){var r=this.__on,i,s=rj(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function aj(t,e,n){var r=ij(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,d=a.length,h;c<d;++c)for(i=0,h=a[c];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(a=e?oj:sj,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function yA(t,e,n){var r=hA(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function lj(t,e){return function(){return yA(this,t,e)}}function cj(t,e){return function(){return yA(this,t,e.apply(this,arguments))}}function uj(t,e){return this.each((typeof e=="function"?cj:lj)(t,e))}function*dj(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var vA=[null];function fn(t,e){this._groups=t,this._parents=e}function Cl(){return new fn([[document.documentElement]],vA)}function hj(){return this}fn.prototype=Cl.prototype={constructor:fn,select:VD,selectAll:zD,selectChild:WD,selectChildren:QD,filter:XD,data:rM,enter:ZD,exit:sM,join:oM,merge:aM,selection:hj,order:lM,sort:cM,call:dM,nodes:hM,node:fM,size:pM,empty:mM,each:gM,attr:bM,style:TM,property:kM,classed:DM,text:UM,html:$M,raise:GM,lower:qM,append:KM,insert:QM,remove:ZM,clone:tj,datum:nj,on:aj,dispatch:uj,[Symbol.iterator]:dj};function Mt(t){return typeof t=="string"?new fn([[document.querySelector(t)]],[document.documentElement]):new fn([[t]],vA)}function fj(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Mi(t,e){if(t=fj(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Dp={capture:!0,passive:!1};function Mp(t){t.preventDefault(),t.stopImmediatePropagation()}function pj(t){var e=t.document.documentElement,n=Mt(t).on("dragstart.drag",Mp,Dp);"onselectstart"in e?n.on("selectstart.drag",Mp,Dp):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function mj(t,e){var n=t.document.documentElement,r=Mt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Mp,Dp),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function n0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function EA(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function kl(){}var tl=.7,ed=1/tl,Ys="\\s*([+-]?\\d+)\\s*",nl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ir="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gj=/^#([0-9a-f]{3,8})$/,yj=new RegExp(`^rgb\\(${Ys},${Ys},${Ys}\\)$`),vj=new RegExp(`^rgb\\(${ir},${ir},${ir}\\)$`),Ej=new RegExp(`^rgba\\(${Ys},${Ys},${Ys},${nl}\\)$`),xj=new RegExp(`^rgba\\(${ir},${ir},${ir},${nl}\\)$`),_j=new RegExp(`^hsl\\(${nl},${ir},${ir}\\)$`),wj=new RegExp(`^hsla\\(${nl},${ir},${ir},${nl}\\)$`),bE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n0(kl,rl,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:SE,formatHex:SE,formatHex8:bj,formatHsl:Sj,formatRgb:AE,toString:AE});function SE(){return this.rgb().formatHex()}function bj(){return this.rgb().formatHex8()}function Sj(){return xA(this).formatHsl()}function AE(){return this.rgb().formatRgb()}function rl(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=gj.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?IE(e):n===3?new Zt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?wc(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?wc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yj.exec(t))?new Zt(e[1],e[2],e[3],1):(e=vj.exec(t))?new Zt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ej.exec(t))?wc(e[1],e[2],e[3],e[4]):(e=xj.exec(t))?wc(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_j.exec(t))?RE(e[1],e[2]/100,e[3]/100,1):(e=wj.exec(t))?RE(e[1],e[2]/100,e[3]/100,e[4]):bE.hasOwnProperty(t)?IE(bE[t]):t==="transparent"?new Zt(NaN,NaN,NaN,0):null}function IE(t){return new Zt(t>>16&255,t>>8&255,t&255,1)}function wc(t,e,n,r){return r<=0&&(t=e=n=NaN),new Zt(t,e,n,r)}function Aj(t){return t instanceof kl||(t=rl(t)),t?(t=t.rgb(),new Zt(t.r,t.g,t.b,t.opacity)):new Zt}function jp(t,e,n,r){return arguments.length===1?Aj(t):new Zt(t,e,n,r??1)}function Zt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}n0(Zt,jp,EA(kl,{brighter(t){return t=t==null?ed:Math.pow(ed,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?tl:Math.pow(tl,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zt(Qi(this.r),Qi(this.g),Qi(this.b),td(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TE,formatHex:TE,formatHex8:Ij,formatRgb:NE,toString:NE}));function TE(){return`#${Gi(this.r)}${Gi(this.g)}${Gi(this.b)}`}function Ij(){return`#${Gi(this.r)}${Gi(this.g)}${Gi(this.b)}${Gi((isNaN(this.opacity)?1:this.opacity)*255)}`}function NE(){const t=td(this.opacity);return`${t===1?"rgb(":"rgba("}${Qi(this.r)}, ${Qi(this.g)}, ${Qi(this.b)}${t===1?")":`, ${t})`}`}function td(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Qi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Gi(t){return t=Qi(t),(t<16?"0":"")+t.toString(16)}function RE(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vn(t,e,n,r)}function xA(t){if(t instanceof Vn)return new Vn(t.h,t.s,t.l,t.opacity);if(t instanceof kl||(t=rl(t)),!t)return new Vn;if(t instanceof Vn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,c=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new Vn(o,a,c,t.opacity)}function Tj(t,e,n,r){return arguments.length===1?xA(t):new Vn(t,e,n,r??1)}function Vn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}n0(Vn,Tj,EA(kl,{brighter(t){return t=t==null?ed:Math.pow(ed,t),new Vn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?tl:Math.pow(tl,t),new Vn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Zt(af(t>=240?t-240:t+120,i,r),af(t,i,r),af(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Vn(CE(this.h),bc(this.s),bc(this.l),td(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=td(this.opacity);return`${t===1?"hsl(":"hsla("}${CE(this.h)}, ${bc(this.s)*100}%, ${bc(this.l)*100}%${t===1?")":`, ${t})`}`}}));function CE(t){return t=(t||0)%360,t<0?t+360:t}function bc(t){return Math.max(0,Math.min(1,t||0))}function af(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const _A=t=>()=>t;function Nj(t,e){return function(n){return t+n*e}}function Rj(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Cj(t){return(t=+t)==1?wA:function(e,n){return n-e?Rj(e,n,t):_A(isNaN(e)?n:e)}}function wA(t,e){var n=e-t;return n?Nj(t,n):_A(isNaN(t)?e:t)}const kE=function t(e){var n=Cj(e);function r(i,s){var o=n((i=jp(i)).r,(s=jp(s)).r),a=n(i.g,s.g),c=n(i.b,s.b),d=wA(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=a(h),i.b=c(h),i.opacity=d(h),i+""}}return r.gamma=t,r}(1);function _n(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Vp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lf=new RegExp(Vp.source,"g");function kj(t){return function(){return t}}function Oj(t){return function(e){return t(e)+""}}function Pj(t,e){var n=Vp.lastIndex=lf.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(t=t+"",e=e+"";(r=Vp.exec(t))&&(i=lf.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:_n(r,i)})),n=lf.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?Oj(c[0].x):kj(e):(e=c.length,function(d){for(var h=0,p;h<e;++h)a[(p=c[h]).i]=p.x(d);return a.join("")})}var OE=180/Math.PI,Up={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bA(t,e,n,r,i,s){var o,a,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*OE,skewX:Math.atan(c)*OE,scaleX:o,scaleY:a}}var Sc;function Lj(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Up:bA(e.a,e.b,e.c,e.d,e.e,e.f)}function Dj(t){return t==null||(Sc||(Sc=document.createElementNS("http://www.w3.org/2000/svg","g")),Sc.setAttribute("transform",t),!(t=Sc.transform.baseVal.consolidate()))?Up:(t=t.matrix,bA(t.a,t.b,t.c,t.d,t.e,t.f))}function SA(t,e,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,h,p,f,g,_){if(d!==p||h!==f){var x=g.push("translate(",null,e,null,n);_.push({i:x-4,x:_n(d,p)},{i:x-2,x:_n(h,f)})}else(p||f)&&g.push("translate("+p+e+f+n)}function o(d,h,p,f){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),f.push({i:p.push(i(p)+"rotate(",null,r)-2,x:_n(d,h)})):h&&p.push(i(p)+"rotate("+h+r)}function a(d,h,p,f){d!==h?f.push({i:p.push(i(p)+"skewX(",null,r)-2,x:_n(d,h)}):h&&p.push(i(p)+"skewX("+h+r)}function c(d,h,p,f,g,_){if(d!==p||h!==f){var x=g.push(i(g)+"scale(",null,",",null,")");_.push({i:x-4,x:_n(d,p)},{i:x-2,x:_n(h,f)})}else(p!==1||f!==1)&&g.push(i(g)+"scale("+p+","+f+")")}return function(d,h){var p=[],f=[];return d=t(d),h=t(h),s(d.translateX,d.translateY,h.translateX,h.translateY,p,f),o(d.rotate,h.rotate,p,f),a(d.skewX,h.skewX,p,f),c(d.scaleX,d.scaleY,h.scaleX,h.scaleY,p,f),d=h=null,function(g){for(var _=-1,x=f.length,C;++_<x;)p[(C=f[_]).i]=C.x(g);return p.join("")}}}var Mj=SA(Lj,"px, ","px)","deg)"),jj=SA(Dj,", ",")",")"),Vj=1e-12;function PE(t){return((t=Math.exp(t))+1/t)/2}function Uj(t){return((t=Math.exp(t))-1/t)/2}function Fj(t){return((t=Math.exp(2*t))-1)/(t+1)}const Bj=function t(e,n,r){function i(s,o){var a=s[0],c=s[1],d=s[2],h=o[0],p=o[1],f=o[2],g=h-a,_=p-c,x=g*g+_*_,C,E;if(x<Vj)E=Math.log(f/d)/e,C=function(I){return[a+I*g,c+I*_,d*Math.exp(e*I*E)]};else{var w=Math.sqrt(x),b=(f*f-d*d+r*x)/(2*d*n*w),P=(f*f-d*d-r*x)/(2*f*n*w),D=Math.log(Math.sqrt(b*b+1)-b),j=Math.log(Math.sqrt(P*P+1)-P);E=(j-D)/e,C=function(I){var v=I*E,S=PE(D),A=d/(n*w)*(S*Fj(e*v+D)-Uj(D));return[a+A*g,c+A*_,d*S/PE(e*v+D)]}}return C.duration=E*1e3*e/Math.SQRT2,C}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,c=a*a;return t(o,a,c)},i}(Math.SQRT2,2,4);var po=0,la=0,Xo=0,AA=1e3,nd,ca,rd=0,ls=0,th=0,il=typeof performance=="object"&&performance.now?performance:Date,IA=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function r0(){return ls||(IA(zj),ls=il.now()+th)}function zj(){ls=0}function id(){this._call=this._time=this._next=null}id.prototype=TA.prototype={constructor:id,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?r0():+n)+(e==null?0:+e),!this._next&&ca!==this&&(ca?ca._next=this:nd=this,ca=this),this._call=t,this._time=n,Fp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fp())}};function TA(t,e,n){var r=new id;return r.restart(t,e,n),r}function $j(){r0(),++po;for(var t=nd,e;t;)(e=ls-t._time)>=0&&t._call.call(void 0,e),t=t._next;--po}function LE(){ls=(rd=il.now())+th,po=la=0;try{$j()}finally{po=0,Gj(),ls=0}}function Hj(){var t=il.now(),e=t-rd;e>AA&&(th-=e,rd=t)}function Gj(){for(var t,e=nd,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:nd=n);ca=t,Fp(r)}function Fp(t){if(!po){la&&(la=clearTimeout(la));var e=t-ls;e>24?(t<1/0&&(la=setTimeout(LE,t-il.now()-th)),Xo&&(Xo=clearInterval(Xo))):(Xo||(rd=il.now(),Xo=setInterval(Hj,AA)),po=1,IA(LE))}}function DE(t,e,n){var r=new id;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Wj=Jg("start","end","cancel","interrupt"),qj=[],NA=0,ME=1,Bp=2,su=3,jE=4,zp=5,ou=6;function nh(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Kj(t,n,{name:e,index:r,group:i,on:Wj,tween:qj,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:NA})}function i0(t,e){var n=Gn(t,e);if(n.state>NA)throw new Error("too late; already scheduled");return n}function cr(t,e){var n=Gn(t,e);if(n.state>su)throw new Error("too late; already running");return n}function Gn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Kj(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=TA(s,0,n.time);function s(d){n.state=ME,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var h,p,f,g;if(n.state!==ME)return c();for(h in r)if(g=r[h],g.name===n.name){if(g.state===su)return DE(o);g.state===jE?(g.state=ou,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[h]):+h<e&&(g.state=ou,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[h])}if(DE(function(){n.state===su&&(n.state=jE,n.timer.restart(a,n.delay,n.time),a(d))}),n.state=Bp,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Bp){for(n.state=su,i=new Array(f=n.tween.length),h=0,p=-1;h<f;++h)(g=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++p]=g);i.length=p+1}}function a(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(c),n.state=zp,1),p=-1,f=i.length;++p<f;)i[p].call(t,h);n.state===zp&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=ou,n.timer.stop(),delete r[e];for(var d in r)return;delete t.__transition}}function au(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>Bp&&r.state<zp,r.state=ou,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function Yj(t){return this.each(function(){au(this,t)})}function Qj(t,e){var n,r;return function(){var i=cr(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Xj(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=cr(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},c=0,d=i.length;c<d;++c)if(i[c].name===e){i[c]=a;break}c===d&&i.push(a)}s.tween=i}}function Zj(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Gn(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Qj:Xj)(n,t,e))}function s0(t,e,n){var r=t._id;return t.each(function(){var i=cr(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Gn(i,r).value[e]}}function RA(t,e){var n;return(typeof e=="number"?_n:e instanceof rl?kE:(n=rl(e))?(e=n,kE):Pj)(t,e)}function Jj(t){return function(){this.removeAttribute(t)}}function e4(t){return function(){this.removeAttributeNS(t.space,t.local)}}function t4(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function n4(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function r4(t,e,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,a)))}}function i4(t,e,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,a)))}}function s4(t,e){var n=eh(t),r=n==="transform"?jj:RA;return this.attrTween(t,typeof e=="function"?(n.local?i4:r4)(n,r,s0(this,"attr."+t,e)):e==null?(n.local?e4:Jj)(n):(n.local?n4:t4)(n,r,e))}function o4(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function a4(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function l4(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&a4(t,s)),n}return i._value=e,i}function c4(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&o4(t,s)),n}return i._value=e,i}function u4(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=eh(t);return this.tween(n,(r.local?l4:c4)(r,e))}function d4(t,e){return function(){i0(this,t).delay=+e.apply(this,arguments)}}function h4(t,e){return e=+e,function(){i0(this,t).delay=e}}function f4(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?d4:h4)(e,t)):Gn(this.node(),e).delay}function p4(t,e){return function(){cr(this,t).duration=+e.apply(this,arguments)}}function m4(t,e){return e=+e,function(){cr(this,t).duration=e}}function g4(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?p4:m4)(e,t)):Gn(this.node(),e).duration}function y4(t,e){if(typeof e!="function")throw new Error;return function(){cr(this,t).ease=e}}function v4(t){var e=this._id;return arguments.length?this.each(y4(e,t)):Gn(this.node(),e).ease}function E4(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;cr(this,t).ease=n}}function x4(t){if(typeof t!="function")throw new Error;return this.each(E4(this._id,t))}function _4(t){typeof t!="function"&&(t=cA(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],c,d=0;d<o;++d)(c=s[d])&&t.call(c,c.__data__,d,s)&&a.push(c);return new Vr(r,this._parents,this._name,this._id)}function w4(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var c=e[a],d=n[a],h=c.length,p=o[a]=new Array(h),f,g=0;g<h;++g)(f=c[g]||d[g])&&(p[g]=f);for(;a<r;++a)o[a]=e[a];return new Vr(o,this._parents,this._name,this._id)}function b4(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function S4(t,e,n){var r,i,s=b4(e)?i0:cr;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function A4(t,e){var n=this._id;return arguments.length<2?Gn(this.node(),n).on.on(t):this.each(S4(n,t,e))}function I4(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function T4(){return this.on("end.remove",I4(this._id))}function N4(t){var e=this._name,n=this._id;typeof t!="function"&&(t=e0(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],c=a.length,d=s[o]=new Array(c),h,p,f=0;f<c;++f)(h=a[f])&&(p=t.call(h,h.__data__,f,a))&&("__data__"in h&&(p.__data__=h.__data__),d[f]=p,nh(d[f],e,n,f,d,Gn(h,n)));return new Vr(s,this._parents,e,n)}function R4(t){var e=this._name,n=this._id;typeof t!="function"&&(t=lA(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var c=r[a],d=c.length,h,p=0;p<d;++p)if(h=c[p]){for(var f=t.call(h,h.__data__,p,c),g,_=Gn(h,n),x=0,C=f.length;x<C;++x)(g=f[x])&&nh(g,e,n,x,f,_);s.push(f),o.push(h)}return new Vr(s,o,e,n)}var C4=Cl.prototype.constructor;function k4(){return new C4(this._groups,this._parents)}function O4(t,e){var n,r,i;return function(){var s=fo(this,t),o=(this.style.removeProperty(t),fo(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function CA(t){return function(){this.style.removeProperty(t)}}function P4(t,e,n){var r,i=n+"",s;return function(){var o=fo(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function L4(t,e,n){var r,i,s;return function(){var o=fo(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),fo(this,t))),o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,a))}}function D4(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var c=cr(this,t),d=c.on,h=c.value[s]==null?a||(a=CA(e)):void 0;(d!==n||i!==h)&&(r=(n=d).copy()).on(o,i=h),c.on=r}}function M4(t,e,n){var r=(t+="")=="transform"?Mj:RA;return e==null?this.styleTween(t,O4(t,r)).on("end.style."+t,CA(t)):typeof e=="function"?this.styleTween(t,L4(t,r,s0(this,"style."+t,e))).each(D4(this._id,t)):this.styleTween(t,P4(t,r,e),n).on("end.style."+t,null)}function j4(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function V4(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&j4(t,o,n)),r}return s._value=e,s}function U4(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,V4(t,e,n??""))}function F4(t){return function(){this.textContent=t}}function B4(t){return function(){var e=t(this);this.textContent=e??""}}function z4(t){return this.tween("text",typeof t=="function"?B4(s0(this,"text",t)):F4(t==null?"":t+""))}function $4(t){return function(e){this.textContent=t.call(this,e)}}function H4(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&$4(i)),e}return r._value=t,r}function G4(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,H4(t))}function W4(){for(var t=this._name,e=this._id,n=kA(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,d=0;d<a;++d)if(c=o[d]){var h=Gn(c,e);nh(c,t,n,d,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Vr(r,this._parents,t,n)}function q4(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var d=cr(this,r),h=d.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),d.on=e}),i===0&&s()})}var K4=0;function Vr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function kA(){return++K4}var pr=Cl.prototype;Vr.prototype={constructor:Vr,select:N4,selectAll:R4,selectChild:pr.selectChild,selectChildren:pr.selectChildren,filter:_4,merge:w4,selection:k4,transition:W4,call:pr.call,nodes:pr.nodes,node:pr.node,size:pr.size,empty:pr.empty,each:pr.each,on:A4,attr:s4,attrTween:u4,style:M4,styleTween:U4,text:z4,textTween:G4,remove:T4,tween:Zj,delay:f4,duration:g4,ease:v4,easeVarying:x4,end:q4,[Symbol.iterator]:pr[Symbol.iterator]};const Y4=t=>+t;function Q4(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function OA(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var X4={time:null,delay:0,duration:250,ease:OA};function Z4(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function J4(t){var e,n;t instanceof Vr?(e=t._id,t=t._name):(e=kA(),(n=X4).time=r0(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,d=0;d<a;++d)(c=o[d])&&nh(c,t,e,d,o,n||Z4(c,e));return new Vr(r,this._parents,t,e)}Cl.prototype.interrupt=Yj;Cl.prototype.transition=J4;var Re=1e-6,Ne=Math.PI,An=Ne/2,VE=Ne/4,kn=Ne*2,Ln=180/Ne,Ht=Ne/180,We=Math.abs,e5=Math.atan,mo=Math.atan2,Je=Math.cos,Be=Math.sin,lu=Math.sign||function(t){return t>0?1:t<0?-1:0},Ur=Math.sqrt;function t5(t){return t>1?0:t<-1?Ne:Math.acos(t)}function cs(t){return t>1?An:t<-1?-An:Math.asin(t)}function In(){}function sd(t,e){t&&FE.hasOwnProperty(t.type)&&FE[t.type](t,e)}var UE={Feature:function(t,e){sd(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)sd(n[r].geometry,e)}},FE={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){$p(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)$p(n[r],e,0)},Polygon:function(t,e){BE(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)BE(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)sd(n[r],e)}};function $p(t,e,n){var r=-1,i=t.length-n,s;for(e.lineStart();++r<i;)s=t[r],e.point(s[0],s[1],s[2]);e.lineEnd()}function BE(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)$p(t[n],e,1);e.polygonEnd()}function As(t,e){t&&UE.hasOwnProperty(t.type)?UE[t.type](t,e):sd(t,e)}function Hp(t){return[mo(t[1],t[0]),cs(t[2])]}function go(t){var e=t[0],n=t[1],r=Je(n);return[r*Je(e),r*Be(e),Be(n)]}function Ac(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function od(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function cf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ic(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Gp(t){var e=Ur(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Wp(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function qp(t,e){return We(t)>Ne&&(t-=Math.round(t/kn)*kn),[t,e]}qp.invert=qp;function n5(t,e,n){return(t%=kn)?e||n?Wp($E(t),HE(e,n)):$E(t):e||n?HE(e,n):qp}function zE(t){return function(e,n){return e+=t,We(e)>Ne&&(e-=Math.round(e/kn)*kn),[e,n]}}function $E(t){var e=zE(t);return e.invert=zE(-t),e}function HE(t,e){var n=Je(t),r=Be(t),i=Je(e),s=Be(e);function o(a,c){var d=Je(c),h=Je(a)*d,p=Be(a)*d,f=Be(c),g=f*n+h*r;return[mo(p*i-g*s,h*n-f*r),cs(g*i+p*s)]}return o.invert=function(a,c){var d=Je(c),h=Je(a)*d,p=Be(a)*d,f=Be(c),g=f*i-p*s;return[mo(p*i+f*s,h*n+g*r),cs(g*n-h*r)]},o}function r5(t,e,n,r,i,s){if(n){var o=Je(e),a=Be(e),c=r*n;i==null?(i=e+r*kn,s=e-c/2):(i=GE(o,i),s=GE(o,s),(r>0?i<s:i>s)&&(i+=r*kn));for(var d,h=i;r>0?h>s:h<s;h-=c)d=Hp([o,-a*Je(h),-a*Be(h)]),t.point(d[0],d[1])}}function GE(t,e){e=go(e),e[0]-=t,Gp(e);var n=t5(-e[1]);return((-e[2]<0?-n:n)+kn-Re)%kn}function PA(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:In,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function cu(t,e){return We(t[0]-e[0])<Re&&We(t[1]-e[1])<Re}function Tc(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function LA(t,e,n,r,i){var s=[],o=[],a,c;if(t.forEach(function(_){if(!((x=_.length-1)<=0)){var x,C=_[0],E=_[x],w;if(cu(C,E)){if(!C[2]&&!E[2]){for(i.lineStart(),a=0;a<x;++a)i.point((C=_[a])[0],C[1]);i.lineEnd();return}E[0]+=2*Re}s.push(w=new Tc(C,_,null,!0)),o.push(w.o=new Tc(C,null,w,!1)),s.push(w=new Tc(E,_,null,!1)),o.push(w.o=new Tc(E,null,w,!0))}}),!!s.length){for(o.sort(e),WE(s),WE(o),a=0,c=o.length;a<c;++a)o[a].e=n=!n;for(var d=s[0],h,p;;){for(var f=d,g=!0;f.v;)if((f=f.n)===d)return;h=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(g)for(a=0,c=h.length;a<c;++a)i.point((p=h[a])[0],p[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(g)for(h=f.p.z,a=h.length-1;a>=0;--a)i.point((p=h[a])[0],p[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,h=f.z,g=!g}while(!f.v);i.lineEnd()}}}function WE(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function uf(t){return We(t[0])<=Ne?t[0]:lu(t[0])*((We(t[0])+Ne)%kn-Ne)}function i5(t,e){var n=uf(e),r=e[1],i=Be(r),s=[Be(n),-Je(n),0],o=0,a=0,c=new as;i===1?r=An+Re:i===-1&&(r=-An-Re);for(var d=0,h=t.length;d<h;++d)if(f=(p=t[d]).length)for(var p,f,g=p[f-1],_=uf(g),x=g[1]/2+VE,C=Be(x),E=Je(x),w=0;w<f;++w,_=P,C=j,E=I,g=b){var b=p[w],P=uf(b),D=b[1]/2+VE,j=Be(D),I=Je(D),v=P-_,S=v>=0?1:-1,A=S*v,k=A>Ne,O=C*j;if(c.add(mo(O*S*Be(A),E*I+O*Je(A))),o+=k?v+S*kn:v,k^_>=n^P>=n){var R=od(go(g),go(b));Gp(R);var M=od(s,R);Gp(M);var L=(k^v>=0?-1:1)*cs(M[2]);(r>L||r===L&&(R[0]||R[1]))&&(a+=k^v>=0?1:-1)}}return(o<-Re||o<Re&&c<-1e-12)^a&1}function DA(t,e,n,r){return function(i){var s=e(i),o=PA(),a=e(o),c=!1,d,h,p,f={point:g,lineStart:x,lineEnd:C,polygonStart:function(){f.point=E,f.lineStart=w,f.lineEnd=b,h=[],d=[]},polygonEnd:function(){f.point=g,f.lineStart=x,f.lineEnd=C,h=oA(h);var P=i5(d,r);h.length?(c||(i.polygonStart(),c=!0),LA(h,o5,P,n,i)):P&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),h=d=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(P,D){t(P,D)&&i.point(P,D)}function _(P,D){s.point(P,D)}function x(){f.point=_,s.lineStart()}function C(){f.point=g,s.lineEnd()}function E(P,D){p.push([P,D]),a.point(P,D)}function w(){a.lineStart(),p=[]}function b(){E(p[0][0],p[0][1]),a.lineEnd();var P=a.clean(),D=o.result(),j,I=D.length,v,S,A;if(p.pop(),d.push(p),p=null,!!I){if(P&1){if(S=D[0],(v=S.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),j=0;j<v;++j)i.point((A=S[j])[0],A[1]);i.lineEnd()}return}I>1&&P&2&&D.push(D.pop().concat(D.shift())),h.push(D.filter(s5))}}return f}}function s5(t){return t.length>1}function o5(t,e){return((t=t.x)[0]<0?t[1]-An-Re:An-t[1])-((e=e.x)[0]<0?e[1]-An-Re:An-e[1])}const qE=DA(function(){return!0},a5,c5,[-Ne,-An]);function a5(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(s,o){var a=s>0?Ne:-Ne,c=We(s-e);We(c-Ne)<Re?(t.point(e,n=(n+o)/2>0?An:-An),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(s,n),i=0):r!==a&&c>=Ne&&(We(e-r)<Re&&(e-=r*Re),We(s-a)<Re&&(s-=a*Re),n=l5(e,n,s,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),i=0),t.point(e=s,n=o),r=a},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function l5(t,e,n,r){var i,s,o=Be(t-n);return We(o)>Re?e5((Be(e)*(s=Je(r))*Be(n)-Be(r)*(i=Je(e))*Be(t))/(i*s*o)):(e+r)/2}function c5(t,e,n,r){var i;if(t==null)i=n*An,r.point(-Ne,i),r.point(0,i),r.point(Ne,i),r.point(Ne,0),r.point(Ne,-i),r.point(0,-i),r.point(-Ne,-i),r.point(-Ne,0),r.point(-Ne,i);else if(We(t[0]-e[0])>Re){var s=t[0]<e[0]?Ne:-Ne;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(e[0],e[1])}function u5(t){var e=Je(t),n=2*Ht,r=e>0,i=We(e)>Re;function s(h,p,f,g){r5(g,t,n,f,h,p)}function o(h,p){return Je(h)*Je(p)>e}function a(h){var p,f,g,_,x;return{lineStart:function(){_=g=!1,x=1},point:function(C,E){var w=[C,E],b,P=o(C,E),D=r?P?0:d(C,E):P?d(C+(C<0?Ne:-Ne),E):0;if(!p&&(_=g=P)&&h.lineStart(),P!==g&&(b=c(p,w),(!b||cu(p,b)||cu(w,b))&&(w[2]=1)),P!==g)x=0,P?(h.lineStart(),b=c(w,p),h.point(b[0],b[1])):(b=c(p,w),h.point(b[0],b[1],2),h.lineEnd()),p=b;else if(i&&p&&r^P){var j;!(D&f)&&(j=c(w,p,!0))&&(x=0,r?(h.lineStart(),h.point(j[0][0],j[0][1]),h.point(j[1][0],j[1][1]),h.lineEnd()):(h.point(j[1][0],j[1][1]),h.lineEnd(),h.lineStart(),h.point(j[0][0],j[0][1],3)))}P&&(!p||!cu(p,w))&&h.point(w[0],w[1]),p=w,g=P,f=D},lineEnd:function(){g&&h.lineEnd(),p=null},clean:function(){return x|(_&&g)<<1}}}function c(h,p,f){var g=go(h),_=go(p),x=[1,0,0],C=od(g,_),E=Ac(C,C),w=C[0],b=E-w*w;if(!b)return!f&&h;var P=e*E/b,D=-e*w/b,j=od(x,C),I=Ic(x,P),v=Ic(C,D);cf(I,v);var S=j,A=Ac(I,S),k=Ac(S,S),O=A*A-k*(Ac(I,I)-1);if(!(O<0)){var R=Ur(O),M=Ic(S,(-A-R)/k);if(cf(M,I),M=Hp(M),!f)return M;var L=h[0],U=p[0],K=h[1],V=p[1],W;U<L&&(W=L,L=U,U=W);var Q=U-L,te=We(Q-Ne)<Re,ae=te||Q<Re;if(!te&&V<K&&(W=K,K=V,V=W),ae?te?K+V>0^M[1]<(We(M[0]-L)<Re?K:V):K<=M[1]&&M[1]<=V:Q>Ne^(L<=M[0]&&M[0]<=U)){var $=Ic(S,(-A+R)/k);return cf($,I),[M,Hp($)]}}}function d(h,p){var f=r?t:Ne-t,g=0;return h<-f?g|=1:h>f&&(g|=2),p<-f?g|=4:p>f&&(g|=8),g}return DA(o,a,s,r?[0,-t]:[-Ne,t-Ne])}function d5(t,e,n,r,i,s){var o=t[0],a=t[1],c=e[0],d=e[1],h=0,p=1,f=c-o,g=d-a,_;if(_=n-o,!(!f&&_>0)){if(_/=f,f<0){if(_<h)return;_<p&&(p=_)}else if(f>0){if(_>p)return;_>h&&(h=_)}if(_=i-o,!(!f&&_<0)){if(_/=f,f<0){if(_>p)return;_>h&&(h=_)}else if(f>0){if(_<h)return;_<p&&(p=_)}if(_=r-a,!(!g&&_>0)){if(_/=g,g<0){if(_<h)return;_<p&&(p=_)}else if(g>0){if(_>p)return;_>h&&(h=_)}if(_=s-a,!(!g&&_<0)){if(_/=g,g<0){if(_>p)return;_>h&&(h=_)}else if(g>0){if(_<h)return;_<p&&(p=_)}return h>0&&(t[0]=o+h*f,t[1]=a+h*g),p<1&&(e[0]=o+p*f,e[1]=a+p*g),!0}}}}}var ua=1e9,Nc=-ua;function h5(t,e,n,r){function i(d,h){return t<=d&&d<=n&&e<=h&&h<=r}function s(d,h,p,f){var g=0,_=0;if(d==null||(g=o(d,p))!==(_=o(h,p))||c(d,h)<0^p>0)do f.point(g===0||g===3?t:n,g>1?r:e);while((g=(g+p+4)%4)!==_);else f.point(h[0],h[1])}function o(d,h){return We(d[0]-t)<Re?h>0?0:3:We(d[0]-n)<Re?h>0?2:1:We(d[1]-e)<Re?h>0?1:0:h>0?3:2}function a(d,h){return c(d.x,h.x)}function c(d,h){var p=o(d,1),f=o(h,1);return p!==f?p-f:p===0?h[1]-d[1]:p===1?d[0]-h[0]:p===2?d[1]-h[1]:h[0]-d[0]}return function(d){var h=d,p=PA(),f,g,_,x,C,E,w,b,P,D,j,I={point:v,lineStart:O,lineEnd:R,polygonStart:A,polygonEnd:k};function v(L,U){i(L,U)&&h.point(L,U)}function S(){for(var L=0,U=0,K=g.length;U<K;++U)for(var V=g[U],W=1,Q=V.length,te=V[0],ae,$,Y=te[0],X=te[1];W<Q;++W)ae=Y,$=X,te=V[W],Y=te[0],X=te[1],$<=r?X>r&&(Y-ae)*(r-$)>(X-$)*(t-ae)&&++L:X<=r&&(Y-ae)*(r-$)<(X-$)*(t-ae)&&--L;return L}function A(){h=p,f=[],g=[],j=!0}function k(){var L=S(),U=j&&L,K=(f=oA(f)).length;(U||K)&&(d.polygonStart(),U&&(d.lineStart(),s(null,null,1,d),d.lineEnd()),K&&LA(f,a,L,s,d),d.polygonEnd()),h=d,f=g=_=null}function O(){I.point=M,g&&g.push(_=[]),D=!0,P=!1,w=b=NaN}function R(){f&&(M(x,C),E&&P&&p.rejoin(),f.push(p.result())),I.point=v,P&&h.lineEnd()}function M(L,U){var K=i(L,U);if(g&&_.push([L,U]),D)x=L,C=U,E=K,D=!1,K&&(h.lineStart(),h.point(L,U));else if(K&&P)h.point(L,U);else{var V=[w=Math.max(Nc,Math.min(ua,w)),b=Math.max(Nc,Math.min(ua,b))],W=[L=Math.max(Nc,Math.min(ua,L)),U=Math.max(Nc,Math.min(ua,U))];d5(V,W,t,e,n,r)?(P||(h.lineStart(),h.point(V[0],V[1])),h.point(W[0],W[1]),K||h.lineEnd(),j=!1):K&&(h.lineStart(),h.point(L,U),j=!1)}w=L,b=U,P=K}return I}}const Kp=t=>t;var df=new as,Yp=new as,MA,jA,Qp,Xp,vr={point:In,lineStart:In,lineEnd:In,polygonStart:function(){vr.lineStart=f5,vr.lineEnd=m5},polygonEnd:function(){vr.lineStart=vr.lineEnd=vr.point=In,df.add(We(Yp)),Yp=new as},result:function(){var t=df/2;return df=new as,t}};function f5(){vr.point=p5}function p5(t,e){vr.point=VA,MA=Qp=t,jA=Xp=e}function VA(t,e){Yp.add(Xp*t-Qp*e),Qp=t,Xp=e}function m5(){VA(MA,jA)}var yo=1/0,ad=yo,sl=-yo,ld=sl,cd={point:g5,lineStart:In,lineEnd:In,polygonStart:In,polygonEnd:In,result:function(){var t=[[yo,ad],[sl,ld]];return sl=ld=-(ad=yo=1/0),t}};function g5(t,e){t<yo&&(yo=t),t>sl&&(sl=t),e<ad&&(ad=e),e>ld&&(ld=e)}var Zp=0,Jp=0,da=0,ud=0,dd=0,Vs=0,em=0,tm=0,ha=0,UA,FA,Xn,Zn,bn={point:us,lineStart:KE,lineEnd:YE,polygonStart:function(){bn.lineStart=E5,bn.lineEnd=x5},polygonEnd:function(){bn.point=us,bn.lineStart=KE,bn.lineEnd=YE},result:function(){var t=ha?[em/ha,tm/ha]:Vs?[ud/Vs,dd/Vs]:da?[Zp/da,Jp/da]:[NaN,NaN];return Zp=Jp=da=ud=dd=Vs=em=tm=ha=0,t}};function us(t,e){Zp+=t,Jp+=e,++da}function KE(){bn.point=y5}function y5(t,e){bn.point=v5,us(Xn=t,Zn=e)}function v5(t,e){var n=t-Xn,r=e-Zn,i=Ur(n*n+r*r);ud+=i*(Xn+t)/2,dd+=i*(Zn+e)/2,Vs+=i,us(Xn=t,Zn=e)}function YE(){bn.point=us}function E5(){bn.point=_5}function x5(){BA(UA,FA)}function _5(t,e){bn.point=BA,us(UA=Xn=t,FA=Zn=e)}function BA(t,e){var n=t-Xn,r=e-Zn,i=Ur(n*n+r*r);ud+=i*(Xn+t)/2,dd+=i*(Zn+e)/2,Vs+=i,i=Zn*t-Xn*e,em+=i*(Xn+t),tm+=i*(Zn+e),ha+=i*3,us(Xn=t,Zn=e)}function zA(t){this._context=t}zA.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,kn);break}}},result:In};var nm=new as,hf,$A,HA,fa,pa,ol={point:In,lineStart:function(){ol.point=w5},lineEnd:function(){hf&&GA($A,HA),ol.point=In},polygonStart:function(){hf=!0},polygonEnd:function(){hf=null},result:function(){var t=+nm;return nm=new as,t}};function w5(t,e){ol.point=GA,$A=fa=t,HA=pa=e}function GA(t,e){fa-=t,pa-=e,nm.add(Ur(fa*fa+pa*pa)),fa=t,pa=e}let QE,hd,XE,ZE;class JE{constructor(e){this._append=e==null?WA:b5(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==XE||this._append!==hd){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,XE=r,hd=this._append,ZE=this._,this._=i}this._+=ZE;break}}}result(){const e=this._;return this._="",e.length?e:null}}function WA(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function b5(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return WA;if(e!==QE){const n=10**e;QE=e,hd=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return hd}function S5(t,e){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),As(a,i(s))),s.result()}return o.area=function(a){return As(a,i(vr)),vr.result()},o.measure=function(a){return As(a,i(ol)),ol.result()},o.bounds=function(a){return As(a,i(cd)),cd.result()},o.centroid=function(a){return As(a,i(bn)),bn.result()},o.projection=function(a){return arguments.length?(i=a==null?(t=null,Kp):(t=a).stream,o):t},o.context=function(a){return arguments.length?(s=a==null?(e=null,new JE(n)):new zA(e=a),typeof r!="function"&&s.pointRadius(r),o):e},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const c=Math.floor(a);if(!(c>=0))throw new RangeError(`invalid digits: ${a}`);n=c}return e===null&&(s=new JE(n)),o},o.projection(t).digits(n).context(e)}function o0(t){return function(e){var n=new rm;for(var r in t)n[r]=t[r];return n.stream=e,n}}function rm(){}rm.prototype={constructor:rm,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function a0(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),As(n,t.stream(cd)),e(cd.result()),r!=null&&t.clipExtent(r),t}function l0(t,e,n){return a0(t,function(r){var i=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+e[0][0]+(i-o*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(s-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,c])},n)}function qA(t,e,n){return l0(t,[[0,0],e],n)}function KA(t,e,n){return a0(t,function(r){var i=+e,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];t.scale(150*s).translate([o,a])},n)}function YA(t,e,n){return a0(t,function(r){var i=+e,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;t.scale(150*s).translate([o,a])},n)}var ex=16,A5=Je(30*Ht);function tx(t,e){return+e?T5(t,e):I5(t)}function I5(t){return o0({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function T5(t,e){function n(r,i,s,o,a,c,d,h,p,f,g,_,x,C){var E=d-r,w=h-i,b=E*E+w*w;if(b>4*e&&x--){var P=o+f,D=a+g,j=c+_,I=Ur(P*P+D*D+j*j),v=cs(j/=I),S=We(We(j)-1)<Re||We(s-p)<Re?(s+p)/2:mo(D,P),A=t(S,v),k=A[0],O=A[1],R=k-r,M=O-i,L=w*R-E*M;(L*L/b>e||We((E*R+w*M)/b-.5)>.3||o*f+a*g+c*_<A5)&&(n(r,i,s,o,a,c,k,O,S,P/=I,D/=I,j,x,C),C.point(k,O),n(k,O,S,P,D,j,d,h,p,f,g,_,x,C))}}return function(r){var i,s,o,a,c,d,h,p,f,g,_,x,C={point:E,lineStart:w,lineEnd:P,polygonStart:function(){r.polygonStart(),C.lineStart=D},polygonEnd:function(){r.polygonEnd(),C.lineStart=w}};function E(v,S){v=t(v,S),r.point(v[0],v[1])}function w(){p=NaN,C.point=b,r.lineStart()}function b(v,S){var A=go([v,S]),k=t(v,S);n(p,f,h,g,_,x,p=k[0],f=k[1],h=v,g=A[0],_=A[1],x=A[2],ex,r),r.point(p,f)}function P(){C.point=E,r.lineEnd()}function D(){w(),C.point=j,C.lineEnd=I}function j(v,S){b(i=v,S),s=p,o=f,a=g,c=_,d=x,C.point=b}function I(){n(p,f,h,g,_,x,s,o,i,a,c,d,ex,r),C.lineEnd=P,P()}return C}}var N5=o0({point:function(t,e){this.stream.point(t*Ht,e*Ht)}});function R5(t){return o0({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function C5(t,e,n,r,i){function s(o,a){return o*=r,a*=i,[e+t*o,n-t*a]}return s.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},s}function nx(t,e,n,r,i,s){if(!s)return C5(t,e,n,r,i);var o=Je(s),a=Be(s),c=o*t,d=a*t,h=o/t,p=a/t,f=(a*n-o*e)/t,g=(a*e+o*n)/t;function _(x,C){return x*=r,C*=i,[c*x-d*C+e,n-d*x-c*C]}return _.invert=function(x,C){return[r*(h*x-p*C+f),i*(g-p*x-h*C)]},_}function k5(t){var e,n=150,r=480,i=250,s=0,o=0,a=0,c=0,d=0,h,p=0,f=1,g=1,_=null,x=qE,C=null,E,w,b,P=Kp,D=.5,j,I,v,S,A;function k(L){return v(L[0]*Ht,L[1]*Ht)}function O(L){return L=v.invert(L[0],L[1]),L&&[L[0]*Ln,L[1]*Ln]}k.stream=function(L){return S&&A===L?S:S=N5(R5(h)(x(j(P(A=L)))))},k.preclip=function(L){return arguments.length?(x=L,_=void 0,M()):x},k.postclip=function(L){return arguments.length?(P=L,C=E=w=b=null,M()):P},k.clipAngle=function(L){return arguments.length?(x=+L?u5(_=L*Ht):(_=null,qE),M()):_*Ln},k.clipExtent=function(L){return arguments.length?(P=L==null?(C=E=w=b=null,Kp):h5(C=+L[0][0],E=+L[0][1],w=+L[1][0],b=+L[1][1]),M()):C==null?null:[[C,E],[w,b]]},k.scale=function(L){return arguments.length?(n=+L,R()):n},k.translate=function(L){return arguments.length?(r=+L[0],i=+L[1],R()):[r,i]},k.center=function(L){return arguments.length?(s=L[0]%360*Ht,o=L[1]%360*Ht,R()):[s*Ln,o*Ln]},k.rotate=function(L){return arguments.length?(a=L[0]%360*Ht,c=L[1]%360*Ht,d=L.length>2?L[2]%360*Ht:0,R()):[a*Ln,c*Ln,d*Ln]},k.angle=function(L){return arguments.length?(p=L%360*Ht,R()):p*Ln},k.reflectX=function(L){return arguments.length?(f=L?-1:1,R()):f<0},k.reflectY=function(L){return arguments.length?(g=L?-1:1,R()):g<0},k.precision=function(L){return arguments.length?(j=tx(I,D=L*L),M()):Ur(D)},k.fitExtent=function(L,U){return l0(k,L,U)},k.fitSize=function(L,U){return qA(k,L,U)},k.fitWidth=function(L,U){return KA(k,L,U)},k.fitHeight=function(L,U){return YA(k,L,U)};function R(){var L=nx(n,0,0,f,g,p).apply(null,e(s,o)),U=nx(n,r-L[0],i-L[1],f,g,p);return h=n5(a,c,d),I=Wp(e,U),v=Wp(h,I),j=tx(I,D),M()}function M(){return S=A=null,k}return function(){return e=t.apply(this,arguments),k.invert=e.invert&&O,R()}}function O5(t){var e=0,n=Ne/3,r=k5(t),i=r(e,n);return i.parallels=function(s){return arguments.length?r(e=s[0]*Ht,n=s[1]*Ht):[e*Ln,n*Ln]},i}function P5(t){var e=Je(t);function n(r,i){return[r*e,Be(i)/e]}return n.invert=function(r,i){return[r/e,cs(i*e)]},n}function L5(t,e){var n=Be(t),r=(n+Be(e))/2;if(We(r)<Re)return P5(t);var i=1+n*(2*r-n),s=Ur(i)/r;function o(a,c){var d=Ur(i-2*r*Be(c))/r;return[d*Be(a*=r),s-d*Je(a)]}return o.invert=function(a,c){var d=s-c,h=mo(a,We(d))*lu(d);return d*r<0&&(h-=Ne*lu(a)*lu(d)),[h/r,cs((i-(a*a+d*d)*r*r)/(2*r))]},o}function im(){return O5(L5).scale(155.424).center([0,33.6442])}function D5(){return im().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function M5(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function j5(){var t,e,n=D5(),r,i=im().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=im().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,c,d={point:function(f,g){c=[f,g]}};function h(f){var g=f[0],_=f[1];return c=null,r.point(g,_),c||(s.point(g,_),c)||(a.point(g,_),c)}h.invert=function(f){var g=n.scale(),_=n.translate(),x=(f[0]-_[0])/g,C=(f[1]-_[1])/g;return(C>=.12&&C<.234&&x>=-.425&&x<-.214?i:C>=.166&&C<.234&&x>=-.214&&x<-.115?o:n).invert(f)},h.stream=function(f){return t&&e===f?t:t=M5([n.stream(e=f),i.stream(f),o.stream(f)])},h.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),o.precision(f),p()):n.precision()},h.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),o.scale(f),h.translate(n.translate())):n.scale()},h.translate=function(f){if(!arguments.length)return n.translate();var g=n.scale(),_=+f[0],x=+f[1];return r=n.translate(f).clipExtent([[_-.455*g,x-.238*g],[_+.455*g,x+.238*g]]).stream(d),s=i.translate([_-.307*g,x+.201*g]).clipExtent([[_-.425*g+Re,x+.12*g+Re],[_-.214*g-Re,x+.234*g-Re]]).stream(d),a=o.translate([_-.205*g,x+.212*g]).clipExtent([[_-.214*g+Re,x+.166*g+Re],[_-.115*g-Re,x+.234*g-Re]]).stream(d),p()},h.fitExtent=function(f,g){return l0(h,f,g)},h.fitSize=function(f,g){return qA(h,f,g)},h.fitWidth=function(f,g){return KA(h,f,g)},h.fitHeight=function(f,g){return YA(h,f,g)};function p(){return t=e=null,h}return h.scale(1070)}const Rc=t=>()=>t;function V5(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ar(t,e,n){this.k=t,this.x=e,this.y=n}Ar.prototype={constructor:Ar,scale:function(t){return t===1?this:new Ar(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ar(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rh=new Ar(1,0,0);QA.prototype=Ar.prototype;function QA(t){for(;!t.__zoom;)if(!(t=t.parentNode))return rh;return t.__zoom}function ff(t){t.stopImmediatePropagation()}function Zo(t){t.preventDefault(),t.stopImmediatePropagation()}function U5(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function F5(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function rx(){return this.__zoom||rh}function B5(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function z5(){return navigator.maxTouchPoints||"ontouchstart"in this}function $5(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function H5(){var t=U5,e=F5,n=$5,r=B5,i=z5,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Bj,d=Jg("start","zoom","end"),h,p,f,g=500,_=150,x=0,C=10;function E(M){M.property("__zoom",rx).on("wheel.zoom",v,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",A).filter(i).on("touchstart.zoom",k).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(M,L,U,K){var V=M.selection?M.selection():M;V.property("__zoom",rx),M!==V?D(M,L,U,K):V.interrupt().each(function(){j(this,arguments).event(K).start().zoom(null,typeof L=="function"?L.apply(this,arguments):L).end()})},E.scaleBy=function(M,L,U,K){E.scaleTo(M,function(){var V=this.__zoom.k,W=typeof L=="function"?L.apply(this,arguments):L;return V*W},U,K)},E.scaleTo=function(M,L,U,K){E.transform(M,function(){var V=e.apply(this,arguments),W=this.__zoom,Q=U==null?P(V):typeof U=="function"?U.apply(this,arguments):U,te=W.invert(Q),ae=typeof L=="function"?L.apply(this,arguments):L;return n(b(w(W,ae),Q,te),V,o)},U,K)},E.translateBy=function(M,L,U,K){E.transform(M,function(){return n(this.__zoom.translate(typeof L=="function"?L.apply(this,arguments):L,typeof U=="function"?U.apply(this,arguments):U),e.apply(this,arguments),o)},null,K)},E.translateTo=function(M,L,U,K,V){E.transform(M,function(){var W=e.apply(this,arguments),Q=this.__zoom,te=K==null?P(W):typeof K=="function"?K.apply(this,arguments):K;return n(rh.translate(te[0],te[1]).scale(Q.k).translate(typeof L=="function"?-L.apply(this,arguments):-L,typeof U=="function"?-U.apply(this,arguments):-U),W,o)},K,V)};function w(M,L){return L=Math.max(s[0],Math.min(s[1],L)),L===M.k?M:new Ar(L,M.x,M.y)}function b(M,L,U){var K=L[0]-U[0]*M.k,V=L[1]-U[1]*M.k;return K===M.x&&V===M.y?M:new Ar(M.k,K,V)}function P(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function D(M,L,U,K){M.on("start.zoom",function(){j(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(K).end()}).tween("zoom",function(){var V=this,W=arguments,Q=j(V,W).event(K),te=e.apply(V,W),ae=U==null?P(te):typeof U=="function"?U.apply(V,W):U,$=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),Y=V.__zoom,X=typeof L=="function"?L.apply(V,W):L,ne=c(Y.invert(ae).concat($/Y.k),X.invert(ae).concat($/X.k));return function(se){if(se===1)se=X;else{var ye=ne(se),De=$/ye[2];se=new Ar(De,ae[0]-ye[0]*De,ae[1]-ye[1]*De)}Q.zoom(null,se)}})}function j(M,L,U){return!U&&M.__zooming||new I(M,L)}function I(M,L){this.that=M,this.args=L,this.active=0,this.sourceEvent=null,this.extent=e.apply(M,L),this.taps=0}I.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,L){return this.mouse&&M!=="mouse"&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var L=Mt(this.that).datum();d.call(M,this.that,new V5(M,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:d}),L)}};function v(M,...L){if(!t.apply(this,arguments))return;var U=j(this,L).event(M),K=this.__zoom,V=Math.max(s[0],Math.min(s[1],K.k*Math.pow(2,r.apply(this,arguments)))),W=Mi(M);if(U.wheel)(U.mouse[0][0]!==W[0]||U.mouse[0][1]!==W[1])&&(U.mouse[1]=K.invert(U.mouse[0]=W)),clearTimeout(U.wheel);else{if(K.k===V)return;U.mouse=[W,K.invert(W)],au(this),U.start()}Zo(M),U.wheel=setTimeout(Q,_),U.zoom("mouse",n(b(w(K,V),U.mouse[0],U.mouse[1]),U.extent,o));function Q(){U.wheel=null,U.end()}}function S(M,...L){if(f||!t.apply(this,arguments))return;var U=M.currentTarget,K=j(this,L,!0).event(M),V=Mt(M.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",$,!0),W=Mi(M,U),Q=M.clientX,te=M.clientY;pj(M.view),ff(M),K.mouse=[W,this.__zoom.invert(W)],au(this),K.start();function ae(Y){if(Zo(Y),!K.moved){var X=Y.clientX-Q,ne=Y.clientY-te;K.moved=X*X+ne*ne>x}K.event(Y).zoom("mouse",n(b(K.that.__zoom,K.mouse[0]=Mi(Y,U),K.mouse[1]),K.extent,o))}function $(Y){V.on("mousemove.zoom mouseup.zoom",null),mj(Y.view,K.moved),Zo(Y),K.event(Y).end()}}function A(M,...L){if(t.apply(this,arguments)){var U=this.__zoom,K=Mi(M.changedTouches?M.changedTouches[0]:M,this),V=U.invert(K),W=U.k*(M.shiftKey?.5:2),Q=n(b(w(U,W),K,V),e.apply(this,L),o);Zo(M),a>0?Mt(this).transition().duration(a).call(D,Q,K,M):Mt(this).call(E.transform,Q,K,M)}}function k(M,...L){if(t.apply(this,arguments)){var U=M.touches,K=U.length,V=j(this,L,M.changedTouches.length===K).event(M),W,Q,te,ae;for(ff(M),Q=0;Q<K;++Q)te=U[Q],ae=Mi(te,this),ae=[ae,this.__zoom.invert(ae),te.identifier],V.touch0?!V.touch1&&V.touch0[2]!==ae[2]&&(V.touch1=ae,V.taps=0):(V.touch0=ae,W=!0,V.taps=1+!!h);h&&(h=clearTimeout(h)),W&&(V.taps<2&&(p=ae[0],h=setTimeout(function(){h=null},g)),au(this),V.start())}}function O(M,...L){if(this.__zooming){var U=j(this,L).event(M),K=M.changedTouches,V=K.length,W,Q,te,ae;for(Zo(M),W=0;W<V;++W)Q=K[W],te=Mi(Q,this),U.touch0&&U.touch0[2]===Q.identifier?U.touch0[0]=te:U.touch1&&U.touch1[2]===Q.identifier&&(U.touch1[0]=te);if(Q=U.that.__zoom,U.touch1){var $=U.touch0[0],Y=U.touch0[1],X=U.touch1[0],ne=U.touch1[1],se=(se=X[0]-$[0])*se+(se=X[1]-$[1])*se,ye=(ye=ne[0]-Y[0])*ye+(ye=ne[1]-Y[1])*ye;Q=w(Q,Math.sqrt(se/ye)),te=[($[0]+X[0])/2,($[1]+X[1])/2],ae=[(Y[0]+ne[0])/2,(Y[1]+ne[1])/2]}else if(U.touch0)te=U.touch0[0],ae=U.touch0[1];else return;U.zoom("touch",n(b(Q,te,ae),U.extent,o))}}function R(M,...L){if(this.__zooming){var U=j(this,L).event(M),K=M.changedTouches,V=K.length,W,Q;for(ff(M),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),W=0;W<V;++W)Q=K[W],U.touch0&&U.touch0[2]===Q.identifier?delete U.touch0:U.touch1&&U.touch1[2]===Q.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(Q=Mi(Q,this),Math.hypot(p[0]-Q[0],p[1]-Q[1])<C)){var te=Mt(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return E.wheelDelta=function(M){return arguments.length?(r=typeof M=="function"?M:Rc(+M),E):r},E.filter=function(M){return arguments.length?(t=typeof M=="function"?M:Rc(!!M),E):t},E.touchable=function(M){return arguments.length?(i=typeof M=="function"?M:Rc(!!M),E):i},E.extent=function(M){return arguments.length?(e=typeof M=="function"?M:Rc([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),E):e},E.scaleExtent=function(M){return arguments.length?(s[0]=+M[0],s[1]=+M[1],E):[s[0],s[1]]},E.translateExtent=function(M){return arguments.length?(o[0][0]=+M[0][0],o[1][0]=+M[1][0],o[0][1]=+M[0][1],o[1][1]=+M[1][1],E):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},E.constrain=function(M){return arguments.length?(n=M,E):n},E.duration=function(M){return arguments.length?(a=+M,E):a},E.interpolate=function(M){return arguments.length?(c=M,E):c},E.on=function(){var M=d.on.apply(d,arguments);return M===d?E:M},E.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,E):Math.sqrt(x)},E.tapDistance=function(M){return arguments.length?(C=+M,E):C},E}function G5(t){return t}function W5(t){if(t==null)return G5;var e,n,r=t.scale[0],i=t.scale[1],s=t.translate[0],o=t.translate[1];return function(a,c){c||(e=n=0);var d=2,h=a.length,p=new Array(h);for(p[0]=(e+=a[0])*r+s,p[1]=(n+=a[1])*i+o;d<h;)p[d]=a[d],++d;return p}}function q5(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function Cc(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return ix(t,n)})}:ix(t,e)}function ix(t,e){var n=e.id,r=e.bbox,i=e.properties==null?{}:e.properties,s=K5(t,e);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function K5(t,e){var n=W5(t.transform),r=t.arcs;function i(h,p){p.length&&p.pop();for(var f=r[h<0?~h:h],g=0,_=f.length;g<_;++g)p.push(n(f[g],g));h<0&&q5(p,_)}function s(h){return n(h)}function o(h){for(var p=[],f=0,g=h.length;f<g;++f)i(h[f],p);return p.length<2&&p.push(p[0]),p}function a(h){for(var p=o(h);p.length<4;)p.push(p[0]);return p}function c(h){return h.map(a)}function d(h){var p=h.type,f;switch(p){case"GeometryCollection":return{type:p,geometries:h.geometries.map(d)};case"Point":f=s(h.coordinates);break;case"MultiPoint":f=h.coordinates.map(s);break;case"LineString":f=o(h.arcs);break;case"MultiLineString":f=h.arcs.map(o);break;case"Polygon":f=c(h.arcs);break;case"MultiPolygon":f=h.arcs.map(c);break;default:return null}return{type:p,coordinates:f}}return d(e)}const Y5="https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json",Q5=async()=>{try{const t=await fetch(Y5);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){throw console.error("Error fetching USA TopoJSON data:",t),t}},sx=({language:t,missions:e,completedMissionIds:n,onMissionSelect:r,onBunkerClick:i,factionStates:s,playerAlignment:o,worldStage:a,surferTurnCount:c=0})=>{const d=N.useRef(null),h=N.useRef(null),p=N.useRef(null),f=N.useRef(null),g=N.useRef(null),_=N.useRef(new Set),[x,C]=N.useState(null),[E,w]=N.useState(!0),[b,P]=N.useState(null),[D,j]=N.useState({width:0,height:0}),[I,v]=N.useState(!1),[S,A]=N.useState(null),[k,O]=N.useState([-98.5,39.8]),[R,M]=N.useState(null),L=N.useRef(null),U=N.useRef(null),K=N.useRef(null),V=N.useRef([-98.5,39.8]),W=N.useRef(!1),Q=Hn[t];N.useEffect(()=>{const X="map-animations";if(!document.getElementById(X)){const ne=document.createElement("style");ne.id=X,ne.innerHTML=`
            @keyframes dash-flow { to { stroke-dashoffset: -20; } }
            .line-flowing { animation: dash-flow 1s linear infinite; }

            @keyframes pulse-ring {
                0% { transform: scale(1); opacity: 0.8; stroke-width: 2px; }
                100% { transform: scale(2.5); opacity: 0; stroke-width: 0px; }
            }
            .shield-pulse {
                transform-box: fill-box; transform-origin: center;
                animation: pulse-ring 2s cubic-bezier(0, 0, 0.2, 1) infinite;
                pointer-events: none;
            }
          `,document.head.appendChild(ne)}},[]),N.useEffect(()=>{V.current=k},[k]),N.useEffect(()=>(a==="SURFER"?(v(!1),K.current&&clearTimeout(K.current),K.current=setTimeout(()=>v(!0),1500)):(v(!0),W.current=!1),()=>{K.current&&clearTimeout(K.current)}),[a]),N.useEffect(()=>{(async()=>{try{w(!0);const ne=await Q5();if(!ne||!ne.objects||!ne.objects.states)throw new Error("Formato TopoJSON invlido");C(ne)}catch(ne){P(`ERROR DE DATOS: ${ne.message}`)}finally{w(!1)}})()},[]),N.useEffect(()=>{if(!h.current)return;const X=new ResizeObserver(ne=>{window.requestAnimationFrame(()=>{if(!Array.isArray(ne)||!ne.length)return;const se=ne[0],{width:ye,height:De}=se.contentRect;ye>0&&De>0&&j({width:ye,height:De})})});return X.observe(h.current),()=>X.disconnect()},[]);const{projection:te,pathGenerator:ae}=N.useMemo(()=>{if(!x||!x.objects||!x.objects.states||D.width===0||D.height===0)return{projection:null,pathGenerator:null};try{const X=Cc(x,x.objects.states),ne=j5().fitSize([D.width,D.height],X),se=S5().projection(ne);return{projection:ne,pathGenerator:se}}catch{return{projection:null,pathGenerator:null}}},[x,D]),$=X=>o!=="ZOMBIE"?!0:{magneto:!1,kingpin:!1,hulk:!1,doom:!1}[X],Y=X=>o==="ZOMBIE"?s.magneto.has(X)&&$("magneto")?Q.factions.magneto.name:s.kingpin.has(X)&&$("kingpin")?Q.factions.kingpin.name:s.hulk.has(X)&&$("hulk")?Q.factions.hulk.name:s.doom.has(X)&&$("doom")?Q.factions.doom.name:"TERRITORIO DE CAZA (EEUU)":s.magneto.has(X)?Q.factions.magneto.name:s.kingpin.has(X)?Q.factions.kingpin.name:s.hulk.has(X)?Q.factions.hulk.name:s.doom.has(X)?Q.factions.doom.name:Q.factions.neutral.name;return N.useEffect(()=>{if(!I||!x||!ae||!te)return;const X=(se,ye)=>Math.sqrt(Math.pow(se[0]-ye[0],2)+Math.pow(se[1]-ye[1],2)),ne=()=>{if(W.current){L.current=setTimeout(ne,1e3);return}const se=Cc(x,x.objects.states);let ye=se.features;if(o==="ALIVE"&&(ye=se.features.filter(De=>s.hulk.has(De.properties.name))),ye.length>0){const De=[],rt=V.current;ye.forEach(Se=>{const q=ae.centroid(Se);if(te.invert&&q&&!isNaN(q[0])){const z=te.invert(q);if(z){const le=X(rt,z);le>.5&&De.push({coords:z,dist:le})}}}),o==="ZOMBIE"?De.sort(()=>Math.random()-.5):De.sort((Se,q)=>Se.dist-q.dist);const be=Math.min(De.length,4);if(be>0){const Se=Math.floor(Math.random()*be);O(De[Se].coords),L.current=setTimeout(ne,6e3)}else L.current=setTimeout(ne,3e3)}};return L.current&&clearTimeout(L.current),L.current=setTimeout(ne,2e3),()=>{L.current&&clearTimeout(L.current)}},[I,x,ae,te,s,o]),N.useEffect(()=>{if(a!=="SURFER"||!x||!ae||!te){M(null),W.current=!1;return}const X=()=>{const ne=Cc(x,x.objects.states),se=ne.features[Math.floor(Math.random()*ne.features.length)],ye=ae.centroid(se);return te.invert&&ye&&!isNaN(ye[0])?te.invert(ye):[-98.5,39.8]};if(U.current&&clearTimeout(U.current),c===0)W.current=!0,R?(W.current=!0,M(V.current)):(M([-130,60]),U.current=setTimeout(()=>{M(V.current),U.current=setTimeout(()=>{W.current=!1;const ne=X();M(ne)},2e4)},500));else if(c>0&&c<=2){W.current=!1;const ne=X();M(ne)}else c>2&&(W.current=!1,M([-60,20]));return()=>{U.current&&clearTimeout(U.current)}},[a,c,x,ae,te]),N.useEffect(()=>{if(!x||!d.current||!te||!ae)return;const X=Mt(d.current);if(X.select("g.layer-map").empty()){X.selectAll("*").remove();const q=X.append("defs"),z=(Ee,Le)=>{const Ie=q.append("filter").attr("id",Ee).attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");Ie.append("feGaussianBlur").attr("stdDeviation","3").attr("result","coloredBlur");const Me=Ie.append("feMerge");Me.append("feMergeNode").attr("in","coloredBlur"),Me.append("feMergeNode").attr("in","SourceGraphic"),Ie.append("feDropShadow").attr("dx",0).attr("dy",0).attr("stdDeviation",4).attr("flood-color",Le).attr("flood-opacity",.8)};z("glow-magneto","#ef4444"),z("glow-kingpin","#d946ef"),z("glow-hulk","#84cc16"),z("glow-doom","#06b6d4"),z("glow-neutral","#fbbf24"),z("glow-boss","#9333ea"),z("glow-shield","#06b6d4"),z("glow-surfer","#e2e8f0"),q.append("clipPath").attr("id","bunker-clip").append("circle").attr("cx",0).attr("cy",0).attr("r",12);const le=X.append("g").attr("class","g-main");p.current=le.append("g").attr("class","layer-map"),f.current=le.append("g").attr("class","layer-missions"),g.current=le.append("g").attr("class","layer-tokens");const ve=H5().scaleExtent([1,8]).on("zoom",Ee=>{le.attr("transform",Ee.transform.toString());const Le=Ee.transform.k;X.selectAll(".bunker").attr("transform",function(){var Me;const Ie=((Me=Mt(this).attr("data-coords"))==null?void 0:Me.split(",").map(Number))||[0,0];return`translate(${Ie[0]},${Ie[1]}) scale(${1/Le})`}),X.selectAll("text.label").style("font-size",`${Math.max(6,10/Le)}px`),f.current&&f.current.selectAll(".mission").attr("transform",function(Ie){const Me=te(Ie.location.coordinates);return`translate(${Me[0]}, ${Me[1]}) scale(${1/Le})`}),g.current&&g.current.selectAll(".token-group").each(function(){const Ie=Mt(this),Me=Ie.attr("transform");if(Me){const Rt=Me.match(/translate\(([^)]+)\)/);Rt&&Ie.attr("transform",`${Rt[0]} scale(${1/Le})`)}})});X.call(ve)}const ne=p.current;if(!ne)return;const ye=Cc(x,x.objects.states).features,De=q=>o==="ZOMBIE"?s.magneto.has(q)&&$("magneto")?"fill-red-900/60 stroke-red-500 stroke-[1px] hover:fill-red-700 hover:stroke-red-300 hover:stroke-[2px]":s.kingpin.has(q)&&$("kingpin")?"fill-purple-900/60 stroke-purple-500 stroke-[1px] hover:fill-purple-700 hover:stroke-purple-300 hover:stroke-[2px]":s.hulk.has(q)&&$("hulk")?"fill-lime-900/40 stroke-lime-700 stroke-[1px] hover:fill-lime-900/70 hover:stroke-lime-400 hover:stroke-[2px]":s.doom.has(q)&&$("doom")?"fill-cyan-900/40 stroke-cyan-700 stroke-[1px] hover:fill-cyan-900/70 hover:stroke-cyan-400 hover:stroke-[2px]":"fill-slate-900/90 stroke-slate-700 stroke-[1px] hover:fill-lime-900/30 hover:stroke-lime-500 hover:stroke-[2px]":s.magneto.has(q)?"fill-red-900/60 stroke-red-500 stroke-[1px] hover:fill-red-700 hover:stroke-red-300 hover:stroke-[2px]":s.kingpin.has(q)?"fill-purple-900/60 stroke-purple-500 stroke-[1px] hover:fill-purple-700 hover:stroke-purple-300 hover:stroke-[2px]":s.hulk.has(q)?"fill-lime-900/40 stroke-lime-700 stroke-[1px] hover:fill-lime-900/70 hover:stroke-lime-400 hover:stroke-[2px]":s.doom.has(q)?"fill-cyan-900/40 stroke-cyan-700 stroke-[1px] hover:fill-cyan-900/70 hover:stroke-cyan-400 hover:stroke-[2px]":"fill-slate-800/60 stroke-slate-600 stroke-[1px] hover:fill-slate-700 hover:stroke-slate-400 hover:stroke-[2px]";ne.selectAll("path.state").data(ye).join("path").attr("class",q=>`state ${De(q.properties.name)} transition-all duration-200 cursor-crosshair`).attr("d",ae).on("click",(q,z)=>{q.stopPropagation();const le=ae.bounds(z),ve=le[1][0]-le[0][0],Ee=le[1][1]-le[0][1],Le=(le[0][0]+le[1][0])/2,Ie=(le[0][1]+le[1][1])/2,Me=Math.max(1,Math.min(8,.9/Math.max(ve/D.width,Ee/D.height))),Rt=[D.width/2-Me*Le,D.height/2-Me*Ie],rn=Mt(d.current);rn.transition().duration(750).call(rn.zoom().transform,rh.translate(Rt[0],Rt[1]).scale(Me))}),ne.selectAll("text.label").data(ye).join("text").attr("class","label pointer-events-none font-mono select-none tracking-wider font-bold").attr("transform",q=>{const z=ae.centroid(q);return!z||isNaN(z[0])||isNaN(z[1])?"translate(-1000,-1000)":`translate(${z[0]},${z[1]})`}).attr("text-anchor","middle").attr("dominant-baseline","central").style("fill","rgba(255, 255, 255, 0.9)").style("font-size","10px").style("text-shadow","0px 0px 3px #000").text(q=>q.properties.name?q.properties.name.toUpperCase():"").raise();const rt=te([-82.9,40]),be=o==="ZOMBIE"?"https://i.pinimg.com/736x/7f/31/38/7f31382d4a5c35daa4ba1768a366a917.jpg":"https://i.pinimg.com/736x/63/1e/3a/631e3a68228c97963e78381ad11bf3bb.jpg",Se=o==="ZOMBIE"?"#65a30d":"#06b6d4";if(rt){let q=ne.select(".bunker");q.empty()&&(q=ne.append("g").attr("class","bunker cursor-pointer hover:opacity-100").on("click",z=>{z.stopPropagation(),i()}),q.append("circle").attr("r",12).attr("fill","none").attr("stroke-width",1).append("animate").attr("attributeName","r").attr("from","12").attr("to","25").attr("dur","2s").attr("repeatCount","indefinite"),q.append("image").attr("x",-12).attr("y",-12).attr("width",24).attr("height",24).attr("clip-path","url(#bunker-clip)").attr("referrerpolicy","no-referrer")),q.attr("transform",`translate(${rt[0]}, ${rt[1]})`).attr("data-coords",`${rt[0]},${rt[1]}`),q.select("circle").attr("stroke",Se),q.select("image").attr("href",be),q.raise()}},[x,D,te,ae,s,o,n]),N.useEffect(()=>{if(!te||!f.current||!g.current||!d.current)return;const X=f.current,ne=g.current,se=QA(d.current).k||1,ye=e.filter(q=>{if(!q||!q.id||!q.location||!q.location.coordinates)return!1;const[z,le]=q.location.coordinates;return z!==0&&le!==0&&!isNaN(z)&&!isNaN(le)}),De=[];ye.forEach(q=>{(q.prereqs||(q.prereq?[q.prereq]:[])).forEach(le=>De.push({source:le,target:q.id}))}),X.selectAll("path.mission-line").data(De,q=>`${q.source}-${q.target}`).join(q=>q.append("path").attr("class","mission-line"),q=>q,q=>q.remove()).attr("d",q=>{const z=e.find(Ie=>Ie.id===q.source),le=e.find(Ie=>Ie.id===q.target);if(!z||!le)return null;const ve=te(z.location.coordinates),Ee=te(le.location.coordinates);if(!ve||!Ee)return null;const Le=Math.sqrt(Math.pow(Ee[0]-ve[0],2)+Math.pow(Ee[1]-ve[1],2));return`M${ve[0]},${ve[1]}A${Le},${Le} 0 0,1 ${Ee[0]},${Ee[1]}`}).attr("fill","none").attr("stroke-width",q=>n.has(q.source)?2:1.5).each(function(q){const z=Mt(this),le=n.has(q.source),ve=n.has(q.target),Ee=`${q.source}-${q.target}`;if(le&&ve)z.classed("line-flowing",!1).classed("animating",!1).style("stroke-dasharray","none").attr("stroke","#10b981").attr("opacity",.6);else if(le&&!ve)if(_.current.has(Ee))z.classed("line-flowing",!0).style("stroke-dasharray","4,4").attr("stroke","#fbbf24").attr("opacity",1);else{const Le=this.getTotalLength();z.classed("animating",!0).attr("stroke-dasharray",`${Le} ${Le}`).attr("stroke-dashoffset",Le).attr("opacity",1).attr("stroke","#fbbf24").transition().duration(2e3).ease(Y4).attr("stroke-dashoffset",0).on("end",()=>{_.current.add(Ee),z.classed("animating",!1).classed("line-flowing",!0).style("stroke-dasharray","4,4")})}else z.classed("line-flowing",!1).classed("animating",!1).style("stroke-dasharray","4,4").attr("stroke","#475569").attr("opacity",.4)}),X.selectAll("g.mission").data(ye,q=>q.id).join(q=>{const z=q.append("g").attr("class","mission cursor-pointer hover:opacity-100");return z.append("circle").attr("class","effect-shield-pulse"),z.append("circle").attr("class","mission-ring"),z.append("circle").attr("class","mission-dot"),z}).attr("class",q=>`mission-marker cursor-pointer ${q.factionId==="UNDEAD"?"animate-glitch":""}`).attr("transform",q=>{const z=te(q.location.coordinates);return z?`translate(${z[0]}, ${z[1]}) scale(${1/se})`:"translate(-100,-100)"}).on("click",(q,z)=>{q.stopPropagation(),!(a==="GALACTUS"&&z.type!=="BOSS"&&z.type!=="GALACTUS")&&r(z)}).on("mouseenter",(q,z)=>{const le=Y(z.location.state);A({x:q.clientX,y:q.clientY,mission:z,factionName:le})}).on("mousemove",q=>A(z=>z?{...z,x:q.clientX,y:q.clientY}:null)).on("mouseleave",()=>A(null)).each(function(q){const z=Mt(this),le=n.has(q.id),ve=q.type==="SHIELD_BASE",Ee=q.type&&q.type.startsWith("BOSS"),Le=q.type==="GALACTUS";let Ie="#eab308",Me="#ca8a04";le&&(Ie="#10b981",Me="#059669"),ve&&(Ie="#06b6d4",Me="#0891b2"),(Ee||Le)&&(Ie="#9333ea",Me="#7e22ce"),z.select(".mission-dot").attr("r",ve?4:5).attr("fill",ve&&!le?"#0f172a":Ie).attr("stroke",Me).attr("stroke-width",2),ve?z.select(".mission-ring").style("display","block").attr("r",8).attr("fill","none").attr("stroke","#06b6d4").attr("stroke-width",1.5).attr("stroke-dasharray",le?"none":"2,1"):z.select(".mission-ring").style("display","none"),ve&&!le?z.select(".effect-shield-pulse").style("display","block").attr("r",8).attr("fill","none").attr("stroke","#06b6d4").attr("class","effect-shield-pulse shield-pulse"):z.select(".effect-shield-pulse").style("display","none")});let be=te(k),Se=R?te(R):null;if(be&&Se&&Math.sqrt(Math.pow(be[0]-Se[0],2)+Math.pow(be[1]-Se[1],2))<20&&(be=[be[0]-15,be[1]],Se=[Se[0]+15,Se[1]]),I&&be){let q=ne.select(".hulk-token");if(q.empty())q=ne.append("g").attr("class","token-group hulk-token cursor-pointer").attr("transform",`translate(${be[0]}, ${be[1]}) scale(${1/se})`),q.append("circle").attr("r",15).attr("fill","#65a30d").attr("stroke","#365314").attr("stroke-width",2).style("filter","url(#glow-hulk)"),q.append("text").text("HULK").attr("dy",4).attr("text-anchor","middle").attr("font-size","8px").attr("font-weight","bold").attr("fill","white");else{const le=q.attr("transform").match(/translate\(([^)]+)\)/),[ve,Ee]=le?le[1].split(",").map(Number):[0,0];if(Math.sqrt(Math.pow(be[0]-ve,2)+Math.pow(be[1]-Ee,2))>10){const Ie=_n(ve,be[0]),Me=_n(Ee,be[1]),Rt=1/se;q.transition().duration(2e3).ease(Q4).attrTween("transform",function(){return function(rn){const yn=Ie(rn),vn=Me(rn),zr=Math.sin(rn*Math.PI)*2,lt=Rt*(1+zr);return`translate(${yn},${vn}) scale(${lt})`}}).on("end",function(){Mt(this).attr("transform",`translate(${be[0]}, ${be[1]}) scale(${Rt})`),Mt(this).append("circle").attr("r",15).attr("fill","none").attr("stroke","#65a30d").attr("stroke-width",3).attr("opacity",1).transition().duration(600).attr("r",60).attr("opacity",0).remove()})}else q.attr("transform",`translate(${be[0]}, ${be[1]}) scale(${1/se})`)}}else ne.selectAll(".hulk-token").remove();if(Se){let q=ne.select(".surfer-token");if(q.empty())q=ne.append("g").attr("class","token-group surfer-token cursor-pointer").attr("transform",`translate(${Se[0]}, ${Se[1]}) scale(${1/se})`),q.append("circle").attr("r",12).attr("fill","#e2e8f0").attr("stroke","#94a3b8").attr("stroke-width",2).style("filter","url(#glow-surfer)"),q.append("text").text("SURFER").attr("dy",4).attr("text-anchor","middle").attr("font-size","6px").attr("font-weight","bold").attr("fill","#1e293b");else{const le=q.attr("transform").match(/translate\(([^)]+)\)/),[ve,Ee]=le?le[1].split(",").map(Number):[0,0],Le=Math.sqrt(Math.pow(Se[0]-ve,2)+Math.pow(Se[1]-Ee,2));if(Le>5){const Ie=_n(ve,Se[0]),Me=_n(Ee,Se[1]),Rt=1/se,rn=Le>200?5e3:3e3;q.transition().duration(rn).ease(OA).attrTween("transform",function(){return function(yn){const vn=Ie(yn),zr=Me(yn);return`translate(${vn},${zr}) scale(${Rt})`}}).on("end",function(){Mt(this).attr("transform",`translate(${Se[0]}, ${Se[1]}) scale(${Rt})`)})}else q.attr("transform",`translate(${Se[0]}, ${Se[1]}) scale(${1/se})`)}}else ne.selectAll(".surfer-token").remove()},[e,n,a,I,te,k,R]),E?u.jsxs("div",{ref:h,className:"flex flex-col items-center justify-center w-full h-full text-cyan-500 font-mono",children:[u.jsx("div",{className:"animate-spin text-4xl",children:""}),u.jsx("div",{children:Q.map.loading})]}):b?u.jsxs("div",{ref:h,className:"flex flex-col items-center justify-center w-full h-full text-red-500 font-mono border border-red-900 bg-red-900/20 p-4",children:[u.jsx("div",{className:"text-2xl mb-2",children:" SYSTEM FAILURE"}),u.jsx("div",{className:"text-xs",children:b})]}):u.jsxs("div",{ref:h,className:"w-full h-full relative bg-transparent overflow-hidden group",children:[u.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none",style:{backgroundImage:"radial-gradient(circle, #0e7490 1px, transparent 1px)",backgroundSize:"20px 20px",opacity:.2}}),a==="GALACTUS"&&u.jsxs("div",{className:"absolute inset-0 z-30 pointer-events-none overflow-hidden flex items-center justify-center",children:[u.jsx("div",{className:"absolute inset-0 bg-purple-900/30 mix-blend-overlay animate-pulse-slow"}),u.jsx("div",{className:"w-[120%] h-[120%] absolute animate-breathing opacity-60 flex items-center justify-center",style:{mixBlendMode:"hard-light",maskImage:"radial-gradient(circle, black 40%, transparent 80%)",WebkitMaskImage:"radial-gradient(circle, black 40%, transparent 80%)"},children:u.jsx("img",{src:"https://i.pinimg.com/736x/7d/99/05/7d9905d417620745edc2c724f94e56c8.jpg",className:"w-full h-full object-contain",referrerPolicy:"no-referrer"})})]}),u.jsx("svg",{ref:d,className:"w-full h-full relative z-10"}),S&&u.jsxs("div",{className:"fixed z-50 pointer-events-none glass-panel p-4 shadow-2xl rounded-sm min-w-[240px] font-sans animate-fade-in border-cyan-500/50",style:{left:Math.min(S.x+15,window.innerWidth-260),top:Math.min(S.y+15,window.innerHeight-150)},children:[u.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-cyan-500/20 pb-2",children:[u.jsx("div",{className:"text-[10px] font-black text-cyan-500 uppercase tracking-[0.2em]",children:S.factionName}),u.jsx("div",{className:`text-[9px] font-black px-2 py-0.5 rounded-full border ${S.mission.threatLevel==="EXTREMA"?"bg-red-950/40 text-red-500 border-red-500/50":"bg-orange-950/40 text-orange-500 border-orange-500/50"}`,children:S.mission.threatLevel})]}),u.jsx("div",{className:"text-base font-black text-white/90 mb-3 tracking-tight uppercase leading-tight",children:S.mission.title}),u.jsxs("div",{className:"flex flex-col gap-2",children:[S.mission.type==="SHIELD_BASE"&&u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-cyan-400 font-bold",children:[u.jsx("span",{className:"text-xs",children:""})," S.H.I.E.L.D. ASSET DETECTED"]}),u.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:"CLICK TO VIEW MISSION DETAILS"})]})]})]})},X5=t=>t.toLowerCase().replace(/\(z\)/g,"").replace(/\(zombie\)/g,"").replace(/\(artist\)/g,"").replace(/\(old man\)/g,"").trim(),Z5=({isOpen:t,onClose:e,onRecruit:n,templates:r,existingAliases:i,language:s,playerAlignment:o})=>{const[a,c]=N.useState(""),[d,h]=N.useState("RECRUIT"),p=Hn[s].recruit,f=o==="ZOMBIE",g=N.useMemo(()=>r.filter(x=>{const C=x.alias.toLowerCase().includes(a.toLowerCase())||x.defaultName.toLowerCase().includes(a.toLowerCase()),E=X5(x.alias),w=i.has(E);let b=!0;return o&&(d==="RECRUIT"?b=x.defaultAlignment===o:b=x.defaultAlignment!==o),C&&!w&&b}),[r,a,o,i,d]),_=x=>{const C=d==="CAPTURE"?"CAPTURED":"AVAILABLE",E={id:`hero_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,templateId:x.id,name:x.defaultName,alias:x.alias,class:x.defaultClass,stats:x.defaultStats,imageUrl:x.imageUrl,characterSheetUrl:x.characterSheetUrl,bio:x.bio||"",status:C,assignedMissionId:null,objectives:x.objectives||[],completedObjectiveIndices:[],currentStory:x.currentStory||"",relatedHeroId:x.relatedHeroId,imageParams:x.imageParams};n(E)};return t?u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-950/90 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"w-full max-w-4xl bg-slate-900 border-2 border-cyan-500 shadow-[0_0_50px_rgba(6,182,212,0.3)] flex flex-col max-h-[85vh] overflow-hidden relative",children:[u.jsxs("div",{className:"bg-cyan-900/40 p-4 border-b border-cyan-600 flex justify-between items-center shrink-0",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-cyan-300 font-black tracking-[0.2em] uppercase text-xl",children:[p.title," // CEREBRO"]}),u.jsx("p",{className:"text-[10px] text-cyan-400 font-mono",children:f?"BUSCANDO BIOMASA...":"BUSCANDO ACTIVOS..."})]}),u.jsx("button",{onClick:e,className:"text-cyan-500 hover:text-white font-bold text-2xl",children:""})]}),u.jsxs("div",{className:"flex border-b border-cyan-900 bg-slate-950",children:[u.jsx("button",{onClick:()=>h("RECRUIT"),className:`flex-1 py-3 text-xs font-bold tracking-widest uppercase transition-all border-r border-cyan-900
                            ${d==="RECRUIT"?f?"bg-lime-900/40 text-lime-400":"bg-cyan-900/40 text-cyan-400":"text-gray-500 hover:text-white hover:bg-slate-800"}
                        `,children:f?"EXTENDER LA COLMENA (ALIADOS)":"RECLUTAR AGENTES (ALIADOS)"}),u.jsx("button",{onClick:()=>h("CAPTURE"),className:`flex-1 py-3 text-xs font-bold tracking-widest uppercase transition-all
                            ${d==="CAPTURE"?"bg-red-900/40 text-red-400":"text-gray-500 hover:text-white hover:bg-slate-800"}
                        `,children:f?"CAZAR COMIDA (HUMANOS)":"CAPTURAR ZOMBIES (ENEMIGOS)"})]}),u.jsx("div",{className:"p-4 bg-slate-950 border-b border-cyan-900",children:u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:a,onChange:x=>c(x.target.value),placeholder:s==="es"?"BUSCAR POR NOMBRE O ALIAS...":"SEARCH BY NAME OR ALIAS...",className:"w-full bg-slate-900 border border-cyan-700 p-3 pl-10 text-cyan-100 focus:border-cyan-400 outline-none font-mono uppercase",autoFocus:!0}),u.jsx("span",{className:"absolute left-3 top-3 text-cyan-600",children:""})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-thin scrollbar-thumb-cyan-900 bg-slate-950",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.map(x=>{const C=x.imageParams?{transform:`scale(${x.imageParams.scale}) translate(${x.imageParams.x}%, ${x.imageParams.y}%)`}:{};return u.jsxs("div",{onClick:()=>_(x),className:`group relative border bg-slate-900/50 transition-all cursor-pointer flex gap-3 p-2 overflow-hidden
                                        ${d==="RECRUIT"?"border-cyan-900 hover:bg-cyan-900/20 hover:border-cyan-500":"border-red-900 hover:bg-red-900/20 hover:border-red-500"}
                                    `,children:[u.jsx("div",{className:"w-16 h-16 shrink-0 border border-slate-700 group-hover:border-white overflow-hidden bg-black relative",children:u.jsx("img",{src:x.imageUrl,alt:x.alias,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity absolute inset-0",style:C,referrerPolicy:"no-referrer"})}),u.jsxs("div",{className:"flex flex-col justify-center min-w-0",children:[u.jsx("div",{className:`text-xs font-black truncate group-hover:text-white ${d==="RECRUIT"?"text-cyan-400":"text-red-400"}`,children:x.alias}),u.jsx("div",{className:"text-[9px] text-gray-500 font-mono truncate",children:x.defaultName}),u.jsx("div",{className:"mt-1 inline-block px-1.5 py-0.5 bg-slate-800 text-[8px] text-gray-400 border border-slate-700 uppercase font-bold w-fit",children:x.defaultClass})]}),u.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:`w-8 h-8 flex items-center justify-center text-black font-bold text-lg shadow-lg ${d==="RECRUIT"?"bg-cyan-600":"bg-red-600"}`,children:d==="RECRUIT"?"+":""})})]},x.id)}),g.length===0&&u.jsxs("div",{className:"col-span-full text-center py-10 text-gray-600 font-mono flex flex-col items-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsx("span",{children:"NO SE ENCONTRARON REGISTROS COMPATIBLES O YA POSEES ESTE AGENTE."})]})]})})]})}):null},J5=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,confirmText:s,cancelText:o="CANCELAR",type:a})=>{if(!t)return null;let c="border-cyan-500 text-cyan-400",d="bg-cyan-600 hover:bg-cyan-500",h="shadow-[0_0_50px_rgba(6,182,212,0.2)]";return a==="CURE"?(c="border-emerald-500 text-emerald-400",d="bg-emerald-600 hover:bg-emerald-500",h="shadow-[0_0_50px_rgba(16,185,129,0.2)]"):a==="INFECT"?(c="border-lime-500 text-lime-400",d="bg-lime-600 hover:bg-lime-500",h="shadow-[0_0_50px_rgba(132,204,22,0.2)]"):a==="WARNING"&&(c="border-red-500 text-red-400",d="bg-red-600 hover:bg-red-500",h="shadow-[0_0_50px_rgba(239,68,68,0.2)]"),u.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-slate-950/40 backdrop-blur-md p-4 animate-fade-in",children:u.jsxs("div",{className:`w-full max-w-md glass-panel ${c} ${h} flex flex-col relative overflow-hidden shadow-2xl rounded-sm`,children:[u.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.1)_50%),linear-gradient(90deg,rgba(255,0,0,0.03),rgba(0,255,0,0.01),rgba(0,0,255,0.03))] bg-[length:100%_4px,6px_100%] pointer-events-none opacity-20"}),u.jsxs("div",{className:`p-4 border-b ${c} bg-slate-950/20 font-black tracking-[0.2em] uppercase text-lg flex items-center gap-2 font-mono`,children:[u.jsx("span",{className:"animate-pulse",children:""})," ",r]}),u.jsx("div",{className:"p-6 text-center relative z-10",children:u.jsx("p",{className:"font-sans text-sm md:text-base text-white/90 leading-relaxed whitespace-pre-line font-medium",children:i})}),u.jsxs("div",{className:"p-4 flex gap-4 justify-center bg-slate-950/40 border-t border-slate-800/50 relative z-10",children:[u.jsx("button",{onClick:e,className:"px-6 py-2 border border-slate-700 text-slate-400 hover:text-white hover:border-white text-[10px] font-bold tracking-widest uppercase transition-all font-mono",children:o}),u.jsx("button",{onClick:()=>{n(),e()},className:`px-8 py-2 text-black text-xs font-bold tracking-widest uppercase transition-all shadow-lg font-mono ${d}`,children:s})]})]})})},e9=t=>t.toLowerCase().replace(/\(z\)/g,"").replace(/\(zombie\)/g,"").replace(/\(artist\)/g,"").replace(/\(old man\)/g,"").trim(),kc=({label:t,shieldVal:e,enemyVal:n,enemyColor:r})=>{const i=e+n,s=i===0?50:e/i*100,o=r.replace("text-","bg-");return u.jsxs("div",{className:"mb-4 group",children:[u.jsxs("div",{className:"flex justify-between text-[9px] font-black mb-1 uppercase tracking-wider px-1",children:[u.jsxs("span",{className:"text-cyan-400 drop-shadow-[0_0_3px_rgba(6,182,212,0.8)]",children:["S.H.I.E.L.D. ",u.jsxs("span",{className:"text-xs",children:["[",e,"]"]})]}),u.jsxs("span",{className:`${r} drop-shadow-[0_0_3px_currentColor]`,children:[t," ",u.jsxs("span",{className:"text-xs",children:["[",n,"]"]})]})]}),u.jsxs("div",{className:"h-4 w-full bg-slate-950 border border-slate-700 relative overflow-hidden flex skew-x-[-10deg]",children:[u.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-900 to-cyan-500 transition-all duration-1000 ease-out relative border-r-2 border-white",style:{width:`${s}%`},children:u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')] opacity-30"})}),u.jsx("div",{className:`flex-1 h-full bg-gradient-to-l from-slate-900 to-${o.split("-")[1]}-600 opacity-80 relative`,children:u.jsx("div",{className:`absolute inset-0 ${o} opacity-40`})})]})]})},pf=({hero:t,onClick:e,actionIcon:n,onAction:r})=>{const s={AVAILABLE:"border-emerald-500 shadow-emerald-500/20",DEPLOYED:"border-yellow-500 shadow-yellow-500/20",INJURED:"border-red-500 shadow-red-500/20",CAPTURED:"border-red-900 shadow-red-900/20 grayscale"}[t.status]||"border-slate-600",o=t.imageParams?{transform:`scale(${t.imageParams.scale}) translate(${t.imageParams.x}%, ${t.imageParams.y}%)`}:{};return u.jsxs("div",{onClick:e,className:`group relative h-28 w-full cursor-pointer overflow-hidden border-l-4 bg-slate-900/50 transition-all duration-300 hover:bg-slate-800 hover:scale-[1.02] hover:z-10 ${s} border-b border-slate-800`,children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[u.jsx("img",{src:t.imageUrl,alt:t.alias,className:"w-full h-full object-cover object-top opacity-50 group-hover:opacity-80 transition-all duration-500",style:o,referrerPolicy:"no-referrer"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-950 via-slate-950/80 to-transparent pointer-events-none"})]}),u.jsxs("div",{className:"absolute inset-0 p-4 flex flex-col justify-center z-10 pl-6 pointer-events-none",children:[u.jsx("h3",{className:"text-lg font-black uppercase tracking-wider truncate text-white group-hover:text-cyan-400 drop-shadow-md",style:{fontFamily:"Impact, sans-serif"},children:t.alias}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("span",{className:"text-[8px] font-bold bg-black/80 px-2 py-0.5 border border-slate-700 text-cyan-500 tracking-widest uppercase",children:t.class}),t.status!=="AVAILABLE"&&u.jsx("span",{className:`text-[8px] font-bold px-2 py-0.5 border uppercase tracking-widest ${t.status==="DEPLOYED"?"bg-yellow-900/50 text-yellow-500 border-yellow-700":"bg-red-900/50 text-red-500 border-red-700"}`,children:t.status})]})]}),n&&r&&u.jsx("button",{onClick:a=>{a.stopPropagation(),r()},className:"absolute right-2 top-2 w-8 h-8 flex items-center justify-center bg-black/50 border border-white/20 hover:bg-red-600 hover:border-red-500 text-white transition-all rounded-sm z-20 backdrop-blur-sm pointer-events-auto",children:n}),u.jsx("div",{className:"absolute inset-0 bg-scan opacity-0 group-hover:opacity-10 pointer-events-none transition-opacity"})]})},t9=({heroes:t,missions:e,completedMissionIds:n=new Set,onAssign:r,onUnassign:i,onAddHero:s,onToggleObjective:o,onBack:a,language:c,playerAlignment:d,onTransformHero:h,onTickerUpdate:p,omegaCylinders:f=0,onFindCylinder:g})=>{const[_,x]=N.useState("ROSTER"),[C,E]=N.useState(null),[w,b]=N.useState(!1),[P,D]=N.useState([]),[j,I]=N.useState(null),[v,S]=N.useState({isOpen:!1,title:"",message:"",confirmText:"",type:"WARNING",onConfirm:()=>{}}),A=t.find(V=>V.id===C),k=t.filter(V=>V.status==="AVAILABLE"),O=t.filter(V=>V.status==="DEPLOYED"),R=t.filter(V=>V.status==="INJURED"||V.status==="CAPTURED"),M=N.useMemo(()=>{const V=new Set;return t.forEach(W=>{V.add(e9(W.alias))}),V},[t]),L={magneto:{shield:2,enemy:5,color:"text-red-500"},kingpin:{shield:4,enemy:3,color:"text-purple-500"},hulk:{shield:1,enemy:8,color:"text-lime-500"},doom:{shield:3,enemy:4,color:"text-cyan-500"}},U=async()=>{const V=await Nl();D(V),b(!0)},K=V=>{S(V)};return u.jsxs("div",{className:"w-full h-full bg-slate-950 text-cyan-400 font-mono flex flex-col overflow-hidden relative",children:[u.jsxs("div",{className:"h-16 border-b border-cyan-900 bg-slate-900/95 flex items-center justify-between px-6 shrink-0 z-20 shadow-[0_0_20px_rgba(0,0,0,0.5)]",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-xs font-bold border border-cyan-700 px-4 py-2 hover:bg-cyan-500 hover:text-black transition-all clip-tactical",children:[u.jsx("span",{children:""})," MAPA"]}),u.jsx("div",{className:"h-8 w-px bg-cyan-800/50"}),u.jsxs("h1",{className:"text-xl font-black tracking-[0.2em] text-white uppercase text-shadow-neon",children:["CENTRO DE MANDO // ",u.jsx("span",{className:d==="ZOMBIE"?"text-lime-500":"text-cyan-400",children:d})]})]}),u.jsxs("div",{className:"flex items-center gap-8 text-[10px] font-bold tracking-widest",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-gray-500",children:"FECHA"}),u.jsx("div",{className:"text-white",children:"OCT 31, 2025"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-gray-500",children:"ESTADO"}),u.jsx("div",{className:"text-emerald-400 animate-pulse",children:"OPERATIVO"})]})]})]}),u.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-0 overflow-hidden h-full",children:[u.jsxs("div",{className:"col-span-3 border-r border-cyan-900 bg-slate-900/30 flex flex-col min-w-[300px] h-full overflow-hidden relative",children:[u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-5 pointer-events-none"}),u.jsxs("div",{className:"flex border-b border-cyan-900 shrink-0 bg-slate-900",children:[u.jsxs("button",{onClick:()=>x("ROSTER"),className:`flex-1 py-4 text-[10px] font-black tracking-widest uppercase transition-all ${_==="ROSTER"?"bg-cyan-900/40 text-white border-b-2 border-cyan-500":"text-gray-500 hover:text-cyan-300"}`,children:["ACTIVOS (",k.length+O.length,")"]}),u.jsxs("button",{onClick:()=>x("MEDBAY"),className:`flex-1 py-4 text-[10px] font-black tracking-widest uppercase transition-all ${_==="MEDBAY"?"bg-red-900/20 text-red-300 border-b-2 border-red-500":"text-gray-500 hover:text-red-400"}`,children:["PRISIONEROS (",R.length,")"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-cyan-900 pb-24",children:_==="ROSTER"?u.jsxs(u.Fragment,{children:[k.map(V=>u.jsx(pf,{hero:V,onClick:()=>E(V.id)},V.id)),O.length>0&&u.jsx("div",{className:"text-[9px] font-black text-yellow-500 uppercase mt-6 mb-2 px-4 tracking-widest border-b border-yellow-900/30 pb-1",children:"DESPLEGADOS"}),O.map(V=>u.jsx(pf,{hero:V,onClick:()=>E(V.id),actionIcon:"",onAction:()=>i(V.id)},V.id))]}):R.map(V=>{const W=d==="ALIVE",Q=W?"":"",te=()=>{if(h){if(V.relatedHeroId==="NO_VARIANT"){K(W?{isOpen:!0,title:"ERROR GENTICO",message:`SUJETO IRRECUPERABLE.

El tejido de ${V.alias} ha sufrido una degradacin celular total. No queda ADN humano viable para la reestructuracin.

LA CURA ES INEFICAZ.`,confirmText:"ENTENDIDO",type:"WARNING",onConfirm:()=>{}}:{isOpen:!0,title:"ANOMALA DETECTADA",message:`SUJETO INMUNE.

La fisiologa de ${V.alias} rechaza el Evangelio del Hambre. Estructura molecular incompatible o sinttica.

NO SE PUEDE CONSUMIR.`,confirmText:"ENTENDIDO",type:"WARNING",onConfirm:()=>{}});return}W?f>0?K({isOpen:!0,title:"PROTOCOLO DE CURA",message:`INICIAR SECUENCIA DE REESTRUCTURACIN DE ADN PARA ${V.alias}?

COSTE: 1 CILINDRO OMEGA`,confirmText:"ADMINISTRAR CURA",type:"CURE",onConfirm:()=>h(V.id,"ALIVE")}):K({isOpen:!0,title:"RECURSOS INSUFICIENTES",message:`NO HAY CILINDROS OMEGA DISPONIBLES.

BUSCA SUMINISTROS EN EL MAPA.`,confirmText:"ENTENDIDO",type:"WARNING",onConfirm:()=>{}}):K({isOpen:!0,title:"EXPANDIR EL HAMBRE",message:`INFECTAR A ${V.alias}?

EL SUJETO SE UNIR A LA HORDA.`,confirmText:"DEVORAR / INFECTAR",type:"INFECT",onConfirm:()=>h(V.id,"ZOMBIE")})}};return u.jsx(pf,{hero:V,onClick:()=>E(V.id),actionIcon:Q,onAction:te},V.id)})})]}),u.jsxs("div",{className:"col-span-6 flex flex-col bg-slate-950 relative h-full overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none bg-[linear-gradient(45deg,transparent_25%,rgba(6,182,212,0.1)_50%,transparent_75%)] bg-[length:30px_30px]"}),u.jsxs("div",{className:"h-2/5 border-b border-cyan-900 p-6 flex gap-6 shrink-0 bg-slate-900/20",children:[u.jsxs("div",{className:"flex-1 border border-cyan-800/50 bg-slate-900/50 p-4 relative shadow-[0_0_30px_rgba(0,0,0,0.5)] clip-tactical",children:[u.jsx("h3",{className:"text-[10px] font-black text-cyan-500 uppercase tracking-[0.2em] mb-4 border-b border-cyan-900/50 pb-2",children:"CONTROL TERRITORIAL GLOBAL"}),u.jsx(kc,{label:"MAGNETO",shieldVal:L.magneto.shield,enemyVal:L.magneto.enemy,enemyColor:L.magneto.color}),u.jsx(kc,{label:"KINGPIN",shieldVal:L.kingpin.shield,enemyVal:L.kingpin.enemy,enemyColor:L.kingpin.color}),u.jsx(kc,{label:"HULK",shieldVal:L.hulk.shield,enemyVal:L.hulk.enemy,enemyColor:L.hulk.color}),u.jsx(kc,{label:"DOOM",shieldVal:L.doom.shield,enemyVal:L.doom.enemy,enemyColor:L.doom.color})]}),u.jsx("div",{className:"w-1/3 flex flex-col gap-4",children:u.jsxs("div",{className:"flex-1 bg-slate-900/50 border border-cyan-800/50 p-4 flex flex-col items-center justify-center text-center clip-tactical",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase tracking-widest mb-1",children:"MISIONES ACTIVAS"}),u.jsx("div",{className:"text-5xl font-black text-white text-shadow-neon",children:e.length}),u.jsx("div",{className:"text-[9px] text-cyan-400 mt-2 bg-cyan-900/30 px-2 py-1 rounded border border-cyan-800",children:"PRIORIDAD ALTA"})]})})]}),u.jsxs("div",{className:"flex-1 p-6 overflow-y-auto pb-24",children:[u.jsx("h3",{className:"text-[10px] font-black text-cyan-600 uppercase tracking-[0.2em] mb-4",children:"REGISTRO DE OPERACIONES"}),u.jsx("div",{className:"space-y-3",children:e.map(V=>u.jsxs("div",{className:"bg-slate-900/80 border-l-4 border-cyan-500 p-4 hover:bg-cyan-900/20 transition-all group cursor-pointer relative overflow-hidden shadow-lg",children:[u.jsxs("div",{className:"flex justify-between items-center relative z-10",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-bold text-white group-hover:text-cyan-300 uppercase tracking-wider",children:V.title}),u.jsxs("div",{className:"text-[10px] text-gray-400 mt-1 font-mono",children:[V.location.state," // ",V.threatLevel]})]}),u.jsxs("div",{className:"text-[9px] font-bold border border-cyan-700 px-3 py-1 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-black transition-colors",children:[t.filter(W=>W.assignedMissionId===V.id).length," AGENTES"]})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-900/0 via-cyan-900/10 to-cyan-900/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 pointer-events-none"})]},V.id))})]})]}),u.jsxs("div",{className:"col-span-3 border-l border-cyan-900 bg-slate-900/30 flex flex-col h-full overflow-hidden",children:[u.jsx("div",{className:"p-6 border-b border-cyan-900 shrink-0",children:u.jsxs("button",{onClick:U,className:"w-full aspect-square border-2 border-dashed border-cyan-800 hover:border-cyan-400 hover:bg-cyan-900/20 transition-all group flex flex-col items-center justify-center gap-4 rounded-xl relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-cyan-500/5 scale-0 group-hover:scale-100 transition-transform duration-500 rounded-full"}),u.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-950 border-2 border-cyan-600 flex items-center justify-center group-hover:scale-110 transition-transform shadow-[0_0_20px_rgba(6,182,212,0.3)] z-10",children:u.jsx("span",{className:"text-3xl text-cyan-400 font-light",children:"+"})}),u.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-cyan-400 uppercase z-10",children:"ACCESO CEREBRO"})]})}),u.jsxs("div",{className:"p-6 border-b border-cyan-900 bg-slate-900/50 shrink-0",children:[u.jsx("h3",{className:"text-[10px] font-bold text-blue-400 uppercase tracking-widest mb-4",children:"RECURSOS OMEGA"}),u.jsxs("div",{className:"flex items-center justify-between mb-6 bg-black/40 p-3 rounded border border-blue-900/30",children:[u.jsx("div",{className:"flex gap-1.5",children:[...Array(5)].map((V,W)=>u.jsx("div",{className:`w-3 h-10 skew-x-[-10deg] border border-slate-700 ${W<f?"bg-cyan-500 shadow-[0_0_10px_#06b6d4]":"bg-slate-800/50"}`},W))}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-3xl font-black text-white leading-none",children:f}),u.jsx("div",{className:"text-[8px] text-gray-500 uppercase",children:"UNIDADES"})]})]}),g&&u.jsx("button",{onClick:g,className:"w-full py-3 bg-blue-900/30 border border-blue-600 text-blue-300 text-[9px] font-bold hover:bg-blue-600 hover:text-white transition-all uppercase tracking-widest clip-tactical-inv",children:"BUSCAR SUMINISTROS"})]}),u.jsxs("div",{className:"flex-1 p-6 overflow-y-auto pb-24",children:[u.jsx("h3",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-4",children:"HISTORIAL DE EVENTOS"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"border-l-2 border-emerald-500 pl-3 py-1 relative",children:[u.jsx("div",{className:"absolute w-2 h-2 bg-emerald-500 rounded-full -left-[5px] top-1.5 shadow-[0_0_10px_#10b981]"}),u.jsx("div",{className:"text-[9px] text-emerald-400 font-bold uppercase mb-1",children:"MISIN COMPLETADA"}),u.jsx("div",{className:"text-xs text-gray-400",children:"Base Alpha asegurada."})]}),u.jsxs("div",{className:"border-l-2 border-red-500 pl-3 py-1 relative",children:[u.jsx("div",{className:"absolute w-2 h-2 bg-red-500 rounded-full -left-[5px] top-1.5 shadow-[0_0_10px_#ef4444]"}),u.jsx("div",{className:"text-[9px] text-red-400 font-bold uppercase mb-1",children:"BAJA CONFIRMADA"}),u.jsx("div",{className:"text-xs text-gray-400",children:"Agente Coulson perdido en accin."})]})]})]})]})]}),u.jsx(J5,{isOpen:v.isOpen,onClose:()=>S({...v,isOpen:!1}),onConfirm:v.onConfirm,title:v.title,message:v.message,confirmText:v.confirmText,type:v.type}),w&&u.jsx(Z5,{isOpen:w,onClose:()=>b(!1),onRecruit:s,templates:P,existingAliases:M,language:c,playerAlignment:d||"ALIVE"}),j&&u.jsx("div",{className:"fixed inset-0 z-[200] bg-black/95 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",onClick:()=>I(null),children:u.jsxs("div",{className:"relative flex flex-col items-center justify-center w-full h-full",children:[u.jsx("img",{src:j,alt:"Tactical Sheet",className:"h-[85vh] w-auto max-w-[95vw] object-contain border-4 border-yellow-500 shadow-[0_0_50px_rgba(234,179,8,0.5)] rounded-xl bg-black",onClick:V=>V.stopPropagation(),referrerPolicy:"no-referrer"}),u.jsx("button",{onClick:()=>I(null),className:"mt-4 px-8 py-2 bg-red-900/80 text-white font-bold tracking-widest border border-red-600 hover:bg-red-800 uppercase text-xs shadow-lg rounded",children:"CERRAR"})]})}),A&&u.jsx("div",{className:"absolute inset-0 z-50 bg-slate-950/90 backdrop-blur-md flex items-center justify-center p-12",onClick:()=>E(null),children:u.jsxs("div",{className:"bg-slate-900 border-2 border-cyan-500 w-full max-w-5xl h-[70vh] shadow-[0_0_100px_rgba(6,182,212,0.2)] flex clip-tactical",onClick:V=>V.stopPropagation(),children:[u.jsxs("div",{className:"w-1/3 h-full relative",children:[u.jsx("img",{src:A.imageUrl,className:"w-full h-full object-cover",referrerPolicy:"no-referrer"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"}),u.jsxs("div",{className:"absolute bottom-4 left-4",children:[u.jsx("h2",{className:"text-3xl font-black text-white uppercase italic tracking-tighter",children:A.alias}),u.jsx("p",{className:"text-cyan-400 font-mono text-sm",children:A.name})]})]}),u.jsxs("div",{className:"flex-1 p-8 bg-slate-900/95 relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4",children:u.jsx("button",{onClick:()=>E(null),className:"text-cyan-500 hover:text-white font-bold text-xl",children:""})}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-slate-950 p-4 border border-red-900/50 text-center",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"FUERZA"}),u.jsx("div",{className:"text-2xl font-black text-red-500",children:A.stats.strength})]}),u.jsxs("div",{className:"bg-slate-950 p-4 border border-green-900/50 text-center",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"AGILIDAD"}),u.jsx("div",{className:"text-2xl font-black text-green-500",children:A.stats.agility})]}),u.jsxs("div",{className:"bg-slate-950 p-4 border border-blue-900/50 text-center",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"INTELECTO"}),u.jsx("div",{className:"text-2xl font-black text-blue-500",children:A.stats.intellect})]})]}),u.jsx("div",{className:"prose prose-invert flex-1 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-cyan-900",children:u.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed border-l-2 border-cyan-800 pl-4 italic",children:['"',A.bio,'"']})}),u.jsxs("div",{className:"mt-8 flex gap-4 justify-end items-center border-t border-cyan-900/50 pt-6",children:[A.characterSheetUrl&&u.jsxs("button",{onClick:()=>I(A.characterSheetUrl),className:"px-6 py-3 bg-yellow-900/20 border border-yellow-600 text-yellow-500 hover:bg-yellow-900/40 hover:text-yellow-200 font-bold uppercase tracking-widest text-xs transition-all flex items-center gap-2 group",children:[u.jsx("span",{className:"text-lg group-hover:scale-110 transition-transform",children:""}),"FICHA TCTICA"]}),u.jsx("button",{className:"px-8 py-3 bg-cyan-600 hover:bg-cyan-500 text-black font-black uppercase tracking-widest clip-tactical shadow-[0_0_20px_rgba(6,182,212,0.5)] transition-all",children:"ASIGNAR MISIN"})]})]})]})})]})},n9=({url:t,title:e,onClose:n})=>{const[r,i]=N.useState({x:50,y:50}),[s,o]=N.useState({w:600,h:500}),[a,c]=N.useState(!1),[d,h]=N.useState(!1),[p,f]=N.useState(!1),[g,_]=N.useState(!1),[x,C]=N.useState({x:0,y:0}),E=N.useRef({x:50,y:50,w:600,h:500}),b=(A=>A.includes("drive.google.com")?A.replace(/\/view.*/,"/preview").replace(/\/edit.*/,"/preview"):A.includes("dropbox.com")?A.replace("?dl=0","").replace("?dl=1","")+"?raw=1":A)(t),P=t.includes("drive.google.com"),D=A=>{a||(f(!0),C({x:A.clientX-r.x,y:A.clientY-r.y}))},j=A=>{A.stopPropagation(),_(!0)};N.useEffect(()=>{const A=O=>{p&&i({x:O.clientX-x.x,y:O.clientY-x.y}),g&&o({w:Math.max(300,O.clientX-r.x),h:Math.max(200,O.clientY-r.y)})},k=()=>{f(!1),_(!1)};return p||g?(window.addEventListener("mousemove",A),window.addEventListener("mouseup",k),document.body.style.userSelect="none"):document.body.style.userSelect="",()=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",k),document.body.style.userSelect=""}},[p,g,x,r]);const I=()=>{a?(i({x:E.current.x,y:E.current.y}),o({w:E.current.w,h:E.current.h})):(E.current={...r,...s},i({x:0,y:0})),c(!a),h(!1)},v=()=>{h(!d),a&&c(!1)},S={left:r.x,top:r.y,width:a?"100vw":s.w,height:d?"auto":a?"100vh":s.h,position:"fixed",zIndex:1e3};return u.jsxs("div",{style:S,className:`flex flex-col bg-slate-900 border-2 border-cyan-500 shadow-[0_0_30px_rgba(0,0,0,0.8)] rounded-sm overflow-hidden transition-all duration-75 ${a?"rounded-none border-0":""}`,children:[u.jsxs("div",{onMouseDown:D,className:`flex justify-between items-center p-2 bg-slate-800 border-b border-cyan-700 select-none ${a?"":"cursor-move"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 text-cyan-400 font-bold text-xs tracking-widest overflow-hidden",children:[u.jsx("span",{children:""}),u.jsx("span",{className:"truncate max-w-[200px]",children:e})]}),u.jsxs("div",{className:"flex gap-1 items-center",children:[u.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"w-6 h-6 flex items-center justify-center bg-slate-700 hover:bg-cyan-800 text-cyan-300 text-xs border border-slate-600 mr-2",title:"Abrir en pestaa nueva",onMouseDown:A=>A.stopPropagation(),children:""}),u.jsx("button",{onClick:v,className:"w-6 h-6 flex items-center justify-center bg-slate-700 hover:bg-cyan-800 text-white text-xs border border-slate-600",children:"_"}),u.jsx("button",{onClick:I,className:"w-6 h-6 flex items-center justify-center bg-slate-700 hover:bg-cyan-800 text-white text-xs border border-slate-600",children:a?"":""}),u.jsx("button",{onClick:n,className:"w-6 h-6 flex items-center justify-center bg-red-900 hover:bg-red-700 text-white text-xs border border-red-700",children:""})]})]}),!d&&u.jsxs("div",{className:"flex-1 relative bg-gray-800 flex flex-col",children:[(p||g)&&u.jsx("div",{className:"absolute inset-0 z-50 bg-transparent"}),P?u.jsx("iframe",{src:b,className:"w-full h-full border-0 bg-white",title:"PDF Viewer",allow:"autoplay"}):u.jsx("object",{data:b,type:"application/pdf",className:"w-full h-full border-0 bg-white",children:u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 gap-4",children:[u.jsx("p",{children:"El navegador no puede visualizar este archivo directamente."}),u.jsx("a",{href:t,target:"_blank",rel:"noreferrer",className:"px-4 py-2 bg-cyan-600 text-white rounded",children:"Descargar PDF"})]})}),!a&&u.jsx("div",{onMouseDown:j,className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50 bg-cyan-500/50 hover:bg-cyan-400 clip-triangle",style:{clipPath:"polygon(100% 0, 0 100%, 100% 100%)"}})]})]})},XA=({mission:t,isOpen:e,onClose:n,onComplete:r,onReactivate:i,onEdit:s,onDelete:o,language:a,isCompleted:c,isEditorMode:d})=>{const[h,p]=N.useState(!1),[f,g]=N.useState(!1),[_,x]=N.useState(!1),[C,E]=N.useState(!1),[w,b]=N.useState([]),[P,D]=N.useState(!1),j=Hn[a].missionModal,I=N.useRef([]);if(N.useEffect(()=>{if(p(!1),g(!1),x(!1),E(!1),e&&t.description&&!c&&!f){b([]),D(!0);let O=0,R=0;const M=t.description,L=Array(M.length).fill(""),U=()=>{if(O>=M.length){D(!1);return}L[O]=M[O].substring(0,R+1),b([...L]),R++,R>=M[O].length&&(O++,R=0);const V=Math.random()*10+5,W=setTimeout(U,V);I.current.push(W)},K=setTimeout(U,300);I.current.push(K)}else b(t.description||[]),D(!1);return()=>{I.current.forEach(clearTimeout),I.current=[]}},[t,e]),!e)return null;const v=()=>{p(!0);const O=setTimeout(()=>{if(p(!1),g(!0),!t.outcomeText){const R=setTimeout(()=>{r(t.id),n()},1500);I.current.push(R)}},3e3);I.current.push(O)},S=()=>{r(t.id),n()},A=()=>{i&&(i(t.id),n())},k=f&&t.outcomeText;return u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[u.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-md",onClick:n}),C&&t.pdfUrl&&u.jsx(n9,{url:t.pdfUrl,title:`DOC CLASIFICADO: ${t.title}`,onClose:()=>E(!1)}),u.jsxs("div",{className:`relative w-full max-w-3xl glass-panel shadow-[0_0_80px_rgba(0,0,0,0.6)] flex flex-col max-h-[90vh] overflow-hidden rounded-sm ${c||f?"border-emerald-600/50 shadow-emerald-900/10":"border-cyan-600/50 shadow-cyan-900/10"}`,children:[u.jsxs("div",{className:`border-b p-5 flex justify-between items-center relative ${c||f?"bg-emerald-900/20 border-emerald-600/50":"bg-cyan-900/20 border-cyan-600/50"}`,children:[u.jsx("div",{className:`absolute top-0 left-0 w-32 h-1 ${c||f?"bg-emerald-400 shadow-[0_0_8px_rgba(52,211,153,0.5)]":"bg-cyan-400 shadow-[0_0_8px_rgba(34,211,238,0.5)]"}`}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h2",{className:`text-xl md:text-2xl font-black tracking-[0.2em] font-mono uppercase ${c||f?"text-emerald-400":"text-cyan-400"}`,children:c||f?"MISSION COMPLETE":j.title}),u.jsxs("span",{className:"text-[9px] font-mono text-cyan-700/80 tracking-widest font-bold",children:["SERIAL_KEY: ",t.id]})]}),u.jsx("div",{className:"flex gap-2 items-center",children:u.jsx("div",{className:`font-bold border-2 px-3 py-1 text-[10px] tracking-widest font-mono ${c||f?"text-emerald-400 border-emerald-500/50 bg-emerald-950/20":"text-red-500 border-red-500/50 bg-red-950/20 animate-pulse"}`,children:c||f?"ARCHIVED":"TOP SECRET"})})]}),u.jsxs("div",{className:"p-8 overflow-y-auto font-sans text-cyan-50/90 scrollbar-thin scrollbar-thumb-cyan-900 scrollbar-track-slate-950/50",children:[u.jsxs("div",{className:"mb-8 border-b border-cyan-900/50 pb-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 mb-4",children:[u.jsx("h3",{className:"text-3xl md:text-4xl font-black text-white/90 tracking-tight leading-none uppercase",children:t.title}),u.jsxs("div",{className:"text-right border-l md:border-l-0 md:pl-0 pl-4 border-cyan-800",children:[u.jsx("div",{className:"text-[9px] text-cyan-600 font-bold uppercase tracking-[0.3em] mb-1",children:j.threat}),u.jsx("div",{className:`text-lg md:text-xl font-black tracking-widest font-mono ${c?"text-emerald-500":"text-red-600"}`,children:c?"NEUTRALIZED":t.threatLevel||"UNKNOWN"})]})]}),u.jsxs("div",{className:"flex flex-wrap gap-2 text-[10px] font-mono font-bold text-cyan-500/80",children:[u.jsxs("span",{className:"bg-cyan-950/30 px-3 py-1 border border-cyan-800/30 rounded-full tracking-tighter",children:["OS_ZONE: ",t.location.state.toUpperCase()]}),u.jsxs("span",{className:"bg-cyan-950/30 px-3 py-1 border border-cyan-800/30 rounded-full tracking-tighter",children:["NAV_POS: ",t.location.coordinates[1].toFixed(4),", ",t.location.coordinates[0].toFixed(4)]})]}),t.requirements&&t.requirements.length>0&&u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-[9px] text-cyan-600 font-bold uppercase mb-1 tracking-widest",children:"REQUISITOS TCTICOS"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:t.requirements.map((O,R)=>u.jsxs("span",{className:"text-[10px] font-bold bg-blue-950 text-blue-300 border border-blue-800 px-2 py-0.5 rounded shadow-sm",children:[" ",O]},R))})]})]}),k?u.jsxs("div",{className:"animate-fade-in space-y-4",children:[u.jsxs("h4",{className:"text-[10px] font-black tracking-[0.4em] uppercase text-emerald-500 flex items-center gap-2",children:[u.jsx("span",{className:"w-8 h-[1px] bg-emerald-500/30"})," ",j.outcomeTitle]}),u.jsx("div",{className:"p-6 bg-emerald-950/20 border border-emerald-500/30 text-emerald-100 text-sm md:text-base leading-relaxed whitespace-pre-wrap font-medium rounded-sm",children:t.outcomeText})]}):u.jsxs(u.Fragment,{children:[t.pdfUrl&&u.jsx("div",{className:"mb-6 animate-fade-in",children:u.jsxs("button",{onClick:()=>E(!0),className:"w-full py-3 bg-red-900/20 border border-red-500/50 hover:bg-red-900/40 hover:border-red-500 text-red-300 font-bold tracking-widest flex items-center justify-center gap-3 transition-all group shadow-[0_0_15px_rgba(220,38,38,0.2)]",children:[u.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform",children:""}),u.jsx("span",{children:"ABRIR DOCUMENTO CLASIFICADO (PDF)"}),u.jsx("span",{className:"text-xs opacity-50 group-hover:opacity-100 border-l border-red-700 pl-2 ml-2",children:"CLICK TO OPEN"})]})}),u.jsxs("div",{className:"mb-8 group",children:[u.jsxs("h4",{className:`text-[10px] font-black tracking-[0.4em] mb-4 uppercase flex items-center gap-2 ${c?"text-emerald-500":"text-cyan-500"}`,children:[u.jsx("span",{className:`w-8 h-[1px] ${c?"bg-emerald-500/30":"bg-cyan-500/30"}`})," ",j.briefing]}),u.jsx("div",{className:"space-y-4 text-sm md:text-base leading-relaxed text-slate-300 font-medium font-sans",children:(P?w:t.description).map((O,R)=>u.jsx("p",{className:P&&R===w.length-1?"after:content-['_'] after:animate-pulse after:text-cyan-400":"",children:O},R))})]}),u.jsxs("div",{className:"bg-slate-950/40 border border-white/5 p-6 rounded-sm mb-8",children:[u.jsxs("h4",{className:`text-[10px] font-black tracking-[0.4em] mb-6 uppercase flex items-center gap-2 ${c?"text-emerald-500":"text-cyan-500"}`,children:[u.jsx("span",{className:`w-8 h-[1px] ${c?"bg-emerald-500/30":"bg-cyan-500/30"}`})," ",j.objectives]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.objectives.map((O,R)=>u.jsxs("div",{className:"flex gap-4 group",children:[u.jsx("div",{className:`w-8 h-8 shrink-0 border-2 rounded-sm flex items-center justify-center text-[10px] font-black transition-all duration-500 ${c||f?"bg-emerald-500 border-emerald-500 text-black":"bg-slate-900 border-slate-700 text-slate-500 group-hover:border-cyan-500 group-hover:text-cyan-400"}`,children:c||f?"DONE":(R+1).toString().padStart(2,"0")}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h5",{className:`font-black text-xs tracking-widest uppercase mb-1 transition-colors ${c||f?"text-emerald-400":"text-white/80 group-hover:text-cyan-400"}`,children:O.title}),u.jsx("p",{className:"text-[11px] text-slate-500 leading-snug font-medium",children:O.desc})]})]},R))})]})]})]}),u.jsx("div",{className:"p-6 border-t border-cyan-900/50 bg-slate-950/40 flex justify-between items-center gap-4",children:k?u.jsx("div",{className:"w-full flex justify-end",children:u.jsx("button",{onClick:S,className:"px-8 py-3 bg-emerald-600 hover:bg-emerald-600 text-black text-[10px] font-black tracking-[0.3em] shadow-[0_0_30px_rgba(16,185,129,0.2)] transition-all uppercase font-mono",children:j.closeReport})}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:n,disabled:h,className:"px-6 py-3 border border-cyan-700/50 text-cyan-500 text-[10px] font-black tracking-widest hover:bg-cyan-900/20 hover:text-cyan-300 transition-all disabled:opacity-50 uppercase font-mono",children:j.cancel}),u.jsxs("div",{className:"flex gap-4",children:[t.layoutUrl&&u.jsxs("button",{onClick:()=>x(!0),className:"px-5 py-3 bg-yellow-600 hover:bg-yellow-500 text-black text-[10px] font-black tracking-widest shadow-[0_0_20px_rgba(234,179,8,0.3)] transition-all flex items-center gap-2 uppercase font-mono",children:[u.jsx("span",{children:""})," MAP"]}),c&&i&&u.jsx("button",{onClick:A,className:"px-6 py-3 border border-yellow-600/50 text-yellow-500 text-[10px] font-black tracking-widest hover:bg-yellow-900/20 hover:text-yellow-300 transition-all uppercase font-mono",children:j.reactivate}),u.jsx("button",{disabled:c||h||f,className:`px-8 py-3 text-black text-[10px] font-black tracking-widest border-2 shadow transition-all uppercase font-mono
                                ${c||f?"bg-emerald-900/30 border-emerald-800 text-emerald-500 cursor-not-allowed":"bg-emerald-500 hover:bg-emerald-400 border-emerald-400 shadow-[0_0_25px_rgba(16,185,129,0.4)]"}
                                ${h?"animate-pulse cursor-wait":""}
                            `,onClick:()=>{c||v()},children:h?j.sending:f||c?` ${j.sent}`:j.complete}),!c&&!h&&!f&&u.jsx("button",{className:"px-8 py-3 bg-red-600 hover:bg-red-500 text-white text-[10px] font-black tracking-widest shadow-[0_0_20px_rgba(239,68,68,0.3)] transition-all uppercase font-mono",onClick:n,children:j.accept})]})]})}),_&&t.layoutUrl&&u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",onClick:()=>x(!1),children:u.jsxs("div",{className:"relative max-w-full max-h-full flex flex-col items-center",children:[u.jsx("img",{src:t.layoutUrl,alt:"Tactical Map",className:"max-w-[95vw] max-h-[85vh] object-contain border-2 border-cyan-500 shadow-[0_0_50px_rgba(6,182,212,0.3)]",onClick:O=>O.stopPropagation(),referrerPolicy:"no-referrer"}),u.jsx("button",{onClick:()=>x(!1),className:"mt-4 px-6 py-2 bg-red-900/80 text-white font-bold tracking-widest border border-red-600 hover:bg-red-800",children:"CERRAR VISOR"})]})}),u.jsx("div",{className:`absolute bottom-2 right-2 w-4 h-4 border-b border-r ${c||f?"border-emerald-500":"border-cyan-500"}`}),u.jsx("div",{className:`absolute bottom-2 left-2 w-4 h-4 border-b border-l ${c||f?"border-emerald-500":"border-cyan-500"}`})]})]})},r9=({event:t,isOpen:e,onAcknowledge:n,language:r,playerAlignment:i})=>{if(!e)return null;const s=Hn[r].events;let o="anomaly";t.stage==="SURFER"&&(o="surfer"),t.stage==="GALACTUS"&&(o="galactus");const a=i==="ZOMBIE"?"zombie":"alive",c=s[o][a],d=i==="ZOMBIE",h=d?"border-lime-600":"border-red-600",p=d?"text-lime-500":"text-red-500",f=d?"bg-lime-900/50 border-lime-500 text-lime-200 hover:bg-lime-600":"bg-red-900/50 border-red-500 text-red-200 hover:bg-red-600",g=d?"shadow-[0_0_100px_rgba(101,163,13,0.5)]":"shadow-[0_0_100px_rgba(220,38,38,0.5)]";return u.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-sm animate-fade-in",children:u.jsxs("div",{className:`w-full max-w-2xl bg-slate-900 border-4 ${h} ${g} flex flex-col overflow-hidden relative`,children:[u.jsxs("div",{className:`${d?"bg-lime-600":"bg-red-600"} text-black font-bold text-center py-2 tracking-[0.5em] text-lg animate-pulse`,children:["/// ",d?"HUNGER ALERT":"EMERGENCY INTERRUPTION"," ///"]}),u.jsxs("div",{className:"p-8 flex flex-col items-center text-center max-h-[80vh] overflow-y-auto",children:["image"in c&&c.image&&u.jsx("div",{className:`w-full mb-6 relative border-2 ${d?"border-lime-500/50":"border-red-500/50"} shadow-lg overflow-hidden group bg-black/50`,children:u.jsxs("div",{className:"relative w-full",children:[u.jsx("div",{className:`absolute top-2 left-2 ${d?"bg-lime-600":"bg-red-600"} text-white text-[10px] font-bold px-2 py-0.5 animate-pulse z-10`,children:"LIVE FEED // SIGNAL UNSTABLE"}),u.jsx("img",{src:c.image,alt:"Event Visual",className:"w-full h-auto object-cover opacity-90 contrast-125 saturate-50 animate-flash",referrerPolicy:"no-referrer"}),u.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(transparent_50%,rgba(0,0,0,0.5)_50%)] bg-[length:100%_4px] pointer-events-none opacity-50"}),u.jsx("div",{className:"absolute inset-0 bg-white/5 animate-pulse pointer-events-none mix-blend-overlay"})]})}),u.jsx("h2",{className:`text-2xl md:text-3xl font-bold ${p} mb-6 font-mono tracking-widest drop-shadow-md`,children:c.title}),u.jsx("div",{className:`w-full h-px ${d?"bg-lime-900":"bg-red-900"} mb-6`}),u.jsx("p",{className:`text-base md:text-lg ${d?"text-lime-100":"text-red-100"} font-mono leading-relaxed max-w-prose`,children:c.desc}),u.jsx("div",{className:`w-full h-px ${d?"bg-lime-900":"bg-red-900"} mt-6 mb-8`}),u.jsx("button",{onClick:n,className:`px-8 py-4 border-2 font-bold tracking-widest transition-all duration-300 shadow-lg ${f}`,children:c.ack})]}),u.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10 bg-[linear-gradient(transparent_50%,rgba(0,0,0,0.5)_50%)] bg-[length:100%_4px]"})]})})},ZA={Alabama:[-86.9,32.8],Alaska:[-152.4,61.3],Arizona:[-111.4,34],Arkansas:[-92.3,34.9],California:[-119.6,36.1],Colorado:[-105.3,39],Connecticut:[-72.7,41.6],Delaware:[-75.5,39.3],"District of Columbia":[-77,38.9],Florida:[-81.6,27.7],Georgia:[-83.6,33],Hawaii:[-157.5,20.5],Idaho:[-114.4,44.2],Illinois:[-89,40.3],Indiana:[-86.1,40.2],Iowa:[-93.2,42],Kansas:[-96.7,38.5],Kentucky:[-84.2,37.6],Louisiana:[-91.8,31.1],Maine:[-69.3,45.3],Maryland:[-76.8,39],Massachusetts:[-71.5,42.2],Michigan:[-84.5,43.3],Minnesota:[-94.6,45.6],Mississippi:[-89.6,32.7],Missouri:[-92.2,38.4],Montana:[-110.4,46.9],Nebraska:[-99.9,41.1],Nevada:[-117,38.8],"New Hampshire":[-71.5,43.4],"New Jersey":[-74.5,40.2],"New Mexico":[-106.2,34.8],"New York":[-74.9,42.1],"North Carolina":[-79.8,35.6],"North Dakota":[-99.9,47.5],Ohio:[-82.7,40.3],Oklahoma:[-96.9,35.5],Oregon:[-120.6,44],Pennsylvania:[-77.2,40.5],"Rhode Island":[-71.5,41.6],"South Carolina":[-80.9,33.8],"South Dakota":[-99.9,44.2],Tennessee:[-86.3,35.7],Texas:[-97.5,31],Utah:[-111.8,39.2],Vermont:[-72.7,44],Virginia:[-78.1,37.7],Washington:[-120.7,47.4],"West Virginia":[-80.9,38.4],Wisconsin:[-89.6,44.2],Wyoming:[-107.3,42.7]},mf=Object.keys(ZA).sort(),Oc=["Infeccin latente (Fcil)","Hambre insaciable (Intermedia)","Plaga desatada (Difcil)","Apocalipsis Gamma (Muy difcil)"],JA=({isOpen:t,onClose:e,onSave:n,language:r,initialData:i,existingMissions:s=[]})=>{const o=Hn[r].missionEditor,[a,c]=N.useState(""),[d,h]=N.useState(""),[p,f]=N.useState(""),[g,_]=N.useState(mf[0]),[x,C]=N.useState(Oc[1]),[E,w]=N.useState("STANDARD"),[b,P]=N.useState("BOTH"),[D,j]=N.useState(!1),[I,v]=N.useState("NORMAL"),[S,A]=N.useState([]),[k,O]=N.useState(""),[R,M]=N.useState([{title:"",desc:""}]),[L,U]=N.useState([]),[K,V]=N.useState(wn[0].id),[W,Q]=N.useState(""),[te,ae]=N.useState(""),[$,Y]=N.useState(!1);if(N.useEffect(()=>{i?(c(i.title),h(i.description.join(`
`)),f(i.outcomeText||""),_(i.location.state),C(i.threatLevel||Oc[1]),w(i.type||"STANDARD"),P(i.alignment||"BOTH"),v(i.triggerStage||"NORMAL"),j(i.isIntroMission||!1),i.prereqs&&i.prereqs.length>0?A(i.prereqs):i.prereq?A([i.prereq]):A([]),M(i.objectives.length>0?i.objectives:[{title:"",desc:""}]),U(i.requirements||[]),Q(i.layoutUrl||""),ae(i.pdfUrl||"")):(c(""),h(""),f(""),_(mf[0]),C(Oc[1]),w("STANDARD"),P("BOTH"),j(!1),v("NORMAL"),A([]),M([{title:"",desc:""}]),U([]),Q(""),ae(""))},[i,t]),!t)return null;const X=()=>{M([...R,{title:"",desc:""}])},ne=(z,le,ve)=>{const Ee=[...R];Ee[z]={...Ee[z],[le]:ve},M(Ee)},se=()=>{L.includes(K)||U([...L,K])},ye=z=>{U(L.filter(le=>le!==z))},De=()=>{k&&!S.includes(k)&&(A([...S,k]),O(""))},rt=z=>{A(S.filter(le=>le!==z))},be=async z=>{z.preventDefault(),Y(!0);let le;if(i&&i.location.state===g)le=i.location.coordinates;else{const Ee=ZA[g]||[-98.5,39.8],Le=(Math.random()-.5)*2,Ie=(Math.random()-.5)*1.5;le=[Ee[0]+Le,Ee[1]+Ie]}const ve={title:a,description:d.split(`
`).filter(Ee=>Ee.trim()!==""),outcomeText:p.trim()||null,location:{state:g,coordinates:le},threatLevel:x,type:E,alignment:b,isIntroMission:D,triggerStage:E==="GALACTUS"?I:null,objectives:R.filter(Ee=>Ee.title&&Ee.desc),prereq:S.length>0?S[0]:null,prereqs:S,requirements:L,layoutUrl:W.trim()||null,pdfUrl:te.trim()||null};try{if(i&&i.id)await tA(i.id,ve),n({...ve,id:i.id});else{const Ee=await eA(ve);n({...ve,id:Ee})}e()}catch(Ee){console.error(Ee),alert("Failed to save mission: "+Ee.message)}finally{Y(!1)}},Se=s.filter(z=>{if(i&&z.id===i.id||S.includes(z.id))return!1;const le=z.alignment||"ALIVE";return b==="BOTH"||le==="BOTH"?!0:le===b}),q=z=>{const le=wn.find(ve=>ve.id===z);return le?le.name:z};return u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-950/90 backdrop-blur-sm p-4",children:u.jsxs("div",{className:"w-full max-w-4xl bg-slate-900 border-2 border-cyan-500 shadow-2xl flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"bg-cyan-900/40 p-4 border-b border-cyan-600 flex justify-between items-center",children:[u.jsx("h3",{className:"text-cyan-300 font-bold tracking-widest uppercase",children:i?`EDITING: ${i.title}`:o.title}),u.jsx("button",{onClick:e,className:"text-cyan-500 hover:text-white",children:""})]}),u.jsxs("form",{onSubmit:be,className:"p-6 overflow-y-auto font-mono flex flex-col gap-4 scrollbar-thin scrollbar-thumb-cyan-900",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:o.missionTitle}),u.jsx("input",{value:a,onChange:z=>c(z.target.value),required:!0,className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 focus:border-cyan-400 outline-none"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:o.location}),u.jsx("select",{value:g,onChange:z=>_(z.target.value),className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200",children:mf.map(z=>u.jsx("option",{value:z,children:z},z))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:o.threat}),u.jsx("select",{value:x,onChange:z=>C(z.target.value),className:"w-full bg-slate-950 border border-cyan-800 p-2 text-yellow-400 font-bold",children:Oc.map(z=>u.jsx("option",{value:z,children:z},z))})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:o.type}),u.jsxs("select",{value:E,onChange:z=>w(z.target.value),className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200",children:[u.jsx("option",{value:"STANDARD",children:"STANDARD"}),u.jsx("option",{value:"INTRODUCTORY",children:"INTRODUCTORIA (VERDE)"}),u.jsx("option",{value:"SHIELD_BASE",children:"BASE S.H.I.E.L.D."}),u.jsx("option",{value:"BOSS_KINGPIN",children:"BOSS - KINGPIN"}),u.jsx("option",{value:"BOSS_MAGNETO",children:"BOSS - MAGNETO"}),u.jsx("option",{value:"BOSS_DOOM",children:"BOSS - DOOM"}),u.jsx("option",{value:"BOSS_HULK",children:"BOSS - HULK"}),u.jsx("option",{value:"GALACTUS",children:"EVENTO GALACTUS"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"MODO"}),u.jsxs("select",{value:b,onChange:z=>{P(z.target.value),A([])},className:"w-full bg-slate-950 border border-cyan-800 p-2 text-white font-bold",children:[u.jsx("option",{value:"ALIVE",children:" HROES"}),u.jsx("option",{value:"ZOMBIE",children:" ZOMBIES"}),u.jsx("option",{value:"BOTH",children:" AMBOS"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-3 p-3 border border-emerald-500/50 bg-emerald-900/10",children:[u.jsx("input",{type:"checkbox",id:"isIntro",checked:D,onChange:z=>j(z.target.checked),className:"w-5 h-5 accent-emerald-500 cursor-pointer"}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"isIntro",className:"text-xs font-bold text-emerald-400 cursor-pointer uppercase",children:"ES MISIN INICIAL (INTRO)"}),u.jsx("div",{className:"text-[9px] text-emerald-600",children:"Aparecer automticamente tras la intro."})]})]}),E==="GALACTUS"&&u.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/50 p-2 animate-fade-in",children:[u.jsx("label",{className:"text-[10px] text-purple-400 font-bold block mb-1 uppercase",children:"ETAPA DE ACTIVACIN"}),u.jsxs("select",{value:I,onChange:z=>v(z.target.value),className:"w-full bg-slate-950 border border-purple-500 p-2 text-purple-200 font-bold",children:[u.jsx("option",{value:"SURFER",children:"LLEGADA DE SILVER SURFER (ETAPA 2)"}),u.jsx("option",{value:"GALACTUS",children:"LLEGADA DE GALACTUS (ETAPA 3)"})]})]}),u.jsxs("div",{className:"bg-slate-900/50 border border-cyan-900/30 p-3",children:[u.jsxs("label",{className:"text-[10px] text-cyan-600 font-bold block mb-2 uppercase",children:[o.prereq," (MLTIPLES)"]}),u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsxs("select",{value:k,onChange:z=>O(z.target.value),className:"flex-1 bg-slate-950 border border-cyan-800 p-2 text-xs text-cyan-200 min-w-0",children:[u.jsx("option",{value:"",children:"-- SELECCIONAR MISIN --"}),Se.map(z=>u.jsxs("option",{value:z.id,children:[z.title," (ID: ",z.id,")"]},z.id))]}),u.jsx("button",{type:"button",onClick:De,disabled:!k,className:"bg-cyan-900/50 border border-cyan-600 text-cyan-300 px-3 py-1 text-[10px] font-bold uppercase disabled:opacity-50 shrink-0",children:"+ AADIR"})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.map(z=>{const le=s.find(ve=>ve.id===z);return u.jsxs("div",{className:"flex items-center gap-2 bg-cyan-950 border border-cyan-800 px-2 py-1 rounded",children:[u.jsx("span",{className:"text-[10px] text-cyan-300 truncate max-w-[150px]",children:le?le.title:z}),u.jsx("button",{type:"button",onClick:()=>rt(z),className:"text-red-400 font-bold hover:text-red-200",children:""})]},z)}),S.length===0&&u.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"Sin requisitos previos"})]})]}),u.jsxs("div",{className:"bg-slate-900/50 border border-blue-900/30 p-3",children:[u.jsx("label",{className:"text-[10px] text-blue-400 font-bold block mb-2 uppercase",children:"REQUISITOS (EXPANSIONES)"}),u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsx("select",{value:K,onChange:z=>V(z.target.value),className:"flex-1 bg-slate-950 border border-blue-800 p-2 text-xs text-blue-200 min-w-0",children:wn.map(z=>u.jsx("option",{value:z.id,children:z.name},z.id))}),u.jsx("button",{type:"button",onClick:se,className:"bg-blue-900/50 border border-blue-600 text-blue-300 px-3 py-1 text-[10px] font-bold uppercase shrink-0",children:"+ AADIR"})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:L.map((z,le)=>u.jsxs("div",{className:"flex items-center gap-2 bg-blue-950 border border-blue-800 px-2 py-1 rounded",children:[u.jsx("span",{className:"text-[10px] text-blue-300",children:q(z)}),u.jsx("button",{type:"button",onClick:()=>ye(z),className:"text-red-400 font-bold",children:""})]},le))})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-slate-900/50 border border-cyan-900/30 p-3",children:[u.jsx("label",{className:"text-[10px] text-cyan-500 font-bold block mb-2 uppercase",children:"RECURSOS EXTERNOS"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-cyan-700 block mb-1",children:"URL IMAGEN MAPA (LAYOUT)"}),u.jsx("input",{value:W,onChange:z=>Q(z.target.value),placeholder:"https://...",className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 text-xs"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-cyan-700 block mb-1",children:"URL ARCHIVO PDF (MISIN)"}),u.jsx("input",{value:te,onChange:z=>ae(z.target.value),placeholder:"https://... (Drive/Dropbox/Direct Link)",className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 text-xs"})]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:[o.description," (FLAVOR TEXT)"]}),u.jsx("textarea",{value:d,onChange:z=>h(z.target.value),rows:8,className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 text-xs"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-emerald-600 font-bold block mb-1 uppercase",children:o.outcome}),u.jsx("textarea",{value:p,onChange:z=>f(z.target.value),rows:4,placeholder:"Texto que aparecer al completar la misin...",className:"w-full bg-slate-950 border border-emerald-800 p-2 text-emerald-200 text-xs focus:border-emerald-500 outline-none"})]})]})]}),u.jsxs("div",{className:"bg-slate-950/50 p-4 border border-cyan-900/50 mt-2",children:[u.jsxs("div",{className:"flex justify-between mb-2",children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold uppercase",children:o.objectives}),u.jsxs("button",{type:"button",onClick:X,className:"text-[10px] text-cyan-400 hover:text-white border border-cyan-700 px-2 uppercase",children:["+ ",o.addObjective]})]}),R.map((z,le)=>u.jsxs("div",{className:"mb-2 grid grid-cols-1 md:grid-cols-2 gap-2",children:[u.jsx("input",{placeholder:o.objTitle,value:z.title,onChange:ve=>ne(le,"title",ve.target.value),className:"bg-slate-900 border border-cyan-900 p-1 text-xs text-cyan-200"}),u.jsx("input",{placeholder:o.objDesc,value:z.desc,onChange:ve=>ne(le,"desc",ve.target.value),className:"bg-slate-900 border border-cyan-900 p-1 text-xs text-gray-400"})]},le))]}),u.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-cyan-800",children:[u.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-red-900 text-red-500 text-xs font-bold uppercase hover:bg-red-900/20",children:o.cancel}),u.jsx("button",{type:"submit",disabled:$,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold uppercase shadow-[0_0_15px_rgba(6,182,212,0.4)] transition-all",children:$?"GUARDANDO...":o.save})]})]})]})})},i9=["BRAWLER","SCOUT","TACTICIAN","BLASTER"],eI=({isOpen:t,onClose:e,language:n,initialData:r,onSave:i})=>{const[s,o]=N.useState(""),[a,c]=N.useState(""),[d,h]=N.useState("BRAWLER"),[p,f]=N.useState({strength:5,agility:5,intellect:5}),[g,_]=N.useState(""),[x,C]=N.useState(""),[E,w]=N.useState(""),[b,P]=N.useState("ALIVE"),[D,j]=N.useState(void 0),[I,v]=N.useState(1),[S,A]=N.useState(0),[k,O]=N.useState(0),[R,M]=N.useState(!1),[L,U]=N.useState(!1),[K,V]=N.useState([]),[W,Q]=N.useState("");if(N.useEffect(()=>{r?(o(r.defaultName),c(r.alias||""),h(r.defaultClass),f(r.defaultStats),_(r.bio||""),C(r.imageUrl),w(r.characterSheetUrl||""),P(r.defaultAlignment||"ALIVE"),j(r.relatedHeroId),r.imageParams?(v(r.imageParams.scale),A(r.imageParams.x),O(r.imageParams.y)):(v(1),A(0),O(0))):(o(""),c(""),h("BRAWLER"),f({strength:5,agility:5,intellect:5}),_(""),C(""),w(""),P("ALIVE"),j(void 0),v(1),A(0),O(0))},[r,t]),N.useEffect(()=>{L&&K.length===0&&Nl().then(V)},[L]),!t)return null;const te=async Y=>{Y.preventDefault(),M(!0);const X={scale:I,x:S,y:k},ne={defaultName:s,alias:a.toUpperCase(),defaultClass:d,defaultStats:p,bio:g,imageUrl:x,characterSheetUrl:E,defaultAlignment:b,objectives:(r==null?void 0:r.objectives)||[],currentStory:(r==null?void 0:r.currentStory)||"",relatedHeroId:D||null,imageParams:X};try{r&&r.id?(await fD(r.id,ne),alert("PERSONAJE ACTUALIZADO")):(await pD(ne),alert("PERSONAJE CREADO")),i&&i(),e()}catch(se){console.error(se),alert("ERROR AL GUARDAR")}finally{M(!1)}},ae=K.filter(Y=>{const X=Y.defaultAlignment!==b,ne=Y.alias.toLowerCase().includes(W.toLowerCase()),se=Y.id!==(r==null?void 0:r.id);return X&&ne&&se}),$=()=>{if(D==="NO_VARIANT")return" SIN VARIANTE (INMUNE/IRREVERSIBLE)";if(D){const Y=K.find(X=>X.id===D);return Y?`VINCULADO A: ${Y.alias}`:`ID: ${D}`}return"SIN VINCULACIN"};return u.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-slate-950/60 backdrop-blur-md p-4 animate-fade-in",children:u.jsxs("div",{className:"w-full max-w-3xl glass-panel shadow-2xl flex flex-col max-h-[95vh] relative rounded-sm shadow-cyan-900/10",children:[L&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-950/95 flex flex-col p-6 animate-fade-in",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-cyan-700 pb-2",children:[u.jsxs("h4",{className:"text-cyan-400 font-bold uppercase tracking-widest",children:["SELECCIONAR CONTRAPARTE (",b==="ALIVE"?"ZOMBIE":"ALIVE",")"]}),u.jsx("button",{onClick:()=>U(!1),className:"text-red-500 font-bold",children:"CERRAR"})]}),u.jsx("input",{placeholder:"BUSCAR POR NOMBRE...",value:W,onChange:Y=>Q(Y.target.value),className:"w-full bg-black border border-cyan-800 p-2 text-cyan-200 mb-4 uppercase",autoFocus:!0}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2 scrollbar-thin scrollbar-thumb-cyan-900",children:ae.map(Y=>u.jsxs("div",{onClick:()=>{j(Y.id),U(!1)},className:"p-3 border border-slate-700 hover:border-cyan-500 hover:bg-cyan-900/20 cursor-pointer flex justify-between items-center group",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:Y.imageUrl,className:"w-8 h-8 object-cover border border-slate-600",referrerPolicy:"no-referrer"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-bold text-white group-hover:text-cyan-300",children:Y.alias}),u.jsx("div",{className:"text-[8px] text-gray-500",children:Y.defaultName})]})]}),u.jsx("div",{className:`text-[9px] font-bold px-2 py-1 border ${Y.defaultAlignment==="ZOMBIE"?"border-lime-600 text-lime-500":"border-cyan-600 text-cyan-500"}`,children:Y.defaultAlignment})]},Y.id))})]}),u.jsxs("div",{className:"bg-cyan-900/40 p-4 border-b border-cyan-600 flex justify-between items-center",children:[u.jsx("h3",{className:"text-cyan-300 font-bold tracking-widest uppercase",children:r?`EDITING: ${r.alias}`:"CREATE NEW CHARACTER (DB)"}),u.jsx("button",{onClick:e,className:"text-cyan-500 hover:text-white",children:""})]}),u.jsxs("form",{onSubmit:te,className:"p-6 overflow-y-auto font-mono flex flex-col gap-4 scrollbar-thin scrollbar-thumb-cyan-900",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"REAL NAME"}),u.jsx("input",{value:s,onChange:Y=>o(Y.target.value),required:!0,className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 focus:border-cyan-400 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"ALIAS (CODENAME)"}),u.jsx("input",{value:a,onChange:Y=>c(Y.target.value),required:!0,className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 focus:border-cyan-400 outline-none"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"CLASS"}),u.jsx("select",{value:d,onChange:Y=>h(Y.target.value),className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200",children:i9.map(Y=>u.jsx("option",{value:Y,children:Y},Y))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"ALIGNMENT"}),u.jsxs("select",{value:b,onChange:Y=>P(Y.target.value),className:"w-full bg-slate-950 border border-cyan-800 p-2 text-white font-bold",children:[u.jsx("option",{value:"ALIVE",children:" HERO (ALIVE)"}),u.jsx("option",{value:"ZOMBIE",children:" ZOMBIE (UNDEAD)"})]})]})]}),u.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/30 p-3 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 p-1 opacity-20 text-purple-500 text-4xl font-black pointer-events-none",children:""}),u.jsx("label",{className:"text-[10px] text-purple-400 font-bold block mb-2 uppercase",children:"VINCULACIN CUNTICA"}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:"flex-1 bg-slate-950 border border-purple-800 p-2 text-xs text-purple-200 flex justify-between items-center",children:[u.jsx("span",{className:D==="NO_VARIANT"?"text-red-400 font-bold":"",children:$()}),D&&u.jsx("button",{type:"button",onClick:()=>j(void 0),className:"text-red-500 hover:text-white font-bold px-2",children:""})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:()=>U(!0),className:"flex-1 bg-purple-900/50 border border-purple-600 text-purple-300 px-3 py-2 text-[10px] font-bold uppercase hover:bg-purple-800 transition-colors",children:"BUSCAR"}),u.jsx("button",{type:"button",onClick:()=>j("NO_VARIANT"),className:"flex-1 bg-slate-800 border border-slate-600 text-gray-400 px-3 py-2 text-[10px] font-bold uppercase hover:bg-slate-700 hover:text-white transition-colors",children:"SIN VARIANTE"})]})]})]}),u.jsxs("div",{className:"bg-slate-900/50 border border-cyan-900/30 p-3",children:[u.jsx("label",{className:"text-[10px] text-cyan-500 font-bold block mb-2 uppercase",children:"BASE STATS"}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-red-400 block",children:"STRENGTH"}),u.jsx("input",{type:"number",min:"1",max:"10",value:p.strength,onChange:Y=>f({...p,strength:parseInt(Y.target.value)}),className:"w-full bg-slate-950 border border-red-900 p-1 text-center text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-green-400 block",children:"AGILITY"}),u.jsx("input",{type:"number",min:"1",max:"10",value:p.agility,onChange:Y=>f({...p,agility:parseInt(Y.target.value)}),className:"w-full bg-slate-950 border border-green-900 p-1 text-center text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-blue-400 block",children:"INTELLECT"}),u.jsx("input",{type:"number",min:"1",max:"10",value:p.intellect,onChange:Y=>f({...p,intellect:parseInt(Y.target.value)}),className:"w-full bg-slate-950 border border-blue-900 p-1 text-center text-white"})]})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"IMAGE URL (RETRATO)"}),u.jsx("input",{value:x,onChange:Y=>C(Y.target.value),placeholder:"https://...",className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 text-xs"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-yellow-600 font-bold block mb-1 uppercase",children:"GAME CARD URL (FICHA JUEGO)"}),u.jsx("input",{value:E,onChange:Y=>w(Y.target.value),placeholder:"https://...",className:"w-full bg-slate-950 border border-yellow-800 p-2 text-yellow-200 text-xs focus:border-yellow-500"}),u.jsx("p",{className:"text-[8px] text-gray-500 mt-1",children:"URL de la imagen de la carta de Zombicide/Marvel Zombies."})]}),u.jsxs("div",{className:"bg-black border border-cyan-700 p-4",children:[u.jsx("label",{className:"text-[10px] text-cyan-400 font-bold block mb-2 uppercase text-center",children:"AJUSTE DE ENCUADRE (PREVIEW)"}),u.jsxs("div",{className:"w-32 h-32 mx-auto border-2 border-white overflow-hidden relative bg-slate-800 mb-4 shadow-lg",children:[x?u.jsx("img",{src:x,alt:"Preview",className:"absolute w-full h-full object-cover transition-transform duration-100",style:{transform:`scale(${I}) translate(${S}%, ${k}%)`},referrerPolicy:"no-referrer"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 text-xs",children:"NO IMAGE"}),u.jsx("div",{className:"absolute inset-0 border border-white/20 pointer-events-none"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-[9px] text-cyan-500 mb-1",children:[u.jsx("span",{children:"ZOOM"}),u.jsxs("span",{children:[I.toFixed(1),"x"]})]}),u.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:I,onChange:Y=>v(parseFloat(Y.target.value)),className:"w-full h-1 bg-cyan-900 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-[9px] text-cyan-500 mb-1",children:[u.jsx("span",{children:"POSICIN X (Horizontal)"}),u.jsxs("span",{children:[S,"%"]})]}),u.jsx("input",{type:"range",min:"-50",max:"50",step:"1",value:S,onChange:Y=>A(parseInt(Y.target.value)),className:"w-full h-1 bg-cyan-900 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-[9px] text-cyan-500 mb-1",children:[u.jsx("span",{children:"POSICIN Y (Vertical)"}),u.jsxs("span",{children:[k,"%"]})]}),u.jsx("input",{type:"range",min:"-50",max:"50",step:"1",value:k,onChange:Y=>O(parseInt(Y.target.value)),className:"w-full h-1 bg-cyan-900 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),u.jsx("button",{type:"button",onClick:()=>{v(1),A(0),O(0)},className:"w-full text-[9px] text-red-400 border border-red-900 py-1 hover:bg-red-900/20",children:"RESET AJUSTES"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"BIO / LORE"}),u.jsx("textarea",{value:g,onChange:Y=>_(Y.target.value),rows:4,className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 text-xs"})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-cyan-800",children:[u.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-red-900 text-red-500 text-xs font-bold uppercase hover:bg-red-900/20",children:"CANCEL"}),u.jsx("button",{type:"submit",disabled:R,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold uppercase shadow-[0_0_15px_rgba(6,182,212,0.4)] transition-all",children:R?"SAVING...":r?"UPDATE CHARACTER":"CREATE CHARACTER"})]})]})]})})},s9=[" ALERTA: Horda masiva detectada movindose hacia la Costa Este."," COMUNICACIONES: La seal del Helicarrier es dbil pero constante."," CIENCIA: Reed Richards solicita muestras de tejido necrtico nivel 5."," SHIELD: Se buscan reclutas con inmunidad psquica para operacin en Genosha."," URGENTE: Evacuar sector 7, Hulk ha sido avistado."," VIGILANCIA: Satlites detectan actividad inusual en Latveria."," SUMINISTROS: Convoy de medicinas emboscado en la Ruta 66."],o9=[" HAMBRE: La reserva de carne en Nueva York se agota."," CAZA: Detectado asentamiento humano en los tneles de Morlock."," KINGPIN: Ofrece recompensa por la cabeza de Punisher (preferiblemente cruda)."," PELIGRO: Magneto est fortificando la atmsfera. Difcil acceso areo."," COLMENA: La seal de Galactus se intensifica. El plato principal se acerca."," FESTN: Buffet libre detectado en la Mansin X."," EVOLUCIN: Nuevas cepas detectadas. El virus se adapta."],a9=[" ALERTA OMEGA: ENTIDAD CSMICA EN LA ATMSFERA."," CIELOS PRPURAS: La radiacin csmica aumenta un 500%."," PRIORIDAD ABSOLUTA: Todas las hostilidades deben cesar. Enfocad fuego en el Gigante."," FIN DEL MUNDO: El devorador ha comenzado el proceso de conversin."," SHIELD: Protocolo 'Juicio Final' activado. No hay evacuacin posible."," ENERGA: Lecturas de poder infinito detectadas en Kansas."," MISIONES BLOQUEADAS: Todo el personal redirigido a la defensa planetaria."],l9=({alignment:t,worldStage:e,urgentMessage:n})=>{const[r,i]=N.useState(null);N.useEffect(()=>{if(n){i(n);const d=setTimeout(()=>i(null),1e4);return()=>clearTimeout(d)}},[n]);let s=t==="ALIVE"?s9:o9,o=t==="ALIVE"?"text-cyan-400 bg-cyan-950/90 border-cyan-800":"text-lime-400 bg-lime-950/90 border-lime-800",a="LIVE FEED",c="text-red-500";return e==="GALACTUS"&&(s=a9,o="text-purple-300 bg-purple-950/95 border-purple-600 shadow-[0_0_30px_rgba(147,51,234,0.5)]",a="OMEGA THREAT",c="text-purple-500"),r&&(o="text-white bg-blue-600 border-blue-400 shadow-[0_0_20px_rgba(37,99,235,0.8)]",a="BREAKING NEWS",c="text-white"),u.jsxs("div",{className:`w-full flex-none relative h-8 ${o} border-t flex items-center overflow-hidden z-50 select-none shadow-[0_-5px_20px_rgba(0,0,0,0.5)] transition-all duration-500`,children:[u.jsxs("div",{className:"flex items-center gap-2 px-4 bg-slate-900 h-full z-10 border-r border-inherit shrink-0",children:[u.jsx("span",{className:`animate-pulse ${c}`,children:""}),u.jsx("span",{className:"text-[10px] font-bold tracking-widest",children:a})]}),u.jsx("div",{className:"whitespace-nowrap overflow-hidden flex-1 relative flex items-center",children:r?u.jsx("div",{className:"w-full text-center font-bold tracking-[0.2em] text-xs animate-pulse",children:r}):u.jsxs("div",{className:"inline-block animate-[ticker_120s_linear_infinite] pl-[100%]",children:[s.map((d,h)=>u.jsxs("span",{className:"mx-8 text-xs font-mono tracking-wide uppercase",children:[d," ",u.jsx("span",{className:"opacity-50 mx-2",children:"///"})]},h)),s.map((d,h)=>u.jsxs("span",{className:"mx-8 text-xs font-mono tracking-wide uppercase",children:[d," ",u.jsx("span",{className:"opacity-50 mx-2",children:"///"})]},`dup-${h}`))]})}),u.jsx("style",{children:`
                @keyframes ticker {
                    0% { transform: translateX(0); }
                    100% { transform: translateX(-100%); }
                }
            `})]})},c9=({onConfirm:t,onBack:e,language:n,playerAlignment:r,ownedExpansions:i,onToggleExpansion:s,onToggleAllExpansions:o})=>{const[a,c]=N.useState([]),[d,h]=N.useState(""),[p,f]=N.useState(null),[g,_]=N.useState([]),[x,C]=N.useState(!0),E=r==="ZOMBIE",w=E?"border-lime-500":"border-cyan-500",b=E?"text-lime-400":"text-cyan-400",P=E?"bg-lime-600":"bg-cyan-600";N.useEffect(()=>{(async()=>{try{const S=await Nl();_(S)}catch(S){console.error("Error cargando hroes de DB",S)}finally{C(!1)}})()},[]);const D=N.useMemo(()=>{if(x)return[];let v=[];const S=new Set;for(const k of wn){if(!i.has(k.id))continue;const R=(E?k.zombieHeroes:k.heroes).map(M=>{const L=g.find(U=>U.id===M.id);return S.add(M.id),L?{...M,name:L.defaultName,alias:L.alias,class:L.defaultClass,stats:L.defaultStats,imageUrl:L.imageUrl,bio:L.bio||M.bio,imageParams:L.imageParams,characterSheetUrl:L.characterSheetUrl}:M});v=[...v,...R]}const A=g.filter(k=>{const O=!S.has(k.id),R=k.defaultAlignment===r,M=!k.expansionId||k.expansionId==="custom_database";return O&&R&&M});if(A.length>0){const k=A.map(O=>({id:O.id,templateId:O.id,name:O.defaultName,alias:O.alias,class:O.defaultClass,bio:O.bio||"",status:"AVAILABLE",imageUrl:O.imageUrl,stats:O.defaultStats,assignedMissionId:null,objectives:O.objectives||[],completedObjectiveIndices:[],currentStory:O.currentStory||"",imageParams:O.imageParams,characterSheetUrl:O.characterSheetUrl}));v=[...v,...k]}return d&&(v=v.filter(k=>k.alias.toLowerCase().includes(d.toLowerCase())||k.name.toLowerCase().includes(d.toLowerCase()))),v},[E,d,g,x,r,i]),j=v=>{if(a.some(A=>A.id===v.id))c(A=>A.filter(k=>k.id!==v.id));else{if(a.length>=6)return;c(A=>[...A,v])}},I=()=>{if(a.length===0){alert(n==="es"?"DEBES SELECCIONAR AL MENOS UN HROE.":"YOU MUST SELECT AT LEAST ONE HERO.");return}t(a)};return u.jsxs("div",{className:"fixed inset-0 z-[80] bg-slate-950 flex flex-col font-mono h-screen w-screen overflow-hidden",children:[p&&u.jsx("div",{className:"fixed inset-0 z-[200] bg-black/95 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",onClick:()=>f(null),children:u.jsxs("div",{className:"relative flex flex-col items-center justify-center w-full h-full",children:[u.jsx("img",{src:p,alt:"Tactical Sheet",className:"h-[85vh] w-auto max-w-[95vw] object-contain border-4 border-yellow-500 shadow-[0_0_50px_rgba(234,179,8,0.5)] rounded-xl bg-black",onClick:v=>v.stopPropagation(),referrerPolicy:"no-referrer"}),u.jsx("button",{onClick:()=>f(null),className:"mt-4 px-8 py-2 bg-red-900/80 text-white font-bold tracking-widest border border-red-600 hover:bg-red-800 uppercase text-xs shadow-lg rounded",children:"CERRAR"})]})}),u.jsxs("div",{className:"flex-none h-16 border-b border-slate-800 bg-slate-900 flex items-center justify-between px-6 z-20 shadow-lg",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-xl font-bold",children:""}),u.jsx("h2",{className:`text-xl font-black tracking-[0.2em] uppercase ${b}`,children:n==="es"?"RECLUTAMIENTO TCTICO":"TACTICAL RECRUITMENT"})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative w-64",children:[u.jsx("input",{type:"text",value:d,onChange:v=>h(v.target.value),placeholder:n==="es"?"BUSCAR AGENTE...":"SEARCH AGENT...",className:"w-full bg-slate-950 border border-slate-700 p-2 pl-8 text-xs text-white focus:border-cyan-500 outline-none rounded-sm"}),u.jsx("span",{className:"absolute left-2 top-2 text-gray-500 text-xs",children:""})]}),u.jsx("button",{onClick:I,disabled:a.length===0,className:`px-6 py-2 font-bold text-xs tracking-widest uppercase transition-all ${a.length>0?`${P} text-white hover:brightness-110 shadow-lg`:"bg-slate-800 text-gray-500 cursor-not-allowed"}`,children:n==="es"?"DESPLEGAR EQUIPO":"DEPLOY SQUAD"})]})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[u.jsxs("div",{className:"w-1/5 bg-slate-900 border-r border-slate-800 flex flex-col min-w-[250px]",children:[u.jsxs("div",{className:"p-3 bg-slate-950 border-b border-slate-800 flex justify-between items-center",children:[u.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"ARSENAL (EXPANSIONES)"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>o(!0),className:"text-[9px] text-cyan-500 hover:text-white px-1",children:"ALL"}),u.jsx("span",{className:"text-gray-600",children:"|"}),u.jsx("button",{onClick:()=>o(!1),className:"text-[9px] text-gray-500 hover:text-white px-1",children:"NONE"})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 scrollbar-thin scrollbar-thumb-slate-700",children:[wn.map(v=>{const S=i.has(v.id);return u.jsxs("div",{onClick:()=>s(v.id),className:`flex items-center gap-3 p-3 cursor-pointer transition-all border-l-2 ${S?`bg-slate-800 ${E?"border-lime-500":"border-cyan-500"}`:"bg-transparent border-transparent hover:bg-slate-800/50"}`,children:[u.jsx("div",{className:`w-4 h-4 border flex items-center justify-center ${S?`${E?"bg-lime-600 border-lime-500":"bg-cyan-600 border-cyan-500"} text-black`:"border-slate-600"}`,children:S&&u.jsx("span",{className:"text-[10px] font-bold",children:""})}),u.jsx("span",{className:`text-[10px] font-bold uppercase ${S?"text-white":"text-gray-500"}`,children:v.name})]},v.id)}),u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-800/30 border-l-2 border-purple-500 cursor-default opacity-80",children:[u.jsx("div",{className:"w-4 h-4 bg-purple-600 flex items-center justify-center text-black text-[10px] font-bold",children:""}),u.jsx("span",{className:"text-[10px] font-bold uppercase text-purple-300",children:"CUSTOM DATABASE"})]})]})]}),u.jsxs("div",{className:"flex-1 bg-slate-950 relative overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"p-3 border-b border-slate-800 flex justify-between items-center bg-slate-900/50",children:[u.jsxs("h3",{className:`text-xs font-bold uppercase tracking-widest ${b}`,children:["AGENTES DISPONIBLES (",D.length,")"]}),u.jsx("div",{className:"text-[10px] text-gray-500",children:"SELECCIONA PARA AADIR AL ESCUADRN"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-thin scrollbar-thumb-slate-700",children:x?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 animate-pulse",children:[u.jsx("div",{className:"text-2xl mb-2",children:""}),u.jsx("div",{className:"text-xs tracking-widest",children:"ACCEDIENDO A LA BASE DE DATOS..."})]}):u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:D.map(v=>{const S=a.some(O=>O.id===v.id),A=!S&&a.length>=6,k=v.imageParams?{transform:`scale(${v.imageParams.scale}) translate(${v.imageParams.x}%, ${v.imageParams.y}%)`}:{};return u.jsxs("div",{onClick:()=>!A&&j(v),className:`
                                                relative group cursor-pointer border transition-all duration-200 overflow-hidden aspect-[3/4]
                                                ${S?`${w} ring-2 ring-offset-2 ring-offset-slate-950 ${E?"ring-lime-500/50":"ring-cyan-500/50"}`:A?"border-slate-800 opacity-30 grayscale cursor-not-allowed":"border-slate-700 hover:border-white hover:scale-[1.02] hover:shadow-xl hover:z-10"}
                                            `,children:[u.jsx("div",{className:"absolute inset-0 overflow-hidden",children:u.jsx("img",{src:v.imageUrl,alt:v.alias,className:"w-full h-full object-cover",style:k,referrerPolicy:"no-referrer"})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80 pointer-events-none"}),v.characterSheetUrl&&u.jsx("button",{onClick:O=>{O.stopPropagation(),f(v.characterSheetUrl)},className:"absolute top-2 left-2 w-6 h-6 bg-yellow-600 hover:bg-yellow-400 text-black flex items-center justify-center rounded-sm shadow-lg z-20 transition-transform hover:scale-110 border border-yellow-300",title:"Ver Ficha de Juego",children:""}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 pointer-events-none",children:[u.jsx("div",{className:`text-[10px] font-black uppercase truncate ${S?b:"text-white"}`,children:v.alias}),u.jsx("div",{className:"text-[8px] text-gray-400 font-mono",children:v.class})]}),S&&u.jsx("div",{className:`absolute top-2 right-2 w-6 h-6 ${P} flex items-center justify-center text-black font-bold shadow-lg`,children:""})]},v.id)})})})]}),u.jsxs("div",{className:"w-1/5 bg-slate-900 border-l border-slate-800 flex flex-col min-w-[200px]",children:[u.jsxs("div",{className:`p-4 border-b border-slate-800 ${a.length===6?"bg-red-900/20":"bg-slate-950"}`,children:[u.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:"ESCUADRN ACTIVO"}),u.jsxs("div",{className:`text-2xl font-black ${a.length===6?"text-red-500 animate-pulse":b}`,children:[a.length," / 6"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 scrollbar-thin scrollbar-thumb-slate-700",children:[...Array(6)].map((v,S)=>{const A=a[S],k=A!=null&&A.imageParams?{transform:`scale(${A.imageParams.scale}) translate(${A.imageParams.x}%, ${A.imageParams.y}%)`}:{};return u.jsx("div",{className:`
                                        relative h-20 border flex items-center justify-center transition-all
                                        ${A?`${w} bg-slate-800 cursor-pointer group`:"border-slate-800 border-dashed bg-slate-950/50"}
                                    `,onClick:()=>A&&j(A),children:A?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"absolute inset-0 flex",children:[u.jsxs("div",{className:"w-20 h-full shrink-0 relative overflow-hidden",children:[u.jsx("img",{src:A.imageUrl,className:"w-full h-full object-cover",alt:"",style:k,referrerPolicy:"no-referrer"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent to-slate-800 pointer-events-none"})]}),u.jsxs("div",{className:"flex-1 p-2 flex flex-col justify-center min-w-0",children:[u.jsx("div",{className:`text-[10px] font-bold truncate ${b}`,children:A.alias}),u.jsx("div",{className:"text-[8px] text-gray-500",children:A.class})]})]}),u.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:"w-6 h-6 bg-red-600 text-white flex items-center justify-center rounded-full text-[10px] font-bold shadow-md",children:""})})]}):u.jsx("span",{className:"text-slate-700 font-black text-2xl select-none",children:S+1})},S)})}),u.jsx("div",{className:"p-4 border-t border-slate-800 bg-slate-950",children:u.jsx("button",{onClick:I,disabled:a.length===0,className:`w-full py-3 font-bold text-xs tracking-widest uppercase transition-all ${a.length>0?`${P} text-white hover:brightness-110`:"bg-slate-800 text-gray-600 cursor-not-allowed"}`,children:"CONFIRMAR"})})]})]})]})},u9=({isOpen:t,onClose:e,ownedExpansions:n,onToggle:r,onToggleAll:i,language:s})=>t?u.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-slate-950/90 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"w-full max-w-lg bg-slate-900 border-2 border-cyan-500 shadow-[0_0_50px_rgba(6,182,212,0.3)] flex flex-col max-h-[80vh]",children:[u.jsxs("div",{className:"bg-cyan-900/40 p-4 border-b border-cyan-600 flex justify-between items-center shrink-0",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-cyan-300 font-bold tracking-widest uppercase text-lg",children:s==="es"?"CONFIGURACIN TCTICA":"TACTICAL CONFIG"}),u.jsx("p",{className:"text-[10px] text-cyan-400",children:s==="es"?"SELECCIONA LAS EXPANSIONES DISPONIBLES":"SELECT AVAILABLE EXPANSIONS"})]}),u.jsx("button",{onClick:e,className:"text-cyan-500 hover:text-white font-bold text-xl",children:""})]}),u.jsxs("div",{className:"p-3 bg-slate-950 border-b border-cyan-900 flex gap-3 justify-end",children:[u.jsx("button",{onClick:()=>i(!0),className:"text-[10px] bg-cyan-900/30 hover:bg-cyan-800 text-cyan-300 px-3 py-1 border border-cyan-700 rounded",children:s==="es"?"MARCAR TODO":"SELECT ALL"}),u.jsx("button",{onClick:()=>i(!1),className:"text-[10px] bg-slate-800 hover:bg-slate-700 text-gray-400 px-3 py-1 border border-slate-600 rounded",children:s==="es"?"DESMARCAR TODO":"DESELECT ALL"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 scrollbar-thin scrollbar-thumb-cyan-900",children:wn.map(o=>{const a=n.has(o.id);return u.jsxs("div",{onClick:()=>r(o.id),className:`
                                    flex items-center gap-3 p-3 border cursor-pointer transition-all
                                    ${a?"bg-cyan-900/20 border-cyan-500 shadow-[inset_0_0_10px_rgba(6,182,212,0.1)]":"bg-slate-950 border-slate-700 opacity-60 hover:opacity-100"}
                                `,children:[u.jsx("div",{className:`
                                    w-5 h-5 border flex items-center justify-center transition-colors
                                    ${a?"bg-cyan-500 border-cyan-400 text-black":"bg-slate-900 border-slate-600"}
                                `,children:a&&""}),u.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${a?"text-white":"text-gray-500"}`,children:o.name})]},o.id)})}),u.jsx("div",{className:"p-4 border-t border-cyan-800 bg-slate-900 flex justify-end",children:u.jsx("button",{onClick:e,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold uppercase tracking-widest shadow-[0_0_15px_rgba(6,182,212,0.4)]",children:s==="es"?"CONFIRMAR":"CONFIRM"})})]})}):null,Pc={magneto:new Set(["Washington","Oregon","California","Nevada","Idaho","Montana","Wyoming","Utah","Arizona","Colorado","Alaska","Hawaii"]),kingpin:new Set(["Maine","New Hampshire","Vermont","New York","Massachusetts","Rhode Island","Connecticut","New Jersey","Pennsylvania","Delaware","Maryland","West Virginia","Virginia","District of Columbia"]),hulk:new Set(["North Dakota","South Dakota","Nebraska","Kansas","Oklahoma","Texas","New Mexico","Minnesota","Iowa","Missouri","Wisconsin","Illinois","Michigan","Indiana","Ohio"]),doom:new Set(["Arkansas","Louisiana","Mississippi","Alabama","Tennessee","Kentucky","Georgia","Florida","South Carolina","North Carolina"])},d9=t=>Pc.magneto.has(t)?"MAGNETO":Pc.kingpin.has(t)?"KINGPIN":Pc.hulk.has(t)?"HULK":Pc.doom.has(t)?"DOOM":"NEUTRAL",h9=[{id:"m_intro_0",title:"MH0: CADENAS ROTAS",description:[],objectives:[],location:{state:"Ohio",coordinates:[0,0]},threatLevel:"N/A"}],f9=({isOpen:t,onClose:e,language:n})=>{const[r,i]=N.useState("MISSIONS"),[s,o]=N.useState([]),[a,c]=N.useState([]),[d,h]=N.useState(!1),[p,f]=N.useState(""),[g,_]=N.useState("ALL"),[x,C]=N.useState("ALL"),[E,w]=N.useState("ALL"),[b,P]=N.useState("ALL"),[D,j]=N.useState("ALL"),[I,v]=N.useState(new Set(["KINGPIN","MAGNETO","HULK","DOOM","NEUTRAL","GALACTUS"])),[S,A]=N.useState(null),[k,O]=N.useState(null),R=async()=>{h(!0);try{const[$,Y]=await Promise.all([Nl(),Zu()]);o($),c(Y)}catch($){console.error("Error cargando datos:",$),alert("Error al conectar con la base de datos.")}finally{h(!1)}};N.useEffect(()=>{t&&R()},[t]);const M=()=>{const $=r==="HEROES"?s:a,Y=r==="HEROES"?"shield_heroes_backup.json":"shield_missions_backup.json",X=JSON.stringify($,null,2),ne=new Blob([X],{type:"application/json"}),se=URL.createObjectURL(ne),ye=document.createElement("a");ye.href=se,ye.download=Y,document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),URL.revokeObjectURL(se)},L=N.useMemo(()=>{const $={KINGPIN:[],MAGNETO:[],HULK:[],DOOM:[],NEUTRAL:[],GALACTUS:[]};let Y=a.filter(X=>X.title.toLowerCase().includes(p.toLowerCase()));return b!=="ALL"&&(Y=Y.filter(X=>X.alignment===b||X.alignment==="BOTH")),D!=="ALL"&&(Y=Y.filter(X=>X.threatLevel.includes(D))),Y.forEach(X=>{if(X.type==="GALACTUS")$.GALACTUS.push(X);else{const ne=d9(X.location.state);$[ne]?$[ne].push(X):$.NEUTRAL.push(X)}}),$},[a,p,b,D]),U=$=>{v(Y=>{const X=new Set(Y);return X.has($)?X.delete($):X.add($),X})},K=()=>{const $=gi==null?void 0:gi.currentUser;return!$||!["TU_UID_DE_FIREBASE_AQUI","OTRO_UID_SI_ES_NECESARIO"].includes($.uid)?(alert(" ACCESO DENEGADO: No tienes permisos de administrador (UID no autorizado)."),!1):!0},V=async $=>{K()&&window.confirm("ESTS SEGURO? Esta accin es irreversible.")&&(h(!0),await Zg($),await R())},W=async $=>{K()&&window.confirm("ESTS SEGURO? Esta accin es irreversible.")&&(h(!0),await mD($),await R())},Q=$=>{const Y=a.find(X=>X.id===$);return Y?Y.title:$},te=$=>$.includes("Fcil")||$.includes("Latente")?"border-emerald-500 text-emerald-400":$.includes("Intermedia")||$.includes("Insaciable")?"border-yellow-500 text-yellow-400":$.includes("Difcil")||$.includes("Desatada")?"border-orange-500 text-orange-400":$.includes("Muy difcil")||$.includes("Gamma")||$.includes("OMEGA")?"border-red-600 text-red-500":"border-gray-500 text-gray-400",ae=s.filter($=>{const Y=($.alias+$.defaultName).toLowerCase().includes(p.toLowerCase()),X=g==="ALL"||$.defaultAlignment===g,ne=x==="ALL"||$.defaultClass===x;let se=!0;return E==="LINKED"?se=!!$.relatedHeroId:E==="UNLINKED"&&(se=!$.relatedHeroId),Y&&X&&ne&&se});return t?u.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 flex flex-col font-mono",children:[S&&u.jsx(eI,{isOpen:!0,onClose:()=>A(null),language:n,initialData:S,onSave:R}),k&&u.jsx(JA,{isOpen:!0,onClose:()=>O(null),language:n,initialData:k,existingMissions:[...h9,...a],onSave:()=>{O(null),R()}}),u.jsxs("div",{className:"bg-slate-900 border-b border-cyan-600 p-4 flex justify-between items-center shadow-lg z-10",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("h2",{className:"text-xl font-black text-cyan-400 tracking-widest uppercase",children:"DATABASE MANAGER"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>i("HEROES"),className:`px-4 py-1 text-xs font-bold border ${r==="HEROES"?"bg-cyan-600 text-white border-cyan-400":"text-cyan-600 border-cyan-900"}`,children:["HROES (",s.length,")"]}),u.jsxs("button",{onClick:()=>i("MISSIONS"),className:`px-4 py-1 text-xs font-bold border ${r==="MISSIONS"?"bg-cyan-600 text-white border-cyan-400":"text-cyan-600 border-cyan-900"}`,children:["MISIONES (",a.length,")"]})]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("button",{onClick:M,className:"bg-emerald-900/50 border border-emerald-500 text-emerald-300 px-4 py-2 text-xs font-bold hover:bg-emerald-800 flex items-center gap-2",children:[u.jsx("span",{children:""})," EXPORTAR JSON"]}),u.jsx("button",{onClick:e,className:"bg-red-900/50 border border-red-500 text-red-300 px-4 py-2 text-xs font-bold hover:bg-red-800",children:"CERRAR"})]})]}),u.jsxs("div",{className:"bg-slate-900/50 p-4 border-b border-cyan-900 flex flex-wrap gap-4 items-center",children:[u.jsx("input",{type:"text",placeholder:"BUSCAR...",value:p,onChange:$=>f($.target.value),className:"bg-slate-950 border border-cyan-700 p-2 text-cyan-200 text-xs w-64 focus:outline-none focus:border-cyan-400"}),r==="HEROES"&&u.jsxs(u.Fragment,{children:[u.jsxs("select",{value:g,onChange:$=>_($.target.value),className:"bg-slate-950 border border-cyan-800 text-xs text-cyan-300 p-2",children:[u.jsx("option",{value:"ALL",children:"TODOS LOS BANDOS"}),u.jsx("option",{value:"ALIVE",children:" VIVOS (ALIVE)"}),u.jsx("option",{value:"ZOMBIE",children:" ZOMBIES"})]}),u.jsxs("select",{value:x,onChange:$=>C($.target.value),className:"bg-slate-950 border border-cyan-800 text-xs text-cyan-300 p-2",children:[u.jsx("option",{value:"ALL",children:"TODAS LAS CLASES"}),u.jsx("option",{value:"BRAWLER",children:" BRAWLER"}),u.jsx("option",{value:"SCOUT",children:" SCOUT"}),u.jsx("option",{value:"TACTICIAN",children:" TACTICIAN"}),u.jsx("option",{value:"BLASTER",children:" BLASTER"})]}),u.jsxs("select",{value:E,onChange:$=>w($.target.value),className:"bg-slate-950 border border-purple-800 text-xs text-purple-300 p-2",children:[u.jsx("option",{value:"ALL",children:"VINCULACIN (TODOS)"}),u.jsx("option",{value:"LINKED",children:" VINCULADOS / SIN VARIANTE"}),u.jsx("option",{value:"UNLINKED",children:" SIN VINCULAR"})]})]}),r==="MISSIONS"&&u.jsxs(u.Fragment,{children:[u.jsxs("select",{value:b,onChange:$=>P($.target.value),className:"bg-slate-950 border border-cyan-800 text-xs text-cyan-300 p-2",children:[u.jsx("option",{value:"ALL",children:"TODOS LOS BANDOS"}),u.jsx("option",{value:"ALIVE",children:" HROES"}),u.jsx("option",{value:"ZOMBIE",children:" ZOMBIES"}),u.jsx("option",{value:"BOTH",children:" AMBOS"})]}),u.jsxs("select",{value:D,onChange:$=>j($.target.value),className:"bg-slate-950 border border-cyan-800 text-xs text-cyan-300 p-2",children:[u.jsx("option",{value:"ALL",children:"CUALQUIER DIFICULTAD"}),u.jsx("option",{value:"Fcil",children:"FCIL (VERDE)"}),u.jsx("option",{value:"Intermedia",children:"INTERMEDIA (AMARILLO)"}),u.jsx("option",{value:"Difcil",children:"DIFCIL (NARANJA)"}),u.jsx("option",{value:"Muy difcil",children:"EXTREMA (ROJO)"})]})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-slate-950 relative",children:[d&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-950/80 z-20 text-cyan-500 animate-pulse",children:"CARGANDO DATOS..."}),r==="HEROES"?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:ae.map($=>u.jsxs("div",{className:`p-3 border flex gap-3 group relative transition-all ${$.relatedHeroId?"border-purple-500/50 bg-purple-900/10":"border-cyan-900 bg-cyan-950/10"}`,children:[u.jsxs("div",{className:"w-12 h-12 bg-black border border-gray-700 shrink-0 relative",children:[u.jsx("img",{src:$.imageUrl,alt:"",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"}),$.relatedHeroId&&u.jsx("div",{className:`absolute -top-1 -right-1 w-4 h-4 rounded-full flex items-center justify-center text-[8px] text-white font-bold border border-white ${$.relatedHeroId==="NO_VARIANT"?"bg-red-600":"bg-purple-600"}`,title:$.relatedHeroId==="NO_VARIANT"?"Sin Variante":"Vinculado",children:$.relatedHeroId==="NO_VARIANT"?"":""})]}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"font-bold text-xs text-cyan-400 truncate",title:$.alias,children:$.alias}),u.jsx("div",{className:"text-[9px] text-gray-500 truncate",children:$.defaultName}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("span",{className:`text-[8px] font-bold px-1 rounded border ${$.defaultAlignment==="ZOMBIE"?"border-lime-600 text-lime-500":"border-blue-600 text-blue-400"}`,children:$.defaultAlignment}),u.jsx("span",{className:"text-[8px] font-bold px-1 rounded border border-gray-600 text-gray-400",children:$.defaultClass})]})]}),u.jsxs("div",{className:"absolute right-2 bottom-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900/90 p-1 rounded z-10",children:[u.jsx("button",{onClick:()=>A($),className:"bg-blue-900 text-blue-300 px-2 py-1 text-[9px] border border-blue-700 hover:bg-blue-800",children:"EDIT"}),u.jsx("button",{onClick:()=>W($.id),className:"bg-red-900 text-red-300 px-2 py-1 text-[9px] border border-red-700 hover:bg-red-800",children:"DEL"})]})]},$.id))}):u.jsx("div",{className:"space-y-6",children:Object.entries(L).map(([$,Y])=>{if(Y.length===0)return null;const X=I.has($);let ne="bg-slate-800 border-slate-600 text-slate-300";return $==="KINGPIN"&&(ne="bg-purple-900/40 border-purple-600 text-purple-300"),$==="MAGNETO"&&(ne="bg-red-900/40 border-red-600 text-red-300"),$==="HULK"&&(ne="bg-lime-900/40 border-lime-600 text-lime-300"),$==="DOOM"&&(ne="bg-cyan-900/40 border-cyan-600 text-cyan-300"),$==="GALACTUS"&&(ne="bg-fuchsia-900/40 border-fuchsia-600 text-fuchsia-300"),u.jsxs("div",{className:"border border-gray-800 rounded overflow-hidden",children:[u.jsxs("button",{onClick:()=>U($),className:`w-full p-3 flex justify-between items-center border-b ${ne} transition-colors hover:brightness-110`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"font-black tracking-widest text-sm uppercase",children:$}),u.jsx("span",{className:"text-xs bg-black/30 px-2 py-0.5 rounded",children:Y.length})]}),u.jsx("span",{className:"text-xs",children:X?"":""})]}),X&&u.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 bg-slate-900/50",children:Y.map(se=>{const ye=te(se.threatLevel),De=se.isIntroMission||se.type==="INTRODUCTORY",rt=se.type&&se.type.startsWith("BOSS"),be=se.prereqs&&se.prereqs.length>0||se.prereq;let Se="bg-slate-800/40 hover:bg-slate-800",q=ye.replace("text-","border-");return rt&&(Se="bg-gradient-to-br from-purple-900/30 to-slate-900 hover:from-purple-900/50",q="border-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.2)]"),u.jsxs("div",{className:`p-3 border-l-4 transition-all relative group flex flex-col gap-2 ${Se} ${q}`,children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[De&&u.jsx("div",{className:"text-[9px] font-black text-emerald-400 uppercase tracking-widest mb-1",children:" INTRODUCCIN"}),rt&&u.jsx("div",{className:"text-[9px] font-black text-purple-400 uppercase tracking-widest mb-1",children:" JEFE DE ZONA"}),u.jsx("h4",{className:"font-bold text-xs text-white truncate",title:se.title,children:se.title}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("span",{className:`text-[9px] font-bold ${ye.split(" ")[1]}`,children:se.threatLevel}),u.jsxs("span",{className:"text-[8px] text-gray-500",children:["| ",se.location.state]})]})]}),u.jsx("div",{className:`text-[9px] px-1.5 py-0.5 rounded border ${se.alignment==="ZOMBIE"?"border-lime-600 text-lime-400":se.alignment==="ALIVE"?"border-cyan-600 text-cyan-400":"border-gray-600 text-gray-400"}`,children:se.alignment==="BOTH"?"AMBOS":se.alignment})]}),be&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700/50",children:[u.jsx("div",{className:"text-[8px] text-gray-500 uppercase font-bold mb-1",children:"REQUIERE COMPLETAR:"}),u.jsx("div",{className:"flex flex-col gap-1",children:(se.prereqs||[se.prereq]).map(z=>u.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-yellow-500/80 truncate",children:[u.jsx("span",{children:""}),u.jsx("span",{title:z,children:Q(z)})]},z))})]}),u.jsxs("div",{className:"mt-auto pt-2 text-[8px] text-gray-600 font-mono truncate",children:["ID: ",se.id]}),u.jsxs("div",{className:"absolute right-2 bottom-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900/90 p-1 rounded",children:[u.jsx("button",{onClick:()=>O(se),className:"bg-blue-900 text-blue-300 px-2 py-1 text-[9px] border border-blue-700 hover:bg-blue-800",children:"EDIT"}),u.jsx("button",{onClick:()=>V(se.id),className:"bg-red-900 text-red-300 px-2 py-1 text-[9px] border border-red-700 hover:bg-red-800",children:"DEL"})]})]},se.id)})})]},$)})})]})]}):null},p9="https://i.pinimg.com/736x/63/1e/3a/631e3a68228c97963e78381ad11bf3bb.jpg",m9="https://i.pinimg.com/736x/7f/31/38/7f31382d4a5c35daa4ba1768a366a917.jpg",ox=({children:t})=>{const{state:e,actions:n}=sA(),r=fl(),{lang:i,playerAlignment:s,completedMissionIds:o,isSaving:a,tickerMessage:c,worldStage:d}=e,h=Hn[i],p=e.customMissions.length+7,f=Math.min(100,Math.round(o.size/Math.max(1,p)*100)),g=2*Math.PI*18,_=g-f/100*g;return u.jsxs("div",{className:`flex flex-col h-screen w-full bg-slate-950 text-cyan-400 font-sans overflow-hidden relative ${s==="ZOMBIE"?"animate-pulse-slow grayscale-[0.3] sepia-[0.2] contrast-125":""}`,children:[u.jsx(eI,{isOpen:e.showCharacterEditor,onClose:()=>n.setShowCharacterEditor(!1),language:i}),u.jsx(JA,{isOpen:e.showMissionEditor,onClose:()=>{n.setShowMissionEditor(!1),n.setMissionToEdit(null)},onSave:async()=>{n.setCustomMissions(await XN(()=>Promise.resolve().then(()=>yD),[]).then(x=>x.getCustomMissions()))},language:i,initialData:e.missionToEdit,existingMissions:e.allMissions}),e.activeGlobalEvent&&u.jsx(r9,{event:e.activeGlobalEvent,isOpen:!!e.activeGlobalEvent,onAcknowledge:n.handleEventAcknowledge,language:i,playerAlignment:s}),e.selectedMission&&u.jsx(XA,{mission:e.selectedMission,isOpen:!!e.selectedMission,onClose:()=>n.setSelectedMission(null),onComplete:n.handleMissionComplete,onReactivate:n.handleMissionReactivate,language:i,isCompleted:o.has(e.selectedMission.id),isEditorMode:e.isEditorMode,onEdit:x=>{n.setMissionToEdit(x),n.setShowMissionEditor(!0),n.setSelectedMission(null)},onDelete:n.handleDeleteMission}),u.jsx(f9,{isOpen:e.showDbManager,onClose:()=>n.setShowDbManager(!1),language:i}),u.jsx(u9,{isOpen:e.showExpansionConfig,onClose:()=>n.setShowExpansionConfig(!1),ownedExpansions:e.ownedExpansions,onToggle:n.toggleExpansion,onToggleAll:n.toggleAllExpansions,language:i}),u.jsxs("header",{className:"flex-none h-16 border-b border-cyan-900 bg-slate-900/90 flex items-center justify-between px-6 z-30 relative",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`w-10 h-10 border-2 ${s==="ZOMBIE"?"border-lime-600":"border-cyan-500"} rounded-full flex items-center justify-center overflow-hidden bg-slate-950 shadow-[0_0_10px_rgba(6,182,212,0.3)]`,children:u.jsx("img",{src:s==="ZOMBIE"?m9:p9,alt:"Logo",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold tracking-[0.2em] text-cyan-100 leading-none",children:h.header.project}),u.jsx("div",{className:"text-[10px] text-red-500 font-bold tracking-widest animate-pulse",children:h.header.failure})]})]}),u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsxs("button",{onClick:n.toggleDimension,className:`hidden md:flex items-center gap-2 px-3 py-1 border rounded transition-all duration-500 ${s==="ZOMBIE"?"border-lime-600 bg-lime-900/20 text-lime-400 hover:bg-lime-900/40":"border-cyan-500 bg-cyan-900/20 text-cyan-300 hover:bg-cyan-900/40"}`,children:[u.jsx("span",{className:"text-lg",children:s==="ZOMBIE"?"":""}),u.jsxs("div",{className:"flex flex-col items-start leading-none",children:[u.jsx("span",{className:"text-[8px] font-bold tracking-widest opacity-70",children:"DIMENSION"}),u.jsx("span",{className:"text-[10px] font-bold",children:s==="ZOMBIE"?"EARTH-Z":"EARTH-616"})]})]}),u.jsx("button",{onClick:()=>n.setShowExpansionConfig(!0),className:"hidden md:flex items-center gap-2 px-3 py-1 border border-cyan-700 bg-slate-900/50 text-cyan-400 hover:bg-cyan-900/80 rounded transition-colors",title:"Configurar Expansiones",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{className:"text-right hidden lg:block",children:[u.jsx("div",{className:"text-[10px] text-cyan-600 font-bold",children:h.header.biohazard}),u.jsx("div",{className:"text-xs text-cyan-300 tracking-widest",children:h.header.clearance})]}),u.jsxs("div",{className:"flex items-center gap-3 border-l border-cyan-900 pl-6",children:[u.jsx("div",{className:"flex flex-col items-end mr-2",children:a?u.jsx("div",{className:"text-[9px] font-bold tracking-widest text-yellow-500 animate-pulse",children:h.header.saving}):u.jsx("div",{className:"text-[9px] font-bold tracking-widest text-emerald-500/80",children:h.header.saved})}),u.jsx("button",{onClick:()=>n.setLang(i==="es"?"en":"es"),className:"text-xs border border-cyan-700 px-2 py-1 hover:bg-cyan-900/50 transition-colors",children:i.toUpperCase()}),u.jsx("button",{onClick:n.handleLogout,className:"text-xs bg-red-900/20 text-red-400 border border-red-900 px-3 py-1 hover:bg-red-900/40 transition-colors",children:h.header.logout})]})]})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[u.jsxs("aside",{className:`flex-none glass-panel border-r border-cyan-900/50 flex flex-col z-20 shadow-2xl overflow-hidden relative transition-all duration-300 ${e.isSidebarCollapsed?"w-12":"w-80"}`,children:[u.jsx("button",{onClick:()=>n.setIsSidebarCollapsed(!e.isSidebarCollapsed),className:"absolute top-1/2 -right-3 w-6 h-12 bg-cyan-900 border border-cyan-600 rounded-l flex items-center justify-center z-50 hover:bg-cyan-800 transition-colors",style:{transform:"translateY(-50%)"},children:u.jsx("span",{className:"text-xs text-cyan-200",children:e.isSidebarCollapsed?"":""})}),e.isSidebarCollapsed?u.jsxs("div",{className:"flex flex-col items-center py-4 gap-4 h-full",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-red-600 flex items-center justify-center bg-red-900/20 animate-pulse",title:"Nivel de Amenaza: CRTICO",children:u.jsx("span",{className:"text-xs",children:""})}),u.jsx("button",{onClick:()=>r("/bunker"),className:"w-8 h-8 rounded border border-cyan-500 flex items-center justify-center hover:bg-cyan-900/50 text-cyan-300",title:"Bnker",children:u.jsx("span",{className:"text-xs",children:""})}),u.jsx("div",{className:"flex-1 w-full flex flex-col items-center justify-end pb-4",children:u.jsx("div",{className:"relative w-8 h-8 flex items-center justify-center",title:`Progreso: ${f}%`,children:u.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[u.jsx("circle",{cx:"16",cy:"16",r:"14",stroke:"#1e293b",strokeWidth:"3",fill:"transparent"}),u.jsx("circle",{cx:"16",cy:"16",r:"14",stroke:"#10b981",strokeWidth:"3",fill:"transparent",strokeDasharray:2*Math.PI*14,strokeDashoffset:2*Math.PI*14-f/100*2*Math.PI*14})]})})})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-4 border-b border-cyan-900/50 bg-red-950/20 flex justify-between items-center font-sans",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] font-bold text-red-500 tracking-widest",children:"AMENAZA"}),u.jsx("span",{className:"text-sm font-black text-red-600 tracking-tighter",children:"CRTICO"})]}),u.jsxs("div",{className:"relative w-14 h-14 flex items-center justify-center",children:[u.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 44 44",children:[u.jsx("circle",{cx:"22",cy:"22",r:"18",stroke:"#1e293b",strokeWidth:"4",fill:"transparent"}),u.jsx("circle",{cx:"22",cy:"22",r:"18",stroke:"#10b981",strokeWidth:"4",fill:"transparent",strokeDasharray:g,strokeDashoffset:_,className:"transition-all duration-1000 ease-out"})]}),u.jsxs("span",{className:"absolute text-[10px] font-bold text-emerald-400",children:[f,"%"]})]})]}),u.jsx("div",{className:"p-3 border-b border-cyan-900",children:u.jsxs("button",{id:"tutorial-bunker-btn",onClick:()=>r("/bunker"),className:`w-full py-3 border-2 flex items-center justify-center gap-2 transition-all duration-300 group relative overflow-hidden ${s==="ZOMBIE"?"border-lime-600 bg-lime-900/10 hover:bg-lime-900/30 text-lime-400":"border-cyan-500 bg-cyan-900/10 hover:bg-cyan-900/30 text-cyan-300"}`,children:[u.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ${s==="ZOMBIE"?"bg-[linear-gradient(45deg,transparent_25%,rgba(132,204,22,0.1)_50%,transparent_75%)]":"bg-[linear-gradient(45deg,transparent_25%,rgba(6,182,212,0.1)_50%,transparent_75%)]"} bg-[length:250%_250%] animate-[shimmer_2s_linear_infinite]`}),u.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform",children:s==="ZOMBIE"?"":""}),u.jsx("span",{className:"font-bold tracking-widest text-[10px]",children:s==="ZOMBIE"?h.sidebar.hiveBtn:h.sidebar.bunkerBtn})]})}),u.jsxs("div",{id:"tutorial-sidebar-missions",className:"flex-1 overflow-y-auto p-3 scrollbar-thin scrollbar-thumb-cyan-900",children:[u.jsx("h4",{className:"text-[10px] font-bold text-cyan-600 uppercase mb-2 tracking-widest border-b border-cyan-900 pb-1",children:h.sidebar.activeMissions}),u.jsxs("div",{className:"space-y-1",children:[e.groupedMissions.galactus.length>0&&u.jsxs("div",{className:"mb-2 border border-purple-600 bg-purple-900/20 animate-pulse",children:[u.jsx("div",{className:"p-1 bg-purple-900/80 text-white text-[9px] font-black tracking-widest uppercase text-center",children:" OMEGA "}),u.jsx("div",{className:"p-1",children:e.groupedMissions.galactus.map(x=>u.jsx("div",{onClick:()=>n.setSelectedMission(x),className:"p-2 bg-purple-600 hover:bg-purple-500 text-white font-bold text-[10px] cursor-pointer text-center shadow-sm border border-purple-400 mb-1",children:x.title},x.id))})]}),Object.entries(e.groupedMissions).map(([x,C])=>{if(x==="galactus"||C.length===0)return null;const E=e.expandedZones.has(x),w=(()=>{var P,D;if(x.startsWith("shield_")){const j=x.replace("shield_","");return`S.H.I.E.L.D. (${((P=h.factions[j])==null?void 0:P.name)||j.toUpperCase()})`}return((D=h.factions[x])==null?void 0:D.name)||x.toUpperCase()})(),b=d==="GALACTUS";return u.jsxs("div",{className:`mb-1 border border-cyan-900/30 bg-slate-900/30 ${b?"opacity-40 pointer-events-none grayscale":""}`,children:[u.jsxs("button",{type:"button",onClick:()=>n.toggleZone(x),className:"w-full flex justify-between items-center p-2 bg-slate-800/80 hover:bg-cyan-900/30 transition-colors border-b border-cyan-900/30",children:[u.jsx("span",{className:"text-[10px] font-bold text-cyan-400 uppercase tracking-widest truncate max-w-[140px]",children:w}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"text-[9px] bg-cyan-900/50 text-cyan-200 px-1 py-0.5 rounded font-mono border border-cyan-700",children:C.length}),u.jsx("span",{className:`text-[8px] text-cyan-500 transform transition-transform duration-200 ${E?"rotate-180":""}`,children:""})]})]}),E&&u.jsx("div",{className:"p-1 space-y-1 animate-fade-in bg-slate-950/20",children:C.map(P=>{const D=P.type==="SHIELD_BASE",j=P.type==="INTRODUCTORY",I=P.type&&P.type.startsWith("BOSS");let v="border-yellow-500/30 bg-yellow-900/5 hover:bg-yellow-900/20",S="bg-yellow-500",A="text-yellow-200";return I?(v="border-purple-500/30 bg-purple-900/20 hover:bg-purple-900/40 animate-pulse",S="bg-purple-500",A="text-purple-200"):D?(v="border-cyan-500/30 bg-cyan-900/5 hover:bg-cyan-900/20",S="bg-cyan-500",A="text-cyan-200"):j&&(v="border-emerald-500/30 bg-emerald-900/5 hover:bg-emerald-900/20",S="bg-emerald-500",A="text-emerald-200"),u.jsxs("div",{onClick:()=>n.handleMissionSelect(P),className:`p-2 border cursor-pointer transition-all group relative overflow-hidden ${v}`,children:[u.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${S} group-hover:w-1.5 transition-all`}),u.jsx("div",{className:`text-xs font-bold ${A} group-hover:text-white uppercase tracking-wider pl-2 truncate`,children:P.title||"UNKNOWN MISSION"})]},P.id)})})]},x)})]})]})]})]}),u.jsx("main",{className:"flex-1 relative bg-slate-950 overflow-hidden",children:t})]}),u.jsx(l9,{alignment:s||"ALIVE",worldStage:d,urgentMessage:c})]})},g9=()=>{const{state:t,actions:e}=sA(),n=fl(),{loading:r,loadingAuth:i,lang:s,playerAlignment:o,heroes:a,completedMissionIds:c,omegaCylinders:d,worldStage:h,isEditorMode:p,surferTurnCount:f}=t;return r||i?u.jsx("div",{className:"bg-slate-950 text-cyan-500 h-screen flex items-center justify-center font-mono",children:"LOADING SHIELD OS..."}):u.jsxs(K1,{children:[u.jsx(Kn,{path:"/",element:u.jsx(ID,{onLogin:e.handleGuestLogin,onGoogleLogin:()=>{},onEditorLogin:e.handleEditorLogin,language:s,setLanguage:e.setLang})}),u.jsx(Kn,{path:"/story",element:u.jsx(TD,{language:s,onComplete:g=>{e.setPlayerAlignment(g),n("/setup")},onSkip:()=>{e.setPlayerAlignment("ALIVE");const g=wn.find(_=>_.id==="core_box");g&&e.setHeroes(g.heroes),n("/map")},startAtChoice:t.startStoryAtChoice})}),u.jsx(Kn,{path:"/setup",element:o?u.jsx(c9,{language:s,playerAlignment:o,onConfirm:e.handleExpansionConfirm,onBack:()=>{e.setPlayerAlignment(null),n("/story")},ownedExpansions:t.ownedExpansions,onToggleExpansion:e.toggleExpansion,onToggleAllExpansions:e.toggleAllExpansions}):u.jsx(mc,{to:"/"})}),u.jsx(Kn,{path:"/intro",element:o?u.jsx(RD,{language:s,playerAlignment:o,onComplete:()=>{t.introMission?n("/mission0"):n("/tutorial")}}):u.jsx(mc,{to:"/"})}),u.jsx(Kn,{path:"/mission0",element:o&&t.introMission?u.jsx(XA,{mission:t.introMission,isOpen:!0,onClose:()=>n("/tutorial"),onComplete:()=>{e.handleMissionComplete(t.introMission.id),n("/tutorial")},language:s,isCompleted:!1}):u.jsx(mc,{to:"/map"})}),u.jsx(Kn,{path:"/map",element:u.jsxs(ox,{children:[u.jsx(sx,{language:s,missions:t.visibleMissions,completedMissionIds:c,onMissionComplete:e.handleMissionComplete,onMissionSelect:e.handleMissionSelect,onBunkerClick:()=>n("/bunker"),factionStates:t.FACTION_STATES,playerAlignment:o,worldStage:h,surferTurnCount:f}),p&&u.jsxs("div",{className:"absolute top-20 right-4 z-50 flex flex-col gap-2 bg-slate-900/95 p-4 border border-cyan-500 shadow-[0_0_20px_rgba(6,182,212,0.3)] rounded-sm min-w-[200px] max-h-[80vh] overflow-y-auto scrollbar-thin scrollbar-thumb-cyan-700",children:[u.jsx("h3",{className:"text-xs font-bold text-cyan-400 border-b border-cyan-800 pb-1 mb-2 tracking-widest uppercase",children:"EDITOR TOOLS"}),u.jsx("button",{onClick:()=>e.setShowMissionEditor(!0),className:"bg-cyan-900/50 hover:bg-cyan-800 text-cyan-200 text-[10px] font-bold py-2 px-3 border border-cyan-700 uppercase tracking-wider transition-colors",children:"+ CREAR MISIN"}),u.jsx("button",{onClick:()=>e.setShowCharacterEditor(!0),className:"bg-blue-900/50 hover:bg-blue-800 text-blue-200 text-[10px] font-bold py-2 px-3 border border-blue-700 uppercase tracking-wider transition-colors",children:"+ CREAR PERSONAJE"}),u.jsx("button",{onClick:()=>e.setShowDbManager(!0),className:"bg-purple-900/50 hover:bg-purple-800 text-purple-200 text-[10px] font-bold py-2 px-3 border border-purple-700 uppercase tracking-wider transition-colors",children:" GESTOR BBDD (ADMIN)"}),u.jsx("div",{className:"h-px bg-cyan-900 my-1"}),u.jsx("button",{onClick:()=>e.handleSimulateProgress(5),className:"bg-emerald-900/50 hover:bg-emerald-800 text-emerald-200 text-[10px] font-bold py-2 px-3 border border-emerald-700 uppercase tracking-wider transition-colors",children:"+5 MISIONES (SIM)"}),u.jsx("button",{onClick:e.handleResetProgress,className:"bg-red-900/50 hover:bg-red-800 text-red-200 text-[10px] font-bold py-2 px-3 border border-red-700 uppercase tracking-wider transition-colors",children:"RESET PROGRESO"}),u.jsxs("div",{className:"mt-2 text-[9px] text-gray-500 font-mono text-center border-t border-gray-800 pt-2",children:["SURFER TURN: ",u.jsx("span",{className:"text-white font-bold",children:f})]})]})]})}),u.jsx(Kn,{path:"/bunker",element:u.jsx(ox,{children:u.jsx(t9,{heroes:a,missions:t.visibleMissions.filter(g=>g&&!c.has(g.id)),onAssign:(g,_)=>{const x=a.findIndex(C=>C.id===g);if(x>=0){const C=[...a];return C[x]={...C[x],status:"DEPLOYED",assignedMissionId:_},e.setHeroes(C),!0}return!1},onUnassign:g=>{const _=a.findIndex(x=>x.id===g);if(_>=0){const x=[...a];x[_]={...x[_],status:"AVAILABLE",assignedMissionId:null},e.setHeroes(x)}},onAddHero:g=>e.setHeroes([...a,g]),onToggleObjective:e.handleToggleHeroObjective,onBack:()=>n("/map"),language:s,playerAlignment:o,isEditorMode:p,onTransformHero:e.handleTransformHero,onTickerUpdate:e.handleTickerUpdate,omegaCylinders:d,onFindCylinder:()=>e.setOmegaCylinders(g=>g+1)})})}),u.jsx(Kn,{path:"/tutorial",element:u.jsxs("div",{className:"absolute inset-0 z-40",children:[u.jsx(sx,{language:s,missions:t.visibleMissions,completedMissionIds:c,onMissionComplete:()=>{},onMissionSelect:()=>{},onBunkerClick:()=>{},factionStates:t.FACTION_STATES,playerAlignment:o,worldStage:h}),u.jsx(CD,{language:s,onComplete:()=>{t.user&&localStorage.setItem(`shield_tutorial_seen_${t.user.uid}`,"true"),n("/map")},onStepChange:g=>{["roster","file","recruit"].includes(g)&&n("/bunker")}})]})}),u.jsx(Kn,{path:"*",element:u.jsx(mc,{to:"/"})})]})},y9=()=>u.jsx(vR,{children:u.jsx(AD,{children:u.jsx(g9,{})})}),tI=document.getElementById("root");if(!tI)throw new Error("Could not find root element to mount to");const v9=gf.createRoot(tI);v9.render(u.jsx(jI.StrictMode,{children:u.jsx(y9,{})}));
