(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function II(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ux={exports:{}},yd={},dx={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ul=Symbol.for("react.element"),TI=Symbol.for("react.portal"),NI=Symbol.for("react.fragment"),RI=Symbol.for("react.strict_mode"),CI=Symbol.for("react.profiler"),kI=Symbol.for("react.provider"),OI=Symbol.for("react.context"),PI=Symbol.for("react.forward_ref"),LI=Symbol.for("react.suspense"),DI=Symbol.for("react.memo"),MI=Symbol.for("react.lazy"),Z0=Symbol.iterator;function jI(t){return t===null||typeof t!="object"?null:(t=Z0&&t[Z0]||t["@@iterator"],typeof t=="function"?t:null)}var hx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fx=Object.assign,px={};function xo(t,e,n){this.props=t,this.context=e,this.refs=px,this.updater=n||hx}xo.prototype.isReactComponent={};xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mx(){}mx.prototype=xo.prototype;function lm(t,e,n){this.props=t,this.context=e,this.refs=px,this.updater=n||hx}var cm=lm.prototype=new mx;cm.constructor=lm;fx(cm,xo.prototype);cm.isPureReactComponent=!0;var J0=Array.isArray,gx=Object.prototype.hasOwnProperty,um={current:null},yx={key:!0,ref:!0,__self:!0,__source:!0};function vx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)gx.call(e,r)&&!yx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ul,type:t,key:i,ref:o,props:s,_owner:um.current}}function VI(t,e){return{$$typeof:ul,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dm(t){return typeof t=="object"&&t!==null&&t.$$typeof===ul}function UI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ey=/\/+/g;function xh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UI(""+t.key):e.toString(36)}function jc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ul:case TI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+xh(o,0):r,J0(s)?(n="",t!=null&&(n=t.replace(ey,"$&/")+"/"),jc(s,e,n,"",function(d){return d})):s!=null&&(dm(s)&&(s=VI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ey,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",J0(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+xh(i,a);o+=jc(i,e,n,c,s)}else if(c=jI(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+xh(i,a++),o+=jc(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tc(t,e,n){if(t==null)return t;var r=[],s=0;return jc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function FI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},Vc={transition:null},BI={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:Vc,ReactCurrentOwner:um};function Ex(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:tc,forEach:function(t,e,n){tc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tc(t,function(){e++}),e},toArray:function(t){return tc(t,function(e){return e})||[]},only:function(t){if(!dm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=xo;we.Fragment=NI;we.Profiler=CI;we.PureComponent=lm;we.StrictMode=RI;we.Suspense=LI;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BI;we.act=Ex;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=um.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)gx.call(e,c)&&!yx.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:ul,type:t.type,key:s,ref:i,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:OI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kI,_context:t},t.Consumer=t};we.createElement=vx;we.createFactory=function(t){var e=vx.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:PI,render:t}};we.isValidElement=dm;we.lazy=function(t){return{$$typeof:MI,_payload:{_status:-1,_result:t},_init:FI}};we.memo=function(t,e){return{$$typeof:DI,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=Vc.transition;Vc.transition={};try{t()}finally{Vc.transition=e}};we.unstable_act=Ex;we.useCallback=function(t,e){return Wt.current.useCallback(t,e)};we.useContext=function(t){return Wt.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};we.useEffect=function(t,e){return Wt.current.useEffect(t,e)};we.useId=function(){return Wt.current.useId()};we.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return Wt.current.useMemo(t,e)};we.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};we.useRef=function(t){return Wt.current.useRef(t)};we.useState=function(t){return Wt.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return Wt.current.useTransition()};we.version="18.3.1";dx.exports=we;var N=dx.exports;const zI=II(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $I=N,HI=Symbol.for("react.element"),GI=Symbol.for("react.fragment"),WI=Object.prototype.hasOwnProperty,qI=$I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KI={key:!0,ref:!0,__self:!0,__source:!0};function xx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)WI.call(e,r)&&!KI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:HI,type:t,key:i,ref:o,props:s,_owner:qI.current}}yd.Fragment=GI;yd.jsx=xx;yd.jsxs=xx;ux.exports=yd;var u=ux.exports,vf={},_x={exports:{}},mn={},wx={exports:{}},bx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,W){var Q=V.length;V.push(W);e:for(;0<Q;){var te=Q-1>>>1,ae=V[te];if(0<s(ae,W))V[te]=W,V[Q]=ae,Q=te;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var W=V[0],Q=V.pop();if(Q!==W){V[0]=Q;e:for(var te=0,ae=V.length,$=ae>>>1;te<$;){var Y=2*(te+1)-1,X=V[Y],ne=Y+1,ie=V[ne];if(0>s(X,Q))ne<ae&&0>s(ie,X)?(V[te]=ie,V[ne]=Q,te=ne):(V[te]=X,V[Y]=Q,te=Y);else if(ne<ae&&0>s(ie,Q))V[te]=ie,V[ne]=Q,te=ne;else break e}}return W}function s(V,W){var Q=V.sortIndex-W.sortIndex;return Q!==0?Q:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],h=1,p=null,f=3,g=!1,_=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=V)r(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(d)}}function P(V){if(x=!1,b(V),!_)if(n(c)!==null)_=!0,U(D);else{var W=n(d);W!==null&&K(P,W.startTime-V)}}function D(V,W){_=!1,x&&(x=!1,E(v),v=-1),g=!0;var Q=f;try{for(b(W),p=n(c);p!==null&&(!(p.expirationTime>W)||V&&!k());){var te=p.callback;if(typeof te=="function"){p.callback=null,f=p.priorityLevel;var ae=te(p.expirationTime<=W);W=t.unstable_now(),typeof ae=="function"?p.callback=ae:p===n(c)&&r(c),b(W)}else r(c);p=n(c)}if(p!==null)var $=!0;else{var Y=n(d);Y!==null&&K(P,Y.startTime-W),$=!1}return $}finally{p=null,f=Q,g=!1}}var j=!1,I=null,v=-1,S=5,A=-1;function k(){return!(t.unstable_now()-A<S)}function O(){if(I!==null){var V=t.unstable_now();A=V;var W=!0;try{W=I(!0,V)}finally{W?R():(j=!1,I=null)}}else j=!1}var R;if(typeof w=="function")R=function(){w(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,L=M.port2;M.port1.onmessage=O,R=function(){L.postMessage(null)}}else R=function(){C(O,0)};function U(V){I=V,j||(j=!0,R())}function K(V,W){v=C(function(){V(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,U(D))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var Q=f;f=W;try{return V()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=f;f=V;try{return W()}finally{f=Q}},t.unstable_scheduleCallback=function(V,W,Q){var te=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?te+Q:te):Q=te,V){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,V={id:h++,callback:W,priorityLevel:V,startTime:Q,expirationTime:ae,sortIndex:-1},Q>te?(V.sortIndex=Q,e(d,V),n(c)===null&&V===n(d)&&(x?(E(v),v=-1):x=!0,K(P,Q-te))):(V.sortIndex=ae,e(c,V),_||g||(_=!0,U(D))),V},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(V){var W=f;return function(){var Q=f;f=W;try{return V.apply(this,arguments)}finally{f=Q}}}})(bx);wx.exports=bx;var YI=wx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI=N,fn=YI;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sx=new Set,Oa={};function fi(t,e){Zi(t,e),Zi(t+"Capture",e)}function Zi(t,e){for(Oa[t]=e,t=0;t<e.length;t++)Sx.add(e[t])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ef=Object.prototype.hasOwnProperty,XI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ty={},ny={};function ZI(t){return Ef.call(ny,t)?!0:Ef.call(ty,t)?!1:XI.test(t)?ny[t]=!0:(ty[t]=!0,!1)}function JI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eT(t,e,n,r){if(e===null||typeof e>"u"||JI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var hm=/[\-:]([a-z])/g;function fm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hm,fm);Tt[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hm,fm);Tt[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hm,fm);Tt[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function pm(t,e,n,r){var s=Tt.hasOwnProperty(e)?Tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eT(e,n,s,r)&&(n=null),r||s===null?ZI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Br=QI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nc=Symbol.for("react.element"),Ni=Symbol.for("react.portal"),Ri=Symbol.for("react.fragment"),mm=Symbol.for("react.strict_mode"),xf=Symbol.for("react.profiler"),Ax=Symbol.for("react.provider"),Ix=Symbol.for("react.context"),gm=Symbol.for("react.forward_ref"),_f=Symbol.for("react.suspense"),wf=Symbol.for("react.suspense_list"),ym=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),Tx=Symbol.for("react.offscreen"),ry=Symbol.iterator;function Ho(t){return t===null||typeof t!="object"?null:(t=ry&&t[ry]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,_h;function na(t){if(_h===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_h=e&&e[1]||""}return`
`+_h+t}var wh=!1;function bh(t,e){if(!t||wh)return"";wh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{wh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?na(t):""}function tT(t){switch(t.tag){case 5:return na(t.type);case 16:return na("Lazy");case 13:return na("Suspense");case 19:return na("SuspenseList");case 0:case 2:case 15:return t=bh(t.type,!1),t;case 11:return t=bh(t.type.render,!1),t;case 1:return t=bh(t.type,!0),t;default:return""}}function bf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ri:return"Fragment";case Ni:return"Portal";case xf:return"Profiler";case mm:return"StrictMode";case _f:return"Suspense";case wf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ix:return(t.displayName||"Context")+".Consumer";case Ax:return(t._context.displayName||"Context")+".Provider";case gm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ym:return e=t.displayName||null,e!==null?e:bf(t.type)||"Memo";case Qr:e=t._payload,t=t._init;try{return bf(t(e))}catch{}}return null}function nT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bf(e);case 8:return e===mm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Nx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rT(t){var e=Nx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rc(t){t._valueTracker||(t._valueTracker=rT(t))}function Rx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Nx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sf(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cx(t,e){e=e.checked,e!=null&&pm(t,"checked",e,!1)}function Af(t,e){Cx(t,e);var n=xs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?If(t,e.type,n):e.hasOwnProperty("defaultValue")&&If(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function iy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function If(t,e,n){(e!=="number"||fu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ra=Array.isArray;function Bi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Tf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function oy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(ra(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xs(n)}}function kx(t,e){var n=xs(e.value),r=xs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ay(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ox(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ox(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sc,Px=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sc=sc||document.createElement("div"),sc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var va={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sT=["Webkit","ms","Moz","O"];Object.keys(va).forEach(function(t){sT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),va[e]=va[t]})});function Lx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||va.hasOwnProperty(t)&&va[t]?(""+e).trim():e+"px"}function Dx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Lx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var iT=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rf(t,e){if(e){if(iT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Cf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kf=null;function vm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Of=null,zi=null,$i=null;function ly(t){if(t=fl(t)){if(typeof Of!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=wd(e),Of(t.stateNode,t.type,e))}}function Mx(t){zi?$i?$i.push(t):$i=[t]:zi=t}function jx(){if(zi){var t=zi,e=$i;if($i=zi=null,ly(t),e)for(t=0;t<e.length;t++)ly(e[t])}}function Vx(t,e){return t(e)}function Ux(){}var Sh=!1;function Fx(t,e,n){if(Sh)return t(e,n);Sh=!0;try{return Vx(t,e,n)}finally{Sh=!1,(zi!==null||$i!==null)&&(Ux(),jx())}}function La(t,e){var n=t.stateNode;if(n===null)return null;var r=wd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Pf=!1;if(Cr)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){Pf=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{Pf=!1}function oT(t,e,n,r,s,i,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Ea=!1,pu=null,mu=!1,Lf=null,aT={onError:function(t){Ea=!0,pu=t}};function lT(t,e,n,r,s,i,o,a,c){Ea=!1,pu=null,oT.apply(aT,arguments)}function cT(t,e,n,r,s,i,o,a,c){if(lT.apply(this,arguments),Ea){if(Ea){var d=pu;Ea=!1,pu=null}else throw Error(ee(198));mu||(mu=!0,Lf=d)}}function pi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cy(t){if(pi(t)!==t)throw Error(ee(188))}function uT(t){var e=t.alternate;if(!e){if(e=pi(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return cy(s),t;if(i===r)return cy(s),e;i=i.sibling}throw Error(ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function zx(t){return t=uT(t),t!==null?$x(t):null}function $x(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$x(t);if(e!==null)return e;t=t.sibling}return null}var Hx=fn.unstable_scheduleCallback,uy=fn.unstable_cancelCallback,dT=fn.unstable_shouldYield,hT=fn.unstable_requestPaint,at=fn.unstable_now,fT=fn.unstable_getCurrentPriorityLevel,Em=fn.unstable_ImmediatePriority,Gx=fn.unstable_UserBlockingPriority,gu=fn.unstable_NormalPriority,pT=fn.unstable_LowPriority,Wx=fn.unstable_IdlePriority,vd=null,er=null;function mT(t){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(vd,t,void 0,(t.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:vT,gT=Math.log,yT=Math.LN2;function vT(t){return t>>>=0,t===0?32:31-(gT(t)/yT|0)|0}var ic=64,oc=4194304;function sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=sa(a):(i&=o,i!==0&&(r=sa(i)))}else o=n&~s,o!==0?r=sa(o):i!==0&&(r=sa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fn(e),s=1<<n,r|=t[n],e&=~s;return r}function ET(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Fn(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=ET(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Df(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qx(){var t=ic;return ic<<=1,!(ic&4194240)&&(ic=64),t}function Ah(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fn(e),t[e]=n}function _T(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Fn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function xm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ue=0;function Kx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yx,_m,Qx,Xx,Zx,Mf=!1,ac=[],os=null,as=null,ls=null,Da=new Map,Ma=new Map,Zr=[],wT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dy(t,e){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Da.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(e.pointerId)}}function Wo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fl(e),e!==null&&_m(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function bT(t,e,n,r,s){switch(e){case"focusin":return os=Wo(os,t,e,n,r,s),!0;case"dragenter":return as=Wo(as,t,e,n,r,s),!0;case"mouseover":return ls=Wo(ls,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Da.set(i,Wo(Da.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ma.set(i,Wo(Ma.get(i)||null,t,e,n,r,s)),!0}return!1}function Jx(t){var e=zs(t.target);if(e!==null){var n=pi(e);if(n!==null){if(e=n.tag,e===13){if(e=Bx(n),e!==null){t.blockedOn=e,Zx(t.priority,function(){Qx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);kf=r,n.target.dispatchEvent(r),kf=null}else return e=fl(n),e!==null&&_m(e),t.blockedOn=n,!1;e.shift()}return!0}function hy(t,e,n){Uc(t)&&n.delete(e)}function ST(){Mf=!1,os!==null&&Uc(os)&&(os=null),as!==null&&Uc(as)&&(as=null),ls!==null&&Uc(ls)&&(ls=null),Da.forEach(hy),Ma.forEach(hy)}function qo(t,e){t.blockedOn===e&&(t.blockedOn=null,Mf||(Mf=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,ST)))}function ja(t){function e(s){return qo(s,t)}if(0<ac.length){qo(ac[0],t);for(var n=1;n<ac.length;n++){var r=ac[n];r.blockedOn===t&&(r.blockedOn=null)}}for(os!==null&&qo(os,t),as!==null&&qo(as,t),ls!==null&&qo(ls,t),Da.forEach(e),Ma.forEach(e),n=0;n<Zr.length;n++)r=Zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)Jx(n),n.blockedOn===null&&Zr.shift()}var Hi=Br.ReactCurrentBatchConfig,vu=!0;function AT(t,e,n,r){var s=Ue,i=Hi.transition;Hi.transition=null;try{Ue=1,wm(t,e,n,r)}finally{Ue=s,Hi.transition=i}}function IT(t,e,n,r){var s=Ue,i=Hi.transition;Hi.transition=null;try{Ue=4,wm(t,e,n,r)}finally{Ue=s,Hi.transition=i}}function wm(t,e,n,r){if(vu){var s=jf(t,e,n,r);if(s===null)Dh(t,e,r,Eu,n),dy(t,r);else if(bT(s,t,e,n,r))r.stopPropagation();else if(dy(t,r),e&4&&-1<wT.indexOf(t)){for(;s!==null;){var i=fl(s);if(i!==null&&Yx(i),i=jf(t,e,n,r),i===null&&Dh(t,e,r,Eu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Dh(t,e,r,null,n)}}var Eu=null;function jf(t,e,n,r){if(Eu=null,t=vm(r),t=zs(t),t!==null)if(e=pi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Eu=t,null}function e_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fT()){case Em:return 1;case Gx:return 4;case gu:case pT:return 16;case Wx:return 536870912;default:return 16}default:return 16}}var rs=null,bm=null,Fc=null;function t_(){if(Fc)return Fc;var t,e=bm,n=e.length,r,s="value"in rs?rs.value:rs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Fc=s.slice(t,1<r?1-r:void 0)}function Bc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lc(){return!0}function fy(){return!1}function gn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lc:fy,this.isPropagationStopped=fy,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lc)},persist:function(){},isPersistent:lc}),e}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sm=gn(_o),hl=tt({},_o,{view:0,detail:0}),TT=gn(hl),Ih,Th,Ko,Ed=tt({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Am,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ko&&(Ko&&t.type==="mousemove"?(Ih=t.screenX-Ko.screenX,Th=t.screenY-Ko.screenY):Th=Ih=0,Ko=t),Ih)},movementY:function(t){return"movementY"in t?t.movementY:Th}}),py=gn(Ed),NT=tt({},Ed,{dataTransfer:0}),RT=gn(NT),CT=tt({},hl,{relatedTarget:0}),Nh=gn(CT),kT=tt({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),OT=gn(kT),PT=tt({},_o,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LT=gn(PT),DT=tt({},_o,{data:0}),my=gn(DT),MT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VT[t])?!!e[t]:!1}function Am(){return UT}var FT=tt({},hl,{key:function(t){if(t.key){var e=MT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Am,charCode:function(t){return t.type==="keypress"?Bc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BT=gn(FT),zT=tt({},Ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gy=gn(zT),$T=tt({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Am}),HT=gn($T),GT=tt({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),WT=gn(GT),qT=tt({},Ed,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KT=gn(qT),YT=[9,13,27,32],Im=Cr&&"CompositionEvent"in window,xa=null;Cr&&"documentMode"in document&&(xa=document.documentMode);var QT=Cr&&"TextEvent"in window&&!xa,n_=Cr&&(!Im||xa&&8<xa&&11>=xa),yy=" ",vy=!1;function r_(t,e){switch(t){case"keyup":return YT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ci=!1;function XT(t,e){switch(t){case"compositionend":return s_(e);case"keypress":return e.which!==32?null:(vy=!0,yy);case"textInput":return t=e.data,t===yy&&vy?null:t;default:return null}}function ZT(t,e){if(Ci)return t==="compositionend"||!Im&&r_(t,e)?(t=t_(),Fc=bm=rs=null,Ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return n_&&e.locale!=="ko"?null:e.data;default:return null}}var JT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ey(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JT[t.type]:e==="textarea"}function i_(t,e,n,r){Mx(r),e=xu(e,"onChange"),0<e.length&&(n=new Sm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _a=null,Va=null;function eN(t){g_(t,0)}function xd(t){var e=Pi(t);if(Rx(e))return t}function tN(t,e){if(t==="change")return e}var o_=!1;if(Cr){var Rh;if(Cr){var Ch="oninput"in document;if(!Ch){var xy=document.createElement("div");xy.setAttribute("oninput","return;"),Ch=typeof xy.oninput=="function"}Rh=Ch}else Rh=!1;o_=Rh&&(!document.documentMode||9<document.documentMode)}function _y(){_a&&(_a.detachEvent("onpropertychange",a_),Va=_a=null)}function a_(t){if(t.propertyName==="value"&&xd(Va)){var e=[];i_(e,Va,t,vm(t)),Fx(eN,e)}}function nN(t,e,n){t==="focusin"?(_y(),_a=e,Va=n,_a.attachEvent("onpropertychange",a_)):t==="focusout"&&_y()}function rN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xd(Va)}function sN(t,e){if(t==="click")return xd(e)}function iN(t,e){if(t==="input"||t==="change")return xd(e)}function oN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $n=typeof Object.is=="function"?Object.is:oN;function Ua(t,e){if($n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ef.call(e,s)||!$n(t[s],e[s]))return!1}return!0}function wy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function by(t,e){var n=wy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wy(n)}}function l_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?l_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function c_(){for(var t=window,e=fu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fu(t.document)}return e}function Tm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aN(t){var e=c_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&l_(n.ownerDocument.documentElement,n)){if(r!==null&&Tm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=by(n,i);var o=by(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lN=Cr&&"documentMode"in document&&11>=document.documentMode,ki=null,Vf=null,wa=null,Uf=!1;function Sy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uf||ki==null||ki!==fu(r)||(r=ki,"selectionStart"in r&&Tm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wa&&Ua(wa,r)||(wa=r,r=xu(Vf,"onSelect"),0<r.length&&(e=new Sm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ki)))}function cc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oi={animationend:cc("Animation","AnimationEnd"),animationiteration:cc("Animation","AnimationIteration"),animationstart:cc("Animation","AnimationStart"),transitionend:cc("Transition","TransitionEnd")},kh={},u_={};Cr&&(u_=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function _d(t){if(kh[t])return kh[t];if(!Oi[t])return t;var e=Oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in u_)return kh[t]=e[n];return t}var d_=_d("animationend"),h_=_d("animationiteration"),f_=_d("animationstart"),p_=_d("transitionend"),m_=new Map,Ay="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(t,e){m_.set(t,e),fi(e,[t])}for(var Oh=0;Oh<Ay.length;Oh++){var Ph=Ay[Oh],cN=Ph.toLowerCase(),uN=Ph[0].toUpperCase()+Ph.slice(1);As(cN,"on"+uN)}As(d_,"onAnimationEnd");As(h_,"onAnimationIteration");As(f_,"onAnimationStart");As("dblclick","onDoubleClick");As("focusin","onFocus");As("focusout","onBlur");As(p_,"onTransitionEnd");Zi("onMouseEnter",["mouseout","mouseover"]);Zi("onMouseLeave",["mouseout","mouseover"]);Zi("onPointerEnter",["pointerout","pointerover"]);Zi("onPointerLeave",["pointerout","pointerover"]);fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dN=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function Iy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,cT(r,e,void 0,t),t.currentTarget=null}function g_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Iy(s,a,d),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Iy(s,a,d),i=c}}}if(mu)throw t=Lf,mu=!1,Lf=null,t}function Ge(t,e){var n=e[Hf];n===void 0&&(n=e[Hf]=new Set);var r=t+"__bubble";n.has(r)||(y_(e,t,2,!1),n.add(r))}function Lh(t,e,n){var r=0;e&&(r|=4),y_(n,t,r,e)}var uc="_reactListening"+Math.random().toString(36).slice(2);function Fa(t){if(!t[uc]){t[uc]=!0,Sx.forEach(function(n){n!=="selectionchange"&&(dN.has(n)||Lh(n,!1,t),Lh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uc]||(e[uc]=!0,Lh("selectionchange",!1,e))}}function y_(t,e,n,r){switch(e_(e)){case 1:var s=AT;break;case 4:s=IT;break;default:s=wm}n=s.bind(null,e,n,t),s=void 0,!Pf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Dh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=zs(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Fx(function(){var d=i,h=vm(n),p=[];e:{var f=m_.get(t);if(f!==void 0){var g=Sm,_=t;switch(t){case"keypress":if(Bc(n)===0)break e;case"keydown":case"keyup":g=BT;break;case"focusin":_="focus",g=Nh;break;case"focusout":_="blur",g=Nh;break;case"beforeblur":case"afterblur":g=Nh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=RT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=HT;break;case d_:case h_:case f_:g=OT;break;case p_:g=WT;break;case"scroll":g=TT;break;case"wheel":g=KT;break;case"copy":case"cut":case"paste":g=LT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=gy}var x=(e&4)!==0,C=!x&&t==="scroll",E=x?f!==null?f+"Capture":null:f;x=[];for(var w=d,b;w!==null;){b=w;var P=b.stateNode;if(b.tag===5&&P!==null&&(b=P,E!==null&&(P=La(w,E),P!=null&&x.push(Ba(w,P,b)))),C)break;w=w.return}0<x.length&&(f=new g(f,_,null,n,h),p.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==kf&&(_=n.relatedTarget||n.fromElement)&&(zs(_)||_[kr]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=d,_=_?zs(_):null,_!==null&&(C=pi(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=d),g!==_)){if(x=py,P="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=gy,P="onPointerLeave",E="onPointerEnter",w="pointer"),C=g==null?f:Pi(g),b=_==null?f:Pi(_),f=new x(P,w+"leave",g,n,h),f.target=C,f.relatedTarget=b,P=null,zs(h)===d&&(x=new x(E,w+"enter",_,n,h),x.target=b,x.relatedTarget=C,P=x),C=P,g&&_)t:{for(x=g,E=_,w=0,b=x;b;b=bi(b))w++;for(b=0,P=E;P;P=bi(P))b++;for(;0<w-b;)x=bi(x),w--;for(;0<b-w;)E=bi(E),b--;for(;w--;){if(x===E||E!==null&&x===E.alternate)break t;x=bi(x),E=bi(E)}x=null}else x=null;g!==null&&Ty(p,f,g,x,!1),_!==null&&C!==null&&Ty(p,C,_,x,!0)}}e:{if(f=d?Pi(d):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var D=tN;else if(Ey(f))if(o_)D=iN;else{D=rN;var j=nN}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=sN);if(D&&(D=D(t,d))){i_(p,D,n,h);break e}j&&j(t,f,d),t==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&If(f,"number",f.value)}switch(j=d?Pi(d):window,t){case"focusin":(Ey(j)||j.contentEditable==="true")&&(ki=j,Vf=d,wa=null);break;case"focusout":wa=Vf=ki=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,Sy(p,n,h);break;case"selectionchange":if(lN)break;case"keydown":case"keyup":Sy(p,n,h)}var I;if(Im)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ci?r_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(n_&&n.locale!=="ko"&&(Ci||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ci&&(I=t_()):(rs=h,bm="value"in rs?rs.value:rs.textContent,Ci=!0)),j=xu(d,v),0<j.length&&(v=new my(v,t,null,n,h),p.push({event:v,listeners:j}),I?v.data=I:(I=s_(n),I!==null&&(v.data=I)))),(I=QT?XT(t,n):ZT(t,n))&&(d=xu(d,"onBeforeInput"),0<d.length&&(h=new my("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=I))}g_(p,e)})}function Ba(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=La(t,n),i!=null&&r.unshift(Ba(t,i,s)),i=La(t,e),i!=null&&r.push(Ba(t,i,s))),t=t.return}return r}function bi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ty(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,s?(c=La(n,i),c!=null&&o.unshift(Ba(n,c,a))):s||(c=La(n,i),c!=null&&o.push(Ba(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hN=/\r\n?/g,fN=/\u0000|\uFFFD/g;function Ny(t){return(typeof t=="string"?t:""+t).replace(hN,`
`).replace(fN,"")}function dc(t,e,n){if(e=Ny(e),Ny(t)!==e&&n)throw Error(ee(425))}function _u(){}var Ff=null,Bf=null;function zf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $f=typeof setTimeout=="function"?setTimeout:void 0,pN=typeof clearTimeout=="function"?clearTimeout:void 0,Ry=typeof Promise=="function"?Promise:void 0,mN=typeof queueMicrotask=="function"?queueMicrotask:typeof Ry<"u"?function(t){return Ry.resolve(null).then(t).catch(gN)}:$f;function gN(t){setTimeout(function(){throw t})}function Mh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ja(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ja(e)}function cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wo=Math.random().toString(36).slice(2),Xn="__reactFiber$"+wo,za="__reactProps$"+wo,kr="__reactContainer$"+wo,Hf="__reactEvents$"+wo,yN="__reactListeners$"+wo,vN="__reactHandles$"+wo;function zs(t){var e=t[Xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kr]||n[Xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cy(t);t!==null;){if(n=t[Xn])return n;t=Cy(t)}return e}t=n,n=t.parentNode}return null}function fl(t){return t=t[Xn]||t[kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function wd(t){return t[za]||null}var Gf=[],Li=-1;function Is(t){return{current:t}}function We(t){0>Li||(t.current=Gf[Li],Gf[Li]=null,Li--)}function $e(t,e){Li++,Gf[Li]=t.current,t.current=e}var _s={},Ft=Is(_s),Zt=Is(!1),Js=_s;function Ji(t,e){var n=t.type.contextTypes;if(!n)return _s;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Jt(t){return t=t.childContextTypes,t!=null}function wu(){We(Zt),We(Ft)}function ky(t,e,n){if(Ft.current!==_s)throw Error(ee(168));$e(Ft,e),$e(Zt,n)}function v_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ee(108,nT(t)||"Unknown",s));return tt({},n,r)}function bu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_s,Js=Ft.current,$e(Ft,t),$e(Zt,Zt.current),!0}function Oy(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=v_(t,e,Js),r.__reactInternalMemoizedMergedChildContext=t,We(Zt),We(Ft),$e(Ft,t)):We(Zt),$e(Zt,n)}var yr=null,bd=!1,jh=!1;function E_(t){yr===null?yr=[t]:yr.push(t)}function EN(t){bd=!0,E_(t)}function Ts(){if(!jh&&yr!==null){jh=!0;var t=0,e=Ue;try{var n=yr;for(Ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yr=null,bd=!1}catch(s){throw yr!==null&&(yr=yr.slice(t+1)),Hx(Em,Ts),s}finally{Ue=e,jh=!1}}return null}var Di=[],Mi=0,Su=null,Au=0,_n=[],wn=0,ei=null,xr=1,_r="";function Us(t,e){Di[Mi++]=Au,Di[Mi++]=Su,Su=t,Au=e}function x_(t,e,n){_n[wn++]=xr,_n[wn++]=_r,_n[wn++]=ei,ei=t;var r=xr;t=_r;var s=32-Fn(r)-1;r&=~(1<<s),n+=1;var i=32-Fn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,xr=1<<32-Fn(e)+s|n<<s|r,_r=i+t}else xr=1<<i|n<<s|r,_r=t}function Nm(t){t.return!==null&&(Us(t,1),x_(t,1,0))}function Rm(t){for(;t===Su;)Su=Di[--Mi],Di[Mi]=null,Au=Di[--Mi],Di[Mi]=null;for(;t===ei;)ei=_n[--wn],_n[wn]=null,_r=_n[--wn],_n[wn]=null,xr=_n[--wn],_n[wn]=null}var hn=null,un=null,Ke=!1,Vn=null;function __(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Py(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,un=cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ei!==null?{id:xr,overflow:_r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,un=null,!0):!1;default:return!1}}function Wf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qf(t){if(Ke){var e=un;if(e){var n=e;if(!Py(t,e)){if(Wf(t))throw Error(ee(418));e=cs(n.nextSibling);var r=hn;e&&Py(t,e)?__(r,n):(t.flags=t.flags&-4097|2,Ke=!1,hn=t)}}else{if(Wf(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Ke=!1,hn=t}}}function Ly(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function hc(t){if(t!==hn)return!1;if(!Ke)return Ly(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zf(t.type,t.memoizedProps)),e&&(e=un)){if(Wf(t))throw w_(),Error(ee(418));for(;e;)__(t,e),e=cs(e.nextSibling)}if(Ly(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=hn?cs(t.stateNode.nextSibling):null;return!0}function w_(){for(var t=un;t;)t=cs(t.nextSibling)}function eo(){un=hn=null,Ke=!1}function Cm(t){Vn===null?Vn=[t]:Vn.push(t)}var xN=Br.ReactCurrentBatchConfig;function Yo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function fc(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Dy(t){var e=t._init;return e(t._payload)}function b_(t){function e(E,w){if(t){var b=E.deletions;b===null?(E.deletions=[w],E.flags|=16):b.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=fs(E,w),E.index=0,E.sibling=null,E}function i(E,w,b){return E.index=b,t?(b=E.alternate,b!==null?(b=b.index,b<w?(E.flags|=2,w):b):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,w,b,P){return w===null||w.tag!==6?(w=Hh(b,E.mode,P),w.return=E,w):(w=s(w,b),w.return=E,w)}function c(E,w,b,P){var D=b.type;return D===Ri?h(E,w,b.props.children,P,b.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Qr&&Dy(D)===w.type)?(P=s(w,b.props),P.ref=Yo(E,w,b),P.return=E,P):(P=Kc(b.type,b.key,b.props,null,E.mode,P),P.ref=Yo(E,w,b),P.return=E,P)}function d(E,w,b,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=Gh(b,E.mode,P),w.return=E,w):(w=s(w,b.children||[]),w.return=E,w)}function h(E,w,b,P,D){return w===null||w.tag!==7?(w=Ys(b,E.mode,P,D),w.return=E,w):(w=s(w,b),w.return=E,w)}function p(E,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Hh(""+w,E.mode,b),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case nc:return b=Kc(w.type,w.key,w.props,null,E.mode,b),b.ref=Yo(E,null,w),b.return=E,b;case Ni:return w=Gh(w,E.mode,b),w.return=E,w;case Qr:var P=w._init;return p(E,P(w._payload),b)}if(ra(w)||Ho(w))return w=Ys(w,E.mode,b,null),w.return=E,w;fc(E,w)}return null}function f(E,w,b,P){var D=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return D!==null?null:a(E,w,""+b,P);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nc:return b.key===D?c(E,w,b,P):null;case Ni:return b.key===D?d(E,w,b,P):null;case Qr:return D=b._init,f(E,w,D(b._payload),P)}if(ra(b)||Ho(b))return D!==null?null:h(E,w,b,P,null);fc(E,b)}return null}function g(E,w,b,P,D){if(typeof P=="string"&&P!==""||typeof P=="number")return E=E.get(b)||null,a(w,E,""+P,D);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case nc:return E=E.get(P.key===null?b:P.key)||null,c(w,E,P,D);case Ni:return E=E.get(P.key===null?b:P.key)||null,d(w,E,P,D);case Qr:var j=P._init;return g(E,w,b,j(P._payload),D)}if(ra(P)||Ho(P))return E=E.get(b)||null,h(w,E,P,D,null);fc(w,P)}return null}function _(E,w,b,P){for(var D=null,j=null,I=w,v=w=0,S=null;I!==null&&v<b.length;v++){I.index>v?(S=I,I=null):S=I.sibling;var A=f(E,I,b[v],P);if(A===null){I===null&&(I=S);break}t&&I&&A.alternate===null&&e(E,I),w=i(A,w,v),j===null?D=A:j.sibling=A,j=A,I=S}if(v===b.length)return n(E,I),Ke&&Us(E,v),D;if(I===null){for(;v<b.length;v++)I=p(E,b[v],P),I!==null&&(w=i(I,w,v),j===null?D=I:j.sibling=I,j=I);return Ke&&Us(E,v),D}for(I=r(E,I);v<b.length;v++)S=g(I,E,v,b[v],P),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?v:S.key),w=i(S,w,v),j===null?D=S:j.sibling=S,j=S);return t&&I.forEach(function(k){return e(E,k)}),Ke&&Us(E,v),D}function x(E,w,b,P){var D=Ho(b);if(typeof D!="function")throw Error(ee(150));if(b=D.call(b),b==null)throw Error(ee(151));for(var j=D=null,I=w,v=w=0,S=null,A=b.next();I!==null&&!A.done;v++,A=b.next()){I.index>v?(S=I,I=null):S=I.sibling;var k=f(E,I,A.value,P);if(k===null){I===null&&(I=S);break}t&&I&&k.alternate===null&&e(E,I),w=i(k,w,v),j===null?D=k:j.sibling=k,j=k,I=S}if(A.done)return n(E,I),Ke&&Us(E,v),D;if(I===null){for(;!A.done;v++,A=b.next())A=p(E,A.value,P),A!==null&&(w=i(A,w,v),j===null?D=A:j.sibling=A,j=A);return Ke&&Us(E,v),D}for(I=r(E,I);!A.done;v++,A=b.next())A=g(I,E,v,A.value,P),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?v:A.key),w=i(A,w,v),j===null?D=A:j.sibling=A,j=A);return t&&I.forEach(function(O){return e(E,O)}),Ke&&Us(E,v),D}function C(E,w,b,P){if(typeof b=="object"&&b!==null&&b.type===Ri&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case nc:e:{for(var D=b.key,j=w;j!==null;){if(j.key===D){if(D=b.type,D===Ri){if(j.tag===7){n(E,j.sibling),w=s(j,b.props.children),w.return=E,E=w;break e}}else if(j.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Qr&&Dy(D)===j.type){n(E,j.sibling),w=s(j,b.props),w.ref=Yo(E,j,b),w.return=E,E=w;break e}n(E,j);break}else e(E,j);j=j.sibling}b.type===Ri?(w=Ys(b.props.children,E.mode,P,b.key),w.return=E,E=w):(P=Kc(b.type,b.key,b.props,null,E.mode,P),P.ref=Yo(E,w,b),P.return=E,E=P)}return o(E);case Ni:e:{for(j=b.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(E,w.sibling),w=s(w,b.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=Gh(b,E.mode,P),w.return=E,E=w}return o(E);case Qr:return j=b._init,C(E,w,j(b._payload),P)}if(ra(b))return _(E,w,b,P);if(Ho(b))return x(E,w,b,P);fc(E,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,b),w.return=E,E=w):(n(E,w),w=Hh(b,E.mode,P),w.return=E,E=w),o(E)):n(E,w)}return C}var to=b_(!0),S_=b_(!1),Iu=Is(null),Tu=null,ji=null,km=null;function Om(){km=ji=Tu=null}function Pm(t){var e=Iu.current;We(Iu),t._currentValue=e}function Kf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gi(t,e){Tu=t,km=ji=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function Rn(t){var e=t._currentValue;if(km!==t)if(t={context:t,memoizedValue:e,next:null},ji===null){if(Tu===null)throw Error(ee(308));ji=t,Tu.dependencies={lanes:0,firstContext:t}}else ji=ji.next=t;return e}var $s=null;function Lm(t){$s===null?$s=[t]:$s.push(t)}function A_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Lm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Or(t,r)}function Or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function Dm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function us(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Or(t,n)}return s=r.interleaved,s===null?(e.next=e,Lm(r)):(e.next=s.next,s.next=e),r.interleaved=e,Or(t,n)}function zc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xm(t,n)}}function My(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nu(t,e,n,r){var s=t.updateQueue;Xr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,h=d=c=null,a=i;do{var f=a.lane,g=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,x=a;switch(f=e,g=n,x.tag){case 1:if(_=x.payload,typeof _=="function"){p=_.call(g,p,f);break e}p=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=x.payload,f=typeof _=="function"?_.call(g,p,f):_,f==null)break e;p=tt({},p,f);break e;case 2:Xr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=g,c=p):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ni|=o,t.lanes=o,t.memoizedState=p}}function jy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ee(191,s));s.call(r)}}}var pl={},tr=Is(pl),$a=Is(pl),Ha=Is(pl);function Hs(t){if(t===pl)throw Error(ee(174));return t}function Mm(t,e){switch($e(Ha,e),$e($a,t),$e(tr,pl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nf(e,t)}We(tr),$e(tr,e)}function no(){We(tr),We($a),We(Ha)}function T_(t){Hs(Ha.current);var e=Hs(tr.current),n=Nf(e,t.type);e!==n&&($e($a,t),$e(tr,n))}function jm(t){$a.current===t&&(We(tr),We($a))}var Ze=Is(0);function Ru(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vh=[];function Vm(){for(var t=0;t<Vh.length;t++)Vh[t]._workInProgressVersionPrimary=null;Vh.length=0}var $c=Br.ReactCurrentDispatcher,Uh=Br.ReactCurrentBatchConfig,ti=0,et=null,ht=null,gt=null,Cu=!1,ba=!1,Ga=0,_N=0;function Ot(){throw Error(ee(321))}function Um(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$n(t[n],e[n]))return!1;return!0}function Fm(t,e,n,r,s,i){if(ti=i,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$c.current=t===null||t.memoizedState===null?AN:IN,t=n(r,s),ba){i=0;do{if(ba=!1,Ga=0,25<=i)throw Error(ee(301));i+=1,gt=ht=null,e.updateQueue=null,$c.current=TN,t=n(r,s)}while(ba)}if($c.current=ku,e=ht!==null&&ht.next!==null,ti=0,gt=ht=et=null,Cu=!1,e)throw Error(ee(300));return t}function Bm(){var t=Ga!==0;return Ga=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?et.memoizedState=gt=t:gt=gt.next=t,gt}function Cn(){if(ht===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=gt===null?et.memoizedState:gt.next;if(e!==null)gt=e,ht=t;else{if(t===null)throw Error(ee(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},gt===null?et.memoizedState=gt=t:gt=gt.next=t}return gt}function Wa(t,e){return typeof e=="function"?e(t):e}function Fh(t){var e=Cn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=ht,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,d=i;do{var h=d.lane;if((ti&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=p,o=r):c=c.next=p,et.lanes|=h,ni|=h}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=a,$n(r,e.memoizedState)||(Qt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,et.lanes|=i,ni|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bh(t){var e=Cn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);$n(i,e.memoizedState)||(Qt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function N_(){}function R_(t,e){var n=et,r=Cn(),s=e(),i=!$n(r.memoizedState,s);if(i&&(r.memoizedState=s,Qt=!0),r=r.queue,zm(O_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,qa(9,k_.bind(null,n,r,s,e),void 0,null),yt===null)throw Error(ee(349));ti&30||C_(n,e,s)}return s}function C_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function k_(t,e,n,r){e.value=n,e.getSnapshot=r,P_(e)&&L_(t)}function O_(t,e,n){return n(function(){P_(e)&&L_(t)})}function P_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$n(t,n)}catch{return!0}}function L_(t){var e=Or(t,1);e!==null&&Bn(e,t,1,-1)}function Vy(t){var e=Qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:t},e.queue=t,t=t.dispatch=SN.bind(null,et,t),[e.memoizedState,t]}function qa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function D_(){return Cn().memoizedState}function Hc(t,e,n,r){var s=Qn();et.flags|=t,s.memoizedState=qa(1|e,n,void 0,r===void 0?null:r)}function Sd(t,e,n,r){var s=Cn();r=r===void 0?null:r;var i=void 0;if(ht!==null){var o=ht.memoizedState;if(i=o.destroy,r!==null&&Um(r,o.deps)){s.memoizedState=qa(e,n,i,r);return}}et.flags|=t,s.memoizedState=qa(1|e,n,i,r)}function Uy(t,e){return Hc(8390656,8,t,e)}function zm(t,e){return Sd(2048,8,t,e)}function M_(t,e){return Sd(4,2,t,e)}function j_(t,e){return Sd(4,4,t,e)}function V_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function U_(t,e,n){return n=n!=null?n.concat([t]):null,Sd(4,4,V_.bind(null,e,t),n)}function $m(){}function F_(t,e){var n=Cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Um(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function B_(t,e){var n=Cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Um(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function z_(t,e,n){return ti&21?($n(n,e)||(n=qx(),et.lanes|=n,ni|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function wN(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var r=Uh.transition;Uh.transition={};try{t(!1),e()}finally{Ue=n,Uh.transition=r}}function $_(){return Cn().memoizedState}function bN(t,e,n){var r=hs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},H_(t))G_(e,n);else if(n=A_(t,e,n,r),n!==null){var s=Ht();Bn(n,t,r,s),W_(n,e,r)}}function SN(t,e,n){var r=hs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(H_(t))G_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,$n(a,o)){var c=e.interleaved;c===null?(s.next=s,Lm(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=A_(t,e,s,r),n!==null&&(s=Ht(),Bn(n,t,r,s),W_(n,e,r))}}function H_(t){var e=t.alternate;return t===et||e!==null&&e===et}function G_(t,e){ba=Cu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function W_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xm(t,n)}}var ku={readContext:Rn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},AN={readContext:Rn,useCallback:function(t,e){return Qn().memoizedState=[t,e===void 0?null:e],t},useContext:Rn,useEffect:Uy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hc(4194308,4,V_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hc(4,2,t,e)},useMemo:function(t,e){var n=Qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bN.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=Qn();return t={current:t},e.memoizedState=t},useState:Vy,useDebugValue:$m,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=Vy(!1),e=t[0];return t=wN.bind(null,t[1]),Qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,s=Qn();if(Ke){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),yt===null)throw Error(ee(349));ti&30||C_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Uy(O_.bind(null,r,i,t),[t]),r.flags|=2048,qa(9,k_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Qn(),e=yt.identifierPrefix;if(Ke){var n=_r,r=xr;n=(r&~(1<<32-Fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ga++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_N++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IN={readContext:Rn,useCallback:F_,useContext:Rn,useEffect:zm,useImperativeHandle:U_,useInsertionEffect:M_,useLayoutEffect:j_,useMemo:B_,useReducer:Fh,useRef:D_,useState:function(){return Fh(Wa)},useDebugValue:$m,useDeferredValue:function(t){var e=Cn();return z_(e,ht.memoizedState,t)},useTransition:function(){var t=Fh(Wa)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:N_,useSyncExternalStore:R_,useId:$_,unstable_isNewReconciler:!1},TN={readContext:Rn,useCallback:F_,useContext:Rn,useEffect:zm,useImperativeHandle:U_,useInsertionEffect:M_,useLayoutEffect:j_,useMemo:B_,useReducer:Bh,useRef:D_,useState:function(){return Bh(Wa)},useDebugValue:$m,useDeferredValue:function(t){var e=Cn();return ht===null?e.memoizedState=t:z_(e,ht.memoizedState,t)},useTransition:function(){var t=Bh(Wa)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:N_,useSyncExternalStore:R_,useId:$_,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ad={isMounted:function(t){return(t=t._reactInternals)?pi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ht(),s=hs(t),i=Tr(r,s);i.payload=e,n!=null&&(i.callback=n),e=us(t,i,s),e!==null&&(Bn(e,t,s,r),zc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ht(),s=hs(t),i=Tr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=us(t,i,s),e!==null&&(Bn(e,t,s,r),zc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),r=hs(t),s=Tr(n,r);s.tag=2,e!=null&&(s.callback=e),e=us(t,s,r),e!==null&&(Bn(e,t,r,n),zc(e,t,r))}};function Fy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ua(n,r)||!Ua(s,i):!0}function q_(t,e,n){var r=!1,s=_s,i=e.contextType;return typeof i=="object"&&i!==null?i=Rn(i):(s=Jt(e)?Js:Ft.current,r=e.contextTypes,i=(r=r!=null)?Ji(t,s):_s),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ad,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function By(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ad.enqueueReplaceState(e,e.state,null)}function Qf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Dm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Rn(i):(i=Jt(e)?Js:Ft.current,s.context=Ji(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Yf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ad.enqueueReplaceState(s,s.state,null),Nu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ro(t,e){try{var n="",r=e;do n+=tT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function zh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NN=typeof WeakMap=="function"?WeakMap:Map;function K_(t,e,n){n=Tr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pu||(Pu=!0,ap=r),Xf(t,e)},n}function Y_(t,e,n){n=Tr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Xf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xf(t,e),typeof r!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=zN.bind(null,t,e,n),e.then(t,t))}function $y(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Tr(-1,1),e.tag=2,us(n,e,1))),n.lanes|=1),t)}var RN=Br.ReactCurrentOwner,Qt=!1;function zt(t,e,n,r){e.child=t===null?S_(e,null,n,r):to(e,t.child,n,r)}function Gy(t,e,n,r,s){n=n.render;var i=e.ref;return Gi(e,s),r=Fm(t,e,n,r,i,s),n=Bm(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pr(t,e,s)):(Ke&&n&&Nm(e),e.flags|=1,zt(t,e,r,s),e.child)}function Wy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Xm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Q_(t,e,i,r,s)):(t=Kc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ua,n(o,r)&&t.ref===e.ref)return Pr(t,e,s)}return e.flags|=1,t=fs(i,r),t.ref=e.ref,t.return=e,e.child=t}function Q_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ua(i,r)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,Pr(t,e,s)}return Zf(t,e,n,r,s)}function X_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Ui,ln),ln|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Ui,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$e(Ui,ln),ln|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,$e(Ui,ln),ln|=r;return zt(t,e,s,n),e.child}function Z_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zf(t,e,n,r,s){var i=Jt(n)?Js:Ft.current;return i=Ji(e,i),Gi(e,s),n=Fm(t,e,n,r,i,s),r=Bm(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pr(t,e,s)):(Ke&&r&&Nm(e),e.flags|=1,zt(t,e,n,s),e.child)}function qy(t,e,n,r,s){if(Jt(n)){var i=!0;bu(e)}else i=!1;if(Gi(e,s),e.stateNode===null)Gc(t,e),q_(e,n,r),Qf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Rn(d):(d=Jt(n)?Js:Ft.current,d=Ji(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==d)&&By(e,o,r,d),Xr=!1;var f=e.memoizedState;o.state=f,Nu(e,r,o,s),c=e.memoizedState,a!==r||f!==c||Zt.current||Xr?(typeof h=="function"&&(Yf(e,n,h,r),c=e.memoizedState),(a=Xr||Fy(e,n,a,r,f,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,I_(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Mn(e.type,a),o.props=d,p=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Rn(c):(c=Jt(n)?Js:Ft.current,c=Ji(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||f!==c)&&By(e,o,r,c),Xr=!1,f=e.memoizedState,o.state=f,Nu(e,r,o,s);var _=e.memoizedState;a!==p||f!==_||Zt.current||Xr?(typeof g=="function"&&(Yf(e,n,g,r),_=e.memoizedState),(d=Xr||Fy(e,n,d,r,f,_,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Jf(t,e,n,r,i,s)}function Jf(t,e,n,r,s,i){Z_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Oy(e,n,!1),Pr(t,e,i);r=e.stateNode,RN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=to(e,t.child,null,i),e.child=to(e,null,a,i)):zt(t,e,a,i),e.memoizedState=r.state,s&&Oy(e,n,!0),e.child}function J_(t){var e=t.stateNode;e.pendingContext?ky(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ky(t,e.context,!1),Mm(t,e.containerInfo)}function Ky(t,e,n,r,s){return eo(),Cm(s),e.flags|=256,zt(t,e,n,r),e.child}var ep={dehydrated:null,treeContext:null,retryLane:0};function tp(t){return{baseLanes:t,cachePool:null,transitions:null}}function ew(t,e,n){var r=e.pendingProps,s=Ze.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(Ze,s&1),t===null)return qf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nd(o,r,0,null),t=Ys(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=tp(n),e.memoizedState=ep,t):Hm(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return CN(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=fs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=fs(a,i):(i=Ys(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?tp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ep,r}return i=t.child,t=i.sibling,r=fs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hm(t,e){return e=Nd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pc(t,e,n,r){return r!==null&&Cm(r),to(e,t.child,null,n),t=Hm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CN(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=zh(Error(ee(422))),pc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Nd({mode:"visible",children:r.children},s,0,null),i=Ys(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&to(e,t.child,null,o),e.child.memoizedState=tp(o),e.memoizedState=ep,i);if(!(e.mode&1))return pc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ee(419)),r=zh(i,r,void 0),pc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Qt||a){if(r=yt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Or(t,s),Bn(r,t,s,-1))}return Qm(),r=zh(Error(ee(421))),pc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=$N.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,un=cs(s.nextSibling),hn=e,Ke=!0,Vn=null,t!==null&&(_n[wn++]=xr,_n[wn++]=_r,_n[wn++]=ei,xr=t.id,_r=t.overflow,ei=e),e=Hm(e,r.children),e.flags|=4096,e)}function Yy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Kf(t.return,e,n)}function $h(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function tw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(zt(t,e,r.children,n),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yy(t,n,e);else if(t.tag===19)Yy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ru(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),$h(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ru(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}$h(e,!0,n,null,i);break;case"together":$h(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ni|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=fs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kN(t,e,n){switch(e.tag){case 3:J_(e),eo();break;case 5:T_(e);break;case 1:Jt(e.type)&&bu(e);break;case 4:Mm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$e(Iu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?ew(t,e,n):($e(Ze,Ze.current&1),t=Pr(t,e,n),t!==null?t.sibling:null);$e(Ze,Ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return tw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,X_(t,e,n)}return Pr(t,e,n)}var nw,np,rw,sw;nw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};np=function(){};rw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Hs(tr.current);var i=null;switch(n){case"input":s=Sf(t,s),r=Sf(t,r),i=[];break;case"select":s=tt({},s,{value:void 0}),r=tt({},r,{value:void 0}),i=[];break;case"textarea":s=Tf(t,s),r=Tf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_u)}Rf(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Oa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Oa.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ge("scroll",t),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};sw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qo(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ON(t,e,n){var r=e.pendingProps;switch(Rm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return Jt(e.type)&&wu(),Pt(e),null;case 3:return r=e.stateNode,no(),We(Zt),We(Ft),Vm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vn!==null&&(up(Vn),Vn=null))),np(t,e),Pt(e),null;case 5:jm(e);var s=Hs(Ha.current);if(n=e.type,t!==null&&e.stateNode!=null)rw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return Pt(e),null}if(t=Hs(tr.current),hc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Xn]=e,r[za]=i,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(s=0;s<ia.length;s++)Ge(ia[s],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":sy(r,i),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ge("invalid",r);break;case"textarea":oy(r,i),Ge("invalid",r)}Rf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&dc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&dc(r.textContent,a,t),s=["children",""+a]):Oa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ge("scroll",r)}switch(n){case"input":rc(r),iy(r,i,!0);break;case"textarea":rc(r),ay(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_u)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ox(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xn]=e,t[za]=r,nw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Cf(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),s=r;break;case"iframe":case"object":case"embed":Ge("load",t),s=r;break;case"video":case"audio":for(s=0;s<ia.length;s++)Ge(ia[s],t);s=r;break;case"source":Ge("error",t),s=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),s=r;break;case"details":Ge("toggle",t),s=r;break;case"input":sy(t,r),s=Sf(t,r),Ge("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=tt({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":oy(t,r),s=Tf(t,r),Ge("invalid",t);break;default:s=r}Rf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Dx(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Px(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Pa(t,c):typeof c=="number"&&Pa(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Oa.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ge("scroll",t):c!=null&&pm(t,i,c,o))}switch(n){case"input":rc(t),iy(t,r,!1);break;case"textarea":rc(t),ay(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Bi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Bi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_u)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)sw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Hs(Ha.current),Hs(tr.current),hc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xn]=e,(i=r.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:dc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xn]=e,e.stateNode=r}return Pt(e),null;case 13:if(We(Ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&un!==null&&e.mode&1&&!(e.flags&128))w_(),eo(),e.flags|=98560,i=!1;else if(i=hc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ee(317));i[Xn]=e}else eo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),i=!1}else Vn!==null&&(up(Vn),Vn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?pt===0&&(pt=3):Qm())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return no(),np(t,e),t===null&&Fa(e.stateNode.containerInfo),Pt(e),null;case 10:return Pm(e.type._context),Pt(e),null;case 17:return Jt(e.type)&&wu(),Pt(e),null;case 19:if(We(Ze),i=e.memoizedState,i===null)return Pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Qo(i,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ru(t),o!==null){for(e.flags|=128,Qo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Ze,Ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&at()>so&&(e.flags|=128,r=!0,Qo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ru(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ke)return Pt(e),null}else 2*at()-i.renderingStartTime>so&&n!==1073741824&&(e.flags|=128,r=!0,Qo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=at(),e.sibling=null,n=Ze.current,$e(Ze,r?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return Ym(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ln&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function PN(t,e){switch(Rm(e),e.tag){case 1:return Jt(e.type)&&wu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return no(),We(Zt),We(Ft),Vm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jm(e),null;case 13:if(We(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));eo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Ze),null;case 4:return no(),null;case 10:return Pm(e.type._context),null;case 22:case 23:return Ym(),null;case 24:return null;default:return null}}var mc=!1,Vt=!1,LN=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Vi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){it(t,e,r)}else n.current=null}function rp(t,e,n){try{n()}catch(r){it(t,e,r)}}var Qy=!1;function DN(t,e){if(Ff=vu,t=c_(),Tm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,h=0,p=t,f=null;t:for(;;){for(var g;p!==n||s!==0&&p.nodeType!==3||(a=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)f=p,p=g;for(;;){if(p===t)break t;if(f===n&&++d===s&&(a=o),f===i&&++h===r&&(c=o),(g=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bf={focusedElem:t,selectionRange:n},vu=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var x=_.memoizedProps,C=_.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?x:Mn(e.type,x),C);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(P){it(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return _=Qy,Qy=!1,_}function Sa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&rp(e,n,i)}s=s.next}while(s!==r)}}function Id(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iw(t){var e=t.alternate;e!==null&&(t.alternate=null,iw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xn],delete e[za],delete e[Hf],delete e[yN],delete e[vN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ow(t){return t.tag===5||t.tag===3||t.tag===4}function Xy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ow(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ip(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_u));else if(r!==4&&(t=t.child,t!==null))for(ip(t,e,n),t=t.sibling;t!==null;)ip(t,e,n),t=t.sibling}function op(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(op(t,e,n),t=t.sibling;t!==null;)op(t,e,n),t=t.sibling}var wt=null,jn=!1;function Kr(t,e,n){for(n=n.child;n!==null;)aw(t,e,n),n=n.sibling}function aw(t,e,n){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(vd,n)}catch{}switch(n.tag){case 5:Vt||Vi(n,e);case 6:var r=wt,s=jn;wt=null,Kr(t,e,n),wt=r,jn=s,wt!==null&&(jn?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(jn?(t=wt,n=n.stateNode,t.nodeType===8?Mh(t.parentNode,n):t.nodeType===1&&Mh(t,n),ja(t)):Mh(wt,n.stateNode));break;case 4:r=wt,s=jn,wt=n.stateNode.containerInfo,jn=!0,Kr(t,e,n),wt=r,jn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&rp(n,e,o),s=s.next}while(s!==r)}Kr(t,e,n);break;case 1:if(!Vt&&(Vi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){it(n,e,a)}Kr(t,e,n);break;case 21:Kr(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,Kr(t,e,n),Vt=r):Kr(t,e,n);break;default:Kr(t,e,n)}}function Zy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new LN),e.forEach(function(r){var s=HN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wt=a.stateNode,jn=!1;break e;case 3:wt=a.stateNode.containerInfo,jn=!0;break e;case 4:wt=a.stateNode.containerInfo,jn=!0;break e}a=a.return}if(wt===null)throw Error(ee(160));aw(i,o,s),wt=null,jn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){it(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lw(e,t),e=e.sibling}function lw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),Kn(t),r&4){try{Sa(3,t,t.return),Id(3,t)}catch(x){it(t,t.return,x)}try{Sa(5,t,t.return)}catch(x){it(t,t.return,x)}}break;case 1:Ln(e,t),Kn(t),r&512&&n!==null&&Vi(n,n.return);break;case 5:if(Ln(e,t),Kn(t),r&512&&n!==null&&Vi(n,n.return),t.flags&32){var s=t.stateNode;try{Pa(s,"")}catch(x){it(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Cx(s,i),Cf(a,o);var d=Cf(a,i);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];h==="style"?Dx(s,p):h==="dangerouslySetInnerHTML"?Px(s,p):h==="children"?Pa(s,p):pm(s,h,p,d)}switch(a){case"input":Af(s,i);break;case"textarea":kx(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Bi(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?Bi(s,!!i.multiple,i.defaultValue,!0):Bi(s,!!i.multiple,i.multiple?[]:"",!1))}s[za]=i}catch(x){it(t,t.return,x)}}break;case 6:if(Ln(e,t),Kn(t),r&4){if(t.stateNode===null)throw Error(ee(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){it(t,t.return,x)}}break;case 3:if(Ln(e,t),Kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ja(e.containerInfo)}catch(x){it(t,t.return,x)}break;case 4:Ln(e,t),Kn(t);break;case 13:Ln(e,t),Kn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qm=at())),r&4&&Zy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(d=Vt)||h,Ln(e,t),Vt=d):Ln(e,t),Kn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ue=t,h=t.child;h!==null;){for(p=ue=h;ue!==null;){switch(f=ue,g=f.child,f.tag){case 0:case 11:case 14:case 15:Sa(4,f,f.return);break;case 1:Vi(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(x){it(r,n,x)}}break;case 5:Vi(f,f.return);break;case 22:if(f.memoizedState!==null){ev(p);continue}}g!==null?(g.return=f,ue=g):ev(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Lx("display",o))}catch(x){it(t,t.return,x)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(x){it(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ln(e,t),Kn(t),r&4&&Zy(t);break;case 21:break;default:Ln(e,t),Kn(t)}}function Kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ow(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Pa(s,""),r.flags&=-33);var i=Xy(t);op(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Xy(t);ip(t,a,o);break;default:throw Error(ee(161))}}catch(c){it(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MN(t,e,n){ue=t,cw(t)}function cw(t,e,n){for(var r=(t.mode&1)!==0;ue!==null;){var s=ue,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||mc;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Vt;a=mc;var d=Vt;if(mc=o,(Vt=c)&&!d)for(ue=s;ue!==null;)o=ue,c=o.child,o.tag===22&&o.memoizedState!==null?tv(s):c!==null?(c.return=o,ue=c):tv(s);for(;i!==null;)ue=i,cw(i),i=i.sibling;ue=s,mc=a,Vt=d}Jy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ue=i):Jy(t)}}function Jy(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||Id(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Mn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&jy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ja(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Vt||e.flags&512&&sp(e)}catch(f){it(e,e.return,f)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function ev(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function tv(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Id(4,e)}catch(c){it(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){it(e,s,c)}}var i=e.return;try{sp(e)}catch(c){it(e,i,c)}break;case 5:var o=e.return;try{sp(e)}catch(c){it(e,o,c)}}}catch(c){it(e,e.return,c)}if(e===t){ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ue=a;break}ue=e.return}}var jN=Math.ceil,Ou=Br.ReactCurrentDispatcher,Gm=Br.ReactCurrentOwner,Nn=Br.ReactCurrentBatchConfig,Oe=0,yt=null,ut=null,At=0,ln=0,Ui=Is(0),pt=0,Ka=null,ni=0,Td=0,Wm=0,Aa=null,Kt=null,qm=0,so=1/0,gr=null,Pu=!1,ap=null,ds=null,gc=!1,ss=null,Lu=0,Ia=0,lp=null,Wc=-1,qc=0;function Ht(){return Oe&6?at():Wc!==-1?Wc:Wc=at()}function hs(t){return t.mode&1?Oe&2&&At!==0?At&-At:xN.transition!==null?(qc===0&&(qc=qx()),qc):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:e_(t.type)),t):1}function Bn(t,e,n,r){if(50<Ia)throw Ia=0,lp=null,Error(ee(185));dl(t,n,r),(!(Oe&2)||t!==yt)&&(t===yt&&(!(Oe&2)&&(Td|=n),pt===4&&Jr(t,At)),en(t,r),n===1&&Oe===0&&!(e.mode&1)&&(so=at()+500,bd&&Ts()))}function en(t,e){var n=t.callbackNode;xT(t,e);var r=yu(t,t===yt?At:0);if(r===0)n!==null&&uy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uy(n),e===1)t.tag===0?EN(nv.bind(null,t)):E_(nv.bind(null,t)),mN(function(){!(Oe&6)&&Ts()}),n=null;else{switch(Kx(r)){case 1:n=Em;break;case 4:n=Gx;break;case 16:n=gu;break;case 536870912:n=Wx;break;default:n=gu}n=yw(n,uw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function uw(t,e){if(Wc=-1,qc=0,Oe&6)throw Error(ee(327));var n=t.callbackNode;if(Wi()&&t.callbackNode!==n)return null;var r=yu(t,t===yt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Du(t,r);else{e=r;var s=Oe;Oe|=2;var i=hw();(yt!==t||At!==e)&&(gr=null,so=at()+500,Ks(t,e));do try{FN();break}catch(a){dw(t,a)}while(!0);Om(),Ou.current=i,Oe=s,ut!==null?e=0:(yt=null,At=0,e=pt)}if(e!==0){if(e===2&&(s=Df(t),s!==0&&(r=s,e=cp(t,s))),e===1)throw n=Ka,Ks(t,0),Jr(t,r),en(t,at()),n;if(e===6)Jr(t,r);else{if(s=t.current.alternate,!(r&30)&&!VN(s)&&(e=Du(t,r),e===2&&(i=Df(t),i!==0&&(r=i,e=cp(t,i))),e===1))throw n=Ka,Ks(t,0),Jr(t,r),en(t,at()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:Fs(t,Kt,gr);break;case 3:if(Jr(t,r),(r&130023424)===r&&(e=qm+500-at(),10<e)){if(yu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ht(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=$f(Fs.bind(null,t,Kt,gr),e);break}Fs(t,Kt,gr);break;case 4:if(Jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Fn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jN(r/1960))-r,10<r){t.timeoutHandle=$f(Fs.bind(null,t,Kt,gr),r);break}Fs(t,Kt,gr);break;case 5:Fs(t,Kt,gr);break;default:throw Error(ee(329))}}}return en(t,at()),t.callbackNode===n?uw.bind(null,t):null}function cp(t,e){var n=Aa;return t.current.memoizedState.isDehydrated&&(Ks(t,e).flags|=256),t=Du(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&up(e)),t}function up(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function VN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!$n(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jr(t,e){for(e&=~Wm,e&=~Td,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fn(e),r=1<<n;t[n]=-1,e&=~r}}function nv(t){if(Oe&6)throw Error(ee(327));Wi();var e=yu(t,0);if(!(e&1))return en(t,at()),null;var n=Du(t,e);if(t.tag!==0&&n===2){var r=Df(t);r!==0&&(e=r,n=cp(t,r))}if(n===1)throw n=Ka,Ks(t,0),Jr(t,e),en(t,at()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fs(t,Kt,gr),en(t,at()),null}function Km(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(so=at()+500,bd&&Ts())}}function ri(t){ss!==null&&ss.tag===0&&!(Oe&6)&&Wi();var e=Oe;Oe|=1;var n=Nn.transition,r=Ue;try{if(Nn.transition=null,Ue=1,t)return t()}finally{Ue=r,Nn.transition=n,Oe=e,!(Oe&6)&&Ts()}}function Ym(){ln=Ui.current,We(Ui)}function Ks(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pN(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(Rm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wu();break;case 3:no(),We(Zt),We(Ft),Vm();break;case 5:jm(r);break;case 4:no();break;case 13:We(Ze);break;case 19:We(Ze);break;case 10:Pm(r.type._context);break;case 22:case 23:Ym()}n=n.return}if(yt=t,ut=t=fs(t.current,null),At=ln=e,pt=0,Ka=null,Wm=Td=ni=0,Kt=Aa=null,$s!==null){for(e=0;e<$s.length;e++)if(n=$s[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}$s=null}return t}function dw(t,e){do{var n=ut;try{if(Om(),$c.current=ku,Cu){for(var r=et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cu=!1}if(ti=0,gt=ht=et=null,ba=!1,Ga=0,Gm.current=null,n===null||n.return===null){pt=1,Ka=e,ut=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=At,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=$y(o);if(g!==null){g.flags&=-257,Hy(g,o,a,i,e),g.mode&1&&zy(i,d,e),e=g,c=d;var _=e.updateQueue;if(_===null){var x=new Set;x.add(c),e.updateQueue=x}else _.add(c);break e}else{if(!(e&1)){zy(i,d,e),Qm();break e}c=Error(ee(426))}}else if(Ke&&a.mode&1){var C=$y(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Hy(C,o,a,i,e),Cm(ro(c,a));break e}}i=c=ro(c,a),pt!==4&&(pt=2),Aa===null?Aa=[i]:Aa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=K_(i,c,e);My(i,E);break e;case 1:a=c;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ds===null||!ds.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=Y_(i,a,e);My(i,P);break e}}i=i.return}while(i!==null)}pw(n)}catch(D){e=D,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function hw(){var t=Ou.current;return Ou.current=ku,t===null?ku:t}function Qm(){(pt===0||pt===3||pt===2)&&(pt=4),yt===null||!(ni&268435455)&&!(Td&268435455)||Jr(yt,At)}function Du(t,e){var n=Oe;Oe|=2;var r=hw();(yt!==t||At!==e)&&(gr=null,Ks(t,e));do try{UN();break}catch(s){dw(t,s)}while(!0);if(Om(),Oe=n,Ou.current=r,ut!==null)throw Error(ee(261));return yt=null,At=0,pt}function UN(){for(;ut!==null;)fw(ut)}function FN(){for(;ut!==null&&!dT();)fw(ut)}function fw(t){var e=gw(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?pw(t):ut=e,Gm.current=null}function pw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PN(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ut=null;return}}else if(n=ON(n,e,ln),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);pt===0&&(pt=5)}function Fs(t,e,n){var r=Ue,s=Nn.transition;try{Nn.transition=null,Ue=1,BN(t,e,n,r)}finally{Nn.transition=s,Ue=r}return null}function BN(t,e,n,r){do Wi();while(ss!==null);if(Oe&6)throw Error(ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(_T(t,i),t===yt&&(ut=yt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gc||(gc=!0,yw(gu,function(){return Wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nn.transition,Nn.transition=null;var o=Ue;Ue=1;var a=Oe;Oe|=4,Gm.current=null,DN(t,n),lw(n,t),aN(Bf),vu=!!Ff,Bf=Ff=null,t.current=n,MN(n),hT(),Oe=a,Ue=o,Nn.transition=i}else t.current=n;if(gc&&(gc=!1,ss=t,Lu=s),i=t.pendingLanes,i===0&&(ds=null),mT(n.stateNode),en(t,at()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Pu)throw Pu=!1,t=ap,ap=null,t;return Lu&1&&t.tag!==0&&Wi(),i=t.pendingLanes,i&1?t===lp?Ia++:(Ia=0,lp=t):Ia=0,Ts(),null}function Wi(){if(ss!==null){var t=Kx(Lu),e=Nn.transition,n=Ue;try{if(Nn.transition=null,Ue=16>t?16:t,ss===null)var r=!1;else{if(t=ss,ss=null,Lu=0,Oe&6)throw Error(ee(331));var s=Oe;for(Oe|=4,ue=t.current;ue!==null;){var i=ue,o=i.child;if(ue.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(ue=d;ue!==null;){var h=ue;switch(h.tag){case 0:case 11:case 15:Sa(8,h,i)}var p=h.child;if(p!==null)p.return=h,ue=p;else for(;ue!==null;){h=ue;var f=h.sibling,g=h.return;if(iw(h),h===d){ue=null;break}if(f!==null){f.return=g,ue=f;break}ue=g}}}var _=i.alternate;if(_!==null){var x=_.child;if(x!==null){_.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ue=o;else e:for(;ue!==null;){if(i=ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Sa(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ue=E;break e}ue=i.return}}var w=t.current;for(ue=w;ue!==null;){o=ue;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ue=b;else e:for(o=w;ue!==null;){if(a=ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Id(9,a)}}catch(D){it(a,a.return,D)}if(a===o){ue=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,ue=P;break e}ue=a.return}}if(Oe=s,Ts(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(vd,t)}catch{}r=!0}return r}finally{Ue=n,Nn.transition=e}}return!1}function rv(t,e,n){e=ro(n,e),e=K_(t,e,1),t=us(t,e,1),e=Ht(),t!==null&&(dl(t,1,e),en(t,e))}function it(t,e,n){if(t.tag===3)rv(t,t,n);else for(;e!==null;){if(e.tag===3){rv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ds===null||!ds.has(r))){t=ro(n,t),t=Y_(e,t,1),e=us(e,t,1),t=Ht(),e!==null&&(dl(e,1,t),en(e,t));break}}e=e.return}}function zN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(At&n)===n&&(pt===4||pt===3&&(At&130023424)===At&&500>at()-qm?Ks(t,0):Wm|=n),en(t,e)}function mw(t,e){e===0&&(t.mode&1?(e=oc,oc<<=1,!(oc&130023424)&&(oc=4194304)):e=1);var n=Ht();t=Or(t,e),t!==null&&(dl(t,e,n),en(t,n))}function $N(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mw(t,n)}function HN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),mw(t,n)}var gw;gw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,kN(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,Ke&&e.flags&1048576&&x_(e,Au,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gc(t,e),t=e.pendingProps;var s=Ji(e,Ft.current);Gi(e,n),s=Fm(null,e,r,t,s,n);var i=Bm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(r)?(i=!0,bu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Dm(e),s.updater=Ad,e.stateNode=s,s._reactInternals=e,Qf(e,r,t,n),e=Jf(null,e,r,!0,i,n)):(e.tag=0,Ke&&i&&Nm(e),zt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=WN(r),t=Mn(r,t),s){case 0:e=Zf(null,e,r,t,n);break e;case 1:e=qy(null,e,r,t,n);break e;case 11:e=Gy(null,e,r,t,n);break e;case 14:e=Wy(null,e,r,Mn(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mn(r,s),Zf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mn(r,s),qy(t,e,r,s,n);case 3:e:{if(J_(e),t===null)throw Error(ee(387));r=e.pendingProps,i=e.memoizedState,s=i.element,I_(t,e),Nu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ro(Error(ee(423)),e),e=Ky(t,e,r,n,s);break e}else if(r!==s){s=ro(Error(ee(424)),e),e=Ky(t,e,r,n,s);break e}else for(un=cs(e.stateNode.containerInfo.firstChild),hn=e,Ke=!0,Vn=null,n=S_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(eo(),r===s){e=Pr(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return T_(e),t===null&&qf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,zf(r,s)?o=null:i!==null&&zf(r,i)&&(e.flags|=32),Z_(t,e),zt(t,e,o,n),e.child;case 6:return t===null&&qf(e),null;case 13:return ew(t,e,n);case 4:return Mm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=to(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mn(r,s),Gy(t,e,r,s,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,$e(Iu,r._currentValue),r._currentValue=o,i!==null)if($n(i.value,o)){if(i.children===s.children&&!Zt.current){e=Pr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Tr(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Kf(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Kf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}zt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Gi(e,n),s=Rn(s),r=r(s),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,s=Mn(r,e.pendingProps),s=Mn(r.type,s),Wy(t,e,r,s,n);case 15:return Q_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mn(r,s),Gc(t,e),e.tag=1,Jt(r)?(t=!0,bu(e)):t=!1,Gi(e,n),q_(e,r,s),Qf(e,r,s,n),Jf(null,e,r,!0,t,n);case 19:return tw(t,e,n);case 22:return X_(t,e,n)}throw Error(ee(156,e.tag))};function yw(t,e){return Hx(t,e)}function GN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,r){return new GN(t,e,n,r)}function Xm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WN(t){if(typeof t=="function")return Xm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gm)return 11;if(t===ym)return 14}return 2}function fs(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Xm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ri:return Ys(n.children,s,i,e);case mm:o=8,s|=8;break;case xf:return t=An(12,n,e,s|2),t.elementType=xf,t.lanes=i,t;case _f:return t=An(13,n,e,s),t.elementType=_f,t.lanes=i,t;case wf:return t=An(19,n,e,s),t.elementType=wf,t.lanes=i,t;case Tx:return Nd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ax:o=10;break e;case Ix:o=9;break e;case gm:o=11;break e;case ym:o=14;break e;case Qr:o=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=An(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ys(t,e,n,r){return t=An(7,t,r,e),t.lanes=n,t}function Nd(t,e,n,r){return t=An(22,t,r,e),t.elementType=Tx,t.lanes=n,t.stateNode={isHidden:!1},t}function Hh(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function Gh(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ah(0),this.expirationTimes=Ah(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ah(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Zm(t,e,n,r,s,i,o,a,c){return t=new qN(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=An(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dm(i),t}function KN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ni,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vw(t){if(!t)return _s;t=t._reactInternals;e:{if(pi(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(Jt(n))return v_(t,n,e)}return e}function Ew(t,e,n,r,s,i,o,a,c){return t=Zm(n,r,!0,t,s,i,o,a,c),t.context=vw(null),n=t.current,r=Ht(),s=hs(n),i=Tr(r,s),i.callback=e??null,us(n,i,s),t.current.lanes=s,dl(t,s,r),en(t,r),t}function Rd(t,e,n,r){var s=e.current,i=Ht(),o=hs(s);return n=vw(n),e.context===null?e.context=n:e.pendingContext=n,e=Tr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=us(s,e,o),t!==null&&(Bn(t,s,o,i),zc(t,s,o)),o}function Mu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jm(t,e){sv(t,e),(t=t.alternate)&&sv(t,e)}function YN(){return null}var xw=typeof reportError=="function"?reportError:function(t){console.error(t)};function eg(t){this._internalRoot=t}Cd.prototype.render=eg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Rd(t,e,null,null)};Cd.prototype.unmount=eg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ri(function(){Rd(null,t,null,null)}),e[kr]=null}};function Cd(t){this._internalRoot=t}Cd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zr.length&&e!==0&&e<Zr[n].priority;n++);Zr.splice(n,0,t),n===0&&Jx(t)}};function tg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function iv(){}function QN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Mu(o);i.call(d)}}var o=Ew(e,r,t,0,null,!1,!1,"",iv);return t._reactRootContainer=o,t[kr]=o.current,Fa(t.nodeType===8?t.parentNode:t),ri(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=Mu(c);a.call(d)}}var c=Zm(t,0,!1,null,null,!1,!1,"",iv);return t._reactRootContainer=c,t[kr]=c.current,Fa(t.nodeType===8?t.parentNode:t),ri(function(){Rd(e,c,n,r)}),c}function Od(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Mu(o);a.call(c)}}Rd(e,o,t,s)}else o=QN(n,e,t,s,r);return Mu(o)}Yx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=sa(e.pendingLanes);n!==0&&(xm(e,n|1),en(e,at()),!(Oe&6)&&(so=at()+500,Ts()))}break;case 13:ri(function(){var r=Or(t,1);if(r!==null){var s=Ht();Bn(r,t,1,s)}}),Jm(t,1)}};_m=function(t){if(t.tag===13){var e=Or(t,134217728);if(e!==null){var n=Ht();Bn(e,t,134217728,n)}Jm(t,134217728)}};Qx=function(t){if(t.tag===13){var e=hs(t),n=Or(t,e);if(n!==null){var r=Ht();Bn(n,t,e,r)}Jm(t,e)}};Xx=function(){return Ue};Zx=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};Of=function(t,e,n){switch(e){case"input":if(Af(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=wd(r);if(!s)throw Error(ee(90));Rx(r),Af(r,s)}}}break;case"textarea":kx(t,n);break;case"select":e=n.value,e!=null&&Bi(t,!!n.multiple,e,!1)}};Vx=Km;Ux=ri;var XN={usingClientEntryPoint:!1,Events:[fl,Pi,wd,Mx,jx,Km]},Xo={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZN={bundleType:Xo.bundleType,version:Xo.version,rendererPackageName:Xo.rendererPackageName,rendererConfig:Xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Br.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zx(t),t===null?null:t.stateNode},findFiberByHostInstance:Xo.findFiberByHostInstance||YN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{vd=yc.inject(ZN),er=yc}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XN;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tg(e))throw Error(ee(200));return KN(t,e,null,n)};mn.createRoot=function(t,e){if(!tg(t))throw Error(ee(299));var n=!1,r="",s=xw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Zm(t,1,!1,null,null,n,!1,r,s),t[kr]=e.current,Fa(t.nodeType===8?t.parentNode:t),new eg(e)};mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=zx(e),t=t===null?null:t.stateNode,t};mn.flushSync=function(t){return ri(t)};mn.hydrate=function(t,e,n){if(!kd(e))throw Error(ee(200));return Od(null,t,e,!0,n)};mn.hydrateRoot=function(t,e,n){if(!tg(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=xw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ew(e,null,t,1,n??null,s,!1,i,o),t[kr]=e.current,Fa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Cd(e)};mn.render=function(t,e,n){if(!kd(e))throw Error(ee(200));return Od(null,t,e,!1,n)};mn.unmountComponentAtNode=function(t){if(!kd(t))throw Error(ee(40));return t._reactRootContainer?(ri(function(){Od(null,null,t,!1,function(){t._reactRootContainer=null,t[kr]=null})}),!0):!1};mn.unstable_batchedUpdates=Km;mn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kd(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Od(t,e,n,!1,r)};mn.version="18.3.1-next-f1338f8080-20240426";function _w(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_w)}catch(t){console.error(t)}}_w(),_x.exports=mn;var JN=_x.exports,ov=JN;vf.createRoot=ov.createRoot,vf.hydrateRoot=ov.hydrateRoot;const e1="modulepreload",t1=function(t){return"/"+t},av={},n1=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=t1(c),c in av)return;av[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":e1,d||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),d)return new Promise((f,g)=>{p.addEventListener("load",f),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var lv="popstate";function r1(t={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return dp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ya(s)}return i1(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Hn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s1(){return Math.random().toString(36).substring(2,10)}function cv(t,e){return{usr:t.state,key:t.key,idx:e}}function dp(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?bo(e):e,state:n,key:e&&e.key||r||s1()}}function Ya({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function bo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function i1(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",c=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function p(){a="POP";let C=h(),E=C==null?null:C-d;d=C,c&&c({action:a,location:x.location,delta:E})}function f(C,E){a="PUSH";let w=dp(x.location,C,E);d=h()+1;let b=cv(w,d),P=x.createHref(w);try{o.pushState(b,"",P)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(P)}i&&c&&c({action:a,location:x.location,delta:1})}function g(C,E){a="REPLACE";let w=dp(x.location,C,E);d=h();let b=cv(w,d),P=x.createHref(w);o.replaceState(b,"",P),i&&c&&c({action:a,location:x.location,delta:0})}function _(C){return o1(C)}let x={get action(){return a},get location(){return t(s,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(lv,p),c=C,()=>{s.removeEventListener(lv,p),c=null}},createHref(C){return e(s,C)},createURL:_,encodeLocation(C){let E=_(C);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:g,go(C){return o.go(C)}};return x}function o1(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Qe(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ya(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function ww(t,e,n="/"){return a1(t,e,n,!1)}function a1(t,e,n,r){let s=typeof e=="string"?bo(e):e,i=Lr(s.pathname||"/",n);if(i==null)return null;let o=bw(t);l1(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let d=E1(i);a=y1(o[c],d,r)}return a}function bw(t,e=[],n=[],r="",s=!1){let i=(o,a,c=s,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;Qe(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=Nr([r,h.relativePath]),f=n.concat(h);o.children&&o.children.length>0&&(Qe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),bw(o.children,e,f,p,c)),!(o.path==null&&!o.index)&&e.push({path:p,score:m1(p,o.index),routesMeta:f})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,a);else for(let d of Sw(o.path))i(o,a,!0,d)}),e}function Sw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Sw(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function l1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:g1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var c1=/^:[\w-]+$/,u1=3,d1=2,h1=1,f1=10,p1=-2,uv=t=>t==="*";function m1(t,e){let n=t.split("/"),r=n.length;return n.some(uv)&&(r+=p1),e&&(r+=d1),n.filter(s=>!uv(s)).reduce((s,i)=>s+(c1.test(i)?u1:i===""?h1:f1),r)}function g1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function y1(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],d=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=ju({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),f=c.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=ju({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Nr([i,p.pathname]),pathnameBase:b1(Nr([i,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(i=Nr([i,p.pathnameBase]))}return o}function ju(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=v1(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},f)=>{if(h==="*"){let _=a[f]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const g=a[f];return p&&!g?d[h]=void 0:d[h]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function v1(t,e=!1,n=!0){Hn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function E1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Lr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var x1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function _1(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?bo(t):t,i;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?i=dv(n.substring(1),"/"):i=dv(n,e)):i=e,{pathname:i,search:S1(r),hash:A1(s)}}function dv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Wh(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function w1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ng(t){let e=w1(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function rg(t,e,n,r=!1){let s;typeof t=="string"?s=bo(t):(s={...t},Qe(!s.pathname||!s.pathname.includes("?"),Wh("?","pathname","search",s)),Qe(!s.pathname||!s.pathname.includes("#"),Wh("#","pathname","hash",s)),Qe(!s.search||!s.search.includes("#"),Wh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),p-=1;s.pathname=f.join("/")}a=p>=0?e[p]:"/"}let c=_1(s,a),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var Nr=t=>t.join("/").replace(/\/\/+/g,"/"),b1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),S1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,A1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,I1=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function T1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function N1(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Aw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Iw(t,e){let n=t;if(typeof n!="string"||!x1.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(Aw)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),a=Lr(o.pathname,e);o.origin===i.origin&&a!=null?n=a+o.search+o.hash:s=!0}catch{Hn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Tw=["POST","PUT","PATCH","DELETE"];new Set(Tw);var R1=["GET",...Tw];new Set(R1);var So=N.createContext(null);So.displayName="DataRouter";var Pd=N.createContext(null);Pd.displayName="DataRouterState";var C1=N.createContext(!1),Nw=N.createContext({isTransitioning:!1});Nw.displayName="ViewTransition";var k1=N.createContext(new Map);k1.displayName="Fetchers";var O1=N.createContext(null);O1.displayName="Await";var yn=N.createContext(null);yn.displayName="Navigation";var ml=N.createContext(null);ml.displayName="Location";var cr=N.createContext({outlet:null,matches:[],isDataRoute:!1});cr.displayName="Route";var sg=N.createContext(null);sg.displayName="RouteError";var Rw="REACT_ROUTER_ERROR",P1="REDIRECT",L1="ROUTE_ERROR_RESPONSE";function D1(t){if(t.startsWith(`${Rw}:${P1}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function M1(t){if(t.startsWith(`${Rw}:${L1}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new I1(e.status,e.statusText,e.data)}catch{}}function j1(t,{relative:e}={}){Qe(Ao(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=N.useContext(yn),{hash:s,pathname:i,search:o}=yl(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:Nr([n,i])),r.createHref({pathname:a,search:o,hash:s})}function Ao(){return N.useContext(ml)!=null}function Ns(){return Qe(Ao(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(ml).location}var Cw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kw(t){N.useContext(yn).static||N.useLayoutEffect(t)}function gl(){let{isDataRoute:t}=N.useContext(cr);return t?Q1():V1()}function V1(){Qe(Ao(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(So),{basename:e,navigator:n}=N.useContext(yn),{matches:r}=N.useContext(cr),{pathname:s}=Ns(),i=JSON.stringify(ng(r)),o=N.useRef(!1);return kw(()=>{o.current=!0}),N.useCallback((c,d={})=>{if(Hn(o.current,Cw),!o.current)return;if(typeof c=="number"){n.go(c);return}let h=rg(c,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Nr([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,s,t])}N.createContext(null);function yl(t,{relative:e}={}){let{matches:n}=N.useContext(cr),{pathname:r}=Ns(),s=JSON.stringify(ng(n));return N.useMemo(()=>rg(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function U1(t,e){return Ow(t,e)}function Ow(t,e,n,r,s){var w;Qe(Ao(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=N.useContext(yn),{matches:o}=N.useContext(cr),a=o[o.length-1],c=a?a.params:{},d=a?a.pathname:"/",h=a?a.pathnameBase:"/",p=a&&a.route;{let b=p&&p.path||"";Lw(d,!p||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=Ns(),g;if(e){let b=typeof e=="string"?bo(e):e;Qe(h==="/"||((w=b.pathname)==null?void 0:w.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${b.pathname}" was given in the \`location\` prop.`),g=b}else g=f;let _=g.pathname||"/",x=_;if(h!=="/"){let b=h.replace(/^\//,"").split("/");x="/"+_.replace(/^\//,"").split("/").slice(b.length).join("/")}let C=ww(t,{pathname:x});Hn(p||C!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Hn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=H1(C&&C.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:Nr([h,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:Nr([h,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),o,n,r,s);return e&&E?N.createElement(ml.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},E):E}function F1(){let t=Y1(),e=T1(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:i},"ErrorBoundary")," or"," ",N.createElement("code",{style:i},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:s},n):null,o)}var B1=N.createElement(F1,null),Pw=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=M1(t.digest);n&&(t=n)}let e=t!==void 0?N.createElement(cr.Provider,{value:this.props.routeContext},N.createElement(sg.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?N.createElement(z1,{error:t},e):e}};Pw.contextType=C1;var qh=new WeakMap;function z1({children:t,error:e}){let{basename:n}=N.useContext(yn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=D1(e.digest);if(r){let s=qh.get(e);if(s)throw s;let i=Iw(r.location,n);if(Aw&&!qh.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw qh.set(e,o),o}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function $1({routeContext:t,match:e,children:n}){let r=N.useContext(So);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(cr.Provider,{value:t},n)}function H1(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let h=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);Qe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let a=!1,c=-1;if(n)for(let h=0;h<i.length;h++){let p=i[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:f,errors:g}=n,_=p.route.loader&&!f.hasOwnProperty(p.route.id)&&(!g||g[p.route.id]===void 0);if(p.route.lazy||_){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=n&&r?(h,p)=>{var f,g;r(h,{location:n.location,params:((g=(f=n.matches)==null?void 0:f[0])==null?void 0:g.params)??{},unstable_pattern:N1(n.matches),errorInfo:p})}:void 0;return i.reduceRight((h,p,f)=>{let g,_=!1,x=null,C=null;n&&(g=o&&p.route.id?o[p.route.id]:void 0,x=p.route.errorElement||B1,a&&(c<0&&f===0?(Lw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,C=null):c===f&&(_=!0,C=p.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,f+1)),w=()=>{let b;return g?b=x:_?b=C:p.route.Component?b=N.createElement(p.route.Component,null):p.route.element?b=p.route.element:b=h,N.createElement($1,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:b})};return n&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?N.createElement(Pw,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:d}):w()},null)}function ig(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G1(t){let e=N.useContext(So);return Qe(e,ig(t)),e}function W1(t){let e=N.useContext(Pd);return Qe(e,ig(t)),e}function q1(t){let e=N.useContext(cr);return Qe(e,ig(t)),e}function og(t){let e=q1(t),n=e.matches[e.matches.length-1];return Qe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function K1(){return og("useRouteId")}function Y1(){var r;let t=N.useContext(sg),e=W1("useRouteError"),n=og("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Q1(){let{router:t}=G1("useNavigate"),e=og("useNavigate"),n=N.useRef(!1);return kw(()=>{n.current=!0}),N.useCallback(async(s,i={})=>{Hn(n.current,Cw),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var hv={};function Lw(t,e,n){!e&&!hv[t]&&(hv[t]=!0,Hn(!1,n))}N.memo(X1);function X1({routes:t,future:e,state:n,onError:r}){return Ow(t,void 0,n,r,e)}function vc({to:t,replace:e,state:n,relative:r}){Qe(Ao(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=N.useContext(yn);Hn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=N.useContext(cr),{pathname:o}=Ns(),a=gl(),c=rg(t,ng(i),o,r==="path"),d=JSON.stringify(c);return N.useEffect(()=>{a(JSON.parse(d),{replace:e,state:n,relative:r})},[a,d,r,e,n]),null}function Yn(t){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Z1({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){Qe(!Ao(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:a,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[a,s,i,o]);typeof n=="string"&&(n=bo(n));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:g="default"}=n,_=N.useMemo(()=>{let x=Lr(d,a);return x==null?null:{location:{pathname:x,search:h,hash:p,state:f,key:g},navigationType:r}},[a,d,h,p,f,g,r]);return Hn(_!=null,`<Router basename="${a}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:N.createElement(yn.Provider,{value:c},N.createElement(ml.Provider,{children:e,value:_}))}function J1({children:t,location:e}){return U1(hp(t),e)}function hp(t,e=[]){let n=[];return N.Children.forEach(t,(r,s)=>{if(!N.isValidElement(r))return;let i=[...e,s];if(r.type===N.Fragment){n.push.apply(n,hp(r.props.children,i));return}Qe(r.type===Yn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=hp(r.props.children,i)),n.push(o)}),n}var Yc="get",Qc="application/x-www-form-urlencoded";function Ld(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function eR(t){return Ld(t)&&t.tagName.toLowerCase()==="button"}function tR(t){return Ld(t)&&t.tagName.toLowerCase()==="form"}function nR(t){return Ld(t)&&t.tagName.toLowerCase()==="input"}function rR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sR(t,e){return t.button===0&&(!e||e==="_self")&&!rR(t)}var Ec=null;function iR(){if(Ec===null)try{new FormData(document.createElement("form"),0),Ec=!1}catch{Ec=!0}return Ec}var oR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kh(t){return t!=null&&!oR.has(t)?(Hn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qc}"`),null):t}function aR(t,e){let n,r,s,i,o;if(tR(t)){let a=t.getAttribute("action");r=a?Lr(a,e):null,n=t.getAttribute("method")||Yc,s=Kh(t.getAttribute("enctype"))||Qc,i=new FormData(t)}else if(eR(t)||nR(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||a.getAttribute("action");if(r=c?Lr(c,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Yc,s=Kh(t.getAttribute("formenctype"))||Kh(a.getAttribute("enctype"))||Qc,i=new FormData(a,t),!iR()){let{name:d,type:h,value:p}=t;if(h==="image"){let f=d?`${d}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else d&&i.append(d,p)}}else{if(Ld(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yc,r=null,s=Qc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ag(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lR(t,e,n,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Lr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function cR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function dR(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await cR(i,n);return o.links?o.links():[]}return[]}));return mR(r.flat(1).filter(uR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function fv(t,e,n,r,s,i){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,a=(c,d)=>{var h;return n[d].pathname!==c.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,d)=>o(c,d)||a(c,d)):i==="data"?e.filter((c,d)=>{var p;let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,d)||a(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function hR(t,e,{includeHydrateFallback:n}={}){return fR(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function fR(t){return[...new Set(t)]}function pR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function mR(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(pR(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function Dw(){let t=N.useContext(So);return ag(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function gR(){let t=N.useContext(Pd);return ag(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var lg=N.createContext(void 0);lg.displayName="FrameworkContext";function Mw(){let t=N.useContext(lg);return ag(t,"You must render this element inside a <HydratedRouter> element"),t}function yR(t,e){let n=N.useContext(lg),[r,s]=N.useState(!1),[i,o]=N.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,f=N.useRef(null);N.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let x=E=>{E.forEach(w=>{o(w.isIntersecting)})},C=new IntersectionObserver(x,{threshold:.5});return f.current&&C.observe(f.current),()=>{C.disconnect()}}},[t]),N.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let g=()=>{s(!0)},_=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,f,{}]:[i,f,{onFocus:Zo(a,g),onBlur:Zo(c,_),onMouseEnter:Zo(d,g),onMouseLeave:Zo(h,_),onTouchStart:Zo(p,g)}]:[!1,f,{}]}function Zo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function vR({page:t,...e}){let{router:n}=Dw(),r=N.useMemo(()=>ww(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?N.createElement(xR,{page:t,matches:r,...e}):null}function ER(t){let{manifest:e,routeModules:n}=Mw(),[r,s]=N.useState([]);return N.useEffect(()=>{let i=!1;return dR(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function xR({page:t,matches:e,...n}){let r=Ns(),{future:s,manifest:i,routeModules:o}=Mw(),{basename:a}=Dw(),{loaderData:c,matches:d}=gR(),h=N.useMemo(()=>fv(t,e,d,i,r,"data"),[t,e,d,i,r]),p=N.useMemo(()=>fv(t,e,d,i,r,"assets"),[t,e,d,i,r]),f=N.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,C=!1;if(e.forEach(w=>{var P;let b=i.routes[w.route.id];!b||!b.hasLoader||(!h.some(D=>D.route.id===w.route.id)&&w.route.id in c&&((P=o[w.route.id])!=null&&P.shouldRevalidate)||b.hasClientLoader?C=!0:x.add(w.route.id))}),x.size===0)return[];let E=lR(t,a,s.unstable_trailingSlashAwareDataRequests,"data");return C&&x.size>0&&E.searchParams.set("_routes",e.filter(w=>x.has(w.route.id)).map(w=>w.route.id).join(",")),[E.pathname+E.search]},[a,s.unstable_trailingSlashAwareDataRequests,c,r,i,h,e,t,o]),g=N.useMemo(()=>hR(p,i),[p,i]),_=ER(p);return N.createElement(N.Fragment,null,f.map(x=>N.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),g.map(x=>N.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),_.map(({key:x,link:C})=>N.createElement("link",{key:x,nonce:n.nonce,...C,crossOrigin:C.crossOrigin??n.crossOrigin})))}function _R(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var wR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wR&&(window.__reactRouterVersion="7.13.0")}catch{}function bR({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=N.useRef();s.current==null&&(s.current=r1({window:r,v5Compat:!0}));let i=s.current,[o,a]=N.useState({action:i.action,location:i.location}),c=N.useCallback(d=>{n===!1?a(d):N.startTransition(()=>a(d))},[n]);return N.useLayoutEffect(()=>i.listen(c),[i,c]),N.createElement(Z1,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var jw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vw=N.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:c,to:d,preventScrollReset:h,viewTransition:p,unstable_defaultShouldRevalidate:f,...g},_){let{basename:x,unstable_useTransitions:C}=N.useContext(yn),E=typeof d=="string"&&jw.test(d),w=Iw(d,x);d=w.to;let b=j1(d,{relative:s}),[P,D,j]=yR(r,g),I=TR(d,{replace:o,state:a,target:c,preventScrollReset:h,relative:s,viewTransition:p,unstable_defaultShouldRevalidate:f,unstable_useTransitions:C});function v(A){e&&e(A),A.defaultPrevented||I(A)}let S=N.createElement("a",{...g,...j,href:w.absoluteURL||b,onClick:w.isExternal||i?e:v,ref:_R(_,D),target:c,"data-discover":!E&&n==="render"?"true":void 0});return P&&!E?N.createElement(N.Fragment,null,S,N.createElement(vR,{page:b})):S});Vw.displayName="Link";var SR=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:c,...d},h){let p=yl(o,{relative:d.relative}),f=Ns(),g=N.useContext(Pd),{navigator:_,basename:x}=N.useContext(yn),C=g!=null&&OR(p)&&a===!0,E=_.encodeLocation?_.encodeLocation(p).pathname:p.pathname,w=f.pathname,b=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(w=w.toLowerCase(),b=b?b.toLowerCase():null,E=E.toLowerCase()),b&&x&&(b=Lr(b,x)||b);const P=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let D=w===E||!s&&w.startsWith(E)&&w.charAt(P)==="/",j=b!=null&&(b===E||!s&&b.startsWith(E)&&b.charAt(E.length)==="/"),I={isActive:D,isPending:j,isTransitioning:C},v=D?e:void 0,S;typeof r=="function"?S=r(I):S=[r,D?"active":null,j?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let A=typeof i=="function"?i(I):i;return N.createElement(Vw,{...d,"aria-current":v,className:S,ref:h,style:A,to:o,viewTransition:a},typeof c=="function"?c(I):c)});SR.displayName="NavLink";var AR=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Yc,action:a,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:p,unstable_defaultShouldRevalidate:f,...g},_)=>{let{unstable_useTransitions:x}=N.useContext(yn),C=CR(),E=kR(a,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&jw.test(a),P=D=>{if(c&&c(D),D.defaultPrevented)return;D.preventDefault();let j=D.nativeEvent.submitter,I=(j==null?void 0:j.getAttribute("formmethod"))||o,v=()=>C(j||D.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:s,state:i,relative:d,preventScrollReset:h,viewTransition:p,unstable_defaultShouldRevalidate:f});x&&n!==!1?N.startTransition(()=>v()):v()};return N.createElement("form",{ref:_,method:w,action:E,onSubmit:r?c:P,...g,"data-discover":!b&&t==="render"?"true":void 0})});AR.displayName="Form";function IR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Uw(t){let e=N.useContext(So);return Qe(e,IR(t)),e}function TR(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:a,unstable_useTransitions:c}={}){let d=gl(),h=Ns(),p=yl(t,{relative:i});return N.useCallback(f=>{if(sR(f,e)){f.preventDefault();let g=n!==void 0?n:Ya(h)===Ya(p),_=()=>d(t,{replace:g,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:a});c?N.startTransition(()=>_()):_()}},[h,d,p,n,r,e,t,s,i,o,a,c])}var NR=0,RR=()=>`__${String(++NR)}__`;function CR(){let{router:t}=Uw("useSubmit"),{basename:e}=N.useContext(yn),n=K1(),r=t.fetch,s=t.navigate;return N.useCallback(async(i,o={})=>{let{action:a,method:c,encType:d,formData:h,body:p}=aR(i,e);if(o.navigate===!1){let f=o.fetcherKey||RR();await r(f,n,o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await s(o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function kR(t,{relative:e}={}){let{basename:n}=N.useContext(yn),r=N.useContext(cr);Qe(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...yl(t||".",{relative:e})},o=Ns();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),c=a.getAll("index");if(c.some(h=>h==="")){a.delete("index"),c.filter(p=>p).forEach(p=>a.append("index",p));let h=a.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Nr([n,i.pathname])),Ya(i)}function OR(t,{relative:e}={}){let n=N.useContext(Nw);Qe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Uw("useViewTransitionState"),s=yl(t,{relative:e});if(!n.isTransitioning)return!1;let i=Lr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Lr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ju(s.pathname,o)!=null||ju(s.pathname,i)!=null}var pv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},PR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Bw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,p=(i&3)<<4|a>>4;let f=(a&15)<<2|d>>6,g=d&63;c||(g=64,o||(f=64)),r.push(n[h],n[p],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||d==null||p==null)throw new LR;const f=i<<2|a>>4;if(r.push(f),d!==64){const g=a<<4&240|d>>2;if(r.push(g),p!==64){const _=d<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class LR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DR=function(t){const e=Fw(t);return Bw.encodeByteArray(e,!0)},Vu=function(t){return DR(t).replace(/\./g,"")},zw=function(t){try{return Bw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=()=>MR().__FIREBASE_DEFAULTS__,VR=()=>{if(typeof process>"u"||typeof pv>"u")return;const t=pv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zw(t[1]);return e&&JSON.parse(e)},Dd=()=>{try{return jR()||VR()||UR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$w=t=>{var e,n;return(n=(e=Dd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},FR=t=>{const e=$w(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Hw=()=>{var t;return(t=Dd())===null||t===void 0?void 0:t.config},Gw=t=>{var e;return(e=Dd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vu(JSON.stringify(n)),Vu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $R(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function HR(){var t;const e=(t=Dd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KR(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YR(){return!HR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QR(){try{return typeof indexedDB=="object"}catch{return!1}}function XR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="FirebaseError";class zr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZR,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vl.prototype.create)}}class vl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?JR(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new zr(s,a,r)}}function JR(t,e){return t.replace(eC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const eC=/\{\$([^}]+)}/g;function tC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(mv(i)&&mv(o)){if(!Uu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function mv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nC(t,e){const n=new rC(t,e);return n.subscribe.bind(n)}class rC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Yh),s.error===void 0&&(s.error=Yh),s.complete===void 0&&(s.complete=Yh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return t&&t._delegate?t._delegate:t}class si{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new BR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aC(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oC(t){return t===Bs?void 0:t}function aC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const cC={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},uC=Te.INFO,dC={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},hC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=dC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cg{constructor(e){this.name=e,this._logLevel=uC,this._logHandler=hC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const fC=(t,e)=>e.some(n=>t instanceof n);let gv,yv;function pC(){return gv||(gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mC(){return yv||(yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ww=new WeakMap,fp=new WeakMap,qw=new WeakMap,Qh=new WeakMap,ug=new WeakMap;function gC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ps(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ww.set(n,t)}).catch(()=>{}),ug.set(e,t),e}function yC(t){if(fp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});fp.set(t,e)}let pp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vC(t){pp=t(pp)}function EC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Xh(this),e,...n);return qw.set(r,e.sort?e.sort():[e]),ps(r)}:mC().includes(t)?function(...e){return t.apply(Xh(this),e),ps(Ww.get(this))}:function(...e){return ps(t.apply(Xh(this),e))}}function xC(t){return typeof t=="function"?EC(t):(t instanceof IDBTransaction&&yC(t),fC(t,pC())?new Proxy(t,pp):t)}function ps(t){if(t instanceof IDBRequest)return gC(t);if(Qh.has(t))return Qh.get(t);const e=xC(t);return e!==t&&(Qh.set(t,e),ug.set(e,t)),e}const Xh=t=>ug.get(t);function _C(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ps(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ps(o.result),c.oldVersion,c.newVersion,ps(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const wC=["get","getKey","getAll","getAllKeys","count"],bC=["put","add","delete","clear"],Zh=new Map;function vv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zh.get(e))return Zh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=bC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||wC.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),s&&c.done]))[0]};return Zh.set(e,i),i}vC(t=>({...t,get:(e,n,r)=>vv(e,n)||t.get(e,n,r),has:(e,n)=>!!vv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mp="@firebase/app",Ev="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new cg("@firebase/app"),IC="@firebase/app-compat",TC="@firebase/analytics-compat",NC="@firebase/analytics",RC="@firebase/app-check-compat",CC="@firebase/app-check",kC="@firebase/auth",OC="@firebase/auth-compat",PC="@firebase/database",LC="@firebase/data-connect",DC="@firebase/database-compat",MC="@firebase/functions",jC="@firebase/functions-compat",VC="@firebase/installations",UC="@firebase/installations-compat",FC="@firebase/messaging",BC="@firebase/messaging-compat",zC="@firebase/performance",$C="@firebase/performance-compat",HC="@firebase/remote-config",GC="@firebase/remote-config-compat",WC="@firebase/storage",qC="@firebase/storage-compat",KC="@firebase/firestore",YC="@firebase/vertexai-preview",QC="@firebase/firestore-compat",XC="firebase",ZC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="[DEFAULT]",JC={[mp]:"fire-core",[IC]:"fire-core-compat",[NC]:"fire-analytics",[TC]:"fire-analytics-compat",[CC]:"fire-app-check",[RC]:"fire-app-check-compat",[kC]:"fire-auth",[OC]:"fire-auth-compat",[PC]:"fire-rtdb",[LC]:"fire-data-connect",[DC]:"fire-rtdb-compat",[MC]:"fire-fn",[jC]:"fire-fn-compat",[VC]:"fire-iid",[UC]:"fire-iid-compat",[FC]:"fire-fcm",[BC]:"fire-fcm-compat",[zC]:"fire-perf",[$C]:"fire-perf-compat",[HC]:"fire-rc",[GC]:"fire-rc-compat",[WC]:"fire-gcs",[qC]:"fire-gcs-compat",[KC]:"fire-fst",[QC]:"fire-fst-compat",[YC]:"fire-vertex","fire-js":"fire-js",[XC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new Map,ek=new Map,yp=new Map;function xv(t,e){try{t.container.addComponent(e)}catch(n){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function io(t){const e=t.name;if(yp.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;yp.set(e,t);for(const n of Fu.values())xv(n,t);for(const n of ek.values())xv(n,t);return!0}function dg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new vl("app","Firebase",tk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=ZC;function Kw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ms.create("bad-app-name",{appName:String(s)});if(n||(n=Hw()),!n)throw ms.create("no-options");const i=Fu.get(s);if(i){if(Uu(n,i.options)&&Uu(r,i.config))return i;throw ms.create("duplicate-app",{appName:s})}const o=new lC(s);for(const c of yp.values())o.addComponent(c);const a=new nk(n,r,o);return Fu.set(s,a),a}function Yw(t=gp){const e=Fu.get(t);if(!e&&t===gp&&Hw())return Kw();if(!e)throw ms.create("no-app",{appName:t});return e}function gs(t,e,n){var r;let s=(r=JC[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(a.join(" "));return}io(new si(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="firebase-heartbeat-database",sk=1,Qa="firebase-heartbeat-store";let Jh=null;function Qw(){return Jh||(Jh=_C(rk,sk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qa)}catch(n){console.warn(n)}}}}).catch(t=>{throw ms.create("idb-open",{originalErrorMessage:t.message})})),Jh}async function ik(t){try{const n=(await Qw()).transaction(Qa),r=await n.objectStore(Qa).get(Xw(t));return await n.done,r}catch(e){if(e instanceof zr)Dr.warn(e.message);else{const n=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(n.message)}}}async function _v(t,e){try{const r=(await Qw()).transaction(Qa,"readwrite");await r.objectStore(Qa).put(e,Xw(t)),await r.done}catch(n){if(n instanceof zr)Dr.warn(n.message);else{const r=ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dr.warn(r.message)}}}function Xw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=1024,ak=30*24*60*60*1e3;class lk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=ak}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wv(),{heartbeatsToSend:r,unsentEntries:s}=ck(this._heartbeatsCache.heartbeats),i=Vu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Dr.warn(n),""}}}function wv(){return new Date().toISOString().substring(0,10)}function ck(t,e=ok){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),bv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),bv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QR()?XR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ik(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _v(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _v(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function bv(t){return Vu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t){io(new si("platform-logger",e=>new SC(e),"PRIVATE")),io(new si("heartbeat",e=>new lk(e),"PRIVATE")),gs(mp,Ev,t),gs(mp,Ev,"esm2017"),gs("fire-js","")}dk("");function hg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Zw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hk=Zw,Jw=new vl("auth","Firebase",Zw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new cg("@firebase/auth");function fk(t,...e){Bu.logLevel<=Te.WARN&&Bu.warn(`Auth (${Io}): ${t}`,...e)}function Xc(t,...e){Bu.logLevel<=Te.ERROR&&Bu.error(`Auth (${Io}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,...e){throw pg(t,...e)}function zn(t,...e){return pg(t,...e)}function fg(t,e,n){const r=Object.assign(Object.assign({},hk()),{[e]:n});return new vl("auth","Firebase",r).create(e,{appName:t.name})}function Qs(t){return fg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pk(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&or(t,"argument-error"),fg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Jw.create(t,...e)}function me(t,e,...n){if(!t)throw pg(e,...n)}function br(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xc(e),new Error(e)}function Mr(t,e){t||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function mk(){return Sv()==="http:"||Sv()==="https:"}function Sv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mk()||WR()||"connection"in navigator)?navigator.onLine:!0}function yk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mr(n>e,"Short delay should be less than long delay!"),this.isMobile=$R()||qR()}get(){return gk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t,e){Mr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=new xl(3e4,6e4);function gg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function To(t,e,n,r,s={}){return tb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=El(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return GR()||(d.referrerPolicy="no-referrer"),eb.fetch()(nb(t,t.config.apiHost,n,a),d)})}async function tb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},vk),e);try{const s=new _k(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw xc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw xc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw xc(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw fg(t,h,d);or(t,h)}}catch(s){if(s instanceof zr)throw s;or(t,"network-request-failed",{message:String(s)})}}async function xk(t,e,n,r,s={}){const i=await To(t,e,n,r,s);return"mfaPendingCredential"in i&&or(t,"multi-factor-auth-required",{_serverResponse:i}),i}function nb(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?mg(t.config,s):`${t.config.apiScheme}://${s}`}class _k{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zn(this.auth,"network-request-failed")),Ek.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=zn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(t,e){return To(t,"POST","/v1/accounts:delete",e)}async function rb(t,e){return To(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bk(t,e=!1){const n=vt(t),r=await n.getIdToken(e),s=yg(r);me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ta(ef(s.auth_time)),issuedAtTime:Ta(ef(s.iat)),expirationTime:Ta(ef(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ef(t){return Number(t)*1e3}function yg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xc("JWT malformed, contained fewer than 3 sections"),null;try{const s=zw(n);return s?JSON.parse(s):(Xc("Failed to decode base64 JWT payload"),null)}catch(s){return Xc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Av(t){const e=yg(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zr&&Sk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Sk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ta(this.lastLoginAt),this.creationTime=Ta(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Xa(t,rb(n,{idToken:r}));me(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?sb(i.providerUserInfo):[],a=Tk(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=c?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ep(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function Ik(t){const e=vt(t);await zu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function sb(t){return t.map(e=>{var{providerId:n}=e,r=hg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(t,e){const n=await tb(t,{},async()=>{const r=El({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=nb(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",eb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Rk(t,e){return To(t,"POST","/v2/accounts:revokeToken",gg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Av(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=Av(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Nk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new qi;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(me(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(me(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qi,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Sr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ak(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ep(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Xa(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bk(this,e)}reload(){return Ik(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wr(this.auth.app))return Promise.reject(Qs(this.auth));const e=await this.getIdToken();return await Xa(this,wk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,d,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:P,isAnonymous:D,providerData:j,stsTokenManager:I}=n;me(b&&I,e,"internal-error");const v=qi.fromJSON(this.name,I);me(typeof b=="string",e,"internal-error"),Yr(p,e.name),Yr(f,e.name),me(typeof P=="boolean",e,"internal-error"),me(typeof D=="boolean",e,"internal-error"),Yr(g,e.name),Yr(_,e.name),Yr(x,e.name),Yr(C,e.name),Yr(E,e.name),Yr(w,e.name);const S=new Sr({uid:b,auth:e,email:f,emailVerified:P,displayName:p,isAnonymous:D,photoURL:_,phoneNumber:g,tenantId:x,stsTokenManager:v,createdAt:E,lastLoginAt:w});return j&&Array.isArray(j)&&(S.providerData=j.map(A=>Object.assign({},A))),C&&(S._redirectEventId=C),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new qi;s.updateFromServerResponse(n);const i=new Sr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await zu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];me(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?sb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new qi;a.updateFromIdToken(r);const c=new Sr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ep(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=new Map;function Ar(t){Mr(t instanceof Function,"Expected a class definition");let e=Iv.get(t);return e?(Mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Iv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ib.type="NONE";const Tv=ib;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ki{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Zc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Zc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Sr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ki(Ar(Tv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Ar(Tv);const o=Zc(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const h=await d._get(o);if(h){const p=Sr._fromJSON(e,h);d!==i&&(a=p),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ki(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ki(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ob(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(db(e))return"Blackberry";if(hb(e))return"Webos";if(ab(e))return"Safari";if((e.includes("chrome/")||lb(e))&&!e.includes("edge/"))return"Chrome";if(ub(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ob(t=Bt()){return/firefox\//i.test(t)}function ab(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lb(t=Bt()){return/crios\//i.test(t)}function cb(t=Bt()){return/iemobile/i.test(t)}function ub(t=Bt()){return/android/i.test(t)}function db(t=Bt()){return/blackberry/i.test(t)}function hb(t=Bt()){return/webos/i.test(t)}function vg(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ck(t=Bt()){var e;return vg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kk(){return KR()&&document.documentMode===10}function fb(t=Bt()){return vg(t)||ub(t)||hb(t)||db(t)||/windows phone/i.test(t)||cb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t,e=[]){let n;switch(t){case"Browser":n=Nv(Bt());break;case"Worker":n=`${Nv(Bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Io}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(t,e={}){return To(t,"GET","/v2/passwordPolicy",gg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=6;class Dk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Lk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rv(this),this.idTokenSubscription=new Rv(this),this.beforeStateQueue=new Ok(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ar(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ki.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rb(this,{idToken:e}),r=await Sr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(wr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wr(this.app))return Promise.reject(Qs(this));const n=e?vt(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wr(this.app)?Promise.reject(Qs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wr(this.app)?Promise.reject(Qs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Pk(this),n=new Dk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Rk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ar(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Ki.create(this,[Ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&fk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Md(t){return vt(t)}class Rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=nC(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jk(t){Eg=t}function Vk(t){return Eg.loadJS(t)}function Uk(){return Eg.gapiScript}function Fk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t,e){const n=dg(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Uu(i,e??{}))return s;or(s,"already-initialized")}return n.initialize({options:e})}function zk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ar);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $k(t,e,n){const r=Md(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=mb(e),{host:o,port:a}=Hk(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Gk()}function mb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Hk(t){const e=mb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Cv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Cv(o)}}}function Cv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Gk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,n){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(t,e){return xk(t,"POST","/v1/accounts:signInWithIdp",gg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="http://localhost";class ii extends gb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=hg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ii(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Yi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yi(e,n)}buildRequest(){const e={requestUri:Wk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=El(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends xg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends _l{constructor(){super("facebook.com")}static credential(e){return ii._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.FACEBOOK_SIGN_IN_METHOD="facebook.com";es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends _l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ii._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends _l{constructor(){super("github.com")}static credential(e){return ii._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends _l{constructor(){super("twitter.com")}static credential(e,n){return ii._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ns.credential(n,r)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Sr._fromIdTokenResponse(e,r,s),o=kv(r);return new oo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=kv(r);return new oo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function kv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends zr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,$u.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new $u(e,n,r,s)}}function yb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?$u._fromErrorAndOperation(t,i,e,r):i})}async function qk(t,e,n=!1){const r=await Xa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kk(t,e,n=!1){const{auth:r}=t;if(wr(r.app))return Promise.reject(Qs(r));const s="reauthenticate";try{const i=await Xa(t,yb(r,s,e,t),n);me(i.idToken,r,"internal-error");const o=yg(i.idToken);me(o,r,"internal-error");const{sub:a}=o;return me(t.uid===a,r,"user-mismatch"),oo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&or(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk(t,e,n=!1){if(wr(t.app))return Promise.reject(Qs(t));const r="signIn",s=await yb(t,r,e),i=await oo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function Qk(t,e,n,r){return vt(t).onIdTokenChanged(e,n,r)}function Xk(t,e,n){return vt(t).beforeAuthStateChanged(e,n)}function Zk(t,e,n,r){return vt(t).onAuthStateChanged(e,n,r)}function Jk(t){return vt(t).signOut()}const Hu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hu,"1"),this.storage.removeItem(Hu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=1e3,t2=10;class Eb extends vb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);kk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,t2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},e2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Eb.type="LOCAL";const n2=Eb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends vb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xb.type="SESSION";const _b=xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new jd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async d=>d(n.origin,i)),c=await r2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const d=_g("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const f=p;if(f.data.eventId===d)switch(f.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(){return window}function i2(t){nr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(){return typeof nr().WorkerGlobalScope<"u"&&typeof nr().importScripts=="function"}async function o2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function l2(){return wb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="firebaseLocalStorageDb",c2=1,Gu="firebaseLocalStorage",Sb="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vd(t,e){return t.transaction([Gu],e?"readwrite":"readonly").objectStore(Gu)}function u2(){const t=indexedDB.deleteDatabase(bb);return new wl(t).toPromise()}function xp(){const t=indexedDB.open(bb,c2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gu,{keyPath:Sb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gu)?e(r):(r.close(),await u2(),e(await xp()))})})}async function Ov(t,e,n){const r=Vd(t,!0).put({[Sb]:e,value:n});return new wl(r).toPromise()}async function d2(t,e){const n=Vd(t,!1).get(e),r=await new wl(n).toPromise();return r===void 0?null:r.value}function Pv(t,e){const n=Vd(t,!0).delete(e);return new wl(n).toPromise()}const h2=800,f2=3;class Ab{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>f2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jd._getInstance(l2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await o2(),!this.activeServiceWorker)return;this.sender=new s2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xp();return await Ov(e,Hu,"1"),await Pv(e,Hu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ov(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>d2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Vd(s,!1).getAll();return new wl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ab.type="LOCAL";const p2=Ab;new xl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t,e){return e?Ar(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg extends gb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function m2(t){return Yk(t.auth,new wg(t),t.bypassAuthState)}function g2(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),Kk(n,new wg(t),t.bypassAuthState)}async function y2(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),qk(n,new wg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m2;case"linkViaPopup":case"linkViaRedirect":return y2;case"reauthViaPopup":case"reauthViaRedirect":return g2;default:or(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=new xl(2e3,1e4);async function E2(t,e,n){if(wr(t.app))return Promise.reject(zn(t,"operation-not-supported-in-this-environment"));const r=Md(t);pk(t,e,xg);const s=Ib(r,n);return new Gs(r,"signInViaPopup",e,s).executeNotNull()}class Gs extends Tb{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Gs.currentPopupAction&&Gs.currentPopupAction.cancel(),Gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=_g();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v2.get())};e()}}Gs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2="pendingRedirect",Jc=new Map;class _2 extends Tb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jc.get(this.auth._key());if(!e){try{const r=await w2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jc.set(this.auth._key(),e)}return this.bypassAuthState||Jc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w2(t,e){const n=A2(e),r=S2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function b2(t,e){Jc.set(t._key(),e)}function S2(t){return Ar(t._redirectPersistence)}function A2(t){return Zc(x2,t.config.apiKey,t.name)}async function I2(t,e,n=!1){if(wr(t.app))return Promise.reject(Qs(t));const r=Md(t),s=Ib(r,e),o=await new _2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=10*60*1e3;class N2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!R2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Nb(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lv(e))}saveEventToCache(e){this.cachedEventUids.add(Lv(e)),this.lastProcessedEventTime=Date.now()}}function Lv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Nb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function R2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(t,e={}){return To(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O2=/^https?/;async function P2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await C2(t);for(const n of e)try{if(L2(n))return}catch{}or(t,"unauthorized-domain")}function L2(t){const e=vp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!O2.test(n))return!1;if(k2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=new xl(3e4,6e4);function Dv(){const t=nr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function M2(t){return new Promise((e,n)=>{var r,s,i;function o(){Dv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dv(),n(zn(t,"network-request-failed"))},timeout:D2.get()})}if(!((s=(r=nr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=nr().gapi)===null||i===void 0)&&i.load)o();else{const a=Fk("iframefcb");return nr()[a]=()=>{gapi.load?o():n(zn(t,"network-request-failed"))},Vk(`${Uk()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw eu=null,e})}let eu=null;function j2(t){return eu=eu||M2(t),eu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=new xl(5e3,15e3),U2="__/auth/iframe",F2="emulator/auth/iframe",B2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $2(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mg(e,F2):`https://${t.config.authDomain}/${U2}`,r={apiKey:e.apiKey,appName:t.name,v:Io},s=z2.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${El(r).slice(1)}`}async function H2(t){const e=await j2(t),n=nr().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:$2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B2,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=zn(t,"network-request-failed"),a=nr().setTimeout(()=>{i(o)},V2.get());function c(){nr().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W2=500,q2=600,K2="_blank",Y2="http://localhost";class Mv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Q2(t,e,n,r=W2,s=q2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},G2),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Bt().toLowerCase();n&&(a=lb(d)?K2:n),ob(d)&&(e=e||Y2,c.scrollbars="yes");const h=Object.entries(c).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(Ck(d)&&a!=="_self")return X2(e||"",a),new Mv(null);const p=window.open(e||"",a,h);me(p,t,"popup-blocked");try{p.focus()}catch{}return new Mv(p)}function X2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="__/auth/handler",J2="emulator/auth/handler",eO=encodeURIComponent("fac");async function jv(t,e,n,r,s,i){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Io,eventId:s};if(e instanceof xg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",tC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof _l){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),d=c?`#${eO}=${encodeURIComponent(c)}`:"";return`${tO(t)}?${El(a).slice(1)}${d}`}function tO({config:t}){return t.emulator?mg(t,J2):`https://${t.authDomain}/${Z2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="webStorageSupport";class nO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_b,this._completeRedirectFn=I2,this._overrideRedirectResult=b2}async _openPopup(e,n,r,s){var i;Mr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await jv(e,n,r,vp(),s);return Q2(e,o,_g())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await jv(e,n,r,vp(),s);return i2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Mr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await H2(e),r=new N2(e);return n.register("authEvent",s=>(me(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tf,{type:tf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[tf];o!==void 0&&n(!!o),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=P2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fb()||ab()||vg()}}const rO=nO;var Vv="@firebase/auth",Uv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oO(t){io(new si("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pb(t)},d=new Mk(r,s,i,c);return zk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),io(new si("auth-internal",e=>{const n=Md(e.getProvider("auth").getImmediate());return(r=>new sO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs(Vv,Uv,iO(t)),gs(Vv,Uv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=5*60,lO=Gw("authIdTokenMaxAge")||aO;let Fv=null;const cO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lO)return;const s=n==null?void 0:n.token;Fv!==s&&(Fv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function uO(t=Yw()){const e=dg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Bk(t,{popupRedirectResolver:rO,persistence:[p2,n2,_b]}),r=Gw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=cO(i.toString());Xk(n,o,()=>o(n.currentUser)),Qk(n,a=>o(a))}}const s=$w("auth");return s&&$k(n,`http://${s}`),n}function dO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}jk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=zn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",dO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oO("Browser");var hO="firebase",fO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(hO,fO,"app");var Bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xs,Rb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function S(){}S.prototype=v.prototype,I.D=v.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(A,k,O){for(var R=Array(arguments.length-2),M=2;M<arguments.length;M++)R[M-2]=arguments[M];return v.prototype[k].apply(A,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,v,S){S||(S=0);var A=Array(16);if(typeof v=="string")for(var k=0;16>k;++k)A[k]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(k=0;16>k;++k)A[k]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=I.g[0],S=I.g[1],k=I.g[2];var O=I.g[3],R=v+(O^S&(k^O))+A[0]+3614090360&4294967295;v=S+(R<<7&4294967295|R>>>25),R=O+(k^v&(S^k))+A[1]+3905402710&4294967295,O=v+(R<<12&4294967295|R>>>20),R=k+(S^O&(v^S))+A[2]+606105819&4294967295,k=O+(R<<17&4294967295|R>>>15),R=S+(v^k&(O^v))+A[3]+3250441966&4294967295,S=k+(R<<22&4294967295|R>>>10),R=v+(O^S&(k^O))+A[4]+4118548399&4294967295,v=S+(R<<7&4294967295|R>>>25),R=O+(k^v&(S^k))+A[5]+1200080426&4294967295,O=v+(R<<12&4294967295|R>>>20),R=k+(S^O&(v^S))+A[6]+2821735955&4294967295,k=O+(R<<17&4294967295|R>>>15),R=S+(v^k&(O^v))+A[7]+4249261313&4294967295,S=k+(R<<22&4294967295|R>>>10),R=v+(O^S&(k^O))+A[8]+1770035416&4294967295,v=S+(R<<7&4294967295|R>>>25),R=O+(k^v&(S^k))+A[9]+2336552879&4294967295,O=v+(R<<12&4294967295|R>>>20),R=k+(S^O&(v^S))+A[10]+4294925233&4294967295,k=O+(R<<17&4294967295|R>>>15),R=S+(v^k&(O^v))+A[11]+2304563134&4294967295,S=k+(R<<22&4294967295|R>>>10),R=v+(O^S&(k^O))+A[12]+1804603682&4294967295,v=S+(R<<7&4294967295|R>>>25),R=O+(k^v&(S^k))+A[13]+4254626195&4294967295,O=v+(R<<12&4294967295|R>>>20),R=k+(S^O&(v^S))+A[14]+2792965006&4294967295,k=O+(R<<17&4294967295|R>>>15),R=S+(v^k&(O^v))+A[15]+1236535329&4294967295,S=k+(R<<22&4294967295|R>>>10),R=v+(k^O&(S^k))+A[1]+4129170786&4294967295,v=S+(R<<5&4294967295|R>>>27),R=O+(S^k&(v^S))+A[6]+3225465664&4294967295,O=v+(R<<9&4294967295|R>>>23),R=k+(v^S&(O^v))+A[11]+643717713&4294967295,k=O+(R<<14&4294967295|R>>>18),R=S+(O^v&(k^O))+A[0]+3921069994&4294967295,S=k+(R<<20&4294967295|R>>>12),R=v+(k^O&(S^k))+A[5]+3593408605&4294967295,v=S+(R<<5&4294967295|R>>>27),R=O+(S^k&(v^S))+A[10]+38016083&4294967295,O=v+(R<<9&4294967295|R>>>23),R=k+(v^S&(O^v))+A[15]+3634488961&4294967295,k=O+(R<<14&4294967295|R>>>18),R=S+(O^v&(k^O))+A[4]+3889429448&4294967295,S=k+(R<<20&4294967295|R>>>12),R=v+(k^O&(S^k))+A[9]+568446438&4294967295,v=S+(R<<5&4294967295|R>>>27),R=O+(S^k&(v^S))+A[14]+3275163606&4294967295,O=v+(R<<9&4294967295|R>>>23),R=k+(v^S&(O^v))+A[3]+4107603335&4294967295,k=O+(R<<14&4294967295|R>>>18),R=S+(O^v&(k^O))+A[8]+1163531501&4294967295,S=k+(R<<20&4294967295|R>>>12),R=v+(k^O&(S^k))+A[13]+2850285829&4294967295,v=S+(R<<5&4294967295|R>>>27),R=O+(S^k&(v^S))+A[2]+4243563512&4294967295,O=v+(R<<9&4294967295|R>>>23),R=k+(v^S&(O^v))+A[7]+1735328473&4294967295,k=O+(R<<14&4294967295|R>>>18),R=S+(O^v&(k^O))+A[12]+2368359562&4294967295,S=k+(R<<20&4294967295|R>>>12),R=v+(S^k^O)+A[5]+4294588738&4294967295,v=S+(R<<4&4294967295|R>>>28),R=O+(v^S^k)+A[8]+2272392833&4294967295,O=v+(R<<11&4294967295|R>>>21),R=k+(O^v^S)+A[11]+1839030562&4294967295,k=O+(R<<16&4294967295|R>>>16),R=S+(k^O^v)+A[14]+4259657740&4294967295,S=k+(R<<23&4294967295|R>>>9),R=v+(S^k^O)+A[1]+2763975236&4294967295,v=S+(R<<4&4294967295|R>>>28),R=O+(v^S^k)+A[4]+1272893353&4294967295,O=v+(R<<11&4294967295|R>>>21),R=k+(O^v^S)+A[7]+4139469664&4294967295,k=O+(R<<16&4294967295|R>>>16),R=S+(k^O^v)+A[10]+3200236656&4294967295,S=k+(R<<23&4294967295|R>>>9),R=v+(S^k^O)+A[13]+681279174&4294967295,v=S+(R<<4&4294967295|R>>>28),R=O+(v^S^k)+A[0]+3936430074&4294967295,O=v+(R<<11&4294967295|R>>>21),R=k+(O^v^S)+A[3]+3572445317&4294967295,k=O+(R<<16&4294967295|R>>>16),R=S+(k^O^v)+A[6]+76029189&4294967295,S=k+(R<<23&4294967295|R>>>9),R=v+(S^k^O)+A[9]+3654602809&4294967295,v=S+(R<<4&4294967295|R>>>28),R=O+(v^S^k)+A[12]+3873151461&4294967295,O=v+(R<<11&4294967295|R>>>21),R=k+(O^v^S)+A[15]+530742520&4294967295,k=O+(R<<16&4294967295|R>>>16),R=S+(k^O^v)+A[2]+3299628645&4294967295,S=k+(R<<23&4294967295|R>>>9),R=v+(k^(S|~O))+A[0]+4096336452&4294967295,v=S+(R<<6&4294967295|R>>>26),R=O+(S^(v|~k))+A[7]+1126891415&4294967295,O=v+(R<<10&4294967295|R>>>22),R=k+(v^(O|~S))+A[14]+2878612391&4294967295,k=O+(R<<15&4294967295|R>>>17),R=S+(O^(k|~v))+A[5]+4237533241&4294967295,S=k+(R<<21&4294967295|R>>>11),R=v+(k^(S|~O))+A[12]+1700485571&4294967295,v=S+(R<<6&4294967295|R>>>26),R=O+(S^(v|~k))+A[3]+2399980690&4294967295,O=v+(R<<10&4294967295|R>>>22),R=k+(v^(O|~S))+A[10]+4293915773&4294967295,k=O+(R<<15&4294967295|R>>>17),R=S+(O^(k|~v))+A[1]+2240044497&4294967295,S=k+(R<<21&4294967295|R>>>11),R=v+(k^(S|~O))+A[8]+1873313359&4294967295,v=S+(R<<6&4294967295|R>>>26),R=O+(S^(v|~k))+A[15]+4264355552&4294967295,O=v+(R<<10&4294967295|R>>>22),R=k+(v^(O|~S))+A[6]+2734768916&4294967295,k=O+(R<<15&4294967295|R>>>17),R=S+(O^(k|~v))+A[13]+1309151649&4294967295,S=k+(R<<21&4294967295|R>>>11),R=v+(k^(S|~O))+A[4]+4149444226&4294967295,v=S+(R<<6&4294967295|R>>>26),R=O+(S^(v|~k))+A[11]+3174756917&4294967295,O=v+(R<<10&4294967295|R>>>22),R=k+(v^(O|~S))+A[2]+718787259&4294967295,k=O+(R<<15&4294967295|R>>>17),R=S+(O^(k|~v))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+O&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var S=v-this.blockSize,A=this.B,k=this.h,O=0;O<v;){if(k==0)for(;O<=S;)s(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<v;)if(A[k++]=I.charCodeAt(O++),k==this.blockSize){s(this,A),k=0;break}}else for(;O<v;)if(A[k++]=I[O++],k==this.blockSize){s(this,A),k=0;break}}this.h=k,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var S=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=S&255,S/=256;for(this.u(I),I=Array(16),v=S=0;4>v;++v)for(var A=0;32>A;A+=8)I[S++]=this.g[v]>>>A&255;return I};function i(I,v){var S=a;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=v(I)}function o(I,v){this.h=v;for(var S=[],A=!0,k=I.length-1;0<=k;k--){var O=I[k]|0;A&&O==v||(S[k]=O,A=!1)}this.g=S}var a={};function c(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return C(d(-I));for(var v=[],S=1,A=0;I>=S;A++)v[A]=I/S|0,S*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return C(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(v,8)),A=p,k=0;k<I.length;k+=8){var O=Math.min(8,I.length-k),R=parseInt(I.substring(k,k+O),v);8>O?(O=d(Math.pow(v,O)),A=A.j(O).add(d(R))):(A=A.j(S),A=A.add(d(R)))}return A}var p=c(0),f=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-C(this).m();for(var I=0,v=1,S=0;S<this.g.length;S++){var A=this.i(S);I+=(0<=A?A:4294967296+A)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(x(this))return"-"+C(this).toString(I);for(var v=d(Math.pow(I,6)),S=this,A="";;){var k=P(S,v).g;S=E(S,k.j(v));var O=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=k,_(S))return O+A;for(;6>O.length;)O="0"+O;A=O+A}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function x(I){return I.h==-1}t.l=function(I){return I=E(this,I),x(I)?-1:_(I)?0:1};function C(I){for(var v=I.g.length,S=[],A=0;A<v;A++)S[A]=~I.g[A];return new o(S,~I.h).add(f)}t.abs=function(){return x(this)?C(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],A=0,k=0;k<=v;k++){var O=A+(this.i(k)&65535)+(I.i(k)&65535),R=(O>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);A=R>>>16,O&=65535,R&=65535,S[k]=R<<16|O}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(I,v){return I.add(C(v))}t.j=function(I){if(_(this)||_(I))return p;if(x(this))return x(I)?C(this).j(C(I)):C(C(this).j(I));if(x(I))return C(this.j(C(I)));if(0>this.l(g)&&0>I.l(g))return d(this.m()*I.m());for(var v=this.g.length+I.g.length,S=[],A=0;A<2*v;A++)S[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<I.g.length;k++){var O=this.i(A)>>>16,R=this.i(A)&65535,M=I.i(k)>>>16,L=I.i(k)&65535;S[2*A+2*k]+=R*L,w(S,2*A+2*k),S[2*A+2*k+1]+=O*L,w(S,2*A+2*k+1),S[2*A+2*k+1]+=R*M,w(S,2*A+2*k+1),S[2*A+2*k+2]+=O*M,w(S,2*A+2*k+2)}for(A=0;A<v;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=v;A<2*v;A++)S[A]=0;return new o(S,0)};function w(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function b(I,v){this.g=I,this.h=v}function P(I,v){if(_(v))throw Error("division by zero");if(_(I))return new b(p,p);if(x(I))return v=P(C(I),v),new b(C(v.g),C(v.h));if(x(v))return v=P(I,C(v)),new b(C(v.g),v.h);if(30<I.g.length){if(x(I)||x(v))throw Error("slowDivide_ only works with positive integers.");for(var S=f,A=v;0>=A.l(I);)S=D(S),A=D(A);var k=j(S,1),O=j(A,1);for(A=j(A,2),S=j(S,2);!_(A);){var R=O.add(A);0>=R.l(I)&&(k=k.add(S),O=R),A=j(A,1),S=j(S,1)}return v=E(I,k.j(v)),new b(k,v)}for(k=p;0<=I.l(v);){for(S=Math.max(1,Math.floor(I.m()/v.m())),A=Math.ceil(Math.log(S)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),O=d(S),R=O.j(v);x(R)||0<R.l(I);)S-=A,O=d(S),R=O.j(v);_(O)&&(O=f),k=k.add(O),I=E(I,R)}return new b(k,I)}t.A=function(I){return P(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)&I.i(A);return new o(S,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)|I.i(A);return new o(S,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)^I.i(A);return new o(S,this.h^I.h)};function D(I){for(var v=I.g.length+1,S=[],A=0;A<v;A++)S[A]=I.i(A)<<1|I.i(A-1)>>>31;return new o(S,I.h)}function j(I,v){var S=v>>5;v%=32;for(var A=I.g.length-S,k=[],O=0;O<A;O++)k[O]=0<v?I.i(O+S)>>>v|I.i(O+S+1)<<32-v:I.i(O+S);return new o(k,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Rb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Xs=o}).apply(typeof Bv<"u"?Bv:typeof self<"u"?self:typeof window<"u"?window:{});var _c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cb,oa,kb,tu,_p,Ob,Pb,Lb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,y){return l==Array.prototype||l==Object.prototype||(l[m]=y.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof _c=="object"&&_c];for(var m=0;m<l.length;++m){var y=l[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(l,m){if(m)e:{var y=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var F=l[T];if(!(F in y))break e;y=y[F]}l=l[l.length-1],T=y[l],m=m(T),m!=T&&m!=null&&e(y,l,{configurable:!0,writable:!0,value:m})}}function i(l,m){l instanceof String&&(l+="");var y=0,T=!1,F={next:function(){if(!T&&y<l.length){var H=y++;return{value:m(H,l[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(l){return l||function(){return i(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function d(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function h(l,m,y){return l.call.apply(l.bind,arguments)}function p(l,m,y){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),l.apply(m,F)}}return function(){return l.apply(m,arguments)}}function f(l,m,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,f.apply(null,arguments)}function g(l,m){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function _(l,m){function y(){}y.prototype=m.prototype,l.aa=m.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(T,F,H){for(var oe=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)oe[Be-2]=arguments[Be];return m.prototype[F].apply(T,oe)}}function x(l){const m=l.length;if(0<m){const y=Array(m);for(let T=0;T<m;T++)y[T]=l[T];return y}return[]}function C(l,m){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(c(T)){const F=l.length||0,H=T.length||0;l.length=F+H;for(let oe=0;oe<H;oe++)l[F+oe]=T[oe]}else l.push(T)}}class E{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function w(l){return/^[\s\xa0]*$/.test(l)}function b(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function P(l){return P[" "](l),l}P[" "]=function(){};var D=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function j(l,m,y){for(const T in l)m.call(y,l[T],T,l)}function I(l,m){for(const y in l)m.call(void 0,l[y],y,l)}function v(l){const m={};for(const y in l)m[y]=l[y];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,m){let y,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(y in T)l[y]=T[y];for(let H=0;H<S.length;H++)y=S[H],Object.prototype.hasOwnProperty.call(T,y)&&(l[y]=T[y])}}function k(l){var m=1;l=l.split(":");const y=[];for(;0<m&&l.length;)y.push(l.shift()),m--;return l.length&&y.push(l.join(":")),y}function O(l){a.setTimeout(()=>{throw l},0)}function R(){var l=W;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class M{constructor(){this.h=this.g=null}add(m,y){const T=L.get();T.set(m,y),this.h?this.h.next=T:this.g=T,this.h=T}}var L=new E(()=>new U,l=>l.reset());class U{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let K,V=!1,W=new M,Q=()=>{const l=a.Promise.resolve(void 0);K=()=>{l.then(te)}};var te=()=>{for(var l;l=R();){try{l.h.call(l.g)}catch(y){O(y)}var m=L;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}V=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};a.addEventListener("test",y,m),a.removeEventListener("test",y,m)}catch{}return l}();function X(l,m){if($.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(D){e:{try{P(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else y=="mouseover"?m=l.fromElement:y=="mouseout"&&(m=l.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ne[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&X.aa.h.call(this)}}_(X,$);var ne={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),ye=0;function Me(l,m,y,T,F){this.listener=l,this.proxy=null,this.src=m,this.type=y,this.capture=!!T,this.ha=F,this.key=++ye,this.da=this.fa=!1}function rt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function be(l){this.src=l,this.g={},this.h=0}be.prototype.add=function(l,m,y,T,F){var H=l.toString();l=this.g[H],l||(l=this.g[H]=[],this.h++);var oe=q(l,m,T,F);return-1<oe?(m=l[oe],y||(m.fa=!1)):(m=new Me(m,this.src,H,!!T,F),m.fa=y,l.push(m)),m};function Se(l,m){var y=m.type;if(y in l.g){var T=l.g[y],F=Array.prototype.indexOf.call(T,m,void 0),H;(H=0<=F)&&Array.prototype.splice.call(T,F,1),H&&(rt(m),l.g[y].length==0&&(delete l.g[y],l.h--))}}function q(l,m,y,T){for(var F=0;F<l.length;++F){var H=l[F];if(!H.da&&H.listener==m&&H.capture==!!y&&H.ha==T)return F}return-1}var z="closure_lm_"+(1e6*Math.random()|0),le={};function ve(l,m,y,T,F){if(Array.isArray(m)){for(var H=0;H<m.length;H++)ve(l,m[H],y,T,F);return null}return y=$r(y),l&&l[ie]?l.K(m,y,d(T)?!!T.capture:!1,F):Ee(l,m,y,!1,T,F)}function Ee(l,m,y,T,F,H){if(!m)throw Error("Invalid event type");var oe=d(F)?!!F.capture:!!F,Be=En(l);if(Be||(l[z]=Be=new be(l)),y=Be.add(m,y,T,oe,H),y.proxy)return y;if(T=De(),y.proxy=T,T.src=l,T.listener=y,l.addEventListener)Y||(F=oe),F===void 0&&(F=!1),l.addEventListener(m.toString(),T,F);else if(l.attachEvent)l.attachEvent(Rt(m.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function De(){function l(y){return m.call(l.src,l.listener,y)}const m=nn;return l}function Ie(l,m,y,T,F){if(Array.isArray(m))for(var H=0;H<m.length;H++)Ie(l,m[H],y,T,F);else T=d(T)?!!T.capture:!!T,y=$r(y),l&&l[ie]?(l=l.i,m=String(m).toString(),m in l.g&&(H=l.g[m],y=q(H,y,T,F),-1<y&&(rt(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete l.g[m],l.h--)))):l&&(l=En(l))&&(m=l.g[m.toString()],l=-1,m&&(l=q(m,y,T,F)),(y=-1<l?m[l]:null)&&je(y))}function je(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[ie])Se(m.i,l);else{var y=l.type,T=l.proxy;m.removeEventListener?m.removeEventListener(y,T,l.capture):m.detachEvent?m.detachEvent(Rt(y),T):m.addListener&&m.removeListener&&m.removeListener(T),(y=En(m))?(Se(y,l),y.h==0&&(y.src=null,m[z]=null)):rt(l)}}}function Rt(l){return l in le?le[l]:le[l]="on"+l}function nn(l,m){if(l.da)l=!0;else{m=new X(m,this);var y=l.listener,T=l.ha||l.src;l.fa&&je(l),l=y.call(T,m)}return l}function En(l){return l=l[z],l instanceof be?l:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function $r(l){return typeof l=="function"?l:(l[xn]||(l[xn]=function(m){return l.handleEvent(m)}),l[xn])}function lt(){ae.call(this),this.i=new be(this),this.M=this,this.F=null}_(lt,ae),lt.prototype[ie]=!0,lt.prototype.removeEventListener=function(l,m,y,T){Ie(this,l,m,y,T)};function Et(l,m){var y,T=l.F;if(T)for(y=[];T;T=T.F)y.push(T);if(l=l.M,T=m.type||m,typeof m=="string")m=new $(m,l);else if(m instanceof $)m.target=m.target||l;else{var F=m;m=new $(T,l),A(m,F)}if(F=!0,y)for(var H=y.length-1;0<=H;H--){var oe=m.g=y[H];F=yi(oe,T,!0,m)&&F}if(oe=m.g=l,F=yi(oe,T,!0,m)&&F,F=yi(oe,T,!1,m)&&F,y)for(H=0;H<y.length;H++)oe=m.g=y[H],F=yi(oe,T,!1,m)&&F}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var y=l.g[m],T=0;T<y.length;T++)rt(y[T]);delete l.g[m],l.h--}}this.F=null},lt.prototype.K=function(l,m,y,T){return this.i.add(String(l),m,!1,y,T)},lt.prototype.L=function(l,m,y,T){return this.i.add(String(l),m,!0,y,T)};function yi(l,m,y,T){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,H=0;H<m.length;++H){var oe=m[H];if(oe&&!oe.da&&oe.capture==y){var Be=oe.listener,_t=oe.ha||oe.src;oe.fa&&Se(l.i,oe),F=Be.call(_t,T)!==!1&&F}}return F&&!T.defaultPrevented}function Dl(l,m,y){if(typeof l=="function")y&&(l=f(l,y));else if(l&&typeof l.handleEvent=="function")l=f(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(l,m||0)}function Ml(l){l.g=Dl(()=>{l.g=null,l.i&&(l.i=!1,Ml(l))},l.l);const m=l.h;l.h=null,l.m.apply(null,m)}class oh extends ae{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ml(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rn(l){ae.call(this),this.h=l,this.g={}}_(rn,ae);var dr=[];function ks(l){j(l.g,function(m,y){this.g.hasOwnProperty(y)&&je(m)},l),l.g={}}rn.prototype.N=function(){rn.aa.N.call(this),ks(this)},rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Os=a.JSON.stringify,jl=a.JSON.parse,ah=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Oo(){}Oo.prototype.h=null;function Vl(l){return l.h||(l.h=l.i())}function Ul(){}var Ps={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Po(){$.call(this,"d")}_(Po,$);function Lo(){$.call(this,"c")}_(Lo,$);var hr={},Fl=null;function vi(){return Fl=Fl||new lt}hr.La="serverreachability";function Bl(l){$.call(this,hr.La,l)}_(Bl,$);function ce(l){const m=vi();Et(m,new Bl(m))}hr.STAT_EVENT="statevent";function re(l,m){$.call(this,hr.STAT_EVENT,l),this.stat=m}_(re,$);function se(l){const m=vi();Et(m,new re(m,l))}hr.Ma="timingevent";function pe(l,m){$.call(this,hr.Ma,l),this.size=m}_(pe,$);function Xe(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},m)}function Ve(){this.g=!0}Ve.prototype.xa=function(){this.g=!1};function sn(l,m,y,T,F,H){l.info(function(){if(l.g)if(H)for(var oe="",Be=H.split("&"),_t=0;_t<Be.length;_t++){var Pe=Be[_t].split("=");if(1<Pe.length){var Ct=Pe[0];Pe=Pe[1];var kt=Ct.split("_");oe=2<=kt.length&&kt[1]=="type"?oe+(Ct+"="+Pe+"&"):oe+(Ct+"=redacted&")}}else oe=null;else oe=H;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+m+`
`+y+`
`+oe})}function Hr(l,m,y,T,F,H,oe){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+m+`
`+y+`
`+H+" "+oe})}function xt(l,m,y,T){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+on(l,y)+(T?" "+T:"")})}function Do(l,m){l.info(function(){return"TIMEOUT: "+m})}Ve.prototype.info=function(){};function on(l,m){if(!l.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var T=y[l];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var H=F[0];if(H!="noop"&&H!="stop"&&H!="close")for(var oe=1;oe<F.length;oe++)F[oe]=""}}}}return Os(y)}catch{return m}}var Ei={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},f0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lh;function zl(){}_(zl,Oo),zl.prototype.g=function(){return new XMLHttpRequest},zl.prototype.i=function(){return{}},lh=new zl;function Gr(l,m,y,T){this.j=l,this.i=m,this.l=y,this.R=T||1,this.U=new rn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new p0}function p0(){this.i=null,this.g="",this.h=!1}var m0={},ch={};function uh(l,m,y){l.L=1,l.v=Wl(fr(m)),l.m=y,l.P=!0,g0(l,null)}function g0(l,m){l.F=Date.now(),$l(l),l.A=fr(l.v);var y=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),C0(y.i,"t",T),l.C=0,y=l.j.J,l.h=new p0,l.g=K0(l.j,y?m:null,!l.m),0<l.O&&(l.M=new oh(f(l.Y,l,l.g),l.O)),m=l.U,y=l.g,T=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(dr[0]=F.toString()),F=dr);for(var H=0;H<F.length;H++){var oe=ve(y,F[H],T||m.handleEvent,!1,m.h||m);if(!oe)break;m.g[oe.key]=oe}m=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),ce(),sn(l.i,l.u,l.A,l.l,l.R,l.m)}Gr.prototype.ca=function(l){l=l.target;const m=this.M;m&&pr(l)==3?m.j():this.Y(l)},Gr.prototype.Y=function(l){try{if(l==this.g)e:{const kt=pr(this.g);var m=this.g.Ba();const wi=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||j0(this.g)))){this.J||kt!=4||m==7||(m==8||0>=wi?ce(3):ce(2)),dh(this);var y=this.g.Z();this.X=y;t:if(y0(this)){var T=j0(this.g);l="";var F=T.length,H=pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ls(this),Mo(this);var oe="";break t}this.h.i=new a.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,l+=this.h.i.decode(T[m],{stream:!(H&&m==F-1)});T.length=0,this.h.g+=l,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=y==200,Hr(this.i,this.u,this.A,this.l,this.R,kt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,_t=this.g;if((Be=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Be)){var Pe=Be;break t}}Pe=null}if(y=Pe)xt(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hh(this,y);else{this.o=!1,this.s=3,se(12),Ls(this),Mo(this);break e}}if(this.P){y=!0;let Pn;for(;!this.J&&this.C<oe.length;)if(Pn=aI(this,oe),Pn==ch){kt==4&&(this.s=4,se(14),y=!1),xt(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==m0){this.s=4,se(15),xt(this.i,this.l,oe,"[Invalid Chunk]"),y=!1;break}else xt(this.i,this.l,Pn,null),hh(this,Pn);if(y0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||oe.length!=0||this.h.h||(this.s=1,se(16),y=!1),this.o=this.o&&y,!y)xt(this.i,this.l,oe,"[Invalid Chunked Response]"),Ls(this),Mo(this);else if(0<oe.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),vh(Ct),Ct.M=!0,se(11))}}else xt(this.i,this.l,oe,null),hh(this,oe);kt==4&&Ls(this),this.o&&!this.J&&(kt==4?H0(this.j,this):(this.o=!1,$l(this)))}else SI(this.g),y==400&&0<oe.indexOf("Unknown SID")?(this.s=3,se(12)):(this.s=0,se(13)),Ls(this),Mo(this)}}}catch{}finally{}};function y0(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function aI(l,m){var y=l.C,T=m.indexOf(`
`,y);return T==-1?ch:(y=Number(m.substring(y,T)),isNaN(y)?m0:(T+=1,T+y>m.length?ch:(m=m.slice(T,T+y),l.C=T+y,m)))}Gr.prototype.cancel=function(){this.J=!0,Ls(this)};function $l(l){l.S=Date.now()+l.I,v0(l,l.I)}function v0(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Xe(f(l.ba,l),m)}function dh(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Gr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Do(this.i,this.A),this.L!=2&&(ce(),se(17)),Ls(this),this.s=2,Mo(this)):v0(this,this.S-l)};function Mo(l){l.j.G==0||l.J||H0(l.j,l)}function Ls(l){dh(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,ks(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function hh(l,m){try{var y=l.j;if(y.G!=0&&(y.g==l||fh(y.h,l))){if(!l.K&&fh(y.h,l)&&y.G==3){try{var T=y.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)Zl(y),Ql(y);else break e;yh(y),se(18)}}else y.za=F[1],0<y.za-y.T&&37500>F[2]&&y.F&&y.v==0&&!y.C&&(y.C=Xe(f(y.Za,y),6e3));if(1>=_0(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ms(y,11)}else if((l.K||y.g==l)&&Zl(y),!w(m))for(F=y.Da.g.parse(m),m=0;m<F.length;m++){let Pe=F[m];if(y.T=Pe[0],Pe=Pe[1],y.G==2)if(Pe[0]=="c"){y.K=Pe[1],y.ia=Pe[2];const Ct=Pe[3];Ct!=null&&(y.la=Ct,y.j.info("VER="+y.la));const kt=Pe[4];kt!=null&&(y.Aa=kt,y.j.info("SVER="+y.Aa));const wi=Pe[5];wi!=null&&typeof wi=="number"&&0<wi&&(T=1.5*wi,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const Pn=l.g;if(Pn){const ec=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ec){var H=T.h;H.g||ec.indexOf("spdy")==-1&&ec.indexOf("quic")==-1&&ec.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ph(H,H.h),H.h=null))}if(T.D){const Eh=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Eh&&(T.ya=Eh,He(T.I,T.D,Eh))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var oe=l;if(T.qa=q0(T,T.J?T.ia:null,T.W),oe.K){w0(T.h,oe);var Be=oe,_t=T.L;_t&&(Be.I=_t),Be.B&&(dh(Be),$l(Be)),T.g=oe}else z0(T);0<y.i.length&&Xl(y)}else Pe[0]!="stop"&&Pe[0]!="close"||Ms(y,7);else y.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Ms(y,7):gh(y):Pe[0]!="noop"&&y.l&&y.l.ta(Pe),y.v=0)}}ce(4)}catch{}}var lI=class{constructor(l,m){this.g=l,this.map=m}};function E0(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function x0(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function _0(l){return l.h?1:l.g?l.g.size:0}function fh(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function ph(l,m){l.g?l.g.add(m):l.h=m}function w0(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}E0.prototype.cancel=function(){if(this.i=b0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function b0(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(const y of l.g.values())m=m.concat(y.D);return m}return x(l.i)}function cI(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var m=[],y=l.length,T=0;T<y;T++)m.push(l[T]);return m}m=[],y=0;for(T in l)m[y++]=l[T];return m}function uI(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var m=[];l=l.length;for(var y=0;y<l;y++)m.push(y);return m}m=[],y=0;for(const T in l)m[y++]=T;return m}}}function S0(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var y=uI(l),T=cI(l),F=T.length,H=0;H<F;H++)m.call(void 0,T[H],y&&y[H],l)}var A0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dI(l,m){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var T=l[y].indexOf("="),F=null;if(0<=T){var H=l[y].substring(0,T);F=l[y].substring(T+1)}else H=l[y];m(H,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ds(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ds){this.h=l.h,Hl(this,l.j),this.o=l.o,this.g=l.g,Gl(this,l.s),this.l=l.l;var m=l.i,y=new Uo;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),I0(this,y),this.m=l.m}else l&&(m=String(l).match(A0))?(this.h=!1,Hl(this,m[1]||"",!0),this.o=jo(m[2]||""),this.g=jo(m[3]||"",!0),Gl(this,m[4]),this.l=jo(m[5]||"",!0),I0(this,m[6]||"",!0),this.m=jo(m[7]||"")):(this.h=!1,this.i=new Uo(null,this.h))}Ds.prototype.toString=function(){var l=[],m=this.j;m&&l.push(Vo(m,T0,!0),":");var y=this.g;return(y||m=="file")&&(l.push("//"),(m=this.o)&&l.push(Vo(m,T0,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Vo(y,y.charAt(0)=="/"?pI:fI,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Vo(y,gI)),l.join("")};function fr(l){return new Ds(l)}function Hl(l,m,y){l.j=y?jo(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function Gl(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function I0(l,m,y){m instanceof Uo?(l.i=m,yI(l.i,l.h)):(y||(m=Vo(m,mI)),l.i=new Uo(m,l.h))}function He(l,m,y){l.i.set(m,y)}function Wl(l){return He(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function jo(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Vo(l,m,y){return typeof l=="string"?(l=encodeURI(l).replace(m,hI),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function hI(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var T0=/[#\/\?@]/g,fI=/[#\?:]/g,pI=/[#\?]/g,mI=/[#\?@]/g,gI=/#/g;function Uo(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function Wr(l){l.g||(l.g=new Map,l.h=0,l.i&&dI(l.i,function(m,y){l.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Uo.prototype,t.add=function(l,m){Wr(this),this.i=null,l=xi(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(m),this.h+=1,this};function N0(l,m){Wr(l),m=xi(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function R0(l,m){return Wr(l),m=xi(l,m),l.g.has(m)}t.forEach=function(l,m){Wr(this),this.g.forEach(function(y,T){y.forEach(function(F){l.call(m,F,T,this)},this)},this)},t.na=function(){Wr(this);const l=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let T=0;T<m.length;T++){const F=l[T];for(let H=0;H<F.length;H++)y.push(m[T])}return y},t.V=function(l){Wr(this);let m=[];if(typeof l=="string")R0(this,l)&&(m=m.concat(this.g.get(xi(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)m=m.concat(l[y])}return m},t.set=function(l,m){return Wr(this),this.i=null,l=xi(this,l),R0(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},t.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function C0(l,m,y){N0(l,m),0<y.length&&(l.i=null,l.g.set(xi(l,m),x(y)),l.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var T=m[y];const H=encodeURIComponent(String(T)),oe=this.V(T);for(T=0;T<oe.length;T++){var F=H;oe[T]!==""&&(F+="="+encodeURIComponent(String(oe[T]))),l.push(F)}}return this.i=l.join("&")};function xi(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function yI(l,m){m&&!l.j&&(Wr(l),l.i=null,l.g.forEach(function(y,T){var F=T.toLowerCase();T!=F&&(N0(this,T),C0(this,F,y))},l)),l.j=m}function vI(l,m){const y=new Ve;if(a.Image){const T=new Image;T.onload=g(qr,y,"TestLoadImage: loaded",!0,m,T),T.onerror=g(qr,y,"TestLoadImage: error",!1,m,T),T.onabort=g(qr,y,"TestLoadImage: abort",!1,m,T),T.ontimeout=g(qr,y,"TestLoadImage: timeout",!1,m,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else m(!1)}function EI(l,m){const y=new Ve,T=new AbortController,F=setTimeout(()=>{T.abort(),qr(y,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:T.signal}).then(H=>{clearTimeout(F),H.ok?qr(y,"TestPingServer: ok",!0,m):qr(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),qr(y,"TestPingServer: error",!1,m)})}function qr(l,m,y,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(y)}catch{}}function xI(){this.g=new ah}function _I(l,m,y){const T=y||"";try{S0(l,function(F,H){let oe=F;d(F)&&(oe=Os(F)),m.push(T+H+"="+encodeURIComponent(oe))})}catch(F){throw m.push(T+"type="+encodeURIComponent("_badmap")),F}}function ql(l){this.l=l.Ub||null,this.j=l.eb||!1}_(ql,Oo),ql.prototype.g=function(){return new Kl(this.l,this.j)},ql.prototype.i=function(l){return function(){return l}}({});function Kl(l,m){lt.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Kl,lt),t=Kl.prototype,t.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,Bo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Bo(this)),this.g&&(this.readyState=3,Bo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;k0(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function k0(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?Fo(this):Bo(this),this.readyState==3&&k0(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Fo(this))},t.Qa=function(l){this.g&&(this.response=l,Fo(this))},t.ga=function(){this.g&&Fo(this)};function Fo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Bo(l)}t.setRequestHeader=function(l,m){this.u.append(l,m)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=m.next();return l.join(`\r
`)};function Bo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Kl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function O0(l){let m="";return j(l,function(y,T){m+=T,m+=":",m+=y,m+=`\r
`}),m}function mh(l,m,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=O0(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):He(l,m,y))}function st(l){lt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(st,lt);var wI=/^https?$/i,bI=["POST","PUT"];t=st.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,m,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lh.g(),this.v=this.o?Vl(this.o):Vl(lh),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch(H){P0(this,H);return}if(l=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)y.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())y.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),F=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(bI,m,void 0))||T||F||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,oe]of y)this.g.setRequestHeader(H,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{M0(this),this.u=!0,this.g.send(l),this.u=!1}catch(H){P0(this,H)}};function P0(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,L0(l),Yl(l)}function L0(l){l.A||(l.A=!0,Et(l,"complete"),Et(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Et(this,"complete"),Et(this,"abort"),Yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yl(this,!0)),st.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?D0(this):this.bb())},t.bb=function(){D0(this)};function D0(l){if(l.h&&typeof o<"u"&&(!l.v[1]||pr(l)!=4||l.Z()!=2)){if(l.u&&pr(l)==4)Dl(l.Ea,0,l);else if(Et(l,"readystatechange"),pr(l)==4){l.h=!1;try{const oe=l.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var T;if(T=oe===0){var F=String(l.D).match(A0)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),T=!wI.test(F?F.toLowerCase():"")}y=T}if(y)Et(l,"complete"),Et(l,"success");else{l.m=6;try{var H=2<pr(l)?l.g.statusText:""}catch{H=""}l.l=H+" ["+l.Z()+"]",L0(l)}}finally{Yl(l)}}}}function Yl(l,m){if(l.g){M0(l);const y=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||Et(l,"ready");try{y.onreadystatechange=T}catch{}}}function M0(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function pr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<pr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),jl(m)}};function j0(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function SI(l){const m={};l=(l.g&&2<=pr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(w(l[T]))continue;var y=k(l[T]);const F=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=m[F]||[];m[F]=H,H.push(y)}I(m,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zo(l,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||m}function V0(l){this.Aa=0,this.i=[],this.j=new Ve,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zo("baseRetryDelayMs",5e3,l),this.cb=zo("retryDelaySeedMs",1e4,l),this.Wa=zo("forwardChannelMaxRetries",2,l),this.wa=zo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new E0(l&&l.concurrentRequestLimit),this.Da=new xI,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=V0.prototype,t.la=8,t.G=1,t.connect=function(l,m,y,T){se(0),this.W=l,this.H=m||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=q0(this,null,this.W),Xl(this)};function gh(l){if(U0(l),l.G==3){var m=l.U++,y=fr(l.I);if(He(y,"SID",l.K),He(y,"RID",m),He(y,"TYPE","terminate"),$o(l,y),m=new Gr(l,l.j,m),m.L=2,m.v=Wl(fr(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=m.v,y=!0),y||(m.g=K0(m.j,null),m.g.ea(m.v)),m.F=Date.now(),$l(m)}W0(l)}function Ql(l){l.g&&(vh(l),l.g.cancel(),l.g=null)}function U0(l){Ql(l),l.u&&(a.clearTimeout(l.u),l.u=null),Zl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Xl(l){if(!x0(l.h)&&!l.s){l.s=!0;var m=l.Ga;K||Q(),V||(K(),V=!0),W.add(m,l),l.B=0}}function AI(l,m){return _0(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Xe(f(l.Ga,l,m),G0(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const F=new Gr(this,this.j,l);let H=this.o;if(this.S&&(H?(H=v(H),A(H,this.S)):H=this.S),this.m!==null||this.O||(F.H=H,H=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=B0(this,F,m),y=fr(this.I),He(y,"RID",l),He(y,"CVER",22),this.D&&He(y,"X-HTTP-Session-Id",this.D),$o(this,y),H&&(this.O?m="headers="+encodeURIComponent(String(O0(H)))+"&"+m:this.m&&mh(y,this.m,H)),ph(this.h,F),this.Ua&&He(y,"TYPE","init"),this.P?(He(y,"$req",m),He(y,"SID","null"),F.T=!0,uh(F,y,null)):uh(F,y,m),this.G=2}}else this.G==3&&(l?F0(this,l):this.i.length==0||x0(this.h)||F0(this))};function F0(l,m){var y;m?y=m.l:y=l.U++;const T=fr(l.I);He(T,"SID",l.K),He(T,"RID",y),He(T,"AID",l.T),$o(l,T),l.m&&l.o&&mh(T,l.m,l.o),y=new Gr(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),m&&(l.i=m.D.concat(l.i)),m=B0(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ph(l.h,y),uh(y,T,m)}function $o(l,m){l.H&&j(l.H,function(y,T){He(m,T,y)}),l.l&&S0({},function(y,T){He(m,T,y)})}function B0(l,m,y){y=Math.min(l.i.length,y);var T=l.l?f(l.l.Na,l.l,l):null;e:{var F=l.i;let H=-1;for(;;){const oe=["count="+y];H==-1?0<y?(H=F[0].g,oe.push("ofs="+H)):H=0:oe.push("ofs="+H);let Be=!0;for(let _t=0;_t<y;_t++){let Pe=F[_t].g;const Ct=F[_t].map;if(Pe-=H,0>Pe)H=Math.max(0,F[_t].g-100),Be=!1;else try{_I(Ct,oe,"req"+Pe+"_")}catch{T&&T(Ct)}}if(Be){T=oe.join("&");break e}}}return l=l.i.splice(0,y),m.D=l,T}function z0(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;K||Q(),V||(K(),V=!0),W.add(m,l),l.v=0}}function yh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Xe(f(l.Fa,l),G0(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,$0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Xe(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,se(10),Ql(this),$0(this))};function vh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function $0(l){l.g=new Gr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=fr(l.qa);He(m,"RID","rpc"),He(m,"SID",l.K),He(m,"AID",l.T),He(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&He(m,"TO",l.ja),He(m,"TYPE","xmlhttp"),$o(l,m),l.m&&l.o&&mh(m,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Wl(fr(m)),y.m=null,y.P=!0,g0(y,l)}t.Za=function(){this.C!=null&&(this.C=null,Ql(this),yh(this),se(19))};function Zl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function H0(l,m){var y=null;if(l.g==m){Zl(l),vh(l),l.g=null;var T=2}else if(fh(l.h,m))y=m.D,w0(l.h,m),T=1;else return;if(l.G!=0){if(m.o)if(T==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var F=l.B;T=vi(),Et(T,new pe(T,y)),Xl(l)}else z0(l);else if(F=m.s,F==3||F==0&&0<m.X||!(T==1&&AI(l,m)||T==2&&yh(l)))switch(y&&0<y.length&&(m=l.h,m.i=m.i.concat(y)),F){case 1:Ms(l,5);break;case 4:Ms(l,10);break;case 3:Ms(l,6);break;default:Ms(l,2)}}}function G0(l,m){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*m}function Ms(l,m){if(l.j.info("Error code "+m),m==2){var y=f(l.fb,l),T=l.Xa;const F=!T;T=new Ds(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Hl(T,"https"),Wl(T),F?vI(T.toString(),y):EI(T.toString(),y)}else se(2);l.G=0,l.l&&l.l.sa(m),W0(l),U0(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),se(2)):(this.j.info("Failed to ping google.com"),se(1))};function W0(l){if(l.G=0,l.ka=[],l.l){const m=b0(l.h);(m.length!=0||l.i.length!=0)&&(C(l.ka,m),C(l.ka,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.ra()}}function q0(l,m,y){var T=y instanceof Ds?fr(y):new Ds(y);if(T.g!="")m&&(T.g=m+"."+T.g),Gl(T,T.s);else{var F=a.location;T=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var H=new Ds(null);T&&Hl(H,T),m&&(H.g=m),F&&Gl(H,F),y&&(H.l=y),T=H}return y=l.D,m=l.ya,y&&m&&He(T,y,m),He(T,"VER",l.la),$o(l,T),T}function K0(l,m,y){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new st(new ql({eb:y})):new st(l.pa),m.Ha(l.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Y0(){}t=Y0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Jl(){}Jl.prototype.g=function(l,m){return new an(l,m)};function an(l,m){lt.call(this),this.g=new V0(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!w(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!w(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new _i(this)}_(an,lt),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){gh(this.g)},an.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=Os(l),l=y);m.i.push(new lI(m.Ya++,l)),m.G==3&&Xl(m)},an.prototype.N=function(){this.g.l=null,delete this.j,gh(this.g),delete this.g,an.aa.N.call(this)};function Q0(l){Po.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(const y in m){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}_(Q0,Po);function X0(){Lo.call(this),this.status=1}_(X0,Lo);function _i(l){this.g=l}_(_i,Y0),_i.prototype.ua=function(){Et(this.g,"a")},_i.prototype.ta=function(l){Et(this.g,new Q0(l))},_i.prototype.sa=function(l){Et(this.g,new X0)},_i.prototype.ra=function(){Et(this.g,"b")},Jl.prototype.createWebChannel=Jl.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,Lb=function(){return new Jl},Pb=function(){return vi()},Ob=hr,_p={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ei.NO_ERROR=0,Ei.TIMEOUT=8,Ei.HTTP_ERROR=6,tu=Ei,f0.COMPLETE="complete",kb=f0,Ul.EventType=Ps,Ps.OPEN="a",Ps.CLOSE="b",Ps.ERROR="c",Ps.MESSAGE="d",lt.prototype.listen=lt.prototype.K,oa=Ul,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,Cb=st}).apply(typeof _c<"u"?_c:typeof self<"u"?self:typeof window<"u"?window:{});const zv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=new cg("@firebase/firestore");function Jo(){return oi.logLevel}function de(t,...e){if(oi.logLevel<=Te.DEBUG){const n=e.map(bg);oi.debug(`Firestore (${No}): ${t}`,...n)}}function jr(t,...e){if(oi.logLevel<=Te.ERROR){const n=e.map(bg);oi.error(`Firestore (${No}): ${t}`,...n)}}function ao(t,...e){if(oi.logLevel<=Te.WARN){const n=e.map(bg);oi.warn(`Firestore (${No}): ${t}`,...n)}}function bg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t="Unexpected state"){const e=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: `+t;throw jr(e),new Error(e)}function Fe(t,e){t||ge()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends zr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jt.UNAUTHENTICATED))}shutdown(){}}class mO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gO{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string"),new Db(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new jt(e)}}class yO{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vO{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Fe(this.o===void 0);const r=i=>{i.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,de("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string"),this.R=n.token,new EO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=_O(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Le(t,e){return t<e?-1:t>e?1:0}function lo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new dt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new dt(0,0))}static max(){return new xe(new dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(),r===void 0?r=e.length-n:r>e.length-n&&ge(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Za.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Za?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ye extends Za{construct(e,n,r){return new Ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const wO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Za{construct(e,n,r){return new St(e,n,r)}static isValidIdentifier(e){return wO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new St(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(Ye.fromString(e))}static fromName(e){return new fe(Ye.fromString(e).popFirst(5))}static empty(){return new fe(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new Ye(e.slice()))}}function bO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=xe.fromTimestamp(r===1e9?new dt(n+1,0):new dt(n,r));return new ws(s,fe.empty(),e)}function SO(t){return new ws(t.readTime,t.key,-1)}class ws{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ws(xe.min(),fe.empty(),-1)}static max(){return new ws(xe.max(),fe.empty(),-1)}}function AO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==IO)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,r)=>{n(e)})}static reject(e){return new J((n,r)=>{r(e)})}static waitFor(e){return new J((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next(s=>s?J.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new J((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new J((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function NO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Sg.oe=-1;function Ud(t){return t==null}function Wu(t){return t===0&&1/t==-1/0}function RO(t){return typeof t=="number"&&Number.isInteger(t)&&!Wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||bt.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}}class wc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??bt.RED,this.left=s??bt.EMPTY,this.right=i??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new bt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return bt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,n,r,s,i){return this}insert(e,n,r){return new bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hv(this.data.getIterator())}getIteratorFrom(e){return new Hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class Hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new dn([])}unionWith(e){let n=new It(St.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Vb("Invalid base64 string: "+i):i}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const CO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(t){if(Fe(!!t),typeof t=="string"){let e=0;const n=CO.exec(t);if(Fe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(t.seconds),nanos:ot(t.nanos)}}function ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ai(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ig(t){const e=t.mapValue.fields.__previous_value__;return Ag(e)?Ig(e):e}function Ja(t){const e=bs(t.mapValue.fields.__local_write_time__.timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,n,r,s,i,o,a,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d}}class el{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new el("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof el&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc={mapValue:{}};function li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ag(t)?4:PO(t)?9007199254740991:OO(t)?10:11:ge()}function ar(t,e){if(t===e)return!0;const n=li(t);if(n!==li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ja(t).isEqual(Ja(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=bs(s.timestampValue),a=bs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ai(s.bytesValue).isEqual(ai(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ot(s.geoPointValue.latitude)===ot(i.geoPointValue.latitude)&&ot(s.geoPointValue.longitude)===ot(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ot(s.integerValue)===ot(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ot(s.doubleValue),a=ot(i.doubleValue);return o===a?Wu(o)===Wu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return lo(t.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if($v(o)!==$v(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ar(o[c],a[c])))return!1;return!0}(t,e);default:return ge()}}function tl(t,e){return(t.values||[]).find(n=>ar(n,e))!==void 0}function co(t,e){if(t===e)return 0;const n=li(t),r=li(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ot(i.integerValue||i.doubleValue),c=ot(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Gv(t.timestampValue,e.timestampValue);case 4:return Gv(Ja(t),Ja(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ai(i),c=ai(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){const h=Le(a[d],c[d]);if(h!==0)return h}return Le(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Le(ot(i.latitude),ot(o.latitude));return a!==0?a:Le(ot(i.longitude),ot(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,d,h;const p=i.fields||{},f=o.fields||{},g=(a=p.value)===null||a===void 0?void 0:a.arrayValue,_=(c=f.value)===null||c===void 0?void 0:c.arrayValue,x=Le(((d=g==null?void 0:g.values)===null||d===void 0?void 0:d.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:Wv(g,_)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===bc.mapValue&&o===bc.mapValue)return 0;if(i===bc.mapValue)return 1;if(o===bc.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const f=Le(c[p],h[p]);if(f!==0)return f;const g=co(a[c[p]],d[h[p]]);if(g!==0)return g}return Le(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ge()}}function Gv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=bs(t),r=bs(e),s=Le(n.seconds,r.seconds);return s!==0?s:Le(n.nanos,r.nanos)}function Wv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=co(n[s],r[s]);if(i)return i}return Le(n.length,r.length)}function uo(t){return wp(t)}function wp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=bs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ai(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=wp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${wp(n.fields[o])}`;return s+"}"}(t.mapValue):ge()}function bp(t){return!!t&&"integerValue"in t}function Tg(t){return!!t&&"arrayValue"in t}function qv(t){return!!t&&"nullValue"in t}function Kv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nu(t){return!!t&&"mapValue"in t}function OO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Na(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return mi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Na(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Na(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Na(n)}setAll(e){let n=St.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Na(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());nu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];nu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){mi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Yt(Na(this.value))}}function Ub(t){const e=[];return mi(t.fields,(n,r)=>{const s=new St([n]);if(nu(r)){const i=Ub(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,xe.min(),xe.min(),xe.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ut(e,1,n,xe.min(),r,s,0)}static newNoDocument(e,n){return new Ut(e,2,n,xe.min(),xe.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,xe.min(),xe.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n){this.position=e,this.inclusive=n}}function Yv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=co(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ar(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n="asc"){this.field=e,this.dir=n}}function LO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{}class ft extends Fb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new MO(e,n,r):n==="array-contains"?new UO(e,r):n==="in"?new FO(e,r):n==="not-in"?new BO(e,r):n==="array-contains-any"?new zO(e,r):new ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jO(e,r):new VO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(co(n,this.value)):n!==null&&li(this.value)===li(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lr extends Fb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new lr(e,n)}matches(e){return Bb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Bb(t){return t.op==="and"}function zb(t){return DO(t)&&Bb(t)}function DO(t){for(const e of t.filters)if(e instanceof lr)return!1;return!0}function Sp(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(zb(t))return t.filters.map(e=>Sp(e)).join(",");{const e=t.filters.map(n=>Sp(n)).join(",");return`${t.op}(${e})`}}function $b(t,e){return t instanceof ft?function(r,s){return s instanceof ft&&r.op===s.op&&r.field.isEqual(s.field)&&ar(r.value,s.value)}(t,e):t instanceof lr?function(r,s){return s instanceof lr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&$b(o,s.filters[a]),!0):!1}(t,e):void ge()}function Hb(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`}(t):t instanceof lr?function(n){return n.op.toString()+" {"+n.getFilters().map(Hb).join(" ,")+"}"}(t):"Filter"}class MO extends ft{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class jO extends ft{constructor(e,n){super(e,"in",n),this.keys=Gb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VO extends ft{constructor(e,n){super(e,"not-in",n),this.keys=Gb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Gb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class UO extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tg(n)&&tl(n.arrayValue,this.value)}}class FO extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tl(this.value.arrayValue,n)}}class BO extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!tl(this.value.arrayValue,n)}}class zO extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function Xv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new $O(t,e,n,r,s,i,o)}function Ng(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ud(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>uo(r)).join(",")),e.ue=n}return e.ue}function Rg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$b(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qv(t.startAt,e.startAt)&&Qv(t.endAt,e.endAt)}function Ap(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function HO(t,e,n,r,s,i,o,a){return new Fd(t,e,n,r,s,i,o,a)}function Cg(t){return new Fd(t)}function Zv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GO(t){return t.collectionGroup!==null}function Ra(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new It(St.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ku(i,r))}),n.has(St.keyField().canonicalString())||e.ce.push(new Ku(St.keyField(),r))}return e.ce}function rr(t){const e=_e(t);return e.le||(e.le=WO(e,Ra(t))),e.le}function WO(t,e){if(t.limitType==="F")return Xv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ku(s.field,i)});const n=t.endAt?new qu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qu(t.startAt.position,t.startAt.inclusive):null;return Xv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ip(t,e,n){return new Fd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bd(t,e){return Rg(rr(t),rr(e))&&t.limitType===e.limitType}function Wb(t){return`${Ng(rr(t))}|lt:${t.limitType}`}function Si(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Hb(s)).join(", ")}]`),Ud(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>uo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>uo(s)).join(",")),`Target(${r})`}(rr(t))}; limitType=${t.limitType})`}function zd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):fe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ra(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const d=Yv(o,a,c);return o.inclusive?d<=0:d<0}(r.startAt,Ra(r),s)||r.endAt&&!function(o,a,c){const d=Yv(o,a,c);return o.inclusive?d>=0:d>0}(r.endAt,Ra(r),s))}(t,e)}function qO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qb(t){return(e,n)=>{let r=!1;for(const s of Ra(t)){const i=KO(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function KO(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),d=a.data.field(i);return c!==null&&d!==null?co(c,d):ge()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){mi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return jb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=new nt(fe.comparator);function Vr(){return YO}const Kb=new nt(fe.comparator);function aa(...t){let e=Kb;for(const n of t)e=e.insert(n.key,n);return e}function Yb(t){let e=Kb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ws(){return Ca()}function Qb(){return Ca()}function Ca(){return new Ro(t=>t.toString(),(t,e)=>t.isEqual(e))}const QO=new nt(fe.comparator),XO=new It(fe.comparator);function Ae(...t){let e=XO;for(const n of t)e=e.add(n);return e}const ZO=new It(Le);function JO(){return ZO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function Xb(t){return{integerValue:""+t}}function eP(t,e){return RO(e)?Xb(e):kg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(){this._=void 0}}function tP(t,e,n){return t instanceof Yu?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ag(i)&&(i=Ig(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof nl?Jb(t,e):t instanceof rl?eS(t,e):function(s,i){const o=Zb(s,i),a=Jv(o)+Jv(s.Pe);return bp(o)&&bp(s.Pe)?Xb(a):kg(s.serializer,a)}(t,e)}function nP(t,e,n){return t instanceof nl?Jb(t,e):t instanceof rl?eS(t,e):n}function Zb(t,e){return t instanceof Qu?function(r){return bp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Yu extends $d{}class nl extends $d{constructor(e){super(),this.elements=e}}function Jb(t,e){const n=tS(e);for(const r of t.elements)n.some(s=>ar(s,r))||n.push(r);return{arrayValue:{values:n}}}class rl extends $d{constructor(e){super(),this.elements=e}}function eS(t,e){let n=tS(e);for(const r of t.elements)n=n.filter(s=>!ar(s,r));return{arrayValue:{values:n}}}class Qu extends $d{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Jv(t){return ot(t.integerValue||t.doubleValue)}function tS(t){return Tg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function rP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof nl&&s instanceof nl||r instanceof rl&&s instanceof rl?lo(r.elements,s.elements,ar):r instanceof Qu&&s instanceof Qu?ar(r.Pe,s.Pe):r instanceof Yu&&s instanceof Yu}(t.transform,e.transform)}class sP{constructor(e,n){this.version=e,this.transformResults=n}}class Gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ru(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hd{}function nS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gd(t.key,Gt.none()):new Al(t.key,t.data,Gt.none());{const n=t.data,r=Yt.empty();let s=new It(St.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Rs(t.key,r,new dn(s.toArray()),Gt.none())}}function iP(t,e,n){t instanceof Al?function(s,i,o){const a=s.value.clone(),c=tE(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Rs?function(s,i,o){if(!ru(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=tE(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(rS(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ka(t,e,n,r){return t instanceof Al?function(i,o,a,c){if(!ru(i.precondition,o))return a;const d=i.value.clone(),h=nE(i.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rs?function(i,o,a,c){if(!ru(i.precondition,o))return a;const d=nE(i.fieldTransforms,c,o),h=o.data;return h.setAll(rS(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,a){return ru(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function oP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Zb(r.transform,s||null);i!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,i))}return n||null}function eE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&lo(r,s,(i,o)=>rP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Al extends Hd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rs extends Hd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function rS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tE(t,e,n){const r=new Map;Fe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,nP(o,a,n[s]))}return r}function nE(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,tP(i,o,e))}return r}class Gd extends Hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aP extends Hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&iP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ka(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ka(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Qb();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=nS(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(n,r)=>eE(n,r))&&lo(this.baseMutations,e.baseMutations,(n,r)=>eE(n,r))}}class Og{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Fe(e.mutations.length===r.length);let s=function(){return QO}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Og(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Ce;function dP(t){switch(t){default:return ge();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function sS(t){if(t===void 0)return jr("GRPC error has no .code"),Z.UNKNOWN;switch(t){case ct.OK:return Z.OK;case ct.CANCELLED:return Z.CANCELLED;case ct.UNKNOWN:return Z.UNKNOWN;case ct.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case ct.INTERNAL:return Z.INTERNAL;case ct.UNAVAILABLE:return Z.UNAVAILABLE;case ct.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case ct.NOT_FOUND:return Z.NOT_FOUND;case ct.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case ct.ABORTED:return Z.ABORTED;case ct.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case ct.DATA_LOSS:return Z.DATA_LOSS;default:return ge()}}(Ce=ct||(ct={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new Xs([4294967295,4294967295],0);function rE(t){const e=hP().encode(t),n=new Rb;return n.update(e),new Uint8Array(n.digest())}function sE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Xs([n,r],0),new Xs([s,i],0)]}class Pg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new la(`Invalid padding: ${n}`);if(r<0)throw new la(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new la(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new la(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Xs.fromNumber(r)));return s.compare(fP)===1&&(s=new Xs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=rE(e),[r,s]=sE(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Pg(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=rE(e),[r,s]=sE(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class la extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wd(xe.min(),s,new nt(Le),Vr(),Ae())}}class Il{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Il(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class iS{constructor(e,n){this.targetId=e,this.me=n}}class oS{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class iE{constructor(){this.fe=0,this.ge=aE(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ae(),n=Ae(),r=Ae();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ge()}}),new Il(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=aE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class pP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vr(),this.qe=oE(),this.Qe=new nt(Le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ge()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Ap(i))if(r===0){const o=new fe(i.path);this.Ue(n,o,Ut.newNoDocument(o,xe.min()))}else Fe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ai(r).toUint8Array()}catch(c){if(c instanceof Vb)return ao("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Pg(o,s,i)}catch(c){return ao(c instanceof la?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Ap(a.target)){const c=new fe(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Ut.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Ae();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Wd(e,n,this.Qe,this.ke,r);return this.ke=Vr(),this.qe=oE(),this.Qe=new nt(Le),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new iE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new It(Le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new iE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function oE(){return new nt(fe.comparator)}function aE(){return new nt(fe.comparator)}const mP={asc:"ASCENDING",desc:"DESCENDING"},gP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yP={and:"AND",or:"OR"};class vP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tp(t,e){return t.useProto3Json||Ud(e)?e:{value:e}}function Xu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function EP(t,e){return Xu(t,e.toTimestamp())}function sr(t){return Fe(!!t),xe.fromTimestamp(function(n){const r=bs(n);return new dt(r.seconds,r.nanos)}(t))}function Lg(t,e){return Np(t,e).canonicalString()}function Np(t,e){const n=function(s){return new Ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lS(t){const e=Ye.fromString(t);return Fe(fS(e)),e}function Rp(t,e){return Lg(t.databaseId,e.path)}function nf(t,e){const n=lS(e);if(n.get(1)!==t.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(uS(n))}function cS(t,e){return Lg(t.databaseId,e)}function xP(t){const e=lS(t);return e.length===4?Ye.emptyPath():uS(e)}function Cp(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uS(t){return Fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lE(t,e,n){return{name:Rp(t,e),fields:n.value.mapValue.fields}}function _P(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Fe(h===void 0||typeof h=="string"),Nt.fromBase64String(h||"")):(Fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const h=d.code===void 0?Z.UNKNOWN:sS(d.code);return new he(h,d.message||"")}(o);n=new oS(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=nf(t,r.document.name),i=sr(r.document.updateTime),o=r.document.createTime?sr(r.document.createTime):xe.min(),a=new Yt({mapValue:{fields:r.document.fields}}),c=Ut.newFoundDocument(s,i,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];n=new su(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=nf(t,r.document),i=r.readTime?sr(r.readTime):xe.min(),o=Ut.newNoDocument(s,i),a=r.removedTargetIds||[];n=new su([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=nf(t,r.document),i=r.removedTargetIds||[];n=new su([],i,s,null)}else{if(!("filter"in e))return ge();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new uP(s,i),a=r.targetId;n=new iS(a,o)}}return n}function wP(t,e){let n;if(e instanceof Al)n={update:lE(t,e.key,e.value)};else if(e instanceof Gd)n={delete:Rp(t,e.key)};else if(e instanceof Rs)n={update:lE(t,e.key,e.data),updateMask:kP(e.fieldMask)};else{if(!(e instanceof aP))return ge();n={verify:Rp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Yu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof nl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof rl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ge()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:EP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge()}(t,e.precondition)),n}function bP(t,e){return t&&t.length>0?(Fe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?sr(s.updateTime):sr(i);return o.isEqual(xe.min())&&(o=sr(i)),new sP(o,s.transformResults||[])}(n,e))):[]}function SP(t,e){return{documents:[cS(t,e.path)]}}function AP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cS(t,s);const i=function(d){if(d.length!==0)return hS(lr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(f){return{field:Ai(f.field),direction:NP(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Tp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function IP(t){let e=xP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Fe(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const f=dS(p);return f instanceof lr&&zb(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(f=>function(_){return new Ku(Ii(_.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(p){let f;return f=typeof p=="object"?p.value:p,Ud(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(p){const f=!!p.before,g=p.values||[];return new qu(g,f)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const f=!p.before,g=p.values||[];return new qu(g,f)}(n.endAt)),HO(e,s,o,i,a,"F",c,d)}function TP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ii(n.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ii(n.unaryFilter.field);return ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ii(n.unaryFilter.field);return ft.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ii(n.unaryFilter.field);return ft.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(t):t.fieldFilter!==void 0?function(n){return ft.create(Ii(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return lr.create(n.compositeFilter.filters.map(r=>dS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge()}}(n.compositeFilter.op))}(t):ge()}function NP(t){return mP[t]}function RP(t){return gP[t]}function CP(t){return yP[t]}function Ai(t){return{fieldPath:t.canonicalString()}}function Ii(t){return St.fromServerFormat(t.fieldPath)}function hS(t){return t instanceof ft?function(n){if(n.op==="=="){if(Kv(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NAN"}};if(qv(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kv(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NOT_NAN"}};if(qv(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ai(n.field),op:RP(n.op),value:n.value}}}(t):t instanceof lr?function(n){const r=n.getFilters().map(s=>hS(s));return r.length===1?r[0]:{compositeFilter:{op:CP(n.op),filters:r}}}(t):ge()}function kP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r,s,i=xe.min(),o=xe.min(),a=Nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.ct=e}}function PP(t){const e=IP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ip(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.un=new DP}addToCollectionParentIndex(e,n){return this.un.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(ws.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class DP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new It(Ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new It(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ho(0)}static kn(){return new ho(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.changes=new Ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ka(r.mutation,s,dn.empty(),dt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const s=Ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=aa();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ws();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Vr();const o=Ca(),a=function(){return Ca()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Rs)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),ka(h.mutation,d,h.mutation.getFieldMask(),dt.now())):o.set(d.key,dn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var p;return a.set(d,new jP(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ca();let s=new nt((o,a)=>o-a),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||dn.empty();h=a.applyToLocalView(d,h),r.set(c,h);const p=(s.get(a.batchId)||Ae()).add(c);s=s.insert(a.batchId,p)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),d=c.key,h=c.value,p=Qb();h.forEach(f=>{if(!i.has(f)){const g=nS(n.get(f),r.get(f));g!==null&&p.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return J.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):J.resolve(Ws());let a=-1,c=i;return o.next(d=>J.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),i.get(h)?J.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{c=c.insert(h,f)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Ae())).next(h=>({batchId:a,changes:Yb(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let s=aa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=aa();return this.indexManager.getCollectionParents(e,i).next(a=>J.forEach(a,c=>{const d=function(p,f){return new Fd(f,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((p,f)=>{o=o.insert(p,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ut.newInvalidDocument(h)))});let a=aa();return o.forEach((c,d)=>{const h=i.get(c);h!==void 0&&ka(h.mutation,d,dn.empty(),dt.now()),zd(n,d)&&(a=a.insert(c,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return J.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:sr(s.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:PP(s.bundledQuery),readTime:sr(s.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.overlays=new nt(fe.comparator),this.Ir=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ws();return J.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),J.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const s=Ws(),i=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return J.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new nt((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Ws(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const a=Ws(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=s)););return J.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cP(n,r));let i=this.Ir.get(n);i===void 0&&(i=Ae(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this.Tr=new It(mt.Er),this.dr=new It(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new fe(new Ye([])),r=new mt(n,e),s=new mt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new fe(new Ye([])),r=new mt(n,e),s=new mt(n,e+1);let i=Ae();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return fe.comparator(e.key,n.key)||Le(e.wr,n.wr)}static Ar(e,n){return Le(e.wr,n.wr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new It(mt.Er)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lP(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new mt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,n){return J.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return J.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),s=new mt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),J.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Le);return n.forEach(s=>{const i=new mt(s,0),o=new mt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),J.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;fe.isDocumentKey(i)||(i=i.child(""));const o=new mt(new fe(i),0);let a=new It(Le);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(a=a.add(c.wr)),!0)},o),J.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return J.forEach(n.mutations,s=>{const i=new mt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new mt(n,0),s=this.br.firstAfterOrEqual(r);return J.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.Mr=e,this.docs=function(){return new nt(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=Vr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ut.newInvalidDocument(s))}),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Vr();const o=n.path,a=new fe(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||AO(SO(h),r)<=0||(s.has(h.key)||zd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return J.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ge()}Or(e,n){return J.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new HP(this)}getSize(e){return J.resolve(this.size)}}class HP extends MP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),J.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.persistence=e,this.Nr=new Ro(n=>Ng(n),Rg),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Dg,this.targetCount=0,this.kr=ho.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),J.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ho(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Kn(n),J.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),J.waitFor(i).next(()=>s)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),J.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Sg(0),this.Kr=!1,this.Kr=!0,this.$r=new BP,this.referenceDelegate=e(this),this.Ur=new GP(this),this.indexManager=new LP,this.remoteDocumentCache=function(s){return new $P(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new OP(n),this.Gr=new UP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new FP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new zP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const s=new qP(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return J.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class qP extends TO{constructor(e){super(),this.currentSequenceNumber=e}}class Mg{constructor(e){this.persistence=e,this.Jr=new Dg,this.Yr=null}static Zr(e){return new Mg(e)}get Xr(){if(this.Yr)return this.Yr;throw ge()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),J.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,r=>{const s=fe.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,xe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return J.or([()=>J.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ae(),s=Ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new jg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return YR()?8:NO(Bt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new KP;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Jo()<=Te.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Si(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(Jo()<=Te.DEBUG&&de("QueryEngine","Query:",Si(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Jo()<=Te.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Si(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(n))):J.resolve())}Yi(e,n){if(Zv(n))return J.resolve(null);let r=rr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ip(n,null,"F"),r=rr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ae(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,a);return this.ns(n,d,o,c.readTime)?this.Yi(e,Ip(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return Zv(n)||s.isEqual(xe.min())?J.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?J.resolve(null):(Jo()<=Te.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Si(n)),this.rs(e,o,n,bO(s,-1)).next(a=>a))})}ts(e,n){let r=new It(qb(e));return n.forEach((s,i)=>{zd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Jo()<=Te.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Si(n)),this.Ji.getDocumentsMatchingQuery(e,n,ws.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new nt(Le),this._s=new Ro(i=>Ng(i),Rg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function XP(t,e,n,r){return new QP(t,e,n,r)}async function pS(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=Ae();for(const d of s){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})}function ZP(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,h){const p=d.batch,f=p.keys();let g=J.resolve();return f.forEach(_=>{g=g.next(()=>h.getEntry(c,_)).next(x=>{const C=d.docVersions.get(_);Fe(C!==null),x.version.compareTo(C)<0&&(p.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),h.addEntry(x)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ae();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function mS(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function JP(t,e){const n=_e(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,p)=>{const f=s.get(p);if(!f)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,p)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(Nt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(p,g),function(x,C,E){return x.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,g,h)&&a.push(n.Ur.updateTargetData(i,g))});let c=Vr(),d=Ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(eL(i,o,e.documentUpdates).next(h=>{c=h.Ps,d=h.Is})),!r.isEqual(xe.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return J.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function eL(t,e,n){let r=Ae(),s=Ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Vr();return n.forEach((a,c)=>{const d=i.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(xe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):de("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function tL(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nL(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,J.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new is(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function kp(t,e,n){const r=_e(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Sl(o))throw o;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function cE(t,e,n){const r=_e(t);let s=xe.min(),i=Ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const p=_e(c),f=p._s.get(h);return f!==void 0?J.resolve(p.os.get(f)):p.Ur.getTargetData(d,h)}(r,o,rr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:xe.min(),n?i:Ae())).next(a=>(rL(r,qO(e),a),{documents:a,Ts:i})))}function rL(t,e,n){let r=t.us.get(e)||xe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class uE{constructor(){this.activeTargetIds=JO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sL{constructor(){this.so=new uE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new uE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc=null;function rf(){return Sc===null?Sc=function(){return 268435456+Math.round(2147483648*Math.random())}():Sc++,"0x"+Sc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class lL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=rf(),c=this.xo(n,r.toUriEncodedString());de("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(h=>(de("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ao("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+No}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=oL[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=rf();return new Promise((o,a)=>{const c=new Cb;c.setWithCredentials(!0),c.listenOnce(kb.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case tu.NO_ERROR:const h=c.getResponseJson();de(Lt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case tu.TIMEOUT:de(Lt,`RPC '${e}' ${i} timed out`),a(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case tu.HTTP_ERROR:const p=c.getStatus();if(de(Lt,`RPC '${e}' ${i} failed with status:`,p,"response text:",c.getResponseText()),p>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const _=function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(E)>=0?E:Z.UNKNOWN}(g.status);a(new he(_,g.message))}else a(new he(Z.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new he(Z.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{de(Lt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);de(Lt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=rf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Lb(),a=Pb(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");de(Lt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const p=o.createWebChannel(h,c);let f=!1,g=!1;const _=new aL({Io:C=>{g?de(Lt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(f||(de(Lt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),f=!0),de(Lt,`RPC '${e}' stream ${s} sending:`,C),p.send(C))},To:()=>p.close()}),x=(C,E,w)=>{C.listen(E,b=>{try{w(b)}catch(P){setTimeout(()=>{throw P},0)}})};return x(p,oa.EventType.OPEN,()=>{g||(de(Lt,`RPC '${e}' stream ${s} transport opened.`),_.yo())}),x(p,oa.EventType.CLOSE,()=>{g||(g=!0,de(Lt,`RPC '${e}' stream ${s} transport closed`),_.So())}),x(p,oa.EventType.ERROR,C=>{g||(g=!0,ao(Lt,`RPC '${e}' stream ${s} transport errored:`,C),_.So(new he(Z.UNAVAILABLE,"The operation could not be completed")))}),x(p,oa.EventType.MESSAGE,C=>{var E;if(!g){const w=C.data[0];Fe(!!w);const b=w,P=b.error||((E=b[0])===null||E===void 0?void 0:E.error);if(P){de(Lt,`RPC '${e}' stream ${s} received error:`,P);const D=P.status;let j=function(S){const A=ct[S];if(A!==void 0)return sS(A)}(D),I=P.message;j===void 0&&(j=Z.INTERNAL,I="Unknown error status: "+D+" with message "+P.message),g=!0,_.So(new he(j,I)),p.close()}else de(Lt,`RPC '${e}' stream ${s} received:`,w),_.bo(w)}}),x(a,Ob.STAT_EVENT,C=>{C.stat===_p.PROXY?de(Lt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===_p.NOPROXY&&de(Lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function sf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){return new vP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n,r,s,i,o,a,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(jr(n.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new he(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cL extends yS{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=_P(this.serializer,e),r=function(i){if(!("targetChange"in i))return xe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?sr(o.readTime):xe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Cp(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Ap(c)?{documents:SP(i,c)}:{query:AP(i,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=aS(i,o.resumeToken);const d=Tp(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(xe.min())>0){a.readTime=Xu(i,o.snapshotVersion.toTimestamp());const d=Tp(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=TP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Cp(this.serializer),n.removeTarget=e,this.a_(n)}}class uL extends yS{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=bP(e.writeResults,e.commitTime),r=sr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Cp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>wP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Np(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new he(Z.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Np(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(Z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class hL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(jr(n),this.D_=!1):de("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{gi(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=_e(c);d.L_.add(4),await Tl(d),d.q_.set("Unknown"),d.L_.delete(4),await Kd(d)}(this))})}),this.q_=new hL(r,s)}}async function Kd(t){if(gi(t))for(const e of t.B_)await e(!0)}async function Tl(t){for(const e of t.B_)await e(!1)}function vS(t,e){const n=_e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Bg(n)?Fg(n):Co(n).r_()&&Ug(n,e))}function Vg(t,e){const n=_e(t),r=Co(n);n.N_.delete(e),r.r_()&&ES(n,e),n.N_.size===0&&(r.r_()?r.o_():gi(n)&&n.q_.set("Unknown"))}function Ug(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Co(t).A_(e)}function ES(t,e){t.Q_.xe(e),Co(t).R_(e)}function Fg(t){t.Q_=new pP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Co(t).start(),t.q_.v_()}function Bg(t){return gi(t)&&!Co(t).n_()&&t.N_.size>0}function gi(t){return _e(t).L_.size===0}function xS(t){t.Q_=void 0}async function pL(t){t.q_.set("Online")}async function mL(t){t.N_.forEach((e,n)=>{Ug(t,e)})}async function gL(t,e){xS(t),Bg(t)?(t.q_.M_(e),Fg(t)):t.q_.set("Unknown")}async function yL(t,e,n){if(t.q_.set("Online"),e instanceof oS&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zu(t,r)}else if(e instanceof su?t.Q_.Ke(e):e instanceof iS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(xe.min()))try{const r=await mS(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.N_.get(d);h&&i.N_.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{const h=i.N_.get(c);if(!h)return;i.N_.set(c,h.withResumeToken(Nt.EMPTY_BYTE_STRING,h.snapshotVersion)),ES(i,c);const p=new is(h.target,c,d,h.sequenceNumber);Ug(i,p)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){de("RemoteStore","Failed to raise snapshot:",r),await Zu(t,r)}}async function Zu(t,e,n){if(!Sl(e))throw e;t.L_.add(1),await Tl(t),t.q_.set("Offline"),n||(n=()=>mS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Kd(t)})}function _S(t,e){return e().catch(n=>Zu(t,n,e))}async function Yd(t){const e=_e(t),n=Ss(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;vL(e);)try{const s=await tL(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,EL(e,s)}catch(s){await Zu(e,s)}wS(e)&&bS(e)}function vL(t){return gi(t)&&t.O_.length<10}function EL(t,e){t.O_.push(e);const n=Ss(t);n.r_()&&n.V_&&n.m_(e.mutations)}function wS(t){return gi(t)&&!Ss(t).n_()&&t.O_.length>0}function bS(t){Ss(t).start()}async function xL(t){Ss(t).p_()}async function _L(t){const e=Ss(t);for(const n of t.O_)e.m_(n.mutations)}async function wL(t,e,n){const r=t.O_.shift(),s=Og.from(r,e,n);await _S(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Yd(t)}async function bL(t,e){e&&Ss(t).V_&&await async function(r,s){if(function(o){return dP(o)&&o!==Z.ABORTED}(s.code)){const i=r.O_.shift();Ss(r).s_(),await _S(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Yd(r)}}(t,e),wS(t)&&bS(t)}async function hE(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const r=gi(n);n.L_.add(3),await Tl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Kd(n)}async function SL(t,e){const n=_e(t);e?(n.L_.delete(2),await Kd(n)):e||(n.L_.add(2),await Tl(n),n.q_.set("Unknown"))}function Co(t){return t.K_||(t.K_=function(n,r,s){const i=_e(n);return i.w_(),new cL(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:pL.bind(null,t),Ro:mL.bind(null,t),mo:gL.bind(null,t),d_:yL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Bg(t)?Fg(t):t.q_.set("Unknown")):(await t.K_.stop(),xS(t))})),t.K_}function Ss(t){return t.U_||(t.U_=function(n,r,s){const i=_e(n);return i.w_(),new uL(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:xL.bind(null,t),mo:bL.bind(null,t),f_:_L.bind(null,t),g_:wL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Yd(t)):(await t.U_.stop(),t.O_.length>0&&(de("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new zg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $g(t,e){if(jr("AsyncQueue",`${e}: ${t}`),Sl(t))return new he(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=aa(),this.sortedSet=new nt(this.comparator)}static emptySet(e){return new Qi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.W_=new nt(fe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ge():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class fo{constructor(e,n,r,s,i,o,a,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new fo(e,n,Qi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class IL{constructor(){this.queries=pE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=_e(n),i=s.queries;s.queries=pE(),i.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function pE(){return new Ro(t=>Wb(t),Bd)}async function SS(t,e){const n=_e(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new AL,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=$g(o,`Initialization of query '${Si(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Hg(n)}async function AS(t,e){const n=_e(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function TL(t,e){const n=_e(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Hg(n)}function NL(t,e,n){const r=_e(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Hg(t){t.Y_.forEach(e=>{e.next()})}var Op,mE;(mE=Op||(Op={})).ea="default",mE.Cache="cache";class IS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.key=e}}class NS{constructor(e){this.key=e}}class RL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ae(),this.mutatedKeys=Ae(),this.Aa=qb(e),this.Ra=new Qi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new fE,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const f=s.get(h),g=zd(this.query,p)?p:null,_=!!f&&this.mutatedKeys.has(f.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;f&&g?f.data.isEqual(g.data)?_!==x&&(r.track({type:3,doc:g}),C=!0):this.ga(f,g)||(r.track({type:2,doc:g}),C=!0,(c&&this.Aa(g,c)>0||d&&this.Aa(g,d)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),C=!0):f&&!g&&(r.track({type:1,doc:f}),C=!0,(c||d)&&(a=!0)),C&&(g?(o=o.add(g),i=x?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,p)=>function(g,_){const x=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return x(g)-x(_)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new fo(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new NS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new TS(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return fo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class CL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class kL{constructor(e){this.key=e,this.va=!1}}class OL{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ro(a=>Wb(a),Bd),this.Ma=new Map,this.xa=new Set,this.Oa=new nt(fe.comparator),this.Na=new Map,this.La=new Dg,this.Ba={},this.ka=new Map,this.qa=ho.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function PL(t,e,n=!0){const r=LS(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await RS(r,e,n,!0),s}async function LL(t,e){const n=LS(t);await RS(n,e,!0,!1)}async function RS(t,e,n,r){const s=await nL(t.localStore,rr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await DL(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&vS(t.remoteStore,s),a}async function DL(t,e,n,r,s){t.Ka=(p,f,g)=>async function(x,C,E,w){let b=C.view.ma(E);b.ns&&(b=await cE(x.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,b)));const P=w&&w.targetChanges.get(C.targetId),D=w&&w.targetMismatches.get(C.targetId)!=null,j=C.view.applyChanges(b,x.isPrimaryClient,P,D);return yE(x,C.targetId,j.wa),j.snapshot}(t,p,f,g);const i=await cE(t.localStore,e,!0),o=new RL(e,i.Ts),a=o.ma(i.documents),c=Il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(a,t.isPrimaryClient,c);yE(t,n,d.wa);const h=new CL(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function ML(t,e,n){const r=_e(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Bd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await kp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Vg(r.remoteStore,s.targetId),Pp(r,s.targetId)}).catch(bl)):(Pp(r,s.targetId),await kp(r.localStore,s.targetId,!0))}async function jL(t,e){const n=_e(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Vg(n.remoteStore,r.targetId))}async function VL(t,e,n){const r=GL(t);try{const s=await function(o,a){const c=_e(o),d=dt.now(),h=a.reduce((g,_)=>g.add(_.key),Ae());let p,f;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=Vr(),x=Ae();return c.cs.getEntries(g,h).next(C=>{_=C,_.forEach((E,w)=>{w.isValidDocument()||(x=x.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,_)).next(C=>{p=C;const E=[];for(const w of a){const b=oP(w,p.get(w.key).overlayedDocument);b!=null&&E.push(new Rs(w.key,b,Ub(b.value.mapValue),Gt.exists(!0)))}return c.mutationQueue.addMutationBatch(g,d,E,a)}).next(C=>{f=C;const E=C.applyToLocalDocumentSet(p,x);return c.documentOverlayCache.saveOverlays(g,C.batchId,E)})}).then(()=>({batchId:f.batchId,changes:Yb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new nt(Le)),d=d.insert(a,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Nl(r,s.changes),await Yd(r.remoteStore)}catch(s){const i=$g(s,"Failed to persist write");n.reject(i)}}async function CS(t,e){const n=_e(t);try{const r=await JP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Fe(o.va):s.removedDocuments.size>0&&(Fe(o.va),o.va=!1))}),await Nl(n,r,e)}catch(r){await bl(r)}}function gE(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=_e(o);c.onlineState=a;let d=!1;c.queries.forEach((h,p)=>{for(const f of p.j_)f.Z_(a)&&(d=!0)}),d&&Hg(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UL(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new nt(fe.comparator);o=o.insert(i,Ut.newNoDocument(i,xe.min()));const a=Ae().add(i),c=new Wd(xe.min(),new Map,new nt(Le),o,a);await CS(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Gg(r)}else await kp(r.localStore,e,!1).then(()=>Pp(r,e,n)).catch(bl)}async function FL(t,e){const n=_e(t),r=e.batch.batchId;try{const s=await ZP(n.localStore,e);OS(n,r,null),kS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nl(n,s)}catch(s){await bl(s)}}async function BL(t,e,n){const r=_e(t);try{const s=await function(o,a){const c=_e(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(p=>(Fe(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);OS(r,e,n),kS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nl(r,s)}catch(s){await bl(s)}}function kS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function OS(t,e,n){const r=_e(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Pp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||PS(t,r)})}function PS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Vg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Gg(t))}function yE(t,e,n){for(const r of n)r instanceof TS?(t.La.addReference(r.key,e),zL(t,r)):r instanceof NS?(de("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||PS(t,r.key)):ge()}function zL(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(de("SyncEngine","New document in limbo: "+n),t.xa.add(r),Gg(t))}function Gg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new fe(Ye.fromString(e)),r=t.qa.next();t.Na.set(r,new kL(n)),t.Oa=t.Oa.insert(n,r),vS(t.remoteStore,new is(rr(Cg(n.path)),r,"TargetPurposeLimboResolution",Sg.oe))}}async function Nl(t,e,n){const r=_e(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){s.push(d);const p=jg.Wi(c.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const h=_e(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>J.forEach(d,f=>J.forEach(f.$i,g=>h.persistence.referenceDelegate.addReference(p,f.targetId,g)).next(()=>J.forEach(f.Ui,g=>h.persistence.referenceDelegate.removeReference(p,f.targetId,g)))))}catch(p){if(!Sl(p))throw p;de("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const f=p.targetId;if(!p.fromCache){const g=h.os.get(f),_=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(f,x)}}}(r.localStore,i))}async function $L(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const r=await pS(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(c=>{c.reject(new he(Z.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nl(n,r.hs)}}function HL(t,e){const n=_e(t),r=n.Na.get(e);if(r&&r.va)return Ae().add(r.key);{let s=Ae();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function LS(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UL.bind(null,e),e.Ca.d_=TL.bind(null,e.eventManager),e.Ca.$a=NL.bind(null,e.eventManager),e}function GL(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BL.bind(null,e),e}class Ju{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return XP(this.persistence,new YP,e.initialUser,this.serializer)}Ga(e){return new WP(Mg.Zr,this.serializer)}Wa(e){return new sL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ju.provider={build:()=>new Ju};class Lp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$L.bind(null,this.syncEngine),await SL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IL}()}createDatastore(e){const n=qd(e.databaseInfo.databaseId),r=function(i){return new lL(i)}(e.databaseInfo);return function(i,o,a,c){return new dL(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new fL(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>gE(this.syncEngine,n,0),function(){return dE.D()?new dE:new iL}())}createSyncEngine(e,n){return function(s,i,o,a,c,d,h){const p=new OL(s,i,o,a,c,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=_e(s);de("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Tl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Lp.provider={build:()=>new Lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=jt.UNAUTHENTICATED,this.clientId=Mb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{de("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(de("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$g(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function of(t,e){t.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await pS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qL(t);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>hE(e.remoteStore,s)),t._onlineComponents=e}async function qL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await of(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),await of(t,new Ju)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await of(t,new Ju);return t._offlineComponents}async function MS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await vE(t,t._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await vE(t,new Lp))),t._onlineComponents}function KL(t){return MS(t).then(e=>e.syncEngine)}async function jS(t){const e=await MS(t),n=e.eventManager;return n.onListen=PL.bind(null,e.syncEngine),n.onUnlisten=ML.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=LL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jL.bind(null,e.syncEngine),n}function YL(t,e,n={}){const r=new Rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const h=new DS({next:f=>{h.Za(),o.enqueueAndForget(()=>AS(i,p));const g=f.docs.has(a);!g&&f.fromCache?d.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&c&&c.source==="server"?d.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(f)},error:f=>d.reject(f)}),p=new IS(Cg(a.path),h,{includeMetadataChanges:!0,_a:!0});return SS(i,p)}(await jS(t),t.asyncQueue,e,n,r)),r.promise}function QL(t,e,n={}){const r=new Rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const h=new DS({next:f=>{h.Za(),o.enqueueAndForget(()=>AS(i,p)),f.fromCache&&c.source==="server"?d.reject(new he(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(f)},error:f=>d.reject(f)}),p=new IS(a,h,{includeMetadataChanges:!0,_a:!0});return SS(i,p)}(await jS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e,n){if(!n)throw new he(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XL(t,e,n,r){if(e===!0&&r===!0)throw new he(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xE(t){if(!fe.isDocumentKey(t))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _E(t){if(fe.isDocumentKey(t))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge()}function kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wg(t);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pO;switch(r.type){case"firstParty":return new vO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=EE.get(n);r&&(de("ComponentProvider","Removing Datastore"),EE.delete(n),r.terminate())}(this),Promise.resolve()}}function ZL(t,e,n,r={}){var s;const i=(t=kn(t,Qd))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=jt.MOCK_USER;else{a=zR(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new jt(d)}t._authCredentials=new mO(new Db(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xd(this.firestore,e,this._query)}}class tn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}}class ys extends Xd{constructor(e,n,r){super(e,n,Cg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new fe(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function Rl(t,e,...n){if(t=vt(t),US("collection","path",e),t instanceof Qd){const r=Ye.fromString(e,...n);return _E(r),new ys(t,null,r)}{if(!(t instanceof tn||t instanceof ys))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return _E(r),new ys(t.firestore,null,r)}}function Gn(t,e,...n){if(t=vt(t),arguments.length===1&&(e=Mb.newId()),US("doc","path",e),t instanceof Qd){const r=Ye.fromString(e,...n);return xE(r),new tn(t,null,new fe(r))}{if(!(t instanceof tn||t instanceof ys))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return xE(r),new tn(t.firestore,t instanceof ys?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gS(this,"async_queue_retry"),this.Vu=()=>{const r=sf();r&&de("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=sf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Rr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Sl(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw jr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=zg.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ge()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Cs extends Qd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new bE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bE(e),this._firestoreClient=void 0,await e}}}function JL(t,e){const n=typeof t=="object"?t:Yw(),r=typeof t=="string"?t:"(default)",s=dg(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=FR("firestore");i&&ZL(s,...i)}return s}function Zd(t){if(t._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eD(t),t._firestoreClient}function eD(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,d,h){return new kO(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,VS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new WL(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new po(Nt.fromBase64String(e))}catch(n){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new po(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=/^__.*__$/;class nD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Al(e,this.data,n,this.fieldTransforms)}}class FS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class Qg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Qg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ed(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(BS(this.Cu)&&tD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class rD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qd(e)}Qu(e,n,r,s=!1){return new Qg({Cu:e,methodName:n,qu:r,path:St.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jd(t){const e=t._freezeSettings(),n=qd(t._databaseId);return new rD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xg(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Zg("Data must be an object, but it was:",o,r);const a=HS(r,o);let c,d;if(i.merge)c=new dn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const f=Dp(e,p,n);if(!o.contains(f))throw new he(Z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);WS(h,f)||h.push(f)}c=new dn(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new nD(new Yt(a),c,d)}class eh extends qg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eh}}function zS(t,e,n,r){const s=t.Qu(1,e,n);Zg("Data must be an object, but it was:",s,r);const i=[],o=Yt.empty();mi(r,(c,d)=>{const h=Jg(e,c,n);d=vt(d);const p=s.Nu(h);if(d instanceof eh)i.push(h);else{const f=th(d,p);f!=null&&(i.push(h),o.set(h,f))}});const a=new dn(i);return new FS(o,a,s.fieldTransforms)}function $S(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Dp(e,r,n)],c=[s];if(i.length%2!=0)throw new he(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Dp(e,i[f])),c.push(i[f+1]);const d=[],h=Yt.empty();for(let f=a.length-1;f>=0;--f)if(!WS(d,a[f])){const g=a[f];let _=c[f];_=vt(_);const x=o.Nu(g);if(_ instanceof eh)d.push(g);else{const C=th(_,x);C!=null&&(d.push(g),h.set(g,C))}}const p=new dn(d);return new FS(h,p,o.fieldTransforms)}function th(t,e){if(GS(t=vt(t)))return Zg("Unsupported field value:",e,t),HS(t,e);if(t instanceof qg)return function(r,s){if(!BS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=th(a,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=dt.fromDate(r);return{timestampValue:Xu(s.serializer,i)}}if(r instanceof dt){const i=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xu(s.serializer,i)}}if(r instanceof Kg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof po)return{bytesValue:aS(s.serializer,r._byteString)};if(r instanceof tn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Lg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Yg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return kg(a.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Wg(r)}`)}(t,e)}function HS(t,e){const n={};return jb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mi(t,(r,s)=>{const i=th(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function GS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dt||t instanceof Kg||t instanceof po||t instanceof tn||t instanceof qg||t instanceof Yg)}function Zg(t,e,n){if(!GS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Wg(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Dp(t,e,n){if((e=vt(e))instanceof Cl)return e._internalPath;if(typeof e=="string")return Jg(t,e);throw ed("Field path arguments must be of type string or ",t,!1,void 0,n)}const sD=new RegExp("[~\\*/\\[\\]]");function Jg(t,e,n){if(e.search(sD)>=0)throw ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cl(...e.split("."))._internalPath}catch{throw ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ed(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new he(Z.INVALID_ARGUMENT,a+t+c)}function WS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(KS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iD extends qS{data(){return super.data()}}function KS(t,e){return typeof e=="string"?Jg(t,e):e instanceof Cl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aD{convertValue(e,n="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return mi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ot(o.doubleValue));return new Yg(i)}convertGeoPoint(e){return new Kg(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ig(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ja(e));default:return null}}convertTimestamp(e){const n=bs(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ye.fromString(e);Fe(fS(r));const s=new el(r.get(1),r.get(3)),i=new fe(r.popFirst(5));return s.isEqual(n)||jr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class YS extends qS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(KS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class iu extends YS{data(e={}){return super.data(e)}}class lD{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ca(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new iu(this._firestore,this._userDataWriter,r.key,r,new ca(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new iu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ca(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new iu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ca(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:cD(a.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){t=kn(t,tn);const e=kn(t.firestore,Cs);return YL(Zd(e),t._key).then(n=>hD(e,t,n))}class QS extends aD{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,n)}}function t0(t){t=kn(t,Xd);const e=kn(t.firestore,Cs),n=Zd(e),r=new QS(e);return oD(t._query),QL(n,t._query).then(s=>new lD(e,r,t,s))}function XS(t,e,n){t=kn(t,tn);const r=kn(t.firestore,Cs),s=e0(t.converter,e,n);return kl(r,[Xg(Jd(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Gt.none())])}function dD(t,e,n,...r){t=kn(t,tn);const s=kn(t.firestore,Cs),i=Jd(s);let o;return o=typeof(e=vt(e))=="string"||e instanceof Cl?$S(i,"updateDoc",t._key,e,n,r):zS(i,"updateDoc",t._key,e),kl(s,[o.toMutation(t._key,Gt.exists(!0))])}function ZS(t){return kl(kn(t.firestore,Cs),[new Gd(t._key,Gt.none())])}function JS(t,e){const n=kn(t.firestore,Cs),r=Gn(t),s=e0(t.converter,e);return kl(n,[Xg(Jd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function kl(t,e){return function(r,s){const i=new Rr;return r.asyncQueue.enqueueAndForget(async()=>VL(await KL(r),s,i)),i.promise}(Zd(t),e)}function hD(t,e,n){const r=n.docs.get(e._key),s=new QS(t);return new YS(t,s,e._key,r,new ca(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Jd(e)}set(e,n,r){this._verifyNotCommitted();const s=af(e,this._firestore),i=e0(s.converter,n,r),o=Xg(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Gt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=af(e,this._firestore);let o;return o=typeof(n=vt(n))=="string"||n instanceof Cl?$S(this._dataReader,"WriteBatch.update",i._key,n,r,s):zS(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=af(e,this._firestore);return this._mutations=this._mutations.concat(new Gd(n._key,Gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function af(t,e){if((t=vt(t)).firestore!==e)throw new he(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){return Zd(t=kn(t,Cs)),new fD(t,e=>kl(t,e))}(function(e,n=!0){(function(s){No=s})(Io),io(new si("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Cs(new gO(r.getProvider("auth-internal")),new xO(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new el(d.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),gs(zv,"4.7.3",e),gs(zv,"4.7.3","esm2017")})();const pD={},js=pD||{},ou={apiKey:js.VITE_FIREBASE_API_KEY,authDomain:js.VITE_FIREBASE_AUTH_DOMAIN,projectId:js.VITE_FIREBASE_PROJECT_ID,storageBucket:js.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:js.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:js.VITE_FIREBASE_APP_ID,measurementId:js.VITE_FIREBASE_MEASUREMENT_ID};let lf,eA=null,tA=null;const mD=ou.apiKey&&ou.apiKey!=="PLACEHOLDER_API_KEY"&&!ou.apiKey.includes("Pega_Aqui");if(mD)try{lf=Kw(ou),eA=uO(lf),tA=JL(lf),console.log(" Firebase inicializado correctamente")}catch(t){console.error(" Error al inicializar Firebase:",t)}else console.warn(" AVISO: No se detectaron claves vlidas de Firebase en .env.local. La app funcionar en modo limitado.");const vs=eA,ke=tA,Wn={es:{header:{project:"PROYECTO: LZARO",failure:"FALLO DE CONTENCIN",biohazard:"PELIGRO BIOLGICO",clearance:"NIVEL DE ACCESO: OMEGA",saving:"GUARDANDO...",saved:"GUARDADO",logout:"SALIR"},sidebar:{threatLevelTitle:"NIVEL DE AMENAZA",threatLevelValue:"CRTICO",infectionRate:"TASA DE INFECCIN: 89%",hiveBtn:"ACCESO COLMENA",bunkerBtn:"ACCESO BNKER",campaignMode:"MODO CAMPAA",activeMissions:"MISIONES ACTIVAS",noMissions:"NO HAY MISIONES DISPONIBLES",replayStory:"REPETIR INTRO"},map:{sector:"SECTOR",loading:"CARGANDO DATOS SATELITALES...",error:"ERROR DE CONEXIN",hive:"COLMENA",bunker:"BNKER"},factions:{magneto:{name:"Edn Roto (Magneto)"},kingpin:{name:"Imperio de la Carne"},hulk:{name:"Tierras Baldas (Hulk)"},doom:{name:"Doomsberg (Latveria)"},neutral:{name:"Zona Neutral"}},login:{title:"SHIELD OS",subtitle:"SISTEMA DE RESPUESTA A ZOMBIES",clearance:"AUTORIZACIN REQUERIDA",idPrompt:"ESCANEAR IDENTIFICACIN BIOMTRICA",scanning:"ESCANEANDO...",granted:"ACCESO CONCEDIDO",scanBtn:"INICIAR ESCANEO DE RETINA",googleBtn:"ACCESO OFICIAL DE SHIELD (GOOGLE)",editorBtn:"ACCESO DE EDITOR",editorPass:"CONTRASEA DE MANDO",error:"ERROR DE AUTENTICACIN",passError:"CONTRASEA INCORRECTA"},missionModal:{title:"ARCHIVO DE MISIN",threat:"NIVEL DE AMENAZA",briefing:"INFORME DE MISIN",objectives:"OBJETIVOS PRIMARIOS",downloadPdf:"DESCARGAR INFORME TCTICO COMPLETO",cancel:"CANCELAR",reactivate:"REACTIVAR",sending:"ENVIANDO...",sent:"INFORME ENVIADO",complete:"REPORTAR XITO",accept:"ACEPTAR MISIN",outcomeTitle:"INFORME DE DESENLACE",closeReport:"ARCHIVAR INFORME"},bunker:{title:"PUESTO DE MANDO AVANZADO",hiveTitle:"NEXO DE LA COLMENA",return:"VOLVER AL MAPA",roster:"LISTA DE ACTIVOS",recruit:"RECLUTAR",currentStory:"ESTADO ACTUAL",objectives:"OBJETIVOS PERSONALES",status:"ESTADO",unassign:"RETIRAR",assign:"ASIGNAR A MISIN",viewFile:"VER FICHA TCNICA",manageSquad:"GESTIONAR ESCUADRN",assignModalTitle:"SELECCIONAR MISIN",squadModalTitle:"ASIGNACIN DE ESCUADRN",addToMission:"AADIR A MISIN",removeFromMission:"RETIRAR DE MISIN",noMissions:"NO HAY MISIONES DISPONIBLES",cancel:"CANCELAR",maxHeroes:"CAPACIDAD MXIMA ALCANZADA",omega:{title:"CILINDROS OMEGA",desc:"Nanobots reprogramados capaces de revertir la infeccin.",empty:"RESERVAS AGOTADAS",find:"BUSCAR SUMINISTROS",found:"CILINDRO ENCONTRADO!",notFound:"BSQUEDA FALLIDA"},rooms:{command:"SALA DE GUERRA",commandDesc:"Misiones activas y despliegue tctico.",barracks:"BARRACONES",barracksDesc:"Agentes en reserva listos para el servicio.",medbay:"ALA MDICA / CONTENCIN",medbayDesc:"Tratamiento y escaneo de nuevos sujetos.",cerebro:"INTERFAZ CEREBRO",cerebroDesc:"Bsqueda y reclutamiento global."}},recruit:{title:"RECLUTAMIENTO DE HROES",selectDb:"BASE DE DATOS DE S.H.I.E.L.D.",loadingDb:"ACCEDIENDO A ARCHIVOS...",alias:"NOMBRE EN CLAVE",name:"NOMBRE REAL",fileUrl:"URL DE FICHA (IMAGEN/PDF)",scanZombie:"ESCANEAR: SEALES ZOMBIE (CURAR)",scanHuman:"ESCANEAR: CARNE FRESCA (INFECTAR)",adminSeed:"ADMIN: REINICIAR DB",seedSuccess:"DB REINICIADA",submit:"RECLUTAR AGENTE"},missionEditor:{title:"EDITOR DE MISIONES",missionTitle:"TTULO DE LA MISIN",location:"UBICACIN (ESTADO)",threat:"NIVEL DE AMENAZA",type:"TIPO DE MISIN",prereq:"CONTINUACIN DE (REQUISITO)",pdfUrl:"URL DEL PDF (OPCIONAL)",description:"DESCRIPCIN",outcome:"DESENLACE (OPCIONAL)",objectives:"OBJETIVOS",addObjective:"AADIR OBJETIVO",objTitle:"Ttulo del Objetivo",objDesc:"Descripcin del Objetivo",cancel:"CANCELAR",save:"GUARDAR CAMBIOS"},events:{anomaly:{alive:{title:"ANOMALA CSMICA DETECTADA",desc:"LECTURAS DE ENERGA DESCONOCIDA EN EL ESPACIO PROFUNDO. REED RICHARDS CONFIRMA: UN PLANETA DEL SISTEMA VEGA HA DEJADO DE EXISTIR INSTANTNEAMENTE.",ack:"CONTINUAR MONITORIZACIN"},zombie:{title:"COMPETENCIA DETECTADA",desc:"EL HAMBRE SIENTE UNA PERTURBACIN. HANK PYM (ZOMBIE) INFORMA: ALGO MS EST DEVORANDO PLANETAS EN EL ESPACIO PROFUNDO. ES COMIDA O UN RIVAL?",ack:"RASTREAR PRESA"}},surfer:{alive:{title:"LA CADA DEL HERALDO",desc:"OBJETO PLATEADO ENTR EN LA ATMSFERA. INTERCEPTADO POR HULK EN KANSAS. VDEO CONFIRMA INFECCIN. SILVER SURFER HA CADO ANTE EL HAMBRE. REPITO: TENEMOS A UN HERALDO ZOMBIE EN JUEGO.",ack:"ACTIVAR PROTOCOLO OMEGA",image:"https://i.pinimg.com/1200x/ed/22/4b/ed224b12777f7372e1a4b6ca74912cf9.jpg"},zombie:{title:"COMIDA A DOMICILIO",desc:"UN SER DE PLATA HA ENTRADO EN LA ATMSFERA. TIENE SABOR A PODER CSMICO. HULK YA LE HA DADO EL PRIMER MORDISCO. EL HERALDO ES NUESTRO.",ack:"CONSUMIR PODER",image:"https://i.pinimg.com/1200x/ed/22/4b/ed224b12777f7372e1a4b6ca74912cf9.jpg"}},galactus:{alive:{title:"LLEGADA DE GALACTUS",desc:"EL DEVORADOR DE MUNDOS EST EN RBITA. EL CIELO SE HA VUELTO PRPURA. NO VIENE A SALVARNOS. VIENE A COMER. LA LTIMA BATALLA POR LA TIERRA HA COMENZADO.",ack:"PREPARARSE PARA EL JUICIO FINAL",image:"https://i.pinimg.com/736x/03/c7/6c/03c76c56fccbdc6bc57aff5c1b506089.jpg"},zombie:{title:"EL PLATO PRINCIPAL",desc:"GALACTUS HA LLEGADO. ES GIGANTE. EST LLENO DE ENERGA. SI NOS COMEMOS A ESTE DIOS ESPACIAL, NUNCA MS TENDREMOS HAMBRE. A LA MESA!",ack:"DEVORAR AL DEVORADOR",image:"https://i.pinimg.com/736x/03/c7/6c/03c76c56fccbdc6bc57aff5c1b506089.jpg"}}},missions:{kraven:{title:"LA CACERA DE KRAVEN",description:["Kraven el Cazador ha establecido una zona de caza en Central Park. Est usando supervivientes como cebo.","Debemos detenerlo antes de que mate a ms inocentes."],objectives:[{title:"Localizar a Kraven",desc:"Rastrear sus movimientos en Central Park."},{title:"Neutralizar a Kraven",desc:"Acabar con la amenaza."}]},fleshSleeps:{title:"DONDE DUERME LA CARNE",description:["Hemos detectado una instalacin subterrnea donde Kingpin almacena 'carne fresca'.","Es una granja de humanos. Debemos liberarlos."],objectives:[{title:"Infiltracin",desc:"Entrar en la instalacin sin ser detectados."},{title:"Liberacin",desc:"Liberar a los prisioneros."}]},bases:{alpha:"BASE ALPHA",beta:"BASE BETA",gamma:"BASE GAMMA",delta:"BASE DELTA",epsilon:"BASE EPSILON",zeta:"BASE ZETA",desc:"Antigua base de operaciones de S.H.I.E.L.D. Puede contener suministros vitales.",objSecure:"Asegurar el permetro",objRetrieve:"Recuperar datos"},galactus:{title:"EL JUICIO FINAL",description:["Galactus ha comenzado a alimentarse. Debemos detenerlo o la Tierra ser destruida.","Todos los hroes disponibles deben converger en su posicin."],objectives:[{title:"Atacar a Galactus",desc:"Coordinar un ataque masivo."},{title:"Salvar la Tierra",desc:"Evitar la destruccin total."}]}},heroes:{hawkeye:{alias:"HAWKEYE",bio:"Maestro arquero y asesino. Nunca falla."},lukecage:{alias:"LUKE CAGE",bio:"Piel impenetrable y fuerza sobrehumana."},daredevil:{alias:"DAREDEVIL",bio:"El hombre sin miedo. Sentidos aumentados."},thor:{alias:"THOR",bio:"Dios del Trueno. Posee el poder de Mjolnir."},storm:{alias:"STORM",bio:"Controla el clima. Una diosa entre mortales."}},introSequence:{alive:[{text:"El zumbido en tus odos es lo nico que ahoga los gritos de los moribundos. Sientes sabor a cobre; sangre. El transporte blindado de la Trada, esa jaula con ruedas que os llevaba al matadero, es ahora un amasijo de metal retorcido y carne quemada. Iban a venderos, a usaros como cobayas o entretenimiento... pero el destino ha tirado los dados.",image:"https://i.postimg.cc/s2krL4L6/Video-con-humo-llamas-y-nubes-1.gif"},{text:"Te tocas el cuello. El piloto LED del collar inhibidor est apagado. El impacto ha frito los circuitos. Estis libres. Pero en este mundo, la libertad tiene un precio: ahora sois presas. El humo negro es una baliza; el ruido del choque, una campana de cena para cada mordedor hambriento en cinco kilmetros a la redonda. Ya puedes or sus gruidos mezclndose con sirenas distantes.",image:"https://i.postimg.cc/JnyLZtZn/Animacion-realista-de-imagen-estatica.gif"},{text:"Una figura aparece recortada por las llamas. No lleva el uniforme de la Trada. Os tiende una mano llena de cicatrices y grasa. Podis quedaros ah tirados y ser el aperitivo, o podis levantaros y ser los que aprietan el gatillo. El refugio est cerca pero el asfalto se va a teir de rojo antes de que lleguemos.",image:"https://i.postimg.cc/4xpjWHtk/Mind-Video-20251212162510-850.gif"}],zombie:[{text:"Nosotros no fuimos a pelear una guerra. Fuimos a terminar con una. Jennifer Walters (She-Hulk) nos haba llamado a gritos. La Trada (Doom, Magneto, Fisk) haba secuestrado a Bruce Banner. Su plan: usar el 'Pulso Nulificador' para convertir a los superhumanos en esclavos. Nuestra misin era sencilla: infiltrarnos en ese laboratorio de hormign, liberar a Bruce y desmantelar el arma. Estbamos all, apretando los dientes, listos para la pelea... Pero no pudimos llegar. El Pulso se activ, y todo fue demasiado rpido. Un segundo de retraso fue nuestra condena. El arma fall.",image:"https://i.postimg.cc/m2jR0zNC/Animacion-sutil-de-imagen-original.gif"},{text:"Cuando las alarmas sonaron, ya estbamos en los pasillos, y el color verde lo inund todo. El virus nos toc. Y, en lugar de matarnos, nos despert. El dolor se desvaneci, y en su lugar lleg el Hambre. No como un grito, sino como un fro constante, un vaco que ningn poder puede apagar. ramos hroes, y ahora somos el error. El laboratorio es ahora nuestro matadero personal. Y en el corazn del complejo, lo omos. Hulk no muri. El monstruo despert. Sin alma, sin freno. Cada latido suyo extiende la plaga Gamma. Ahora entendemos: Hulk es el origen, y lo ltimo que intentamos fue lo que desat la catstrofe.",image:"https://i.postimg.cc/RhvyRdYX/Animacion-sutil-de-vineta-comica.gif"},{text:"S.H.I.E.L.D. lleg tarde. Sellaron el complejo, bombardearon las coordenadas. Llaman a nuestra casa 'Zona Perdida'. El mundo exterior an cree que puede contener esto, que puede revertirlo. No saben que el origen sigue rugiendo. No saben que el virus nos ha otorgado un poder que nunca conocimos. Ya no se trata de salvacin. Se trata de expansin. Hemos aprendido a caminar con este vaco. Hemos aprendido a usar esta rabia. El virus aprendi a caminar. Y nosotros... vamos a cazarlo todo.",image:"https://i.postimg.cc/nhGFfZgp/Image-to-Video-(1).gif"}]},story:{loading:{line1:"INICIALIZANDO...",line2:"CARGANDO ARCHIVOS...",line3:"ACCEDIENDO A MEMORIA...",line4:"SISTEMA LISTO"},slides:[{text:"No hubo trompetas. No hubo cielos rojos ni profecas antiguas cumplindose. El fin del mundo no vino del espacio exterior, ni de una dimensin oscura.",image:"https://i.pinimg.com/1200x/18/99/ec/1899ec756f8731e015eb941d7122fbec.jpg"},{text:`Lo construimos nosotros. Aqu. En casa.
O mejor dicho, lo construyeron ellos.`,image:"https://i.pinimg.com/1200x/71/06/7d/71067db72856dfd6ca03d0d51a679bd6.jpg"},{text:`Fue en un laboratorio estril. Tres hombres se reunieron all: Victor Von Doom, Magneto y Wilson Fisk.
Decidieron que la humanidad era demasiado catica. Su solucin fue la ciencia fra y dura: el Pulso Nulificador.`,image:"https://i.pinimg.com/1200x/71/06/7d/71067db72856dfd6ca03d0d51a679bd6.jpg"},{text:"Necesitaban cuerpos para afinar la frmula. Usaron a Jamie Madrox para ver cmo se multiplicaba la infeccin. Usaron a los Reavers para ver si el metal poda enfermar. Y funcion.",image:"https://i.pinimg.com/1200x/99/80/1e/99801e7603e4a770127ce29530f13f87.jpg"},{text:"Pero la arrogancia es una pistola cargada que siempre apunta hacia atrs.",image:"https://i.pinimg.com/1200x/19/26/53/1926533335a2b27c4a79c9d2632ec83d.jpg"},{text:"Decidieron probar su obra maestra en Bruce Banner. Buscaban una fuente de energa infinita; lo que consiguieron fue una bomba biolgica.",image:"https://i.pinimg.com/1200x/b2/06/15/b20615925dfa53cdf9622fb596cdd5e3.jpg"},{text:"Cuando el virus toc la sangre gamma, no muri. Se enfureci. Banner no cay. La cosa que despert ya no tena a nadie al volante.",image:"https://i.pinimg.com/1200x/a8/e9/b7/a8e9b76d6a9a87de0cfba509d5fef534.jpg"},{text:"El estallido no fue de fuego, fue de contagio. Hulk roared, y en ese rugido viajaba la extincin.",image:"https://i.pinimg.com/1200x/eb/db/e8/ebdbe8d5738acd105654dc8ddad8216f.jpg"},{text:"En cuestin de horas, Nueva York era un matadero. Los Vengadores cayeron primero, destrozados por los amigos que intentaban salvar.",image:"https://i.pinimg.com/1200x/b9/0a/18/b90a18369639b131f91273f019b699cd.jpg"},{text:"Y la Trada? Doom, Magneto, y Fisk fueron alcanzados por su propia creacin. Pero el destino tiene un sentido del humor cruel.",image:"https://i.pinimg.com/1200x/e1/02/86/e102864e130bfa5b5f2ffc5a9d9ed9c0.jpg"},{text:"No perdieron la mente. Sus cuerpos se pudrieron, pero su intelecto permaneci intacto. Ahora se sientan en tronos de huesos, gobernando facciones de pesadilla.",image:"https://i.pinimg.com/1200x/e2/5c/3a/e25c3ac26e5fc65f9119b6073912e856.jpg"},{text:"Pero hay algo ms ah fuera. S.H.I.E.L.D. sigue activo. No es una agencia; es un fantasma armado. Una IA paranoica que ha decidido que la nica forma de mantener el orden es eliminar todo lo que se mueva.",image:"https://i.pinimg.com/1200x/39/c8/cd/39c8cde0a5b56acc78b41c4eecf91f0a.jpg"},{text:"As que aqu ests. De pie sobre las cenizas. Ya no se trata de salvar el mundo. Se trata de ver quin queda en pie.",image:"https://i.pinimg.com/1200x/45/7d/c5/457dc515c61d470eb26cf1727ebd67ea.jpg"},{text:"Dime, superviviente... en esta nueva era de monstruos y mquinas: QU ERES T?",image:"https://i.pinimg.com/1200x/18/85/ee/1885ee42132b6976d36896a81f33ad8c.jpg"}],choose:"ELIGE TU DESTINO",optionA:"SUPERVIVIENTE",optionB:"ZOMBIE",skip:"OMITIR",prev:"ANTERIOR",next:"SIGUIENTE"},tutorial:{welcome:{title:"BIENVENIDO A SHIELD",text:"El mundo ha cado, pero la resistencia contina. Esta es tu interfaz de mando."},map_zones:{title:"ZONAS DE CONTROL",text:"El mapa muestra los territorios controlados por las facciones. Ten cuidado al desplegar tus agentes."},hulk:{title:"AMENAZA MVIL",text:"Hulk Zombie vaga por el mapa. Evita el contacto directo a menos que ests preparado."},missions:{title:"MISIONES ACTIVAS",text:"Aqu aparecern las misiones disponibles. Compltalas para obtener recursos y avanzar en la historia."},bunker_entry:{title:"ACCESO AL BNKER",text:"Gestiona tu equipo, recluta nuevos hroes y revisa el estado de tus agentes aqu."},roster:{title:"LISTA DE AGENTES",text:"Tus hroes disponibles. Haz clic para ver detalles y asignar misiones."},file:{title:"EXPEDIENTE",text:"Informacin detallada del agente. Aqu puedes ver su historia y objetivos personales."},recruit:{title:"RECLUTAMIENTO",text:"Busca y recluta nuevos hroes de la base de datos de SHIELD."},finish:{title:"LISTO PARA EL COMBATE",text:"Buena suerte, Comandante. La humanidad depende de ti."},finishBtn:"FINALIZAR",skip:"OMITIR",next:"SIGUIENTE"}},en:{header:{project:"PROJECT: LAZARUS",failure:"CONTAINMENT FAILURE",biohazard:"BIOHAZARD",clearance:"CLEARANCE: OMEGA",saving:"SAVING...",saved:"SAVED",logout:"LOGOUT"},sidebar:{threatLevelTitle:"THREAT LEVEL",threatLevelValue:"CRITICAL",infectionRate:"INFECTION RATE: 89%",hiveBtn:"HIVE ACCESS",bunkerBtn:"BUNKER ACCESS",campaignMode:"CAMPAIGN MODE",activeMissions:"ACTIVE MISSIONS",noMissions:"NO MISSIONS AVAILABLE",replayStory:"REPLAY INTRO"},map:{sector:"SECTOR",loading:"LOADING SATELLITE DATA...",error:"CONNECTION ERROR",hive:"HIVE",bunker:"BUNKER"},factions:{magneto:{name:"Broken Eden (Magneto)"},kingpin:{name:"Empire of Flesh"},hulk:{name:"Hulk's Wasteland"},doom:{name:"Doomsberg (Latveria)"},neutral:{name:"Neutral Zone"}},login:{title:"SHIELD OS",subtitle:"ZOMBIE RESPONSE SYSTEM",clearance:"AUTHORIZATION REQUIRED",idPrompt:"SCAN BIOMETRIC ID",scanning:"SCANNING...",granted:"ACCESS GRANTED",scanBtn:"INITIATE RETINA SCAN",googleBtn:"SHIELD OFFICIAL ACCESS (GOOGLE)",editorBtn:"EDITOR ACCESS",editorPass:"COMMAND PASSWORD",error:"AUTHENTICATION ERROR",passError:"INCORRECT PASSWORD"},missionModal:{title:"MISSION FILE",threat:"THREAT LEVEL",briefing:"MISSION BRIEFING",objectives:"PRIMARY OBJECTIVES",downloadPdf:"DOWNLOAD FULL TACTICAL REPORT",cancel:"CANCEL",reactivate:"REACTIVATE",sending:"SENDING...",sent:"REPORT SENT",complete:"REPORT SUCCESS",accept:"ACCEPT MISSION",outcomeTitle:"MISSION DEBRIEF",closeReport:"ARCHIVE REPORT"},bunker:{title:"FORWARD COMMAND POST",hiveTitle:"HIVE NEXUS",return:"RETURN TO MAP",roster:"ASSET LIST",recruit:"RECRUIT",currentStory:"CURRENT STATUS",objectives:"PERSONAL OBJECTIVES",status:"STATUS",unassign:"WITHDRAW",assign:"ASSIGN TO MISSION",viewFile:"VIEW PERSONNEL FILE",manageSquad:"MANAGE SQUAD",assignModalTitle:"SELECT MISSION",squadModalTitle:"SQUAD ASSIGNMENT",addToMission:"ADD TO MISSION",removeFromMission:"REMOVE FROM MISSION",noMissions:"NO MISSIONS AVAILABLE",cancel:"CANCEL",maxHeroes:"MAXIMUM CAPACITY REACHED",omega:{title:"OMEGA CYLINDERS",desc:"Reprogrammed nanobots capable of reversing the infection.",empty:"RESERVES DEPLETED",find:"SCAVENGE SUPPLIES",found:"CYLINDER FOUND!",notFound:"SEARCH FAILED"},rooms:{command:"WAR ROOM",commandDesc:"Active missions and tactical deployment.",barracks:"BARRACKS",barracksDesc:"Reserve agents ready for deployment.",medbay:"MEDBAY / CONTAINMENT",medbayDesc:"Treatment and scanning of new subjects.",cerebro:"CEREBRO INTERFACE",cerebroDesc:"Global search and recruitment."}},recruit:{title:"HERO RECRUITMENT",selectDb:"S.H.I.E.L.D. DATABASE",loadingDb:"ACCESSING FILES...",alias:"CODENAME",name:"REAL NAME",fileUrl:"FILE URL (IMAGE/PDF)",scanZombie:"SCAN: ZOMBIE SIGNALS (CURE)",scanHuman:"SCAN: FRESH MEAT (INFECT)",adminSeed:"ADMIN: RESET DB",seedSuccess:"DB RESET",submit:"RECLUTAR AGENTE"},missionEditor:{title:"MISSION EDITOR",missionTitle:"MISSION TITLE",location:"LOCATION (STATE)",threat:"THREAT LEVEL",type:"MISSION TYPE",prereq:"PREREQUISITE MISSION",pdfUrl:"PDF URL (OPTIONAL)",description:"DESCRIPTION",outcome:"OUTCOME TEXT (OPTIONAL)",objectives:"OBJECTIVES",addObjective:"ADD OBJECTIVE",objTitle:"Objective Title",objDesc:"Objective Description",cancel:"CANCEL",save:"SAVE CHANGES"},events:{anomaly:{alive:{title:"COSMIC ANOMALY DETECTED",desc:"UNKNOWN ENERGY READINGS IN DEEP SPACE. REED RICHARDS CONFIRMA: A PLANET IN THE VEGA SYSTEM CEASED TO EXIST INSTANTANEOUSLY.",ack:"CONTINUE MONITORING"},zombie:{title:"COMPETITION DETECTED",desc:"THE HUNGER SENSES A DISTURBANCE. ZOMBIE PYM REPORTS: SOMETHING ELSE IS DEVOURING PLANETS IN DEEP SPACE. IS IT FOOD OR A RIVAL?",ack:"TRACK PREY"}},surfer:{alive:{title:"FALL OF THE HERALD",desc:"SILVER OBJECT ENTERED ATMOSPHERE. INTERCEPTED BY HULK IN KANSAS. FOOTAGE CONFIRMS INFECTION. SILVER SURFER HAS FALLEN TO THE HUNGER.",ack:"ACTIVATE OMEGA PROTOCOL",image:"https://i.pinimg.com/1200x/ed/22/4b/ed224b12777f7372e1a4b6ca74912cf9.jpg"},zombie:{title:"FAST FOOD DELIVERY",desc:"A SILVER BEING HAS ENTERED THE ATMOSPHERE. TASTES LIKE COSMIC POWER. HULK HAS ALREADY TAKEN A BITE. THE HERALD IS OURS.",ack:"CONSUME POWER",image:"https://i.pinimg.com/1200x/ed/22/4b/ed224b12777f7372e1a4b6ca74912cf9.jpg"}},galactus:{alive:{title:"ARRIVAL OF GALACTUS",desc:"THE DEVOURER OF WORLDS IS IN ORBIT. THE SKY HAS TURNED PURPLE. HE IS NOT HERE TO SAVE US. HE IS HERE TO EAT. THE FINAL BATTLE FOR EARTH HAS BEGUN.",ack:"PREPARE FOR JUDGMENT",image:"https://i.pinimg.com/736x/03/c7/6c/03c76c56fccbdc6bc57aff5c1b506089.jpg"},zombie:{title:"THE MAIN COURSE",desc:"GALACTUS IS HERE. HE IS GIANT. HE IS FULL OF ENERGY. IF WE EAT THIS SPACE GOD, WE WILL NEVER HUNGER AGAIN. DINNER IS SERVED!",ack:"DEVOUR THE DEVOURER",image:"https://i.pinimg.com/736x/03/c7/6c/03c76c56fccbdc6bc57aff5c1b506089.jpg"}}},missions:{kraven:{title:"KRAVEN'S HUNT",description:["Kraven the Hunter has established a hunting zone in Central Park. He is using survivors as bait.","We must stop him before he kills more innocents."],objectives:[{title:"Locate Kraven",desc:"Track his movements in Central Park."},{title:"Neutralize Kraven",desc:"End the threat."}]},fleshSleeps:{title:"WHERE FLESH SLEEPS",description:["We have detected an underground facility where Kingpin stores 'fresh meat'.","It's a human farm. We must liberate them."],objectives:[{title:"Infiltration",desc:"Enter the facility undetected."},{title:"Liberation",desc:"Free the prisoners."}]},bases:{alpha:"BASE ALPHA",beta:"BASE BETA",gamma:"BASE GAMMA",delta:"BASE DELTA",epsilon:"BASE EPSILON",zeta:"BASE ZETA",desc:"Former S.H.I.E.L.D. operating base. May contain vital supplies.",objSecure:"Secure the perimeter",objRetrieve:"Retrieve data"},galactus:{title:"JUDGMENT DAY",description:["Galactus has begun to feed. We must stop him or Earth will be destroyed.","All available heroes must converge on his position."],objectives:[{title:"Attack Galactus",desc:"Coordinate a massive attack."},{title:"Save Earth",desc:"Prevent total destruction."}]}},heroes:{hawkeye:{alias:"HAWKEYE",bio:"Master archer and assassin. Never misses."},lukecage:{alias:"LUKE CAGE",bio:"Unbreakable skin and superhuman strength."},daredevil:{alias:"DAREDEVIL",bio:"The Man Without Fear. Heightened senses."},thor:{alias:"THOR",bio:"God of Thunder. Wields the power of Mjolnir."},storm:{alias:"STORM",bio:"Controls the weather. A goddess among mortals."}},introSequence:{alive:[{text:"The ringing in your ears is the only thing drowning out the screams of the dying. You taste copper; blood. The Triad's armored transport, that cage on wheels taking you to the slaughterhouse, is now a twisted mass of metal and burnt flesh. They were going to sell you, use you as guinea pigs or entertainment... but fate has rolled the dice.",image:"https://i.postimg.cc/s2krL4L6/Video-con-humo-llamas-y-nubes-1.gif"},{text:"You touch your neck. The inhibitor collar's LED is off. The impact fried the circuits. You are free. But in this world, freedom comes at a price: now you are prey. The black smoke is a beacon; the crash noise, a dinner bell for every hungry biter within five kilometers. You can already hear their growls mixing with distant sirens.",image:"https://i.postimg.cc/JnyLZtZn/Animacion-realista-de-imagen-estatica.gif"},{text:"A figure appears silhouetted by the flames. She doesn't wear the Triad uniform. She extends a hand covered in scars and grease. 'You can stay there lying down and be the appetizer, or you can get up and be the ones pulling the trigger. The shelter is close... but the asphalt is going to run red before we get there.'",image:"https://i.postimg.cc/4xpjWHtk/Mind-Video-20251212162510-850.gif"}],zombie:[{text:"We didn't go to fight a war. We went to end one. Jennifer Walters (She-Hulk) had screamed for us. The Triad (Doom, Magneto, Fisk) had kidnapped Bruce Banner. Their plan: use the 'Nullifier Pulse' to turn superhumans into slaves. Our mission was simple: infiltrate that concrete lab, free Bruce, and dismantle the weapon. We were there, gritting our teeth, ready for the fight... But we couldn't make it. The Pulse activated, and everything happened too fast. A second of delay was our doom. The weapon failed.",image:"https://i.postimg.cc/m2jR0zNC/Animacion-sutil-de-imagen-original.gif"},{text:"When the alarms rang, we were already in the hallways, and the green color flooded everything. The virus touched us. And, instead of killing us, it woke us up. The pain vanished, and in its place came the Hunger. Not like a scream, but like a constant cold, a void that no power can quench. We were heroes, and now we are the mistake. The lab is now our personal slaughterhouse. And in the heart of the complex, we hear him. Hulk didn't die. The monster woke up. Soulless, unrestrained. Every beat of his heart spreads the Gamma plague. Now we understand: Hulk is the origin, and the last thing we tried was what unleashed the catastrophe.",image:"https://i.postimg.cc/RhvyRdYX/Animacion-sutil-de-vineta-comica.gif"},{text:"S.H.I.E.L.D. arrived too late. They sealed the complex, bombed the coordinates. They call our home 'Lost Zone'. The outside world still believes it can contain this, that it can reverse it. They don't know the origin is still roaring. They don't know the virus has granted us a power we never knew. It's no longer about salvation. It's about expansion. We have learned to walk with this void. We have learned to use this rage. The virus learned to walk. And we... are going to hunt it all.",image:"https://i.postimg.cc/nhGFfZgp/Image-to-Video-(1).gif"}]},story:{loading:{line1:"INITIALIZING...",line2:"LOADING FILES...",line3:"ACCESSING MEMORY...",line4:"SYSTEM READY"},slides:[{text:"There were no trumpets. No red skies or ancient prophecies being fulfilled. The end of the world didn't come from outer space, nor from a dark dimension.",image:"https://i.pinimg.com/1200x/18/99/ec/1899ec756f8731e015eb941d7122fbec.jpg"},{text:`We built it. Here. At home.
Or rather, *they* built it.`,image:"https://i.pinimg.com/1200x/71/06/7d/71067db72856dfd6ca03d0d51a679bd6.jpg"},{text:`It happened in a sterile laboratory. Three men met there: Victor Von Doom, Magneto, and Wilson Fisk.
They decided that humanity was too chaotic. Their solution was cold, hard science: the Nullifier Pulse.`,image:"https://i.pinimg.com/1200x/71/06/7d/71067db72856dfd6ca03d0d51a679bd6.jpg"},{text:"They needed bodies to fine-tune the formula. They used Jamie Madrox to see how the infection multiplied. They used the Reavers to see if metal could get sick. And it worked.",image:"https://i.pinimg.com/1200x/99/80/1e/99801e7603e4a770127ce29530f13f87.jpg"},{text:"But arrogance is a loaded gun that always points back at you.",image:"https://i.pinimg.com/1200x/19/26/53/1926533335a2b27c4a79c9d2632ec83d.jpg"},{text:"They decided to test their masterpiece on Bruce Banner. They sought an infinite power source; what they got was a biological bomb.",image:"https://i.pinimg.com/1200x/b2/06/15/b20615925dfa53cdf9622fb596cdd5e3.jpg"},{text:"When the virus touched the gamma blood, it didn't die. It became enraged. Banner didn't fall. The thing that woke up had no one at the wheel anymore.",image:"https://i.pinimg.com/1200x/a8/e9/b7/a8e9b76d6a9a87de0cfba509d5fef534.jpg"},{text:"The blast wasn't fire, it was contagion. Hulk roared, and extinction traveled in that roar.",image:"https://i.pinimg.com/1200x/eb/db/e8/ebdbe8d5738acd105654dc8ddad8216f.jpg"},{text:"In a matter of hours, New York was a slaughterhouse. The Avengers fell first, torn apart by the friends they were trying to save.",image:"https://i.pinimg.com/1200x/b9/0a/18/b90a18369639b131f91273f019b699cd.jpg"},{text:"And the Triad? Doom, Magneto, and Fisk were caught by their own creation. But fate has a cruel sense of humor.",image:"https://i.pinimg.com/1200x/e1/02/86/e102864e130bfa5b5f2ffc5a9d9ed9c0.jpg"},{text:"They didn't lose their minds. Their bodies rotted, but their intellect remained intact. Now they sit on thrones of bone, ruling nightmare factions.",image:"https://i.pinimg.com/1200x/e2/5c/3a/e25c3ac26e5fc65f9119b6073912e856.jpg"},{text:"But there is something else out there. S.H.I.E.L.D. is still active. It is not an agency; it is a weaponized ghost. A paranoid AI that has decided the only way to maintain order is to eliminate everything that moves.",image:"https://i.pinimg.com/1200x/39/c8/cd/39c8cde0a5b56acc78b41c4eecf91f0a.jpg"},{text:"So here you are. Standing on the ashes. It's no longer about saving the world. It's about seeing who is left standing.",image:"https://i.pinimg.com/1200x/45/7d/c5/457dc515c61d470eb26cf1727ebd67ea.jpg"},{text:"Tell me, survivor... in this new era of monsters and machines: WHAT ARE YOU?",image:"https://i.pinimg.com/1200x/18/85/ee/1885ee42132b6976d36896a81f33ad8c.jpg"}],choose:"CHOOSE YOUR DESTINY",optionA:"SURVIVOR",optionB:"ZOMBIE",skip:"SKIP",prev:"PREV",next:"NEXT"},tutorial:{welcome:{title:"WELCOME TO SHIELD",text:"The world has fallen, but the resistance continues. This is your command interface."},map_zones:{title:"CONTROL ZONES",text:"The map shows territories controlled by factions. Be careful when deploying your agents."},hulk:{title:"MOBILE THREAT",text:"Zombie Hulk roams the map. Avoid direct contact unless you are prepared."},missions:{title:"ACTIVE MISSIONS",text:"Available missions will appear here. Complete them to gain resources and advance the story."},bunker_entry:{title:"BUNKER ACCESS",text:"Manage your team, recruit new heroes, and check the status of your agents here."},roster:{title:"AGENT LIST",text:"Your available heroes. Click to view details and assign missions."},file:{title:"DOSSIER",text:"Detailed agent information. Here you can view their history and personal objectives."},recruit:{title:"RECRUITMENT",text:"Search and recruit new heroes from the SHIELD database."},finish:{title:"READY FOR COMBAT",text:"Good luck, Commander. Humanity depends on you."},finishBtn:"FINISH",skip:"SKIP",next:"NEXT"}}},gD=[{id:"hawkeye",defaultName:"Clint Barton",defaultClass:"SCOUT",defaultStats:{strength:6,agility:9,intellect:6},imageUrl:"https://i.pinimg.com/736x/e6/79/1b/e6791b4527960309995c653f8202476d.jpg"},{id:"lukecage",defaultName:"Carl Lucas",defaultClass:"BRAWLER",defaultStats:{strength:10,agility:6,intellect:5},imageUrl:"https://i.pinimg.com/736x/a2/22/e0/a222e0322237894a4f891b979505869d.jpg"},{id:"daredevil",defaultName:"Matt Murdock",defaultClass:"BRAWLER",defaultStats:{strength:7,agility:9,intellect:8},imageUrl:"https://i.pinimg.com/736x/8d/8a/80/8d8a8027773206037775537505372336.jpg"},{id:"thor",defaultName:"Thor Odinson",defaultClass:"BLASTER",defaultStats:{strength:10,agility:6,intellect:6},imageUrl:"https://i.pinimg.com/736x/43/45/8b/43458b29272370723226334336066223.jpg"},{id:"storm",defaultName:"Ororo Munroe",defaultClass:"BLASTER",defaultStats:{strength:6,agility:8,intellect:8},imageUrl:"https://i.pinimg.com/736x/32/33/21/32332155621526365215151216515151.jpg"}],B=(t,e,n,r,s,i,o)=>({id:t,templateId:t,name:e,alias:n,class:r,bio:s,status:"AVAILABLE",currentStory:"",objectives:[],completedObjectiveIndices:[],imageUrl:i,characterSheetUrl:"",stats:{strength:o.s,agility:o.a,intellect:o.i},assignedMissionId:null}),G="https://i.pinimg.com/736x/63/1e/3a/631e3a68228c97963e78381ad11bf3bb.jpg",cn=[{id:"core_box",name:"Marvel Zombies (Core Box)",heroes:[B("h_panther","T'Challa","BLACK PANTHER","BRAWLER","Rey de Wakanda.","https://i.pinimg.com/736x/22/16/63/2216634b075306cb6de8e099f92b95b6.jpg",{s:8,a:9,i:9}),B("h_strange","Stephen Strange","DOCTOR STRANGE","BLASTER","Hechicero Supremo.","https://i.pinimg.com/736x/5c/e3/38/5ce3385c44cd7c8023c1ddf62d3d954a.jpg",{s:4,a:5,i:10}),B("h_msmarvel","Kamala Khan","MS. MARVEL","BRAWLER","Inhumana elstica.","https://i.pinimg.com/736x/a5/8f/e9/a58fe99516a31f494c1d4dcb22231c46.jpg",{s:7,a:7,i:6}),B("h_scarlet","Wanda Maximoff","SCARLET WITCH","BLASTER","Magia del Caos.","https://i.pinimg.com/736x/13/4c/e4/134ce4e1ef6112ad48a0883e1c5e4f23.jpg",{s:5,a:6,i:10}),B("h_spidey","Peter Parker","SPIDER-MAN","SCOUT","Tu vecino y amigo.","https://i.pinimg.com/736x/97/f1/96/97f1965bf162c5eb2f7aa8cb4be4bf97.jpg",{s:7,a:10,i:8}),B("h_thor","Thor Odinson","THOR","BRAWLER","Dios del Trueno.","https://i.pinimg.com/736x/43/45/8b/43458b29272370723226334336066223.jpg",{s:10,a:6,i:5})],zombieHeroes:[B("z_cap","Steve Rogers","CAPTAIN AMERICA","TACTICIAN","El Primer Vengador... cado.","https://i.pinimg.com/736x/be/82/49/be8249c6a34eb0a40c3429cca8504bab.jpg",{s:8,a:7,i:8}),B("z_marvel","Carol Danvers","CAPTAIN MARVEL","BLASTER","Energa csmica corrupta.","https://i.pinimg.com/736x/b2/89/d4/b289d415b0b846ffc85a7956d576915b.jpg",{s:9,a:7,i:6}),B("z_deadpool","Wade Wilson","DEADPOOL","SCOUT","El mercenario bocazas (y mordedor).","https://i.pinimg.com/736x/26/e3/38/26e3385c44cd7c8023c1ddf62d3d954a.jpg",{s:7,a:8,i:5}),B("z_hulk","Bruce Banner","HULK","BRAWLER","HULK TIENE HAMBRE.","https://i.pinimg.com/736x/bb/2a/f6/bb2af63dbdbf782daf9af337915489c0.jpg",{s:10,a:5,i:3}),B("z_ironman","Tony Stark","IRON MAN","BLASTER","Tecnologa canbal.","https://i.pinimg.com/736x/3a/ad/5b/3aad5b8a9b89b928e33bd8e71a047de1.jpg",{s:7,a:6,i:10}),B("z_wasp","Janet Van Dyne","WASP","SCOUT","Pequea y letal.","https://i.pinimg.com/736x/5c/e8/83/5ce883dd3030f0b7f85a847bcaf47486.jpg",{s:4,a:10,i:6})]},{id:"xmen_resistance",name:"X-Men Resistance",heroes:[B("h_colossus","Piotr Rasputin","COLOSSUS","BRAWLER","Acero orgnico.","https://i.pinimg.com/736x/ec/e9/87/ece98736e0cca78734ed0d4a29e222b1.jpg",{s:10,a:4,i:5}),B("h_magneto","Erik Lehnsherr","MAGNETO","TACTICIAN","Amo del magnetismo.","https://i.pinimg.com/736x/c0/b5/d5/c0b5d511f39d428725dd24e5d883a548.jpg",{s:6,a:5,i:10}),B("h_mystique","Raven Darkholme","MYSTIQUE","SCOUT","Cambiaformas letal.","https://i.pinimg.com/736x/a5/8f/e9/a58fe99516a31f494c1d4dcb22231c46.jpg",{s:5,a:9,i:8}),B("h_rogue","Anna Marie","ROGUE","BRAWLER","Absorcin de poderes.","https://i.pinimg.com/736x/3d/04/bd/3d04bd41a1f395cf2bf4324729734f1e.jpg",{s:9,a:6,i:5}),B("h_storm","Ororo Munroe","STORM","BLASTER","Diosa del clima.","https://i.pinimg.com/736x/32/33/21/32332155621526365215151216515151.jpg",{s:5,a:8,i:8}),B("h_wolverine","Logan","WOLVERINE","BRAWLER","El mejor en lo que hace.","https://i.pinimg.com/736x/31/eb/4c/31eb4c0f0dba5c96c80da093a4d83a50.jpg",{s:8,a:8,i:6})],zombieHeroes:[B("z_cyclops","Scott Summers","CYCLOPS","TACTICIAN","Lder cado.","https://i.pinimg.com/736x/c0/b5/d5/c0b5d511f39d428725dd24e5d883a548.jpg",{s:6,a:6,i:8}),B("z_phoenix","Jean Grey","DARK PHOENIX","BLASTER","Fuego csmico.","https://i.pinimg.com/736x/77/26/00/772600dfc2f3599608a19f4618aedcb8.jpg",{s:10,a:6,i:7}),B("z_iceman","Bobby Drake","ICEMAN","BLASTER","Cero absoluto.","https://i.pinimg.com/736x/e6/bf/cb/e6bfcb7bc171610a028f1f2bbda38e29.jpg",{s:5,a:7,i:5}),B("z_juggernaut","Cain Marko","JUGGERNAUT","BRAWLER","Imparable.","https://i.pinimg.com/736x/ec/e9/87/ece98736e0cca78734ed0d4a29e222b1.jpg",{s:10,a:4,i:3}),B("z_psylocke","Betsy Braddock","PSYLOCKE","SCOUT","Cuchillo psquico.","https://i.pinimg.com/736x/3d/04/bd/3d04bd41a1f395cf2bf4324729734f1e.jpg",{s:6,a:9,i:7}),B("z_sabretooth","Victor Creed","SABRETOOTH","BRAWLER","Depredador.","https://i.pinimg.com/736x/31/eb/4c/31eb4c0f0dba5c96c80da093a4d83a50.jpg",{s:9,a:7,i:4})]},{id:"f4_siege",name:"Fantastic 4: Under Siege",heroes:[B("h_humantorch","Johnny Storm","HUMAN TORCH","BLASTER","Llamas a m!","https://i.pinimg.com/736x/43/45/8b/43458b29272370723226334336066223.jpg",{s:6,a:9,i:5}),B("h_invisiblewoman","Sue Storm","INVISIBLE WOMAN","SCOUT","Campos de fuerza.","https://i.pinimg.com/736x/b8/33/d5/b833d599d8b2049ff72014182c1d98ea.jpg",{s:5,a:6,i:8}),B("h_mrfantastic","Reed Richards","MISTER FANTASTIC","TACTICIAN","Mente elstica.","https://i.pinimg.com/736x/58/3c/d3/583cd39457c96e1858ecfbab1db06cce.jpg",{s:5,a:7,i:10}),B("h_superskull","Kl'rt","SUPER-SKRULL","TACTICIAN","El poder de los 4.",G,{s:9,a:7,i:7}),B("h_thing","Ben Grimm","THE THING","BRAWLER","Es la hora de las tortas.","https://i.pinimg.com/736x/ec/e9/87/ece98736e0cca78734ed0d4a29e222b1.jpg",{s:10,a:4,i:6})],zombieHeroes:[B("z_blackbolt","Blackagar Boltagon","BLACK BOLT","BLASTER","Voz destructiva.",G,{s:9,a:6,i:7}),B("z_doom","Victor Von Doom","DOCTOR DOOM","TACTICIAN","Gobernante de Latveria.",G,{s:8,a:6,i:10}),B("z_invisiblewoman","Sue Storm","INVISIBLE WOMAN (Z)","SCOUT","Invisible y mortal.",G,{s:5,a:6,i:8}),B("z_mrfantastic","Reed Richards","MISTER FANTASTIC (Z)","TACTICIAN","Cerebro podrido.",G,{s:5,a:7,i:10}),B("z_namor","Namor","NAMOR","BRAWLER","Imperius Rex.",G,{s:9,a:7,i:6}),B("z_superskull","Kl'rt","SUPER-SKRULL (Z)","TACTICIAN","Todos los poderes.",G,{s:9,a:7,i:7}),B("z_thing","Ben Grimm","THE THING (Z)","BRAWLER","Roca muerta.",G,{s:10,a:4,i:6})]},{id:"sinister_six",name:"Clash of the Sinister Six",heroes:[B("h_blackcat","Felicia Hardy","BLACK CAT","SCOUT","Mala suerte.",G,{s:5,a:9,i:6}),B("h_greengoblin","Norman Osborn","GREEN GOBLIN","BLASTER","Bombas calabaza.",G,{s:7,a:8,i:9}),B("h_kraven","Sergei Kravinoff","KRAVEN","SCOUT","El cazador.",G,{s:8,a:8,i:6}),B("h_mysterio","Quentin Beck","MYSTERIO","TACTICIAN","Maestro de la ilusin.",G,{s:4,a:6,i:9}),B("h_rhino","Aleksei Sytsevich","RHINO","BRAWLER","Carga brutal.",G,{s:9,a:4,i:3}),B("h_sandman","William Baker","SANDMAN","BRAWLER","Cuerpo de arena.",G,{s:8,a:5,i:4}),B("h_scorpion","Mac Gargan","SCORPION","BRAWLER","Cola letal.",G,{s:8,a:7,i:4}),B("h_venom","Eddie Brock","VENOM","BRAWLER","Simbionte letal.",G,{s:9,a:7,i:5})],zombieHeroes:[B("z_docock","Otto Octavius","DOCTOR OCTOPUS","TACTICIAN","Brazos mecnicos.",G,{s:7,a:6,i:10}),B("z_electro","Max Dillon","ELECTRO","BLASTER","Alto voltaje.",G,{s:6,a:7,i:5}),B("z_greengoblin","Norman Osborn","GREEN GOBLIN (Z)","BLASTER","Locura verde.",G,{s:7,a:8,i:9}),B("z_lizard","Curt Connors","LIZARD","BRAWLER","Instinto reptil.",G,{s:8,a:7,i:7}),B("z_mysterio","Quentin Beck","MYSTERIO (Z)","TACTICIAN","Ilusin mortal.",G,{s:4,a:6,i:9}),B("z_rhino","Aleksei Sytsevich","RHINO (Z)","BRAWLER","Carga zombie.",G,{s:9,a:4,i:3}),B("z_venom","Eddie Brock","VENOM (Z)","BRAWLER","Hambre simbionte.",G,{s:9,a:7,i:5}),B("z_vulture","Adrian Toomes","VULTURE","SCOUT","Ataque areo.",G,{s:5,a:8,i:7})]},{id:"hydra_resurrection",name:"Hydra Resurrection",heroes:[B("h_antman","Scott Lang","ANT-MAN","SCOUT","Tamao variable.",G,{s:4,a:8,i:7}),B("h_blackwidow","Natasha Romanoff","BLACK WIDOW","SCOUT","Espa maestra.",G,{s:5,a:9,i:8}),B("h_falcon","Sam Wilson","FALCON","SCOUT","Vuelo tctico.",G,{s:6,a:8,i:6}),B("h_quicksilver","Pietro Maximoff","QUICKSILVER","SCOUT","Velocidad snica.",G,{s:6,a:10,i:5}),B("h_redskull","Johann Schmidt","RED SKULL","TACTICIAN","Hail Hydra.",G,{s:6,a:6,i:9}),B("h_shehulk","Jennifer Walters","SHE-HULK","BRAWLER","Fuerza legal.",G,{s:10,a:5,i:7}),B("h_vision","Vision","VISION","BLASTER","Densidad variable.",G,{s:9,a:6,i:10})],zombieHeroes:[B("z_blackwidow","Natasha Romanoff","BLACK WIDOW (Z)","SCOUT","Asesina silenciosa.",G,{s:5,a:9,i:8}),B("z_falcon","Sam Wilson","FALCON (Z)","SCOUT","Depredador areo.",G,{s:6,a:8,i:6}),B("z_hawkeye","Clint Barton","HAWKEYE (Z)","SCOUT","Puntera muerta.",G,{s:6,a:9,i:6}),B("z_loki","Loki Laufeyson","LOKI","TACTICIAN","Dios del engao.",G,{s:7,a:7,i:9}),B("z_quicksilver","Pietro Maximoff","QUICKSILVER (Z)","SCOUT","Muerte rpida.",G,{s:6,a:10,i:5}),B("z_shehulk","Jennifer Walters","SHE-HULK (Z)","BRAWLER","Furia gamma.",G,{s:10,a:5,i:7})]},{id:"guardians_galaxy",name:"Guardians of the Galaxy Set",heroes:[B("h_drax","Drax","DRAX","BRAWLER","El Destructor.",G,{s:9,a:5,i:4}),B("h_gamora","Gamora","GAMORA","BRAWLER","La mujer ms letal.",G,{s:7,a:9,i:6}),B("h_groot","Groot","GROOT","BRAWLER","Yo soy Groot.",G,{s:9,a:4,i:5}),B("h_mantis","Mantis","MANTIS","TACTICIAN","Empata.",G,{s:4,a:7,i:8}),B("h_nebula","Nebula","NEBULA","SCOUT","Cyborg asesina.",G,{s:7,a:8,i:7}),B("h_nova","Richard Rider","NOVA","BLASTER","Cohete humano.",G,{s:8,a:9,i:6}),B("h_rocket","Rocket","ROCKET","BLASTER","Armas pesadas.",G,{s:4,a:8,i:9})],zombieHeroes:[B("z_drax","Drax","DRAX (Z)","BRAWLER","Destructor hambriento.",G,{s:9,a:5,i:4}),B("z_mantis","Mantis","MANTIS (Z)","TACTICIAN","Mente colmena.",G,{s:4,a:7,i:8}),B("z_nebula","Nebula","NEBULA (Z)","SCOUT","Mejora necrtica.",G,{s:7,a:8,i:7}),B("z_rocket","Rocket","ROCKET (Z)","BLASTER","Rabia pura.",G,{s:4,a:8,i:9}),B("z_starlord","Peter Quill","STAR-LORD (Z)","TACTICIAN","Lder cado.",G,{s:6,a:7,i:7}),B("z_thanos","Thanos","THANOS","BRAWLER","La muerte inevitable.",G,{s:10,a:5,i:10})]},{id:"galactus",name:"Galactus the Devourer",heroes:[B("h_surfer","Norrin Radd","SILVER SURFER","BLASTER","Poder csmico.",G,{s:9,a:10,i:8})],zombieHeroes:[B("z_surfer","Norrin Radd","SILVER SURFER (Z)","BLASTER","Heraldo del hambre.",G,{s:9,a:10,i:8})]},{id:"sentinel_strike",name:"Sentinel Strike",heroes:[B("h_nana","Nana","NANA","TACTICIAN","Centinela reprogramado.",G,{s:8,a:4,i:6}),B("h_profx","Charles Xavier","PROFESSOR X","TACTICIAN","Mente suprema.",G,{s:2,a:3,i:10})],zombieHeroes:[B("z_profx","Charles Xavier","PROFESSOR X (Z)","TACTICIAN","Cerebro muerto.",G,{s:2,a:3,i:10})]},{id:"artist_special",name:"Artist's Special Edition Set",heroes:[B("h_daredevil_art","Matt Murdock","DAREDEVIL (ARTIST)","BRAWLER","Edicin especial.",G,{s:7,a:9,i:8}),B("h_elektra_art","Elektra Natchios","DAREDEVIL ELEKTRA","SCOUT","La nueva Daredevil.",G,{s:6,a:10,i:7}),B("h_bullseye_art","Lester","MARSHALL BULLSEYE","BLASTER","La ley del oeste.",G,{s:6,a:9,i:6}),B("h_hawkeye_old","Clint Barton","OLD MAN HAWKEYE","SCOUT","El ltimo vengador.",G,{s:5,a:8,i:7}),B("h_logan_old","Logan","OLD MAN LOGAN","BRAWLER","Viejo y cansado.",G,{s:8,a:7,i:6}),B("h_spidey_art","Peter Parker","SPIDER-MAN (ARTIST)","SCOUT","Edicin especial.",G,{s:7,a:10,i:8})],zombieHeroes:[]},{id:"stretch_goals",name:"Stretch Goals (Promos)",heroes:[B("sg_baronzemo","Helmut Zemo","BARON ZEMO","TACTICIAN","Estratega.",G,{s:6,a:7,i:9}),B("sg_beast","Hank McCoy","BEAST","TACTICIAN","Genio bestial.",G,{s:8,a:8,i:9}),B("sg_blackbolt","Blackagar Boltagon","BLACK BOLT","BLASTER","Voz real.",G,{s:9,a:6,i:7}),B("sg_blackknight","Dane Whitman","BLACK KNIGHT","BRAWLER","Espada de bano.",G,{s:7,a:7,i:6}),B("sg_blade","Eric Brooks","BLADE","BRAWLER","Cazavampiros.",G,{s:8,a:8,i:6}),B("sg_bullseye","Lester","BULLSEYE","BLASTER","Puntera perfecta.",G,{s:6,a:9,i:5}),B("sg_cap","Steve Rogers","CAPTAIN AMERICA","TACTICIAN","El Capi.",G,{s:7,a:7,i:8}),B("sg_marvel","Carol Danvers","CAPTAIN MARVEL","BLASTER","Binaria.",G,{s:9,a:7,i:6}),B("sg_carnage","Cletus Kasady","CARNAGE","BRAWLER","Caos.",G,{s:9,a:8,i:3}),B("sg_crossbones","Brock Rumlow","CROSSBONES","BRAWLER","Mercenario.",G,{s:8,a:6,i:5}),B("sg_cyclops","Scott Summers","CYCLOPS","TACTICIAN","Lder X.",G,{s:6,a:6,i:8}),B("sg_daredevil","Matt Murdock","DAREDEVIL","BRAWLER","Sin miedo.",G,{s:7,a:9,i:8}),B("sg_darkphoenix","Jean Grey","DARK PHOENIX","BLASTER","Fuerza csmica.",G,{s:10,a:6,i:7}),B("sg_deadpool","Wade Wilson","DEADPOOL","BRAWLER","Regeneracin.",G,{s:7,a:8,i:5}),B("sg_doom","Victor Von Doom","DOCTOR DOOM","TACTICIAN","Latveria.",G,{s:8,a:6,i:10}),B("sg_docock","Otto Octavius","DOCTOR OCTOPUS","TACTICIAN","Tentculos.",G,{s:7,a:6,i:10}),B("sg_electro","Max Dillon","ELECTRO","BLASTER","Rayo vivo.",G,{s:6,a:7,i:5}),B("sg_elektra","Elektra Natchios","ELEKTRA","SCOUT","Ninja.",G,{s:6,a:9,i:6}),B("sg_emmafrost","Emma Frost","EMMA FROST","TACTICIAN","Diamante.",G,{s:5,a:6,i:9}),B("sg_gambit","Remy LeBeau","GAMBIT","BLASTER","Cartas.",G,{s:6,a:8,i:6}),B("sg_ghostrider","Johnny Blaze","GHOST RIDER","BRAWLER","Fuego infernal.",G,{s:9,a:7,i:5}),B("sg_hawkeye","Clint Barton","HAWKEYE","SCOUT","Arquero.",G,{s:6,a:9,i:6}),B("sg_hulk","Bruce Banner","HULK","BRAWLER","Aplasta.",G,{s:10,a:5,i:7}),B("sg_iceman","Bobby Drake","ICEMAN","BLASTER","Hielo.",G,{s:5,a:7,i:5}),B("sg_ironman","Tony Stark","IRON MAN","BLASTER","Stark Tech.",G,{s:7,a:6,i:10}),B("sg_jessicajones","Jessica Jones","JESSICA JONES","BRAWLER","Investigadora.",G,{s:8,a:6,i:6}),B("sg_juggernaut","Cain Marko","JUGGERNAUT","BRAWLER","Cyttorak.",G,{s:10,a:4,i:3}),B("sg_kingpin","Wilson Fisk","KINGPIN","BRAWLER","El Rey.",G,{s:9,a:4,i:8}),B("sg_kittypryde","Kitty Pryde","KITTY PRYDE","SCOUT","Fase.",G,{s:5,a:9,i:8}),B("sg_lizard","Curt Connors","LIZARD","BRAWLER","Reptil.",G,{s:8,a:7,i:7}),B("sg_loki","Loki","LOKI","TACTICIAN","Travesura.",G,{s:7,a:7,i:9}),B("sg_lukecage","Luke Cage","LUKE CAGE","BRAWLER","Piel dura.",G,{s:9,a:6,i:5}),B("sg_miles","Miles Morales","MILES MORALES","SCOUT","Spider-Man II.",G,{s:6,a:10,i:7}),B("sg_moonknight","Marc Spector","MOON KNIGHT","BRAWLER","Khonshu.",G,{s:7,a:8,i:6}),B("sg_morbius","Michael Morbius","MORBIUS","SCOUT","Vampiro.",G,{s:7,a:8,i:7}),B("sg_namor","Namor","NAMOR","BRAWLER","Atlantis.",G,{s:9,a:7,i:6}),B("sg_nightcrawler","Kurt Wagner","NIGHTCRAWLER","SCOUT","BAMF.",G,{s:5,a:10,i:6}),B("sg_psylocke","Betsy Braddock","PSYLOCKE","SCOUT","Mariposa.",G,{s:6,a:9,i:7}),B("sg_sabretooth","Victor Creed","SABRETOOTH","BRAWLER","Garras.",G,{s:9,a:7,i:4}),B("sg_shangchi","Shang-Chi","SHANG-CHI","BRAWLER","Kung Fu.",G,{s:7,a:10,i:7}),B("sg_spiderwoman","Jessica Drew","SPIDER-WOMAN","SCOUT","Veneno.",G,{s:7,a:8,i:7}),B("sg_starlord","Peter Quill","STAR-LORD","TACTICIAN","Legendario.",G,{s:6,a:7,i:7}),B("sg_vulture","Adrian Toomes","VULTURE","SCOUT","Alas.",G,{s:5,a:8,i:7}),B("sg_warmachine","James Rhodes","WAR MACHINE","BLASTER","Artillera.",G,{s:8,a:5,i:6}),B("sg_wasp","Janet Van Dyne","WASP","SCOUT","Tamao.",G,{s:4,a:10,i:7}),B("sg_wintersoldier","Bucky Barnes","WINTER SOLDIER","SCOUT","Brazo metal.",G,{s:7,a:8,i:6})],zombieHeroes:[B("sg_z_beast","Hank McCoy","BEAST (Z)","TACTICIAN","Bestia azul.",G,{s:8,a:8,i:9}),B("sg_z_blackcat","Felicia Hardy","BLACK CAT (Z)","SCOUT","Mala suerte.",G,{s:5,a:9,i:6}),B("sg_z_bullseye","Lester","BULLSEYE (Z)","BLASTER","Blanco fijo.",G,{s:6,a:9,i:5}),B("sg_z_colossus","Piotr Rasputin","COLOSSUS (Z)","BRAWLER","Metal muerto.",G,{s:10,a:4,i:5}),B("sg_z_daredevil","Matt Murdock","DAREDEVIL (Z)","BRAWLER","Sin miedo.",G,{s:7,a:9,i:8}),B("sg_z_strange","Stephen Strange","DOCTOR STRANGE (Z)","BLASTER","Magia negra.",G,{s:4,a:5,i:10}),B("sg_z_elektra","Elektra Natchios","ELEKTRA (Z)","SCOUT","Ninja zombie.",G,{s:6,a:9,i:6}),B("sg_z_gambit","Remy LeBeau","GAMBIT (Z)","BLASTER","Cartas.",G,{s:6,a:8,i:6}),B("sg_z_gamora","Gamora","GAMORA (Z)","BRAWLER","Asesina.",G,{s:7,a:9,i:6}),B("sg_z_giantman","Hank Pym","GIANT-MAN (Z)","BRAWLER","Hambre gigante.",G,{s:10,a:4,i:9}),B("sg_z_humantorch","Johnny Storm","HUMAN TORCH (Z)","BLASTER","Fuego.",G,{s:6,a:9,i:5}),B("sg_z_kingpin","Wilson Fisk","KINGPIN (Z)","BRAWLER","Jefe zombie.",G,{s:9,a:4,i:8}),B("sg_z_kraven","Sergei Kravinoff","KRAVEN (Z)","SCOUT","Cazador.",G,{s:8,a:8,i:6}),B("sg_z_lukecage","Luke Cage","LUKE CAGE (Z)","BRAWLER","Piel muerta.",G,{s:9,a:6,i:5}),B("sg_z_magneto","Erik Lehnsherr","MAGNETO (Z)","TACTICIAN","Magnetismo.",G,{s:6,a:5,i:10}),B("sg_z_moonknight","Marc Spector","MOON KNIGHT (Z)","BRAWLER","Luna muerta.",G,{s:7,a:8,i:6}),B("sg_z_msmarvel","Kamala Khan","MS. MARVEL (Z)","BRAWLER","Elstica.",G,{s:7,a:7,i:6}),B("sg_z_multipleman","Jamie Madrox","MULTIPLE MAN (Z)","SCOUT","Legin.",G,{s:5,a:7,i:6}),B("sg_z_mystique","Raven Darkholme","MYSTIQUE (Z)","SCOUT","Cambiaformas.",G,{s:5,a:9,i:8}),B("sg_z_nightcrawler","Kurt Wagner","NIGHTCRAWLER (Z)","SCOUT","Teleport.",G,{s:5,a:10,i:6}),B("sg_z_nova","Richard Rider","NOVA (Z)","BLASTER","Cohete.",G,{s:8,a:9,i:6}),B("sg_z_rogue","Anna Marie","ROGUE (Z)","BRAWLER","Absorcin.",G,{s:9,a:6,i:5}),B("sg_z_scarlet","Wanda Maximoff","SCARLET WITCH (Z)","BLASTER","Caos.",G,{s:5,a:6,i:10}),B("sg_z_scorpion","Mac Gargan","SCORPION (Z)","BRAWLER","Veneno.",G,{s:8,a:7,i:4}),B("sg_z_storm","Ororo Munroe","STORM (Z)","BLASTER","Tormenta.",G,{s:5,a:8,i:8}),B("sg_z_thor","Thor Odinson","THOR (Z)","BRAWLER","Trueno.",G,{s:10,a:6,i:5}),B("sg_z_wintersoldier","Bucky Barnes","WINTER SOLDIER (Z)","SCOUT","Soldado.",G,{s:7,a:8,i:6}),B("sg_z_wolverine","Logan","WOLVERINE (Z)","BRAWLER","Garras.",G,{s:8,a:8,i:6})]}],Es="heroes",nA="users",Ol="missions",Dt=(t,e)=>{const n=Object.keys(t);for(const r of e){if(t[r]!==void 0)return t[r];const s=n.find(i=>i.trim().toLowerCase()===r.trim().toLowerCase());if(s)return t[s]}},vn=()=>ke?!0:(console.warn(" Operacin de base de datos omitida: Firebase no est inicializado."),!1),ko=async()=>{if(!vn()||!ke)return[];try{const t=await t0(Rl(ke,Es)),e=[];return t.forEach(n=>{const r=n.data(),s=Dt(r,["defaultName","nombre_Real","nombreReal","realName","name","nombre"]),i=Dt(r,["defaultClass","clase","class","rol"]),o=Dt(r,["defaultStats","stats","estadisticas"]),a=Dt(r,["strength","fuerza","str"]),c=Dt(r,["agility","agilidad","agi"]),d=Dt(r,["intellect","intelecto","int"]),h=Dt(r,["imageUrl","foto","image","img","url","picture"]),p=Dt(r,["characterSheetUrl","ficha","gameCard","sheet","carta"]),f=Dt(r,["bio","biografia","biography","historia","history"]),g=Dt(r,["alias","codename","nombre_en_clave","heroname"]),_=Dt(r,["currentStory","historia_actual","historiaActual","current_story"]),x=Dt(r,["objectives","objetivos","goals","misiones"]),C=Dt(r,["defaultAlignment","alignment","bando","tipo"]),E=Dt(r,["expansionId","expansion","caja"]),w=Dt(r,["relatedHeroId","relatedId","counterpart","version_contraria"]),b=Dt(r,["imageParams","ajusteImagen","crop"]);e.push({id:n.id,defaultName:s||"Unknown Agent",defaultClass:i||"BRAWLER",defaultStats:o||{strength:Number(a)||5,agility:Number(c)||5,intellect:Number(d)||5},imageUrl:h||"",characterSheetUrl:p||"",bio:f||"",alias:g||"",currentStory:_||"",objectives:Array.isArray(x)?x:[],defaultAlignment:C||"ALIVE",expansionId:E||"unknown",relatedHeroId:w||void 0,imageParams:b||void 0})}),e}catch(t){return console.error("Error fetching hero templates:",t),[]}},yD=async()=>{if(!(!vn()||!ke))try{const t=td(ke);gD.forEach(e=>{const n=Gn(ke,Es,e.id);t.set(n,e)}),await t.commit(),console.log("Database seeded successfully")}catch(t){throw console.error("Error seeding database:",t),t}},rA=async(t,e)=>{if(!(!vn()||!ke))try{const n=Gn(ke,Es,t);await dD(n,e),console.log(`Hero ${t} updated successfully`)}catch(n){throw console.error("Error updating hero:",n),n}},sA=async t=>{if(!vn()||!ke)throw new Error("DB no disponible");try{const e=await JS(Rl(ke,Es),t);return console.log("Hero created with ID:",e.id),e.id}catch(e){throw console.error("Error creating hero template:",e),e}},iA=async t=>{if(!vn()||!ke)throw new Error("DB no disponible");try{const e=Gn(ke,Es,t);await ZS(e),console.log(`Hero ${t} deleted successfully`)}catch(e){throw console.error("Error deleting hero:",e),e}},Mp=async(t,e)=>{if(!vn()||!ke)return null;try{const n=Gn(ke,nA,t),r=await uD(n);if(r.exists()){const s=r.data(),i=s[e];if(i)return{heroes:i.heroes||[],completedMissionIds:i.missions||[],resources:i.resources||{omegaCylinders:0},lastUpdated:s.lastUpdated}}return null}catch(n){return console.error("Error fetching user profile:",n),null}},oA=async(t,e,n,r,s)=>{if(!(!vn()||!ke))try{const i=Gn(ke,nA,t),o={[e]:{heroes:n,missions:r,resources:s||{omegaCylinders:0}},lastUpdated:dt.now()};await XS(i,o,{merge:!0}),console.log(`Cloud save successful for ${e}`)}catch(i){console.error("Error saving user profile:",i)}},nd=async()=>{if(!vn()||!ke)return[];try{const t=await t0(Rl(ke,Ol)),e=[];return t.forEach(n=>{const r=n.data();let s=[];r.prereqs&&Array.isArray(r.prereqs)?s=r.prereqs:r.prereq&&(s=[r.prereq]),e.push({...r,id:n.id,prereqs:s,prereq:s.length>0?s[0]:void 0})}),e}catch(t){return console.error("Error fetching missions:",t),[]}},aA=async t=>{if(!vn()||!ke)throw new Error("DB no disponible");try{return(await JS(Rl(ke,Ol),t)).id}catch(e){throw console.error("Error creating mission:",e),e}},lA=async(t,e)=>{if(!vn()||!ke)throw new Error("DB no disponible");try{const n=Gn(ke,Ol,t),{id:r,...s}=e;await XS(n,s,{merge:!0})}catch(n){throw console.error("Error updating mission:",n),n}},n0=async t=>{if(!vn()||!ke)throw new Error("DB no disponible");try{const e=Gn(ke,Ol,t);await ZS(e),console.log(`Mission ${t} deleted successfully`)}catch(e){throw console.error("Error deleting mission:",e),e}},vD=async()=>{if(!vn()||!ke)throw new Error("DB no disponible");try{const t=await t0(Rl(ke,Es)),e=td(ke);t.docs.forEach(s=>{e.delete(s.ref)}),await e.commit(),console.log("Coleccin de hroes limpiada.");const n=td(ke);let r=0;for(const s of cn){for(const i of s.heroes){const o=Gn(ke,Es,i.id),a={id:i.id,defaultName:i.name,alias:i.alias,defaultClass:i.class,bio:i.bio,imageUrl:i.imageUrl||"",defaultStats:i.stats,defaultAlignment:"ALIVE",currentStory:"",objectives:[],expansionId:s.id};n.set(o,a),r++}for(const i of s.zombieHeroes){const o=Gn(ke,Es,i.id),a={id:i.id,defaultName:i.name,alias:i.alias,defaultClass:i.class,bio:i.bio,imageUrl:i.imageUrl||"",defaultStats:i.stats,defaultAlignment:"ZOMBIE",currentStory:"",objectives:[],expansionId:s.id};n.set(o,a),r++}}await n.commit(),console.log(`Se han subido ${r} hroes de expansiones a la base de datos.`),alert(`BBDD REINICIADA: ${r} personajes creados correctamente.`)}catch(t){throw console.error("Error seeding expansions:",t),alert("ERROR al sincronizar expansiones. Revisa la consola."),t}},ED=async t=>{if(!vn()||!ke)throw new Error("DB no disponible");try{const e=td(ke);let n=0;t.forEach(r=>{if(r.id){const s=Gn(ke,Ol,r.id),i=JSON.parse(JSON.stringify(r));e.set(s,i),n++}}),await e.commit(),console.log(`${n} misiones locales subidas a la BBDD.`),alert(`XITO: Se han copiado ${n} misiones locales a la base de datos.`)}catch(e){throw console.error("Error subiendo misiones locales:",e),alert("ERROR al subir misiones. Revisa la consola."),e}},xD=Object.freeze(Object.defineProperty({__proto__:null,createHeroTemplateInDB:sA,createMissionInDB:aA,deleteHeroInDB:iA,deleteMissionInDB:n0,getCustomMissions:nd,getHeroTemplates:ko,getUserProfile:Mp,saveUserProfile:oA,seedExpansionsToDB:vD,seedHeroTemplates:yD,updateHeroTemplate:rA,updateMissionInDB:lA,uploadLocalMissionsToDB:ED},Symbol.toStringTag,{value:"Module"})),_D=new vr,wD=async()=>{try{return(await E2(vs,_D)).user}catch(t){throw console.error("Error signing in with Google",t),t}},bD=async()=>{try{await Jk(vs)}catch(t){console.error("Error signing out",t)}},SD=t=>[{id:"m_intro_0",title:"MH0: CADENAS ROTAS",description:["SITUACIN CRTICA: El transporte ha sido neutralizado. Estamos heridos, desorientados y en territorio hostil.","Black Widow ha establecido un permetro temporal, pero el humo del accidente es una baliza para los infectados.","OBJETIVO: No morir hoy. Debemos movernos hacia el bnker de seguridad antes de que la horda converja en nuestra posicin."],objectives:[{title:"Sobrevivir al Impacto",desc:"Recuperar el conocimiento y evaluar heridas."},{title:"Romper el Cerco",desc:"Abrirse paso a travs de la primera oleada de infectados."},{title:"Llegar al Bnker",desc:"Alcanzar las coordenadas seguras en Ohio."}],location:{state:"Ohio",coordinates:[-82.5,40.2]},threatLevel:"INMINENTE",type:"INTRODUCTORY",alignment:"BOTH",outcomeText:"Lo logramos. Las puertas del bnker se han sellado tras nosotros. Estamos a salvo... por ahora. S.H.I.E.L.D. OS se est reiniciando."},{id:"m_kraven",title:t.missions.kraven.title,description:t.missions.kraven.description,objectives:t.missions.kraven.objectives,location:{state:"New York",coordinates:[-74.006,40.7128]},threatLevel:"ALTA",type:"STANDARD",alignment:"ALIVE",prereqs:["m_intro_0"]},{id:"m_zombie_feast",title:"EL FESTN DE LOS MUTANTES",description:["La Escuela de Xavier est fortificada.","Cerebro detecta mucha carne fresca dentro."],objectives:[{title:"Romper las defensas",desc:"Destruir los muros."}],location:{state:"New York",coordinates:[-73.8,41]},threatLevel:"EXTREMA",type:"STANDARD",alignment:"ZOMBIE",prereqs:["m_intro_0"]},{id:"m_flesh",title:t.missions.fleshSleeps.title,description:t.missions.fleshSleeps.description,objectives:t.missions.fleshSleeps.objectives,location:{state:"Nevada",coordinates:[-115.1398,36.1699]},threatLevel:"MEDIA",type:"STANDARD",alignment:"BOTH",prereqs:["m_intro_0"]},{id:"m_base_alpha",title:t.missions.bases.alpha,description:[t.missions.bases.desc],objectives:[{title:t.missions.bases.objSecure,desc:t.missions.bases.objRetrieve}],location:{state:"Colorado",coordinates:[-104.9903,39.7392]},threatLevel:"BAJA",type:"SHIELD_BASE",alignment:"BOTH"},{id:"m_surfer",type:"GALACTUS",triggerStage:"SURFER",title:t.events.surfer.alive.title,description:[t.events.surfer.alive.desc],objectives:[{title:"Interceptar",desc:"Detener al Heraldo."}],location:{state:"Kansas",coordinates:[-98,38]},threatLevel:"OMEGA",alignment:"BOTH"},{id:"boss-galactus",type:"GALACTUS",triggerStage:"GALACTUS",title:t.missions.galactus.title,description:t.missions.galactus.description,objectives:t.missions.galactus.objectives,location:{state:"Kansas",coordinates:[-98,38]},threatLevel:"OMEGA++",alignment:"BOTH"}],ua={magneto:new Set(["Washington","Oregon","California","Nevada","Idaho","Montana","Wyoming","Utah","Arizona","Colorado","Alaska","Hawaii"]),kingpin:new Set(["Maine","New Hampshire","Vermont","New York","Massachusetts","Rhode Island","Connecticut","New Jersey","Pennsylvania","Delaware","Maryland","West Virginia","Virginia","District of Columbia"]),hulk:new Set(["North Dakota","South Dakota","Nebraska","Kansas","Oklahoma","Texas","New Mexico","Minnesota","Iowa","Missouri","Wisconsin","Illinois","Michigan","Indiana","Ohio"]),doom:new Set(["Arkansas","Louisiana","Mississippi","Alabama","Tennessee","Kentucky","Georgia","Florida","South Carolina","North Carolina"])},AD=t=>ua.magneto.has(t)?"magneto":ua.kingpin.has(t)?"kingpin":ua.hulk.has(t)?"hulk":ua.doom.has(t)?"doom":"neutral",ID=()=>{const t=gl(),[e,n]=N.useState(null),[r,s]=N.useState(!0),[i,o]=N.useState(!0),[a,c]=N.useState("es"),[d,h]=N.useState(null),[p,f]=N.useState([]),[g,_]=N.useState(new Set),[x,C]=N.useState(0),[E,w]=N.useState("NORMAL"),[b,P]=N.useState(null),[D,j]=N.useState(!1),[I,v]=N.useState(!1),[S,A]=N.useState(null),[k,O]=N.useState(0),[R,M]=N.useState(!1),L=N.useRef(!1),[U,K]=N.useState(!1),[V,W]=N.useState(!1),[Q,te]=N.useState(null),[ae,$]=N.useState(!1),[Y,X]=N.useState(!1),[ne,ie]=N.useState([]),[ye,Me]=N.useState(null),[rt,be]=N.useState(!1),[Se,q]=N.useState(!1),[z,le]=N.useState(new Set(["kingpin","magneto","hulk","doom","neutral"])),[ve,Ee]=N.useState(!1),[De,Ie]=N.useState(new Set(["core_box"])),[je,Rt]=N.useState(!1),nn=Wn[a];N.useEffect(()=>{const ce=localStorage.getItem("shield_owned_expansions");if(ce)try{Ie(new Set(JSON.parse(ce)))}catch(re){console.error(re)}},[]),N.useEffect(()=>{if(!vs){console.warn("Auth no inicializado. Modo offline/limitado."),o(!1),s(!1);return}const ce=Zk(vs,async re=>{if(n(re),o(!1),re){localStorage.getItem(`shield_intro_seen_${re.uid}`)?t("/map"):(be(!0),M(!1),t("/story"));try{const pe=await Mp(re.uid,"ALIVE");pe&&(f(pe.heroes),_(new Set(pe.completedMissionIds)),C(pe.resources.omegaCylinders),h("ALIVE"),L.current=!0)}catch(pe){console.error(pe)}}else D||t("/");s(!1)});return()=>ce()},[D,t]),N.useEffect(()=>{(async()=>{const re=await nd();ie(re)})()},[U]);const En=N.useCallback(async(ce,re,se)=>{if(!(U||!e||!d||!L.current)){v(!0);try{await oA(e.uid,d,ce,Array.from(re),{omegaCylinders:se})}catch(pe){console.error("Auto-save failed",pe)}finally{setTimeout(()=>v(!1),1e3)}}},[e,d,U]);N.useEffect(()=>{if(p.length===0)return;const ce=setTimeout(()=>{En(p,g,x)},2e3);return()=>clearTimeout(ce)},[p,g,x,En]),N.useEffect(()=>{if(!d||rt||U)return;const ce=e?`shield_tutorial_seen_${e.uid}`:"shield_tutorial_seen_guest";localStorage.getItem(ce)},[d,rt,e,U]);const xn=ce=>{Ie(ce),localStorage.setItem("shield_owned_expansions",JSON.stringify(Array.from(ce)))},$r=ce=>{const re=new Set(De);re.has(ce)?re.delete(ce):re.add(ce),xn(re)},lt=ce=>{if(ce){const re=cn.map(se=>se.id);xn(new Set(re))}else xn(new Set(["core_box"]))},Et=()=>{j(!0),K(!0),h("ALIVE"),be(!1),q(!1),t("/map");const ce=cn.find(re=>re.id==="core_box");f(ce?ce.heroes:[]),_(new Set),C(99),w("NORMAL"),L.current=!0},yi=()=>{j(!0),h("ALIVE"),be(!0),M(!1),t("/story")},Dl=ce=>{d&&(f(ce),e&&localStorage.setItem(`shield_intro_seen_${e.uid}`,"true"),t("/intro"),L.current=!0)},Ml=async()=>{vs&&await bD(),j(!1),K(!1),L.current=!1,h(null),t("/")},oh=()=>{const ce=d==="ALIVE"?"ZOMBIE":"ALIVE";h(ce);const re=cn.find(se=>se.id==="core_box");re&&f(ce==="ZOMBIE"?re.zombieHeroes:re.heroes),t("/map"),e&&Mp(e.uid,ce).then(se=>{se&&(f(se.heroes),_(new Set(se.completedMissionIds)),C(se.resources.omegaCylinders))})},rn=ce=>A(ce),dr=N.useMemo(()=>(ne.length>0?ne:SD(nn)).map(re=>{let[se,pe]=re.location.coordinates;return se===0&&pe===0?{...re,location:{...re.location,coordinates:[-82.5,40.2]}}:se>0&&pe<0?{...re,location:{...re.location,coordinates:[pe,se]}}:re}),[ne,nn]),ks=N.useMemo(()=>{if(!d)return null;const ce=dr.find(re=>re.isIntroMission===!0&&(re.alignment===d||re.alignment==="BOTH"));return ce||dr.find(re=>re.id==="m_intro_0")},[dr,d]),Os=N.useMemo(()=>{const re=dr.filter(se=>!se.alignment||se.alignment==="BOTH"?!0:se.alignment===d).filter(se=>!se.requirements||se.requirements.length===0?!0:se.requirements.every(pe=>{if(De.has(pe))return!0;const Xe=cn.find(Ve=>Ve.name===pe);return!!(Xe&&De.has(Xe.id))}));return U||E==="GALACTUS"?re:re.filter(se=>{if(!se)return!1;const pe=g.has(se.id);if(pe)return!0;let Xe=!0;return se.prereqs&&se.prereqs.length>0?Xe=se.prereqs.every(Ve=>g.has(Ve)):se.prereq&&(Xe=g.has(se.prereq)),ks&&se.id===ks.id&&!pe?!0:se.type==="GALACTUS"?se.triggerStage==="SURFER"?E==="SURFER"||E==="GALACTUS":se.triggerStage==="GALACTUS"?E==="GALACTUS":!1:E==="GALACTUS"&&!pe&&se.type!=="GALACTUS"&&se.type!=="BOSS"?!1:pe||Xe})},[dr,g,U,E,d,De,ks]),jl=ce=>{const re=ce.size;ce.has("boss-galactus")||(re>=15&&E!=="GALACTUS"?(P({stage:"GALACTUS",title:"",description:""}),w("GALACTUS"),rn("ALERTA OMEGA! GALACTUS HA LLEGADO. TODAS LAS MISIONES SECUNDARIAS CANCELADAS.")):re>=10&&re<15&&E!=="SURFER"&&E!=="GALACTUS"?(P({stage:"SURFER",title:"",description:""}),w("SURFER"),O(0),rn("OBJETO PLATEADO ENTRANDO EN LA ATMSFERA. PREPARAR INTERCEPCIN.")):re>=4&&re<10&&E==="NORMAL"&&(P({stage:"ANOMALY",title:"",description:""}),w("ANOMALY"),rn("LECTURAS DE ENERGA ANMALAS EN EL ESPACIO PROFUNDO.")))},ah=async ce=>{console.log("Completando misin:",ce);const re=new Set(g);re.add(ce),_(re),Me(null),E==="SURFER"&&O(se=>se+1),e&&d&&await En(p,re,x),ce==="boss-galactus"?(w("NORMAL"),P(null),rn("AMENAZA OMEGA NEUTRALIZADA. BUEN TRABAJO, AGENTES.")):jl(re)},Oo=ce=>{E==="GALACTUS"&&ce.type!=="BOSS"&&ce.type!=="GALACTUS"||Me(ce)},Vl=ce=>{const re=new Set(g);re.delete(ce),_(re)},Ul=async ce=>{if(window.confirm("ELIMINAR MISIN?"))try{await n0(ce);const re=await nd();ie(re),Me(null)}catch{alert("Error al eliminar")}},Ps=ce=>{const re=new Set(g);for(let se=0;se<ce;se++)re.add(`sim_${Date.now()}_${Math.random()}`);_(re),jl(re)},Po=()=>{_(new Set),w("NORMAL"),P(null),C(0),O(0)},Lo=()=>P(null),hr=(ce,re)=>{const se=p.findIndex(pe=>pe.id===ce);if(se>=0){const pe=[...p],Xe=pe[se],Ve=Xe.completedObjectiveIndices?[...Xe.completedObjectiveIndices]:[];Ve.includes(re)?pe[se]={...Xe,completedObjectiveIndices:Ve.filter(sn=>sn!==re)}:pe[se]={...Xe,completedObjectiveIndices:[...Ve,re]},f(pe)}},Fl=async(ce,re)=>{const se=p.findIndex(sn=>sn.id===ce);if(se===-1)return;const pe=p[se],Xe=await ko();let Ve;if(pe.relatedHeroId&&pe.relatedHeroId!=="NO_VARIANT"&&(Ve=Xe.find(sn=>sn.id===pe.relatedHeroId)),!Ve){const sn=xt=>xt.toLowerCase().replace(/\(z\)/g,"").replace(/\(artist\)/g,"").replace(/\(old man\)/g,"").replace(/zombie/g,"").replace(/hero/g,"").replace(/[^a-z0-9]/g,"").trim(),Hr=sn(pe.alias);if(Ve=Xe.find(xt=>xt.defaultAlignment!==re?!1:sn(xt.alias)===Hr),!Ve)for(const xt of cn){const on=(re==="ALIVE"?xt.heroes:xt.zombieHeroes).find(Ei=>sn(Ei.alias)===Hr);if(on){Ve={id:on.id,defaultName:on.name,alias:on.alias,defaultClass:on.class,defaultStats:on.stats,imageUrl:on.imageUrl||"",bio:on.bio,defaultAlignment:re,objectives:on.objectives,currentStory:on.currentStory,imageParams:on.imageParams};break}}}if(Ve){const sn=Ve.imageUrl||pe.imageUrl||"",Hr={id:`trans_${Date.now()}`,templateId:Ve.id,name:Ve.defaultName,alias:Ve.alias||pe.alias,class:Ve.defaultClass,stats:Ve.defaultStats,imageUrl:sn,bio:Ve.bio||pe.bio,status:"AVAILABLE",assignedMissionId:null,objectives:Ve.objectives||[],completedObjectiveIndices:[],currentStory:Ve.currentStory||"",relatedHeroId:pe.templateId||pe.id,imageParams:Ve.imageParams},xt=[...p];xt[se]=Hr,f(xt),re==="ALIVE"?(rn(`SUJETO ${Hr.alias} CURADO. ADN REESTRUCTURADO.`),C(Do=>Math.max(0,Do-1))):rn(`SUJETO ${Hr.alias} INFECTADO. BIENVENIDO AL HAMBRE.`)}else alert(`ERROR: No se encontr una versin compatible de ${pe.alias} (${pe.name}) para el bando contrario.`)},vi=ce=>{le(re=>{const se=new Set(re);return se.has(ce)?se.delete(ce):se.add(ce),se})},Bl=N.useMemo(()=>{const ce=Os.filter(se=>se&&!g.has(se.id)),re={galactus:[],kingpin:[],shield_kingpin:[],magneto:[],shield_magneto:[],hulk:[],shield_hulk:[],doom:[],shield_doom:[],neutral:[],shield_neutral:[]};return ce.forEach(se=>{if(se.type==="GALACTUS")re.galactus.push(se);else{const pe=AD(se.location.state);if(se.type==="SHIELD_BASE"){const Xe=`shield_${pe}`;re[Xe]?re[Xe].push(se):re.shield_neutral.push(se)}else re[pe]?re[pe].push(se):re.neutral.push(se)}}),re},[Os,g,E]);return{state:{user:e,loading:r,loadingAuth:i,lang:a,playerAlignment:d,heroes:p,completedMissionIds:g,omegaCylinders:x,worldStage:E,activeGlobalEvent:b,surferTurnCount:k,isGuest:D,isSaving:I,tickerMessage:S,isEditorMode:U,showMissionEditor:V,missionToEdit:Q,showCharacterEditor:ae,showDbManager:Y,customMissions:ne,selectedMission:ye,showStory:rt,showTutorial:Se,expandedZones:z,isSidebarCollapsed:ve,ownedExpansions:De,showExpansionConfig:je,startStoryAtChoice:R,introMission:ks,allMissions:dr,visibleMissions:Os,groupedMissions:Bl,FACTION_STATES:ua},actions:{setLang:c,setPlayerAlignment:h,setHeroes:f,setCompletedMissionIds:_,setOmegaCylinders:C,setWorldStage:w,setActiveGlobalEvent:P,setIsGuest:j,setIsEditorMode:K,setIsSaving:v,setTickerMessage:A,setStartStoryAtChoice:M,setShowMissionEditor:W,setMissionToEdit:te,setShowCharacterEditor:$,setShowDbManager:X,setCustomMissions:ie,setSelectedMission:Me,setShowStory:be,setShowTutorial:q,setExpandedZones:le,setIsSidebarCollapsed:Ee,setOwnedExpansions:Ie,setShowExpansionConfig:Rt,updateOwnedExpansions:xn,toggleExpansion:$r,toggleAllExpansions:lt,handleEditorLogin:Et,handleGuestLogin:yi,handleExpansionConfirm:Dl,handleLogout:Ml,toggleDimension:oh,handleTickerUpdate:rn,handleMissionComplete:ah,handleMissionSelect:Oo,handleMissionReactivate:Vl,handleDeleteMission:Ul,handleSimulateProgress:Ps,handleResetProgress:Po,handleEventAcknowledge:Lo,handleToggleHeroObjective:hr,handleTransformHero:Fl,toggleZone:vi,setSurferTurnCount:O}}},cA=N.createContext(void 0),TD=({children:t})=>{const e=ID();return u.jsx(cA.Provider,{value:e,children:t})},uA=()=>{const t=N.useContext(cA);if(t===void 0)throw new Error("useGame must be used within a GameProvider");return t},ND=({onLogin:t,onGoogleLogin:e,onEditorLogin:n,language:r,setLanguage:s})=>{const[i,o]=N.useState(!1),[a,c]=N.useState(!1),[d,h]=N.useState(null),[p,f]=N.useState(!1),[g,_]=N.useState(""),x=Wn[r],C=()=>{o(!0),h(null),setTimeout(()=>{c(!0),setTimeout(()=>{t()},1500)},2e3)},E=async()=>{try{o(!0),h(null),await wD(),c(!0)}catch(b){console.error(b),o(!1),h(x.login.error)}},w=b=>{b.preventDefault(),g==="123456789"?(c(!0),setTimeout(()=>{n()},1e3)):(h(x.login.passError),_(""))};return u.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-950 flex flex-col items-center justify-center font-sans text-cyan-400 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2306b6d4' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-slate-950/50 to-slate-950 pointer-events-none"}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center w-full max-w-md p-10 glass-panel shadow-2xl rounded-sm shadow-cyan-900/20",children:[u.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-cyan-500"}),u.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-cyan-500"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 border-cyan-500"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-cyan-500"}),u.jsx("div",{className:"absolute top-4 right-4 flex gap-1",children:["es","en"].map(b=>u.jsx("button",{onClick:()=>s(b),className:`text-[9px] font-bold px-2 py-1 border transition-all ${r===b?"bg-cyan-500 text-black border-cyan-400":"text-cyan-700 border-cyan-900 hover:text-cyan-400"}`,children:b.toUpperCase()},b))}),u.jsxs("div",{className:"relative w-32 h-32 mb-8 flex items-center justify-center",children:[u.jsx("div",{className:"absolute inset-0 border-2 border-cyan-900 rounded-full"}),u.jsx("div",{className:"absolute inset-0 border-t-2 border-cyan-400 rounded-full animate-spin",style:{animationDuration:"3s"}}),u.jsx("div",{className:"absolute inset-2 border-b-2 border-cyan-600 rounded-full animate-spin",style:{animationDuration:"2s",animationDirection:"reverse"}}),u.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-cyan-500/50 shadow-[0_0_30px_rgba(6,182,212,0.4)] bg-black relative z-10",children:u.jsx("img",{src:"https://i.pinimg.com/736x/63/1e/3a/631e3a68228c97963e78381ad11bf3bb.jpg",className:"w-full h-full object-cover opacity-80 mix-blend-screen",alt:"S.H.I.E.L.D.",referrerPolicy:"no-referrer"})})]}),u.jsx("h1",{className:"text-4xl font-black tracking-[0.2em] mb-1 text-white text-shadow-neon text-center",children:x.login.title}),u.jsx("h2",{className:"text-[10px] font-bold tracking-[0.4em] text-cyan-600 mb-10 text-center uppercase",children:x.login.subtitle}),u.jsxs("div",{className:"w-full border-x border-cyan-900/30 bg-black/40 p-2 mb-6 h-16 flex items-center justify-center relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-scan opacity-10 pointer-events-none"}),d&&u.jsxs("div",{className:"text-red-500 font-bold tracking-widest text-xs animate-pulse",children:[" ",d]}),!i&&!a&&!d&&u.jsxs("div",{className:"flex flex-col items-center animate-flicker",children:[u.jsx("p",{className:"text-red-500 font-bold tracking-widest text-[10px] mb-1 border border-red-900 px-2 bg-red-900/10",children:"LOCKED"}),u.jsx("p",{className:"text-cyan-600 text-[9px]",children:x.login.idPrompt})]}),i&&!a&&!d&&u.jsxs("div",{className:"w-full px-4",children:[u.jsxs("div",{className:"flex justify-between text-[9px] text-cyan-400 mb-1",children:[u.jsx("span",{children:"ANALYZING RETINA..."}),u.jsx("span",{className:"animate-pulse",children:"PROCESSING"})]}),u.jsx("div",{className:"w-full h-1 bg-cyan-900/50",children:u.jsx("div",{className:"h-full bg-cyan-400 shadow-[0_0_10px_#06b6d4] animate-[expandWidth_2s_ease-out_forwards]",style:{width:"0%"}})}),u.jsx("style",{children:"@keyframes expandWidth { to { width: 100%; } }"})]}),a&&u.jsx("div",{className:"text-emerald-400 font-bold tracking-[0.2em] text-sm animate-pulse text-shadow-neon",children:x.login.granted})]}),u.jsxs("div",{className:"w-full space-y-3",children:[u.jsxs("button",{onClick:C,disabled:i||a,className:`
                    w-full py-4 border relative overflow-hidden group transition-all duration-200
                    ${a?"bg-emerald-500 border-emerald-400 text-black":"bg-cyan-950/30 border-cyan-500 text-cyan-300 hover:bg-cyan-500 hover:text-black"}
                `,children:[u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),u.jsx("span",{className:"relative z-10 font-black tracking-widest text-xs uppercase flex items-center justify-center gap-2",children:i?"...":a?"SYSTEM UNLOCKED":u.jsxs(u.Fragment,{children:[x.login.scanBtn," ",u.jsx("span",{className:"text-lg",children:""})]})})]}),u.jsx("button",{onClick:E,disabled:i||a,className:"w-full py-3 border border-slate-700 bg-slate-900/50 text-slate-400 text-[10px] font-bold tracking-widest hover:border-white hover:text-white transition-all uppercase",children:x.login.googleBtn})]}),u.jsx("div",{className:"mt-8 w-full border-t border-cyan-900/30 pt-4 flex justify-center",children:p?u.jsxs("form",{onSubmit:w,className:"flex gap-2 w-full max-w-[200px] animate-fade-in",children:[u.jsx("input",{type:"password",value:g,onChange:b=>_(b.target.value),placeholder:"PWD...",className:"flex-1 bg-black border border-cyan-800 px-2 py-1 text-[10px] text-cyan-500 outline-none focus:border-cyan-500",autoFocus:!0}),u.jsx("button",{type:"submit",className:"bg-cyan-900 text-cyan-400 px-2 text-[10px] border border-cyan-700 hover:bg-cyan-700 hover:text-white",children:">"})]}):u.jsxs("button",{onClick:()=>f(!0),className:"text-[8px] text-cyan-900 hover:text-cyan-500 transition-colors uppercase tracking-widest",children:["[ ",x.login.editorBtn," ]"]})}),u.jsx("div",{className:"absolute bottom-2 right-4 text-[8px] text-cyan-900 font-mono",children:"SECURE_LINK::AES-256"})]})]})},RD=({language:t,onComplete:e,startAtChoice:n=!1})=>{const r=Wn[t].story,s=r.slides,[i,o]=N.useState(n?s.length:0),[a,c]=N.useState(!1),[d,h]=N.useState(""),[p,f]=N.useState(!1),[g,_]=N.useState(null),x=i>=s.length;N.useEffect(()=>{const D=setTimeout(()=>c(!0),800);return()=>clearTimeout(D)},[]);const C=()=>{o(s.length)},E=()=>{p||x||(f(!0),h("turning-next"),setTimeout(()=>{o(D=>{const j=D+1;return j>s.length?s.length:j}),h(""),f(!1)},600))},w=()=>{p||i===0||(f(!0),h("turning-prev"),setTimeout(()=>{o(D=>Math.max(0,D-1)),h(""),f(!1)},600))},b=D=>{g||(_(D),setTimeout(()=>{e(D)},2e3))},P=()=>{if(x)return u.jsxs("div",{className:"fixed inset-0 z-[70] bg-slate-950 flex flex-col font-mono overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none bg-[linear-gradient(0deg,transparent_24%,rgba(6,182,212,0.3)_25%,rgba(6,182,212,0.3)_26%,transparent_27%,transparent_74%,rgba(6,182,212,0.3)_75%,rgba(6,182,212,0.3)_76%,transparent_77%,transparent),linear-gradient(90deg,transparent_24%,rgba(6,182,212,0.3)_25%,rgba(6,182,212,0.3)_26%,transparent_27%,transparent_74%,rgba(6,182,212,0.3)_75%,rgba(6,182,212,0.3)_76%,transparent_77%,transparent)] bg-[length:50px_50px]"}),u.jsxs("div",{className:"relative z-10 text-center pt-12 pb-6",children:[u.jsx("h2",{className:"text-3xl md:text-5xl font-black tracking-[0.2em] text-white uppercase drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]",children:r.choose}),u.jsx("div",{className:"w-64 h-1 bg-gradient-to-r from-transparent via-cyan-500 to-transparent mx-auto mt-4"}),u.jsx("p",{className:"text-cyan-500 text-xs mt-2 tracking-widest animate-pulse",children:"SYSTEM OVERRIDE REQUIRED"})]}),u.jsxs("div",{className:"flex-1 flex flex-col md:flex-row relative z-10",children:[u.jsxs("div",{className:`flex-1 relative group cursor-pointer transition-all duration-700 border-r border-slate-800 overflow-hidden
                              ${g==="ZOMBIE"?"opacity-20 grayscale pointer-events-none":""}
                              ${g==="ALIVE"?"flex-[2] bg-cyan-950/30":"hover:flex-[1.5] hover:bg-cyan-900/10"}
                          `,onClick:()=>b("ALIVE"),children:[u.jsx("div",{className:"absolute inset-0 opacity-20 group-hover:opacity-40 transition-opacity duration-500 mix-blend-luminosity",children:u.jsx("img",{src:"https://i.pinimg.com/736x/43/45/8b/43458b29272370723226334336066223.jpg",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-slate-950"}),u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-8 text-center",children:[u.jsx("div",{className:"w-24 h-24 rounded-full border-2 border-cyan-500 flex items-center justify-center mb-6 shadow-[0_0_30px_rgba(6,182,212,0.4)] group-hover:scale-110 transition-transform duration-300 bg-slate-900/80 backdrop-blur-sm overflow-hidden",children:u.jsx("img",{src:"https://i.pinimg.com/736x/63/1e/3a/631e3a68228c97963e78381ad11bf3bb.jpg",alt:"SHIELD Logo",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"})}),u.jsx("h3",{className:"text-3xl font-black text-cyan-400 tracking-widest uppercase mb-2 group-hover:text-white transition-colors",children:"S.H.I.E.L.D."}),u.jsx("p",{className:"text-cyan-200/70 font-mono text-sm max-w-sm",children:'"Salva lo que queda. Protege a los inocentes. Restaura el orden."'}),u.jsx("div",{className:`mt-8 px-8 py-3 border border-cyan-500 text-cyan-400 text-xs font-bold tracking-[0.3em] uppercase transition-all duration-300 ${g==="ALIVE"?"bg-cyan-500 text-black scale-110":"group-hover:bg-cyan-500/20"}`,children:g==="ALIVE"?"ACCESS GRANTED":"INITIATE PROTOCOL"})]})]}),u.jsx("div",{className:"hidden md:block absolute left-1/2 top-0 bottom-0 w-[1px] bg-white/20 z-20",children:u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-slate-950 border border-slate-700 rotate-45 flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500 -rotate-45 font-bold",children:"VS"})})}),u.jsxs("div",{className:`flex-1 relative group cursor-pointer transition-all duration-700 border-l border-slate-800 overflow-hidden
                              ${g==="ALIVE"?"opacity-20 grayscale pointer-events-none":""}
                              ${g==="ZOMBIE"?"flex-[2] bg-lime-950/30":"hover:flex-[1.5] hover:bg-lime-900/10"}
                          `,onClick:()=>b("ZOMBIE"),children:[u.jsx("div",{className:"absolute inset-0 opacity-20 group-hover:opacity-40 transition-opacity duration-500 mix-blend-luminosity",children:u.jsx("img",{src:"https://ca-times.brightspotcdn.com/f2/8c/dc0c619b48c1871a27e77b6131f4/marvel-zombies-01.jpg",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-slate-950"}),u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-8 text-center",children:[u.jsx("div",{className:"w-24 h-24 rounded-full border-2 border-lime-600 flex items-center justify-center mb-6 shadow-[0_0_30px_rgba(101,163,13,0.4)] group-hover:scale-110 transition-transform duration-300 bg-slate-900/80 backdrop-blur-sm overflow-hidden",children:u.jsx("img",{src:"https://i.pinimg.com/736x/7b/e8/d2/7be8d2f25242523d131ff8d81b1385fc.jpg",alt:"Zombie Logo",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"})}),u.jsx("h3",{className:"text-3xl font-black text-lime-500 tracking-widest uppercase mb-2 group-hover:text-white transition-colors",children:"THE HUNGER"}),u.jsx("p",{className:"text-lime-200/70 font-mono text-sm max-w-sm",children:'"Consume todo. Expande la plaga. Evoluciona."'}),u.jsx("div",{className:`mt-8 px-8 py-3 border border-lime-600 text-lime-500 text-xs font-bold tracking-[0.3em] uppercase transition-all duration-300 ${g==="ZOMBIE"?"bg-lime-600 text-black scale-110":"group-hover:bg-lime-600/20"}`,children:g==="ZOMBIE"?"VIRUS RELEASED":"UNLEASH PATHOGEN"})]})]})]})]});const D=s[i];if(!D)return null;const j=i%2===0?"-rotate-2":"rotate-1";return u.jsxs("div",{className:"flex flex-col md:flex-row h-full w-full bg-white shadow-inner",children:[u.jsxs("div",{className:"w-full md:w-[55%] h-1/2 md:h-full relative bg-[#2d3748] border-r border-slate-400 flex items-center justify-center overflow-hidden shadow-[inset_-10px_0_20px_rgba(0,0,0,0.3)]",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/leather.png')]"}),u.jsxs("div",{className:`relative bg-white p-3 pb-8 shadow-2xl transform transition-all duration-500 ease-out hover:rotate-0 hover:scale-105 cursor-zoom-in group ${j} max-w-[85%] max-h-[85%] flex flex-col`,children:[u.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 w-8 h-16 rounded-full border-4 border-gray-300 z-20 shadow-md bg-transparent pointer-events-none"}),u.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 w-8 h-10 bg-[#2d3748] z-10 pointer-events-none"}),u.jsxs("div",{className:"relative overflow-hidden border border-gray-200 bg-black",children:[u.jsx("img",{src:D.image,alt:"Evidence",className:"w-full h-full object-contain max-h-[60vh]",referrerPolicy:"no-referrer"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-40 transition-opacity pointer-events-none"})]}),u.jsxs("div",{className:"mt-3 flex justify-between items-end px-2",children:[u.jsxs("div",{className:"font-mono text-[10px] text-gray-500",children:["FIG. ",i+1,"A"]}),u.jsxs("div",{className:"font-handwriting text-sm text-blue-900 rotate-[-1deg]",style:{fontFamily:'"Courier New", monospace'},children:["Evidence #",1024+i]})]})]})]}),u.jsxs("div",{className:"w-full md:w-[45%] h-1/2 md:h-full p-6 md:p-10 flex flex-col bg-[#fdfbf7] relative",children:[u.jsx("div",{className:"absolute inset-0 opacity-40 pointer-events-none",style:{backgroundImage:"linear-gradient(#e5e7eb 1px, transparent 1px)",backgroundSize:"100% 2rem"}}),u.jsxs("div",{className:"relative z-10 flex-1 overflow-y-auto pr-2",children:[u.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-2 mb-6",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Incident Report"}),u.jsxs("h2",{className:"text-xl font-black text-slate-900 font-mono",children:["FILE #",1024+i]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[10px] font-mono text-slate-400",children:"DATE: 2025-10-31"}),u.jsx("div",{className:"text-xs font-bold text-red-700 border-2 border-red-700 px-1 inline-block mt-1 rotate-[-2deg] opacity-80",children:"TOP SECRET"})]})]}),u.jsx("div",{className:"font-mono text-sm md:text-base text-slate-900 leading-relaxed space-y-4 text-justify font-medium",children:D.text.split(`
`).map((I,v)=>u.jsx("p",{children:I},v))})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-300 flex justify-between items-center",children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 tracking-widest",children:"S.H.I.E.L.D. ARCHIVES // DO NOT COPY"}),u.jsxs("div",{className:"text-xs font-mono text-slate-500",children:["PG. ",i+1]})]})]})]})};return u.jsxs("div",{className:"fixed inset-0 z-[60] bg-[#0f172a] flex items-center justify-center perspective-[1500px] overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_#1e293b_0%,_#020617_100%)]"}),u.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(#334155 1px, transparent 1px), linear-gradient(90deg, #334155 1px, transparent 1px)",backgroundSize:"40px 40px"}}),!x&&u.jsx("button",{onClick:C,className:"absolute top-8 right-8 z-50 text-cyan-500 text-xs font-bold tracking-[0.2em] hover:text-white transition-colors border border-cyan-900 px-4 py-2 bg-slate-900/80 backdrop-blur",children:"SKIP INTRO >>"}),!x&&u.jsxs("div",{className:`relative w-[95%] h-[85%] max-w-6xl bg-[#d1d5db] shadow-[0_20px_50px_rgba(0,0,0,0.6)] transition-all duration-1000 ease-out transform-style-3d rounded-r-md border-l-8 border-slate-400 ${a?"rotate-x-0 translate-y-0 opacity-100":"rotate-x-20 translate-y-[100px] opacity-0"}`,children:[u.jsx("div",{className:"absolute -top-6 left-0 w-48 h-8 bg-[#9ca3af] rounded-t-lg border-t border-x border-white/20 flex items-center px-4 shadow-inner",children:u.jsx("span",{className:"text-[10px] font-bold text-slate-800 tracking-widest",children:"PROJECT: LAZARUS"})}),u.jsxs("div",{className:"w-full h-full bg-white relative overflow-hidden flex rounded-r-sm",children:[P(),d&&u.jsx("div",{className:`absolute inset-0 bg-black/10 z-50 transition-opacity duration-500 ${d?"opacity-100":"opacity-0"}`})]}),a&&u.jsxs("div",{className:"absolute -bottom-16 w-full flex justify-center gap-4",children:[u.jsx("button",{onClick:w,disabled:i===0||p,className:`w-12 h-12 rounded-full bg-slate-800 border border-slate-600 flex items-center justify-center text-white hover:bg-cyan-600 transition-all ${i===0?"opacity-30 cursor-not-allowed":""}`,children:""}),u.jsxs("div",{className:"h-12 px-6 bg-slate-900/90 border border-slate-700 rounded-full flex items-center justify-center text-cyan-400 font-mono text-xs tracking-widest shadow-lg",children:["SLIDE ",i+1," / ",s.length]}),u.jsx("button",{onClick:E,disabled:p,className:"w-12 h-12 rounded-full bg-slate-800 border border-slate-600 flex items-center justify-center text-white hover:bg-cyan-600 transition-all",children:""})]})]}),x&&P()]})},CD=({isZombie:t})=>{const[e,n]=N.useState(0),[r,s]=N.useState(""),a=t?["HUNTING SIGNAL...","CORRUPTING DATA...","INFECTING SYSTEM...","CONSUMING BANDWIDTH...","SPREADING VIRUS..."]:["HANDSHAKE_INIT...","BYPASSING FIREWALL...","DECRYPTING PACKET...","BUFFERING VIDEO STREAM...","SECURING CONNECTION..."],c=t?"text-lime-500":"text-cyan-500",d=t?"bg-lime-600":"bg-cyan-600";return N.useEffect(()=>{const h=setInterval(()=>{n(p=>p>=100?100:p+Math.random()*15),s(a[Math.floor(Math.random()*a.length)])},150);return()=>clearInterval(h)},[t]),u.jsxs("div",{className:"absolute inset-0 z-50 bg-black flex flex-col items-center justify-center font-sans p-8",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] animate-pulse"}),u.jsx("div",{className:`text-4xl mb-4 animate-spin ${c}`,children:t?"":""}),u.jsx("div",{className:`text-xl font-black tracking-[0.3em] mb-2 ${c} animate-pulse`,children:t?"FEEDING...":"LOADING..."}),u.jsx("div",{className:"w-64 h-2 bg-gray-800 border border-gray-600 relative overflow-hidden mb-2",children:u.jsx("div",{className:`h-full ${d} transition-all duration-200 ease-out`,style:{width:`${e}%`}})}),u.jsxs("div",{className:"text-[10px] text-gray-500 h-4",children:["> ",r]})]})},kD=({language:t,onComplete:e,playerAlignment:n})=>{const[r,s]=N.useState(0),[i,o]=N.useState(!1),[a,c]=N.useState(!1),d=Wn[t].introSequence[n==="ZOMBIE"?"zombie":"alive"],h=d[r];N.useEffect(()=>{if(!i){c(!1);const w=setTimeout(()=>c(!0),300);return()=>clearTimeout(w)}},[r,i]);const p=()=>{if(i)return;const w=r+1;if(w>=d.length){e();return}o(!0),c(!1);const b=new Image;b.src=d[w].image;const P=new Promise(j=>setTimeout(j,1500)),D=new Promise(j=>{b.onload=j,b.onerror=j});Promise.all([D,P]).then(()=>{s(w),o(!1)})};if(!h)return null;const f=n==="ZOMBIE",g=f?"text-lime-400":"text-cyan-400",_=f?"border-lime-500":"border-cyan-500",x=f?"bg-lime-950":"bg-cyan-950",C=f?"shadow-lime-500/20":"shadow-cyan-500/20",E=f?"bg-lime-500":"bg-cyan-500";return u.jsxs("div",{className:"fixed inset-0 z-[100] bg-black font-sans overflow-hidden flex flex-col md:flex-row",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-30 pointer-events-none",children:u.jsx("img",{src:h.image,className:"absolute inset-0 w-full h-full object-cover blur-3xl scale-110 opacity-100 transition-all duration-1000",referrerPolicy:"no-referrer",alt:""})}),u.jsx("div",{className:"absolute inset-0 z-[50] pointer-events-none bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] bg-[length:100%_4px,6px_100%]"}),u.jsx("div",{className:"relative flex-1 flex items-center justify-center p-4 md:p-12 z-10 h-[50vh] md:h-auto border-b md:border-b-0 md:border-r border-gray-800 bg-black/40 backdrop-blur-sm",children:u.jsxs("div",{className:`relative w-full h-full max-w-5xl max-h-[80vh] border ${_} ${C} shadow-[0_0_50px_rgba(0,0,0,0.5)] p-1 flex items-center justify-center bg-black overflow-hidden group`,children:[u.jsx("div",{className:`absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 ${_} z-20`}),u.jsx("div",{className:`absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 ${_} z-20`}),u.jsx("div",{className:`absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 ${_} z-20`}),u.jsx("div",{className:`absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 ${_} z-20`}),i&&u.jsx(CD,{isZombie:f}),u.jsx("img",{src:h.image,alt:"Evidence",className:`w-full h-full object-contain transition-opacity duration-500 ${i?"opacity-0":"opacity-100"}`,referrerPolicy:"no-referrer"},r),!i&&u.jsxs("div",{className:"absolute top-4 left-4 bg-black/80 px-3 py-1 border border-gray-700 flex items-center gap-2 animate-fade-in",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-red-500 animate-pulse":"bg-green-500"}`}),u.jsxs("span",{className:"text-[10px] text-gray-300 tracking-widest font-bold",children:["IMG_SEQ_",1024+r," // ",f?"CORRUPTED":"RESTORED"]})]})]})}),u.jsxs("div",{className:"relative w-full md:w-[450px] flex flex-col z-20 bg-slate-950 border-l border-gray-800 shadow-2xl",children:[u.jsxs("div",{className:`p-6 border-b border-gray-800 ${x} bg-opacity-10`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("h2",{className:`text-xl font-black tracking-[0.2em] uppercase ${g}`,children:f?"HUNGER_LOG":"MH0_PROTOCOL"}),u.jsx("span",{className:"text-xs text-gray-500 font-bold",children:"v.9.0.1"})]}),u.jsx("div",{className:"w-full h-1 bg-gray-800 mt-2",children:u.jsx("div",{className:`h-full ${E} transition-all duration-500 ease-out`,style:{width:`${(r+1)/d.length*100}%`}})}),u.jsxs("div",{className:"flex justify-between text-[9px] text-gray-500 mt-1 font-mono",children:[u.jsxs("span",{children:["SEGMENT ",r+1," OF ",d.length]}),u.jsxs("span",{children:[Math.round((r+1)/d.length*100),"% COMPLETE"]})]})]}),u.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto relative",children:i?u.jsxs("div",{className:"flex flex-col gap-2 opacity-50 animate-pulse",children:[u.jsx("div",{className:"h-2 bg-gray-800 w-3/4"}),u.jsx("div",{className:"h-2 bg-gray-800 w-full"}),u.jsx("div",{className:"h-2 bg-gray-800 w-5/6"}),u.jsx("div",{className:"h-2 bg-gray-800 w-1/2"})]}):u.jsxs("div",{className:`transition-all duration-500 ${a?"opacity-100 translate-x-0":"opacity-0 translate-x-4"}`,children:[u.jsxs("div",{className:"text-[10px] text-gray-600 mb-4 font-mono select-none",children:["> DECRYPTING AUDIO LOG...",u.jsx("br",{}),"> SUBJECT: UNKNOWN",u.jsx("br",{}),"> LOCATION: SECTOR 7",u.jsx("br",{}),"> STATUS: ",u.jsx("span",{className:f?"text-red-500":"text-emerald-500",children:f?"CRITICAL":"STABLE"})]}),u.jsx("p",{className:"text-sm md:text-base text-gray-300 leading-relaxed font-mono whitespace-pre-wrap border-l-2 border-gray-800 pl-4",children:h.text}),u.jsx("span",{className:`inline-block w-2 h-4 ml-1 align-middle ${E} animate-pulse`})]})}),u.jsx("div",{className:"p-6 border-t border-gray-800 bg-black/20",children:u.jsxs("button",{onClick:p,disabled:i,className:`
                            w-full py-4 text-xs font-black tracking-[0.3em] uppercase border transition-all duration-300 group relative overflow-hidden
                            ${f?"border-lime-600 text-lime-500 hover:bg-lime-900/20":"border-cyan-600 text-cyan-500 hover:bg-cyan-900/20"}
                            ${i?"opacity-50 cursor-wait":""}
                        `,children:[u.jsx("span",{className:"relative z-10 group-hover:translate-x-2 transition-transform inline-block",children:i?f?"HUNTING...":"BUFFERING...":r===d.length-1?"INICIAR SIMULACIN":"SIGUIENTE ENTRADA >>"}),u.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity ${E}`})]})})]})]})},OD=({language:t,onComplete:e,onStepChange:n})=>{const[r,s]=N.useState(0),[i,o]=N.useState(null),a=Wn[t].tutorial,c=[{targetId:null,translationKey:"welcome",position:"center"},{targetId:"tutorial-map",translationKey:"map_zones",position:"center"},{targetId:"hulk-token",translationKey:"hulk",position:"center"},{targetId:"tutorial-sidebar-missions",translationKey:"missions",position:"right"},{targetId:"tutorial-bunker-btn",translationKey:"bunker_entry",position:"right"},{targetId:"tutorial-bunker-roster",translationKey:"roster",position:"right"},{targetId:"tutorial-bunker-file",translationKey:"file",position:"left"},{targetId:"tutorial-recruit-btn",translationKey:"recruit",position:"left"},{targetId:null,translationKey:"finish",position:"center"}],d=c[r],p=(()=>{if(!d)return{title:"",text:""};const _=a[d.translationKey];return _&&typeof _=="object"&&"title"in _?_:{title:"TUTORIAL",text:""}})();N.useEffect(()=>{const _=()=>{if(d&&d.targetId){const x=document.getElementById(d.targetId);o(x?x.getBoundingClientRect():null)}else o(null)};return setTimeout(_,300),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[r,d]);const f=()=>{if(r<c.length-1){const _=r+1;s(_),n&&n(c[_].translationKey)}else e()},g=()=>{if(!i||!(d!=null&&d.targetId)||d.position==="center")return{top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:"450px"};if(window.innerWidth<768)return{bottom:"20px",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"400px"};const _=20,x=i.top+i.height/2-100,C=Math.max(20,Math.min(window.innerHeight-300,x));return d.position==="left"?{top:`${C}px`,right:`${window.innerWidth-i.left+_}px`,width:"350px"}:{top:`${C}px`,left:`${i.right+_}px`,width:"350px"}};return p.title?u.jsxs("div",{className:`fixed inset-0 z-[100] transition-all duration-500 ${i?"bg-transparent":"bg-slate-950/80 backdrop-blur-sm"}`,children:[i&&u.jsxs("div",{className:"absolute border-2 border-cyan-400 shadow-[0_0_50px_rgba(6,182,212,0.5)] transition-all duration-300 pointer-events-none",style:{top:i.top-5,left:i.left-5,width:i.width+10,height:i.height+10,boxShadow:"0 0 0 9999px rgba(15, 23, 42, 0.85)"},children:[u.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 bg-cyan-400"}),u.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-cyan-400"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 bg-cyan-400"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 bg-cyan-400"}),u.jsx("div",{className:`absolute top-1/2 w-10 h-[1px] bg-cyan-500 hidden md:block ${(d==null?void 0:d.position)==="left"?"-right-10":"-left-10"}`})]}),u.jsxs("div",{className:"absolute p-6 bg-slate-900/95 border-l-4 border-cyan-500 shadow-2xl transition-all duration-500",style:g(),children:[u.jsx("h3",{className:"text-xl font-bold text-cyan-300 mb-2 tracking-widest border-b border-cyan-800 pb-2",children:p.title}),u.jsx("p",{className:"text-sm text-cyan-100/90 leading-relaxed font-mono mb-6",children:p.text}),u.jsxs("div",{className:"flex justify-between items-center gap-4",children:[u.jsx("button",{onClick:e,className:"text-xs text-gray-500 hover:text-cyan-400 underline",children:a.skip}),u.jsx("button",{onClick:f,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold text-xs tracking-widest shadow-[0_0_15px_rgba(6,182,212,0.4)]",children:r===c.length-1?a.finishBtn:a.next})]})]})]}):null};class ci{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let s=0;s<this._n&&s<32;s++){const i=n[s],o=e+i,a=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);a&&(n[r++]=a),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,s,i,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,s=e[--n],o=r+s,i=s-(o-r),!i););n>0&&(i<0&&e[n-1]<0||i>0&&e[n-1]>0)&&(s=i*2,r=o+s,s==r-o&&(o=r))}return o}}function*PD(t){for(const e of t)yield*e}function dA(t){return Array.from(PD(t))}var LD={value:()=>{}};function r0(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new au(n)}function au(t){this._=t}function DD(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}au.prototype=r0.prototype={constructor:au,on:function(t,e){var n=this._,r=DD(t+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(t=r[i]).type)&&(s=MD(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(s=(t=r[i]).type)n[s]=SE(n[s],t.name,e);else if(e==null)for(s in n)n[s]=SE(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new au(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,i=r.length;s<i;++s)r[s].value.apply(e,n)}};function MD(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function SE(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=LD,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var jp="http://www.w3.org/1999/xhtml";const AE={svg:"http://www.w3.org/2000/svg",xhtml:jp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nh(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),AE.hasOwnProperty(e)?{space:AE[e],local:t}:t}function jD(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===jp&&e.documentElement.namespaceURI===jp?e.createElement(t):e.createElementNS(n,t)}}function VD(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hA(t){var e=nh(t);return(e.local?VD:jD)(e)}function UD(){}function s0(t){return t==null?UD:function(){return this.querySelector(t)}}function FD(t){typeof t!="function"&&(t=s0(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var i=e[s],o=i.length,a=r[s]=new Array(o),c,d,h=0;h<o;++h)(c=i[h])&&(d=t.call(c,c.__data__,h,i))&&("__data__"in c&&(d.__data__=c.__data__),a[h]=d);return new pn(r,this._parents)}function BD(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function zD(){return[]}function fA(t){return t==null?zD:function(){return this.querySelectorAll(t)}}function $D(t){return function(){return BD(t.apply(this,arguments))}}function HD(t){typeof t=="function"?t=$D(t):t=fA(t);for(var e=this._groups,n=e.length,r=[],s=[],i=0;i<n;++i)for(var o=e[i],a=o.length,c,d=0;d<a;++d)(c=o[d])&&(r.push(t.call(c,c.__data__,d,o)),s.push(c));return new pn(r,s)}function pA(t){return function(){return this.matches(t)}}function mA(t){return function(e){return e.matches(t)}}var GD=Array.prototype.find;function WD(t){return function(){return GD.call(this.children,t)}}function qD(){return this.firstElementChild}function KD(t){return this.select(t==null?qD:WD(typeof t=="function"?t:mA(t)))}var YD=Array.prototype.filter;function QD(){return Array.from(this.children)}function XD(t){return function(){return YD.call(this.children,t)}}function ZD(t){return this.selectAll(t==null?QD:XD(typeof t=="function"?t:mA(t)))}function JD(t){typeof t!="function"&&(t=pA(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var i=e[s],o=i.length,a=r[s]=[],c,d=0;d<o;++d)(c=i[d])&&t.call(c,c.__data__,d,i)&&a.push(c);return new pn(r,this._parents)}function gA(t){return new Array(t.length)}function eM(){return new pn(this._enter||this._groups.map(gA),this._parents)}function rd(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}rd.prototype={constructor:rd,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function tM(t){return function(){return t}}function nM(t,e,n,r,s,i){for(var o=0,a,c=e.length,d=i.length;o<d;++o)(a=e[o])?(a.__data__=i[o],r[o]=a):n[o]=new rd(t,i[o]);for(;o<c;++o)(a=e[o])&&(s[o]=a)}function rM(t,e,n,r,s,i,o){var a,c,d=new Map,h=e.length,p=i.length,f=new Array(h),g;for(a=0;a<h;++a)(c=e[a])&&(f[a]=g=o.call(c,c.__data__,a,e)+"",d.has(g)?s[a]=c:d.set(g,c));for(a=0;a<p;++a)g=o.call(t,i[a],a,i)+"",(c=d.get(g))?(r[a]=c,c.__data__=i[a],d.delete(g)):n[a]=new rd(t,i[a]);for(a=0;a<h;++a)(c=e[a])&&d.get(f[a])===c&&(s[a]=c)}function sM(t){return t.__data__}function iM(t,e){if(!arguments.length)return Array.from(this,sM);var n=e?rM:nM,r=this._parents,s=this._groups;typeof t!="function"&&(t=tM(t));for(var i=s.length,o=new Array(i),a=new Array(i),c=new Array(i),d=0;d<i;++d){var h=r[d],p=s[d],f=p.length,g=oM(t.call(h,h&&h.__data__,d,r)),_=g.length,x=a[d]=new Array(_),C=o[d]=new Array(_),E=c[d]=new Array(f);n(h,p,x,C,E,g,e);for(var w=0,b=0,P,D;w<_;++w)if(P=x[w]){for(w>=b&&(b=w+1);!(D=C[b])&&++b<_;);P._next=D||null}}return o=new pn(o,r),o._enter=a,o._exit=c,o}function oM(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function aM(){return new pn(this._exit||this._groups.map(gA),this._parents)}function lM(t,e,n){var r=this.enter(),s=this,i=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function cM(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,i=r.length,o=Math.min(s,i),a=new Array(s),c=0;c<o;++c)for(var d=n[c],h=r[c],p=d.length,f=a[c]=new Array(p),g,_=0;_<p;++_)(g=d[_]||h[_])&&(f[_]=g);for(;c<s;++c)a[c]=n[c];return new pn(a,this._parents)}function uM(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function dM(t){t||(t=hM);function e(p,f){return p&&f?t(p.__data__,f.__data__):!p-!f}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],a=o.length,c=s[i]=new Array(a),d,h=0;h<a;++h)(d=o[h])&&(c[h]=d);c.sort(e)}return new pn(s,this._parents).order()}function hM(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function fM(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function pM(){return Array.from(this)}function mM(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function gM(){let t=0;for(const e of this)++t;return t}function yM(){return!this.node()}function vM(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],i=0,o=s.length,a;i<o;++i)(a=s[i])&&t.call(a,a.__data__,i,s);return this}function EM(t){return function(){this.removeAttribute(t)}}function xM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _M(t,e){return function(){this.setAttribute(t,e)}}function wM(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function bM(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function SM(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function AM(t,e){var n=nh(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?xM:EM:typeof e=="function"?n.local?SM:bM:n.local?wM:_M)(n,e))}function yA(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function IM(t){return function(){this.style.removeProperty(t)}}function TM(t,e,n){return function(){this.style.setProperty(t,e,n)}}function NM(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function RM(t,e,n){return arguments.length>1?this.each((e==null?IM:typeof e=="function"?NM:TM)(t,e,n??"")):mo(this.node(),t)}function mo(t,e){return t.style.getPropertyValue(e)||yA(t).getComputedStyle(t,null).getPropertyValue(e)}function CM(t){return function(){delete this[t]}}function kM(t,e){return function(){this[t]=e}}function OM(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function PM(t,e){return arguments.length>1?this.each((e==null?CM:typeof e=="function"?OM:kM)(t,e)):this.node()[t]}function vA(t){return t.trim().split(/^|\s+/)}function i0(t){return t.classList||new EA(t)}function EA(t){this._node=t,this._names=vA(t.getAttribute("class")||"")}EA.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xA(t,e){for(var n=i0(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function _A(t,e){for(var n=i0(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function LM(t){return function(){xA(this,t)}}function DM(t){return function(){_A(this,t)}}function MM(t,e){return function(){(e.apply(this,arguments)?xA:_A)(this,t)}}function jM(t,e){var n=vA(t+"");if(arguments.length<2){for(var r=i0(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?MM:e?LM:DM)(n,e))}function VM(){this.textContent=""}function UM(t){return function(){this.textContent=t}}function FM(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function BM(t){return arguments.length?this.each(t==null?VM:(typeof t=="function"?FM:UM)(t)):this.node().textContent}function zM(){this.innerHTML=""}function $M(t){return function(){this.innerHTML=t}}function HM(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function GM(t){return arguments.length?this.each(t==null?zM:(typeof t=="function"?HM:$M)(t)):this.node().innerHTML}function WM(){this.nextSibling&&this.parentNode.appendChild(this)}function qM(){return this.each(WM)}function KM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function YM(){return this.each(KM)}function QM(t){var e=typeof t=="function"?t:hA(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function XM(){return null}function ZM(t,e){var n=typeof t=="function"?t:hA(t),r=e==null?XM:typeof e=="function"?e:s0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function JM(){var t=this.parentNode;t&&t.removeChild(this)}function ej(){return this.each(JM)}function tj(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function nj(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function rj(t){return this.select(t?nj:tj)}function sj(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ij(t){return function(e){t.call(this,e,this.__data__)}}function oj(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function aj(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,i;n<s;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++r]=i;++r?e.length=r:delete this.__on}}}function lj(t,e,n){return function(){var r=this.__on,s,i=ij(e);if(r){for(var o=0,a=r.length;o<a;++o)if((s=r[o]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=e;return}}this.addEventListener(t.type,i,n),s={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(s):this.__on=[s]}}function cj(t,e,n){var r=oj(t+""),s,i=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,d=a.length,h;c<d;++c)for(s=0,h=a[c];s<i;++s)if((o=r[s]).type===h.type&&o.name===h.name)return h.value}return}for(a=e?lj:aj,s=0;s<i;++s)this.each(a(r[s],e,n));return this}function wA(t,e,n){var r=yA(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function uj(t,e){return function(){return wA(this,t,e)}}function dj(t,e){return function(){return wA(this,t,e.apply(this,arguments))}}function hj(t,e){return this.each((typeof e=="function"?dj:uj)(t,e))}function*fj(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var bA=[null];function pn(t,e){this._groups=t,this._parents=e}function Pl(){return new pn([[document.documentElement]],bA)}function pj(){return this}pn.prototype=Pl.prototype={constructor:pn,select:FD,selectAll:HD,selectChild:KD,selectChildren:ZD,filter:JD,data:iM,enter:eM,exit:aM,join:lM,merge:cM,selection:pj,order:uM,sort:dM,call:fM,nodes:pM,node:mM,size:gM,empty:yM,each:vM,attr:AM,style:RM,property:PM,classed:jM,text:BM,html:GM,raise:qM,lower:YM,append:QM,insert:ZM,remove:ej,clone:rj,datum:sj,on:cj,dispatch:hj,[Symbol.iterator]:fj};function Mt(t){return typeof t=="string"?new pn([[document.querySelector(t)]],[document.documentElement]):new pn([[t]],bA)}function mj(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Vs(t,e){if(t=mj(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const Vp={capture:!0,passive:!1};function Up(t){t.preventDefault(),t.stopImmediatePropagation()}function gj(t){var e=t.document.documentElement,n=Mt(t).on("dragstart.drag",Up,Vp);"onselectstart"in e?n.on("selectstart.drag",Up,Vp):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yj(t,e){var n=t.document.documentElement,r=Mt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Up,Vp),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function o0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function SA(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ll(){}var sl=.7,sd=1/sl,Xi="\\s*([+-]?\\d+)\\s*",il="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ir="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vj=/^#([0-9a-f]{3,8})$/,Ej=new RegExp(`^rgb\\(${Xi},${Xi},${Xi}\\)$`),xj=new RegExp(`^rgb\\(${ir},${ir},${ir}\\)$`),_j=new RegExp(`^rgba\\(${Xi},${Xi},${Xi},${il}\\)$`),wj=new RegExp(`^rgba\\(${ir},${ir},${ir},${il}\\)$`),bj=new RegExp(`^hsl\\(${il},${ir},${ir}\\)$`),Sj=new RegExp(`^hsla\\(${il},${ir},${ir},${il}\\)$`),IE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};o0(Ll,ol,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:TE,formatHex:TE,formatHex8:Aj,formatHsl:Ij,formatRgb:NE,toString:NE});function TE(){return this.rgb().formatHex()}function Aj(){return this.rgb().formatHex8()}function Ij(){return AA(this).formatHsl()}function NE(){return this.rgb().formatRgb()}function ol(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=vj.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?RE(e):n===3?new Xt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ac(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ac(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ej.exec(t))?new Xt(e[1],e[2],e[3],1):(e=xj.exec(t))?new Xt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_j.exec(t))?Ac(e[1],e[2],e[3],e[4]):(e=wj.exec(t))?Ac(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bj.exec(t))?OE(e[1],e[2]/100,e[3]/100,1):(e=Sj.exec(t))?OE(e[1],e[2]/100,e[3]/100,e[4]):IE.hasOwnProperty(t)?RE(IE[t]):t==="transparent"?new Xt(NaN,NaN,NaN,0):null}function RE(t){return new Xt(t>>16&255,t>>8&255,t&255,1)}function Ac(t,e,n,r){return r<=0&&(t=e=n=NaN),new Xt(t,e,n,r)}function Tj(t){return t instanceof Ll||(t=ol(t)),t?(t=t.rgb(),new Xt(t.r,t.g,t.b,t.opacity)):new Xt}function Fp(t,e,n,r){return arguments.length===1?Tj(t):new Xt(t,e,n,r??1)}function Xt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}o0(Xt,Fp,SA(Ll,{brighter(t){return t=t==null?sd:Math.pow(sd,t),new Xt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?sl:Math.pow(sl,t),new Xt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xt(Zs(this.r),Zs(this.g),Zs(this.b),id(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CE,formatHex:CE,formatHex8:Nj,formatRgb:kE,toString:kE}));function CE(){return`#${qs(this.r)}${qs(this.g)}${qs(this.b)}`}function Nj(){return`#${qs(this.r)}${qs(this.g)}${qs(this.b)}${qs((isNaN(this.opacity)?1:this.opacity)*255)}`}function kE(){const t=id(this.opacity);return`${t===1?"rgb(":"rgba("}${Zs(this.r)}, ${Zs(this.g)}, ${Zs(this.b)}${t===1?")":`, ${t})`}`}function id(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qs(t){return t=Zs(t),(t<16?"0":"")+t.toString(16)}function OE(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Un(t,e,n,r)}function AA(t){if(t instanceof Un)return new Un(t.h,t.s,t.l,t.opacity);if(t instanceof Ll||(t=ol(t)),!t)return new Un;if(t instanceof Un)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,a=i-s,c=(i+s)/2;return a?(e===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-e)/a+2:o=(e-n)/a+4,a/=c<.5?i+s:2-i-s,o*=60):a=c>0&&c<1?0:o,new Un(o,a,c,t.opacity)}function Rj(t,e,n,r){return arguments.length===1?AA(t):new Un(t,e,n,r??1)}function Un(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}o0(Un,Rj,SA(Ll,{brighter(t){return t=t==null?sd:Math.pow(sd,t),new Un(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?sl:Math.pow(sl,t),new Un(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Xt(cf(t>=240?t-240:t+120,s,r),cf(t,s,r),cf(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Un(PE(this.h),Ic(this.s),Ic(this.l),id(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=id(this.opacity);return`${t===1?"hsl(":"hsla("}${PE(this.h)}, ${Ic(this.s)*100}%, ${Ic(this.l)*100}%${t===1?")":`, ${t})`}`}}));function PE(t){return t=(t||0)%360,t<0?t+360:t}function Ic(t){return Math.max(0,Math.min(1,t||0))}function cf(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const IA=t=>()=>t;function Cj(t,e){return function(n){return t+n*e}}function kj(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Oj(t){return(t=+t)==1?TA:function(e,n){return n-e?kj(e,n,t):IA(isNaN(e)?n:e)}}function TA(t,e){var n=e-t;return n?Cj(t,n):IA(isNaN(t)?e:t)}const LE=function t(e){var n=Oj(e);function r(s,i){var o=n((s=Fp(s)).r,(i=Fp(i)).r),a=n(s.g,i.g),c=n(s.b,i.b),d=TA(s.opacity,i.opacity);return function(h){return s.r=o(h),s.g=a(h),s.b=c(h),s.opacity=d(h),s+""}}return r.gamma=t,r}(1);function bn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Bp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uf=new RegExp(Bp.source,"g");function Pj(t){return function(){return t}}function Lj(t){return function(e){return t(e)+""}}function Dj(t,e){var n=Bp.lastIndex=uf.lastIndex=0,r,s,i,o=-1,a=[],c=[];for(t=t+"",e=e+"";(r=Bp.exec(t))&&(s=uf.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,c.push({i:o,x:bn(r,s)})),n=uf.lastIndex;return n<e.length&&(i=e.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?c[0]?Lj(c[0].x):Pj(e):(e=c.length,function(d){for(var h=0,p;h<e;++h)a[(p=c[h]).i]=p.x(d);return a.join("")})}var DE=180/Math.PI,zp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function NA(t,e,n,r,s,i){var o,a,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(e,t)*DE,skewX:Math.atan(c)*DE,scaleX:o,scaleY:a}}var Tc;function Mj(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?zp:NA(e.a,e.b,e.c,e.d,e.e,e.f)}function jj(t){return t==null||(Tc||(Tc=document.createElementNS("http://www.w3.org/2000/svg","g")),Tc.setAttribute("transform",t),!(t=Tc.transform.baseVal.consolidate()))?zp:(t=t.matrix,NA(t.a,t.b,t.c,t.d,t.e,t.f))}function RA(t,e,n,r){function s(d){return d.length?d.pop()+" ":""}function i(d,h,p,f,g,_){if(d!==p||h!==f){var x=g.push("translate(",null,e,null,n);_.push({i:x-4,x:bn(d,p)},{i:x-2,x:bn(h,f)})}else(p||f)&&g.push("translate("+p+e+f+n)}function o(d,h,p,f){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),f.push({i:p.push(s(p)+"rotate(",null,r)-2,x:bn(d,h)})):h&&p.push(s(p)+"rotate("+h+r)}function a(d,h,p,f){d!==h?f.push({i:p.push(s(p)+"skewX(",null,r)-2,x:bn(d,h)}):h&&p.push(s(p)+"skewX("+h+r)}function c(d,h,p,f,g,_){if(d!==p||h!==f){var x=g.push(s(g)+"scale(",null,",",null,")");_.push({i:x-4,x:bn(d,p)},{i:x-2,x:bn(h,f)})}else(p!==1||f!==1)&&g.push(s(g)+"scale("+p+","+f+")")}return function(d,h){var p=[],f=[];return d=t(d),h=t(h),i(d.translateX,d.translateY,h.translateX,h.translateY,p,f),o(d.rotate,h.rotate,p,f),a(d.skewX,h.skewX,p,f),c(d.scaleX,d.scaleY,h.scaleX,h.scaleY,p,f),d=h=null,function(g){for(var _=-1,x=f.length,C;++_<x;)p[(C=f[_]).i]=C.x(g);return p.join("")}}}var Vj=RA(Mj,"px, ","px)","deg)"),Uj=RA(jj,", ",")",")"),Fj=1e-12;function ME(t){return((t=Math.exp(t))+1/t)/2}function Bj(t){return((t=Math.exp(t))-1/t)/2}function zj(t){return((t=Math.exp(2*t))-1)/(t+1)}const $j=function t(e,n,r){function s(i,o){var a=i[0],c=i[1],d=i[2],h=o[0],p=o[1],f=o[2],g=h-a,_=p-c,x=g*g+_*_,C,E;if(x<Fj)E=Math.log(f/d)/e,C=function(I){return[a+I*g,c+I*_,d*Math.exp(e*I*E)]};else{var w=Math.sqrt(x),b=(f*f-d*d+r*x)/(2*d*n*w),P=(f*f-d*d-r*x)/(2*f*n*w),D=Math.log(Math.sqrt(b*b+1)-b),j=Math.log(Math.sqrt(P*P+1)-P);E=(j-D)/e,C=function(I){var v=I*E,S=ME(D),A=d/(n*w)*(S*zj(e*v+D)-Bj(D));return[a+A*g,c+A*_,d*S/ME(e*v+D)]}}return C.duration=E*1e3*e/Math.SQRT2,C}return s.rho=function(i){var o=Math.max(.001,+i),a=o*o,c=a*a;return t(o,a,c)},s}(Math.SQRT2,2,4);var go=0,da=0,ea=0,CA=1e3,od,ha,ad=0,ui=0,rh=0,al=typeof performance=="object"&&performance.now?performance:Date,kA=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function a0(){return ui||(kA(Hj),ui=al.now()+rh)}function Hj(){ui=0}function ld(){this._call=this._time=this._next=null}ld.prototype=OA.prototype={constructor:ld,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?a0():+n)+(e==null?0:+e),!this._next&&ha!==this&&(ha?ha._next=this:od=this,ha=this),this._call=t,this._time=n,$p()},stop:function(){this._call&&(this._call=null,this._time=1/0,$p())}};function OA(t,e,n){var r=new ld;return r.restart(t,e,n),r}function Gj(){a0(),++go;for(var t=od,e;t;)(e=ui-t._time)>=0&&t._call.call(void 0,e),t=t._next;--go}function jE(){ui=(ad=al.now())+rh,go=da=0;try{Gj()}finally{go=0,qj(),ui=0}}function Wj(){var t=al.now(),e=t-ad;e>CA&&(rh-=e,ad=t)}function qj(){for(var t,e=od,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:od=n);ha=t,$p(r)}function $p(t){if(!go){da&&(da=clearTimeout(da));var e=t-ui;e>24?(t<1/0&&(da=setTimeout(jE,t-al.now()-rh)),ea&&(ea=clearInterval(ea))):(ea||(ad=al.now(),ea=setInterval(Wj,CA)),go=1,kA(jE))}}function VE(t,e,n){var r=new ld;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var Kj=r0("start","end","cancel","interrupt"),Yj=[],PA=0,UE=1,Hp=2,lu=3,FE=4,Gp=5,cu=6;function sh(t,e,n,r,s,i){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Qj(t,n,{name:e,index:r,group:s,on:Kj,tween:Yj,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:PA})}function l0(t,e){var n=qn(t,e);if(n.state>PA)throw new Error("too late; already scheduled");return n}function ur(t,e){var n=qn(t,e);if(n.state>lu)throw new Error("too late; already running");return n}function qn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Qj(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=OA(i,0,n.time);function i(d){n.state=UE,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var h,p,f,g;if(n.state!==UE)return c();for(h in r)if(g=r[h],g.name===n.name){if(g.state===lu)return VE(o);g.state===FE?(g.state=cu,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[h]):+h<e&&(g.state=cu,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[h])}if(VE(function(){n.state===lu&&(n.state=FE,n.timer.restart(a,n.delay,n.time),a(d))}),n.state=Hp,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Hp){for(n.state=lu,s=new Array(f=n.tween.length),h=0,p=-1;h<f;++h)(g=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(s[++p]=g);s.length=p+1}}function a(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(c),n.state=Gp,1),p=-1,f=s.length;++p<f;)s[p].call(t,h);n.state===Gp&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=cu,n.timer.stop(),delete r[e];for(var d in r)return;delete t.__transition}}function uu(t,e){var n=t.__transition,r,s,i=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){i=!1;continue}s=r.state>Hp&&r.state<Gp,r.state=cu,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}i&&delete t.__transition}}function Xj(t){return this.each(function(){uu(this,t)})}function Zj(t,e){var n,r;return function(){var s=ur(this,t),i=s.tween;if(i!==n){r=n=i;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function Jj(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=ur(this,t),o=i.tween;if(o!==r){s=(r=o).slice();for(var a={name:e,value:n},c=0,d=s.length;c<d;++c)if(s[c].name===e){s[c]=a;break}c===d&&s.push(a)}i.tween=s}}function e5(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=qn(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===t)return o.value;return null}return this.each((e==null?Zj:Jj)(n,t,e))}function c0(t,e,n){var r=t._id;return t.each(function(){var s=ur(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return qn(s,r).value[e]}}function LA(t,e){var n;return(typeof e=="number"?bn:e instanceof ol?LE:(n=ol(e))?(e=n,LE):Dj)(t,e)}function t5(t){return function(){this.removeAttribute(t)}}function n5(t){return function(){this.removeAttributeNS(t.space,t.local)}}function r5(t,e,n){var r,s=n+"",i;return function(){var o=this.getAttribute(t);return o===s?null:o===r?i:i=e(r=o,n)}}function s5(t,e,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===s?null:o===r?i:i=e(r=o,n)}}function i5(t,e,n){var r,s,i;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=a+"",o===c?null:o===r&&c===s?i:(s=c,i=e(r=o,a)))}}function o5(t,e,n){var r,s,i;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=a+"",o===c?null:o===r&&c===s?i:(s=c,i=e(r=o,a)))}}function a5(t,e){var n=nh(t),r=n==="transform"?Uj:LA;return this.attrTween(t,typeof e=="function"?(n.local?o5:i5)(n,r,c0(this,"attr."+t,e)):e==null?(n.local?n5:t5)(n):(n.local?s5:r5)(n,r,e))}function l5(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function c5(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function u5(t,e){var n,r;function s(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&c5(t,i)),n}return s._value=e,s}function d5(t,e){var n,r;function s(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&l5(t,i)),n}return s._value=e,s}function h5(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=nh(t);return this.tween(n,(r.local?u5:d5)(r,e))}function f5(t,e){return function(){l0(this,t).delay=+e.apply(this,arguments)}}function p5(t,e){return e=+e,function(){l0(this,t).delay=e}}function m5(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?f5:p5)(e,t)):qn(this.node(),e).delay}function g5(t,e){return function(){ur(this,t).duration=+e.apply(this,arguments)}}function y5(t,e){return e=+e,function(){ur(this,t).duration=e}}function v5(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?g5:y5)(e,t)):qn(this.node(),e).duration}function E5(t,e){if(typeof e!="function")throw new Error;return function(){ur(this,t).ease=e}}function x5(t){var e=this._id;return arguments.length?this.each(E5(e,t)):qn(this.node(),e).ease}function _5(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ur(this,t).ease=n}}function w5(t){if(typeof t!="function")throw new Error;return this.each(_5(this._id,t))}function b5(t){typeof t!="function"&&(t=pA(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var i=e[s],o=i.length,a=r[s]=[],c,d=0;d<o;++d)(c=i[d])&&t.call(c,c.__data__,d,i)&&a.push(c);return new Ur(r,this._parents,this._name,this._id)}function S5(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,i=Math.min(r,s),o=new Array(r),a=0;a<i;++a)for(var c=e[a],d=n[a],h=c.length,p=o[a]=new Array(h),f,g=0;g<h;++g)(f=c[g]||d[g])&&(p[g]=f);for(;a<r;++a)o[a]=e[a];return new Ur(o,this._parents,this._name,this._id)}function A5(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function I5(t,e,n){var r,s,i=A5(e)?l0:ur;return function(){var o=i(this,t),a=o.on;a!==r&&(s=(r=a).copy()).on(e,n),o.on=s}}function T5(t,e){var n=this._id;return arguments.length<2?qn(this.node(),n).on.on(t):this.each(I5(n,t,e))}function N5(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function R5(){return this.on("end.remove",N5(this._id))}function C5(t){var e=this._name,n=this._id;typeof t!="function"&&(t=s0(t));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var a=r[o],c=a.length,d=i[o]=new Array(c),h,p,f=0;f<c;++f)(h=a[f])&&(p=t.call(h,h.__data__,f,a))&&("__data__"in h&&(p.__data__=h.__data__),d[f]=p,sh(d[f],e,n,f,d,qn(h,n)));return new Ur(i,this._parents,e,n)}function k5(t){var e=this._name,n=this._id;typeof t!="function"&&(t=fA(t));for(var r=this._groups,s=r.length,i=[],o=[],a=0;a<s;++a)for(var c=r[a],d=c.length,h,p=0;p<d;++p)if(h=c[p]){for(var f=t.call(h,h.__data__,p,c),g,_=qn(h,n),x=0,C=f.length;x<C;++x)(g=f[x])&&sh(g,e,n,x,f,_);i.push(f),o.push(h)}return new Ur(i,o,e,n)}var O5=Pl.prototype.constructor;function P5(){return new O5(this._groups,this._parents)}function L5(t,e){var n,r,s;return function(){var i=mo(this,t),o=(this.style.removeProperty(t),mo(this,t));return i===o?null:i===n&&o===r?s:s=e(n=i,r=o)}}function DA(t){return function(){this.style.removeProperty(t)}}function D5(t,e,n){var r,s=n+"",i;return function(){var o=mo(this,t);return o===s?null:o===r?i:i=e(r=o,n)}}function M5(t,e,n){var r,s,i;return function(){var o=mo(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),mo(this,t))),o===c?null:o===r&&c===s?i:(s=c,i=e(r=o,a))}}function j5(t,e){var n,r,s,i="style."+e,o="end."+i,a;return function(){var c=ur(this,t),d=c.on,h=c.value[i]==null?a||(a=DA(e)):void 0;(d!==n||s!==h)&&(r=(n=d).copy()).on(o,s=h),c.on=r}}function V5(t,e,n){var r=(t+="")=="transform"?Vj:LA;return e==null?this.styleTween(t,L5(t,r)).on("end.style."+t,DA(t)):typeof e=="function"?this.styleTween(t,M5(t,r,c0(this,"style."+t,e))).each(j5(this._id,t)):this.styleTween(t,D5(t,r,e),n).on("end.style."+t,null)}function U5(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function F5(t,e,n){var r,s;function i(){var o=e.apply(this,arguments);return o!==s&&(r=(s=o)&&U5(t,o,n)),r}return i._value=e,i}function B5(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,F5(t,e,n??""))}function z5(t){return function(){this.textContent=t}}function $5(t){return function(){var e=t(this);this.textContent=e??""}}function H5(t){return this.tween("text",typeof t=="function"?$5(c0(this,"text",t)):z5(t==null?"":t+""))}function G5(t){return function(e){this.textContent=t.call(this,e)}}function W5(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&G5(s)),e}return r._value=t,r}function q5(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,W5(t))}function K5(){for(var t=this._name,e=this._id,n=MA(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,c,d=0;d<a;++d)if(c=o[d]){var h=qn(c,e);sh(c,t,n,d,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Ur(r,this._parents,t,n)}function Y5(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var a={value:o},c={value:function(){--s===0&&i()}};n.each(function(){var d=ur(this,r),h=d.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),d.on=e}),s===0&&i()})}var Q5=0;function Ur(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function MA(){return++Q5}var mr=Pl.prototype;Ur.prototype={constructor:Ur,select:C5,selectAll:k5,selectChild:mr.selectChild,selectChildren:mr.selectChildren,filter:b5,merge:S5,selection:P5,transition:K5,call:mr.call,nodes:mr.nodes,node:mr.node,size:mr.size,empty:mr.empty,each:mr.each,on:T5,attr:a5,attrTween:h5,style:V5,styleTween:B5,text:H5,textTween:q5,remove:R5,tween:e5,delay:m5,duration:v5,ease:x5,easeVarying:w5,end:Y5,[Symbol.iterator]:mr[Symbol.iterator]};const X5=t=>+t;function Z5(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function jA(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var J5={time:null,delay:0,duration:250,ease:jA};function e4(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function t4(t){var e,n;t instanceof Ur?(e=t._id,t=t._name):(e=MA(),(n=J5).time=a0(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,c,d=0;d<a;++d)(c=o[d])&&sh(c,t,e,d,o,n||e4(c,e));return new Ur(r,this._parents,t,e)}Pl.prototype.interrupt=Xj;Pl.prototype.transition=t4;var Re=1e-6,Ne=Math.PI,In=Ne/2,BE=Ne/4,On=Ne*2,Dn=180/Ne,$t=Ne/180,qe=Math.abs,n4=Math.atan,yo=Math.atan2,Je=Math.cos,ze=Math.sin,du=Math.sign||function(t){return t>0?1:t<0?-1:0},Fr=Math.sqrt;function r4(t){return t>1?0:t<-1?Ne:Math.acos(t)}function di(t){return t>1?In:t<-1?-In:Math.asin(t)}function Tn(){}function cd(t,e){t&&$E.hasOwnProperty(t.type)&&$E[t.type](t,e)}var zE={Feature:function(t,e){cd(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,s=n.length;++r<s;)cd(n[r].geometry,e)}},$E={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,s=n.length;++r<s;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Wp(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,s=n.length;++r<s;)Wp(n[r],e,0)},Polygon:function(t,e){HE(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,s=n.length;++r<s;)HE(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,s=n.length;++r<s;)cd(n[r],e)}};function Wp(t,e,n){var r=-1,s=t.length-n,i;for(e.lineStart();++r<s;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function HE(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Wp(t[n],e,1);e.polygonEnd()}function Ti(t,e){t&&zE.hasOwnProperty(t.type)?zE[t.type](t,e):cd(t,e)}function qp(t){return[yo(t[1],t[0]),di(t[2])]}function vo(t){var e=t[0],n=t[1],r=Je(n);return[r*Je(e),r*ze(e),ze(n)]}function Nc(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ud(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function df(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Rc(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Kp(t){var e=Fr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Yp(t,e){function n(r,s){return r=t(r,s),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,s){return r=e.invert(r,s),r&&t.invert(r[0],r[1])}),n}function Qp(t,e){return qe(t)>Ne&&(t-=Math.round(t/On)*On),[t,e]}Qp.invert=Qp;function s4(t,e,n){return(t%=On)?e||n?Yp(WE(t),qE(e,n)):WE(t):e||n?qE(e,n):Qp}function GE(t){return function(e,n){return e+=t,qe(e)>Ne&&(e-=Math.round(e/On)*On),[e,n]}}function WE(t){var e=GE(t);return e.invert=GE(-t),e}function qE(t,e){var n=Je(t),r=ze(t),s=Je(e),i=ze(e);function o(a,c){var d=Je(c),h=Je(a)*d,p=ze(a)*d,f=ze(c),g=f*n+h*r;return[yo(p*s-g*i,h*n-f*r),di(g*s+p*i)]}return o.invert=function(a,c){var d=Je(c),h=Je(a)*d,p=ze(a)*d,f=ze(c),g=f*s-p*i;return[yo(p*s+f*i,h*n+g*r),di(g*n-h*r)]},o}function i4(t,e,n,r,s,i){if(n){var o=Je(e),a=ze(e),c=r*n;s==null?(s=e+r*On,i=e-c/2):(s=KE(o,s),i=KE(o,i),(r>0?s<i:s>i)&&(s+=r*On));for(var d,h=s;r>0?h>i:h<i;h-=c)d=qp([o,-a*Je(h),-a*ze(h)]),t.point(d[0],d[1])}}function KE(t,e){e=vo(e),e[0]-=t,Kp(e);var n=r4(-e[1]);return((-e[2]<0?-n:n)+On-Re)%On}function VA(){var t=[],e;return{point:function(n,r,s){e.push([n,r,s])},lineStart:function(){t.push(e=[])},lineEnd:Tn,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function hu(t,e){return qe(t[0]-e[0])<Re&&qe(t[1]-e[1])<Re}function Cc(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function UA(t,e,n,r,s){var i=[],o=[],a,c;if(t.forEach(function(_){if(!((x=_.length-1)<=0)){var x,C=_[0],E=_[x],w;if(hu(C,E)){if(!C[2]&&!E[2]){for(s.lineStart(),a=0;a<x;++a)s.point((C=_[a])[0],C[1]);s.lineEnd();return}E[0]+=2*Re}i.push(w=new Cc(C,_,null,!0)),o.push(w.o=new Cc(C,null,w,!1)),i.push(w=new Cc(E,_,null,!1)),o.push(w.o=new Cc(E,null,w,!0))}}),!!i.length){for(o.sort(e),YE(i),YE(o),a=0,c=o.length;a<c;++a)o[a].e=n=!n;for(var d=i[0],h,p;;){for(var f=d,g=!0;f.v;)if((f=f.n)===d)return;h=f.z,s.lineStart();do{if(f.v=f.o.v=!0,f.e){if(g)for(a=0,c=h.length;a<c;++a)s.point((p=h[a])[0],p[1]);else r(f.x,f.n.x,1,s);f=f.n}else{if(g)for(h=f.p.z,a=h.length-1;a>=0;--a)s.point((p=h[a])[0],p[1]);else r(f.x,f.p.x,-1,s);f=f.p}f=f.o,h=f.z,g=!g}while(!f.v);s.lineEnd()}}}function YE(t){if(e=t.length){for(var e,n=0,r=t[0],s;++n<e;)r.n=s=t[n],s.p=r,r=s;r.n=s=t[0],s.p=r}}function hf(t){return qe(t[0])<=Ne?t[0]:du(t[0])*((qe(t[0])+Ne)%On-Ne)}function o4(t,e){var n=hf(e),r=e[1],s=ze(r),i=[ze(n),-Je(n),0],o=0,a=0,c=new ci;s===1?r=In+Re:s===-1&&(r=-In-Re);for(var d=0,h=t.length;d<h;++d)if(f=(p=t[d]).length)for(var p,f,g=p[f-1],_=hf(g),x=g[1]/2+BE,C=ze(x),E=Je(x),w=0;w<f;++w,_=P,C=j,E=I,g=b){var b=p[w],P=hf(b),D=b[1]/2+BE,j=ze(D),I=Je(D),v=P-_,S=v>=0?1:-1,A=S*v,k=A>Ne,O=C*j;if(c.add(yo(O*S*ze(A),E*I+O*Je(A))),o+=k?v+S*On:v,k^_>=n^P>=n){var R=ud(vo(g),vo(b));Kp(R);var M=ud(i,R);Kp(M);var L=(k^v>=0?-1:1)*di(M[2]);(r>L||r===L&&(R[0]||R[1]))&&(a+=k^v>=0?1:-1)}}return(o<-Re||o<Re&&c<-1e-12)^a&1}function FA(t,e,n,r){return function(s){var i=e(s),o=VA(),a=e(o),c=!1,d,h,p,f={point:g,lineStart:x,lineEnd:C,polygonStart:function(){f.point=E,f.lineStart=w,f.lineEnd=b,h=[],d=[]},polygonEnd:function(){f.point=g,f.lineStart=x,f.lineEnd=C,h=dA(h);var P=o4(d,r);h.length?(c||(s.polygonStart(),c=!0),UA(h,l4,P,n,s)):P&&(c||(s.polygonStart(),c=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),c&&(s.polygonEnd(),c=!1),h=d=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function g(P,D){t(P,D)&&s.point(P,D)}function _(P,D){i.point(P,D)}function x(){f.point=_,i.lineStart()}function C(){f.point=g,i.lineEnd()}function E(P,D){p.push([P,D]),a.point(P,D)}function w(){a.lineStart(),p=[]}function b(){E(p[0][0],p[0][1]),a.lineEnd();var P=a.clean(),D=o.result(),j,I=D.length,v,S,A;if(p.pop(),d.push(p),p=null,!!I){if(P&1){if(S=D[0],(v=S.length-1)>0){for(c||(s.polygonStart(),c=!0),s.lineStart(),j=0;j<v;++j)s.point((A=S[j])[0],A[1]);s.lineEnd()}return}I>1&&P&2&&D.push(D.pop().concat(D.shift())),h.push(D.filter(a4))}}return f}}function a4(t){return t.length>1}function l4(t,e){return((t=t.x)[0]<0?t[1]-In-Re:In-t[1])-((e=e.x)[0]<0?e[1]-In-Re:In-e[1])}const QE=FA(function(){return!0},c4,d4,[-Ne,-In]);function c4(t){var e=NaN,n=NaN,r=NaN,s;return{lineStart:function(){t.lineStart(),s=1},point:function(i,o){var a=i>0?Ne:-Ne,c=qe(i-e);qe(c-Ne)<Re?(t.point(e,n=(n+o)/2>0?In:-In),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(i,n),s=0):r!==a&&c>=Ne&&(qe(e-r)<Re&&(e-=r*Re),qe(i-a)<Re&&(i-=a*Re),n=u4(e,n,i,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),s=0),t.point(e=i,n=o),r=a},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-s}}}function u4(t,e,n,r){var s,i,o=ze(t-n);return qe(o)>Re?n4((ze(e)*(i=Je(r))*ze(n)-ze(r)*(s=Je(e))*ze(t))/(s*i*o)):(e+r)/2}function d4(t,e,n,r){var s;if(t==null)s=n*In,r.point(-Ne,s),r.point(0,s),r.point(Ne,s),r.point(Ne,0),r.point(Ne,-s),r.point(0,-s),r.point(-Ne,-s),r.point(-Ne,0),r.point(-Ne,s);else if(qe(t[0]-e[0])>Re){var i=t[0]<e[0]?Ne:-Ne;s=n*i/2,r.point(-i,s),r.point(0,s),r.point(i,s)}else r.point(e[0],e[1])}function h4(t){var e=Je(t),n=2*$t,r=e>0,s=qe(e)>Re;function i(h,p,f,g){i4(g,t,n,f,h,p)}function o(h,p){return Je(h)*Je(p)>e}function a(h){var p,f,g,_,x;return{lineStart:function(){_=g=!1,x=1},point:function(C,E){var w=[C,E],b,P=o(C,E),D=r?P?0:d(C,E):P?d(C+(C<0?Ne:-Ne),E):0;if(!p&&(_=g=P)&&h.lineStart(),P!==g&&(b=c(p,w),(!b||hu(p,b)||hu(w,b))&&(w[2]=1)),P!==g)x=0,P?(h.lineStart(),b=c(w,p),h.point(b[0],b[1])):(b=c(p,w),h.point(b[0],b[1],2),h.lineEnd()),p=b;else if(s&&p&&r^P){var j;!(D&f)&&(j=c(w,p,!0))&&(x=0,r?(h.lineStart(),h.point(j[0][0],j[0][1]),h.point(j[1][0],j[1][1]),h.lineEnd()):(h.point(j[1][0],j[1][1]),h.lineEnd(),h.lineStart(),h.point(j[0][0],j[0][1],3)))}P&&(!p||!hu(p,w))&&h.point(w[0],w[1]),p=w,g=P,f=D},lineEnd:function(){g&&h.lineEnd(),p=null},clean:function(){return x|(_&&g)<<1}}}function c(h,p,f){var g=vo(h),_=vo(p),x=[1,0,0],C=ud(g,_),E=Nc(C,C),w=C[0],b=E-w*w;if(!b)return!f&&h;var P=e*E/b,D=-e*w/b,j=ud(x,C),I=Rc(x,P),v=Rc(C,D);df(I,v);var S=j,A=Nc(I,S),k=Nc(S,S),O=A*A-k*(Nc(I,I)-1);if(!(O<0)){var R=Fr(O),M=Rc(S,(-A-R)/k);if(df(M,I),M=qp(M),!f)return M;var L=h[0],U=p[0],K=h[1],V=p[1],W;U<L&&(W=L,L=U,U=W);var Q=U-L,te=qe(Q-Ne)<Re,ae=te||Q<Re;if(!te&&V<K&&(W=K,K=V,V=W),ae?te?K+V>0^M[1]<(qe(M[0]-L)<Re?K:V):K<=M[1]&&M[1]<=V:Q>Ne^(L<=M[0]&&M[0]<=U)){var $=Rc(S,(-A+R)/k);return df($,I),[M,qp($)]}}}function d(h,p){var f=r?t:Ne-t,g=0;return h<-f?g|=1:h>f&&(g|=2),p<-f?g|=4:p>f&&(g|=8),g}return FA(o,a,i,r?[0,-t]:[-Ne,t-Ne])}function f4(t,e,n,r,s,i){var o=t[0],a=t[1],c=e[0],d=e[1],h=0,p=1,f=c-o,g=d-a,_;if(_=n-o,!(!f&&_>0)){if(_/=f,f<0){if(_<h)return;_<p&&(p=_)}else if(f>0){if(_>p)return;_>h&&(h=_)}if(_=s-o,!(!f&&_<0)){if(_/=f,f<0){if(_>p)return;_>h&&(h=_)}else if(f>0){if(_<h)return;_<p&&(p=_)}if(_=r-a,!(!g&&_>0)){if(_/=g,g<0){if(_<h)return;_<p&&(p=_)}else if(g>0){if(_>p)return;_>h&&(h=_)}if(_=i-a,!(!g&&_<0)){if(_/=g,g<0){if(_>p)return;_>h&&(h=_)}else if(g>0){if(_<h)return;_<p&&(p=_)}return h>0&&(t[0]=o+h*f,t[1]=a+h*g),p<1&&(e[0]=o+p*f,e[1]=a+p*g),!0}}}}}var fa=1e9,kc=-fa;function p4(t,e,n,r){function s(d,h){return t<=d&&d<=n&&e<=h&&h<=r}function i(d,h,p,f){var g=0,_=0;if(d==null||(g=o(d,p))!==(_=o(h,p))||c(d,h)<0^p>0)do f.point(g===0||g===3?t:n,g>1?r:e);while((g=(g+p+4)%4)!==_);else f.point(h[0],h[1])}function o(d,h){return qe(d[0]-t)<Re?h>0?0:3:qe(d[0]-n)<Re?h>0?2:1:qe(d[1]-e)<Re?h>0?1:0:h>0?3:2}function a(d,h){return c(d.x,h.x)}function c(d,h){var p=o(d,1),f=o(h,1);return p!==f?p-f:p===0?h[1]-d[1]:p===1?d[0]-h[0]:p===2?d[1]-h[1]:h[0]-d[0]}return function(d){var h=d,p=VA(),f,g,_,x,C,E,w,b,P,D,j,I={point:v,lineStart:O,lineEnd:R,polygonStart:A,polygonEnd:k};function v(L,U){s(L,U)&&h.point(L,U)}function S(){for(var L=0,U=0,K=g.length;U<K;++U)for(var V=g[U],W=1,Q=V.length,te=V[0],ae,$,Y=te[0],X=te[1];W<Q;++W)ae=Y,$=X,te=V[W],Y=te[0],X=te[1],$<=r?X>r&&(Y-ae)*(r-$)>(X-$)*(t-ae)&&++L:X<=r&&(Y-ae)*(r-$)<(X-$)*(t-ae)&&--L;return L}function A(){h=p,f=[],g=[],j=!0}function k(){var L=S(),U=j&&L,K=(f=dA(f)).length;(U||K)&&(d.polygonStart(),U&&(d.lineStart(),i(null,null,1,d),d.lineEnd()),K&&UA(f,a,L,i,d),d.polygonEnd()),h=d,f=g=_=null}function O(){I.point=M,g&&g.push(_=[]),D=!0,P=!1,w=b=NaN}function R(){f&&(M(x,C),E&&P&&p.rejoin(),f.push(p.result())),I.point=v,P&&h.lineEnd()}function M(L,U){var K=s(L,U);if(g&&_.push([L,U]),D)x=L,C=U,E=K,D=!1,K&&(h.lineStart(),h.point(L,U));else if(K&&P)h.point(L,U);else{var V=[w=Math.max(kc,Math.min(fa,w)),b=Math.max(kc,Math.min(fa,b))],W=[L=Math.max(kc,Math.min(fa,L)),U=Math.max(kc,Math.min(fa,U))];f4(V,W,t,e,n,r)?(P||(h.lineStart(),h.point(V[0],V[1])),h.point(W[0],W[1]),K||h.lineEnd(),j=!1):K&&(h.lineStart(),h.point(L,U),j=!1)}w=L,b=U,P=K}return I}}const Xp=t=>t;var ff=new ci,Zp=new ci,BA,zA,Jp,em,Er={point:Tn,lineStart:Tn,lineEnd:Tn,polygonStart:function(){Er.lineStart=m4,Er.lineEnd=y4},polygonEnd:function(){Er.lineStart=Er.lineEnd=Er.point=Tn,ff.add(qe(Zp)),Zp=new ci},result:function(){var t=ff/2;return ff=new ci,t}};function m4(){Er.point=g4}function g4(t,e){Er.point=$A,BA=Jp=t,zA=em=e}function $A(t,e){Zp.add(em*t-Jp*e),Jp=t,em=e}function y4(){$A(BA,zA)}var Eo=1/0,dd=Eo,ll=-Eo,hd=ll,fd={point:v4,lineStart:Tn,lineEnd:Tn,polygonStart:Tn,polygonEnd:Tn,result:function(){var t=[[Eo,dd],[ll,hd]];return ll=hd=-(dd=Eo=1/0),t}};function v4(t,e){t<Eo&&(Eo=t),t>ll&&(ll=t),e<dd&&(dd=e),e>hd&&(hd=e)}var tm=0,nm=0,pa=0,pd=0,md=0,Fi=0,rm=0,sm=0,ma=0,HA,GA,Zn,Jn,Sn={point:hi,lineStart:XE,lineEnd:ZE,polygonStart:function(){Sn.lineStart=_4,Sn.lineEnd=w4},polygonEnd:function(){Sn.point=hi,Sn.lineStart=XE,Sn.lineEnd=ZE},result:function(){var t=ma?[rm/ma,sm/ma]:Fi?[pd/Fi,md/Fi]:pa?[tm/pa,nm/pa]:[NaN,NaN];return tm=nm=pa=pd=md=Fi=rm=sm=ma=0,t}};function hi(t,e){tm+=t,nm+=e,++pa}function XE(){Sn.point=E4}function E4(t,e){Sn.point=x4,hi(Zn=t,Jn=e)}function x4(t,e){var n=t-Zn,r=e-Jn,s=Fr(n*n+r*r);pd+=s*(Zn+t)/2,md+=s*(Jn+e)/2,Fi+=s,hi(Zn=t,Jn=e)}function ZE(){Sn.point=hi}function _4(){Sn.point=b4}function w4(){WA(HA,GA)}function b4(t,e){Sn.point=WA,hi(HA=Zn=t,GA=Jn=e)}function WA(t,e){var n=t-Zn,r=e-Jn,s=Fr(n*n+r*r);pd+=s*(Zn+t)/2,md+=s*(Jn+e)/2,Fi+=s,s=Jn*t-Zn*e,rm+=s*(Zn+t),sm+=s*(Jn+e),ma+=s*3,hi(Zn=t,Jn=e)}function qA(t){this._context=t}qA.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,On);break}}},result:Tn};var im=new ci,pf,KA,YA,ga,ya,cl={point:Tn,lineStart:function(){cl.point=S4},lineEnd:function(){pf&&QA(KA,YA),cl.point=Tn},polygonStart:function(){pf=!0},polygonEnd:function(){pf=null},result:function(){var t=+im;return im=new ci,t}};function S4(t,e){cl.point=QA,KA=ga=t,YA=ya=e}function QA(t,e){ga-=t,ya-=e,im.add(Fr(ga*ga+ya*ya)),ga=t,ya=e}let JE,gd,ex,tx;class nx{constructor(e){this._append=e==null?XA:A4(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==ex||this._append!==gd){const r=this._radius,s=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,ex=r,gd=this._append,tx=this._,this._=s}this._+=tx;break}}}result(){const e=this._;return this._="",e.length?e:null}}function XA(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function A4(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return XA;if(e!==JE){const n=10**e;JE=e,gd=function(s){let i=1;this._+=s[0];for(const o=s.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+s[i]}}return gd}function I4(t,e){let n=3,r=4.5,s,i;function o(a){return a&&(typeof r=="function"&&i.pointRadius(+r.apply(this,arguments)),Ti(a,s(i))),i.result()}return o.area=function(a){return Ti(a,s(Er)),Er.result()},o.measure=function(a){return Ti(a,s(cl)),cl.result()},o.bounds=function(a){return Ti(a,s(fd)),fd.result()},o.centroid=function(a){return Ti(a,s(Sn)),Sn.result()},o.projection=function(a){return arguments.length?(s=a==null?(t=null,Xp):(t=a).stream,o):t},o.context=function(a){return arguments.length?(i=a==null?(e=null,new nx(n)):new qA(e=a),typeof r!="function"&&i.pointRadius(r),o):e},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(i.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const c=Math.floor(a);if(!(c>=0))throw new RangeError(`invalid digits: ${a}`);n=c}return e===null&&(i=new nx(n)),o},o.projection(t).digits(n).context(e)}function u0(t){return function(e){var n=new om;for(var r in t)n[r]=t[r];return n.stream=e,n}}function om(){}om.prototype={constructor:om,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function d0(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Ti(n,t.stream(fd)),e(fd.result()),r!=null&&t.clipExtent(r),t}function h0(t,e,n){return d0(t,function(r){var s=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(s/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),a=+e[0][0]+(s-o*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,c])},n)}function ZA(t,e,n){return h0(t,[[0,0],e],n)}function JA(t,e,n){return d0(t,function(r){var s=+e,i=s/(r[1][0]-r[0][0]),o=(s-i*(r[1][0]+r[0][0]))/2,a=-i*r[0][1];t.scale(150*i).translate([o,a])},n)}function eI(t,e,n){return d0(t,function(r){var s=+e,i=s/(r[1][1]-r[0][1]),o=-i*r[0][0],a=(s-i*(r[1][1]+r[0][1]))/2;t.scale(150*i).translate([o,a])},n)}var rx=16,T4=Je(30*$t);function sx(t,e){return+e?R4(t,e):N4(t)}function N4(t){return u0({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function R4(t,e){function n(r,s,i,o,a,c,d,h,p,f,g,_,x,C){var E=d-r,w=h-s,b=E*E+w*w;if(b>4*e&&x--){var P=o+f,D=a+g,j=c+_,I=Fr(P*P+D*D+j*j),v=di(j/=I),S=qe(qe(j)-1)<Re||qe(i-p)<Re?(i+p)/2:yo(D,P),A=t(S,v),k=A[0],O=A[1],R=k-r,M=O-s,L=w*R-E*M;(L*L/b>e||qe((E*R+w*M)/b-.5)>.3||o*f+a*g+c*_<T4)&&(n(r,s,i,o,a,c,k,O,S,P/=I,D/=I,j,x,C),C.point(k,O),n(k,O,S,P,D,j,d,h,p,f,g,_,x,C))}}return function(r){var s,i,o,a,c,d,h,p,f,g,_,x,C={point:E,lineStart:w,lineEnd:P,polygonStart:function(){r.polygonStart(),C.lineStart=D},polygonEnd:function(){r.polygonEnd(),C.lineStart=w}};function E(v,S){v=t(v,S),r.point(v[0],v[1])}function w(){p=NaN,C.point=b,r.lineStart()}function b(v,S){var A=vo([v,S]),k=t(v,S);n(p,f,h,g,_,x,p=k[0],f=k[1],h=v,g=A[0],_=A[1],x=A[2],rx,r),r.point(p,f)}function P(){C.point=E,r.lineEnd()}function D(){w(),C.point=j,C.lineEnd=I}function j(v,S){b(s=v,S),i=p,o=f,a=g,c=_,d=x,C.point=b}function I(){n(p,f,h,g,_,x,i,o,s,a,c,d,rx,r),C.lineEnd=P,P()}return C}}var C4=u0({point:function(t,e){this.stream.point(t*$t,e*$t)}});function k4(t){return u0({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function O4(t,e,n,r,s){function i(o,a){return o*=r,a*=s,[e+t*o,n-t*a]}return i.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*s]},i}function ix(t,e,n,r,s,i){if(!i)return O4(t,e,n,r,s);var o=Je(i),a=ze(i),c=o*t,d=a*t,h=o/t,p=a/t,f=(a*n-o*e)/t,g=(a*e+o*n)/t;function _(x,C){return x*=r,C*=s,[c*x-d*C+e,n-d*x-c*C]}return _.invert=function(x,C){return[r*(h*x-p*C+f),s*(g-p*x-h*C)]},_}function P4(t){var e,n=150,r=480,s=250,i=0,o=0,a=0,c=0,d=0,h,p=0,f=1,g=1,_=null,x=QE,C=null,E,w,b,P=Xp,D=.5,j,I,v,S,A;function k(L){return v(L[0]*$t,L[1]*$t)}function O(L){return L=v.invert(L[0],L[1]),L&&[L[0]*Dn,L[1]*Dn]}k.stream=function(L){return S&&A===L?S:S=C4(k4(h)(x(j(P(A=L)))))},k.preclip=function(L){return arguments.length?(x=L,_=void 0,M()):x},k.postclip=function(L){return arguments.length?(P=L,C=E=w=b=null,M()):P},k.clipAngle=function(L){return arguments.length?(x=+L?h4(_=L*$t):(_=null,QE),M()):_*Dn},k.clipExtent=function(L){return arguments.length?(P=L==null?(C=E=w=b=null,Xp):p4(C=+L[0][0],E=+L[0][1],w=+L[1][0],b=+L[1][1]),M()):C==null?null:[[C,E],[w,b]]},k.scale=function(L){return arguments.length?(n=+L,R()):n},k.translate=function(L){return arguments.length?(r=+L[0],s=+L[1],R()):[r,s]},k.center=function(L){return arguments.length?(i=L[0]%360*$t,o=L[1]%360*$t,R()):[i*Dn,o*Dn]},k.rotate=function(L){return arguments.length?(a=L[0]%360*$t,c=L[1]%360*$t,d=L.length>2?L[2]%360*$t:0,R()):[a*Dn,c*Dn,d*Dn]},k.angle=function(L){return arguments.length?(p=L%360*$t,R()):p*Dn},k.reflectX=function(L){return arguments.length?(f=L?-1:1,R()):f<0},k.reflectY=function(L){return arguments.length?(g=L?-1:1,R()):g<0},k.precision=function(L){return arguments.length?(j=sx(I,D=L*L),M()):Fr(D)},k.fitExtent=function(L,U){return h0(k,L,U)},k.fitSize=function(L,U){return ZA(k,L,U)},k.fitWidth=function(L,U){return JA(k,L,U)},k.fitHeight=function(L,U){return eI(k,L,U)};function R(){var L=ix(n,0,0,f,g,p).apply(null,e(i,o)),U=ix(n,r-L[0],s-L[1],f,g,p);return h=s4(a,c,d),I=Yp(e,U),v=Yp(h,I),j=sx(I,D),M()}function M(){return S=A=null,k}return function(){return e=t.apply(this,arguments),k.invert=e.invert&&O,R()}}function L4(t){var e=0,n=Ne/3,r=P4(t),s=r(e,n);return s.parallels=function(i){return arguments.length?r(e=i[0]*$t,n=i[1]*$t):[e*Dn,n*Dn]},s}function D4(t){var e=Je(t);function n(r,s){return[r*e,ze(s)/e]}return n.invert=function(r,s){return[r/e,di(s*e)]},n}function M4(t,e){var n=ze(t),r=(n+ze(e))/2;if(qe(r)<Re)return D4(t);var s=1+n*(2*r-n),i=Fr(s)/r;function o(a,c){var d=Fr(s-2*r*ze(c))/r;return[d*ze(a*=r),i-d*Je(a)]}return o.invert=function(a,c){var d=i-c,h=yo(a,qe(d))*du(d);return d*r<0&&(h-=Ne*du(a)*du(d)),[h/r,di((s-(a*a+d*d)*r*r)/(2*r))]},o}function am(){return L4(M4).scale(155.424).center([0,33.6442])}function j4(){return am().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function V4(t){var e=t.length;return{point:function(n,r){for(var s=-1;++s<e;)t[s].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function U4(){var t,e,n=j4(),r,s=am().rotate([154,0]).center([-2,58.5]).parallels([55,65]),i,o=am().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,c,d={point:function(f,g){c=[f,g]}};function h(f){var g=f[0],_=f[1];return c=null,r.point(g,_),c||(i.point(g,_),c)||(a.point(g,_),c)}h.invert=function(f){var g=n.scale(),_=n.translate(),x=(f[0]-_[0])/g,C=(f[1]-_[1])/g;return(C>=.12&&C<.234&&x>=-.425&&x<-.214?s:C>=.166&&C<.234&&x>=-.214&&x<-.115?o:n).invert(f)},h.stream=function(f){return t&&e===f?t:t=V4([n.stream(e=f),s.stream(f),o.stream(f)])},h.precision=function(f){return arguments.length?(n.precision(f),s.precision(f),o.precision(f),p()):n.precision()},h.scale=function(f){return arguments.length?(n.scale(f),s.scale(f*.35),o.scale(f),h.translate(n.translate())):n.scale()},h.translate=function(f){if(!arguments.length)return n.translate();var g=n.scale(),_=+f[0],x=+f[1];return r=n.translate(f).clipExtent([[_-.455*g,x-.238*g],[_+.455*g,x+.238*g]]).stream(d),i=s.translate([_-.307*g,x+.201*g]).clipExtent([[_-.425*g+Re,x+.12*g+Re],[_-.214*g-Re,x+.234*g-Re]]).stream(d),a=o.translate([_-.205*g,x+.212*g]).clipExtent([[_-.214*g+Re,x+.166*g+Re],[_-.115*g-Re,x+.234*g-Re]]).stream(d),p()},h.fitExtent=function(f,g){return h0(h,f,g)},h.fitSize=function(f,g){return ZA(h,f,g)},h.fitWidth=function(f,g){return JA(h,f,g)},h.fitHeight=function(f,g){return eI(h,f,g)};function p(){return t=e=null,h}return h.scale(1070)}const Oc=t=>()=>t;function F4(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Ir(t,e,n){this.k=t,this.x=e,this.y=n}Ir.prototype={constructor:Ir,scale:function(t){return t===1?this:new Ir(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ir(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ih=new Ir(1,0,0);tI.prototype=Ir.prototype;function tI(t){for(;!t.__zoom;)if(!(t=t.parentNode))return ih;return t.__zoom}function mf(t){t.stopImmediatePropagation()}function ta(t){t.preventDefault(),t.stopImmediatePropagation()}function B4(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function z4(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ox(){return this.__zoom||ih}function $4(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function H4(){return navigator.maxTouchPoints||"ontouchstart"in this}function G4(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function W4(){var t=B4,e=z4,n=G4,r=$4,s=H4,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=$j,d=r0("start","zoom","end"),h,p,f,g=500,_=150,x=0,C=10;function E(M){M.property("__zoom",ox).on("wheel.zoom",v,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",A).filter(s).on("touchstart.zoom",k).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(M,L,U,K){var V=M.selection?M.selection():M;V.property("__zoom",ox),M!==V?D(M,L,U,K):V.interrupt().each(function(){j(this,arguments).event(K).start().zoom(null,typeof L=="function"?L.apply(this,arguments):L).end()})},E.scaleBy=function(M,L,U,K){E.scaleTo(M,function(){var V=this.__zoom.k,W=typeof L=="function"?L.apply(this,arguments):L;return V*W},U,K)},E.scaleTo=function(M,L,U,K){E.transform(M,function(){var V=e.apply(this,arguments),W=this.__zoom,Q=U==null?P(V):typeof U=="function"?U.apply(this,arguments):U,te=W.invert(Q),ae=typeof L=="function"?L.apply(this,arguments):L;return n(b(w(W,ae),Q,te),V,o)},U,K)},E.translateBy=function(M,L,U,K){E.transform(M,function(){return n(this.__zoom.translate(typeof L=="function"?L.apply(this,arguments):L,typeof U=="function"?U.apply(this,arguments):U),e.apply(this,arguments),o)},null,K)},E.translateTo=function(M,L,U,K,V){E.transform(M,function(){var W=e.apply(this,arguments),Q=this.__zoom,te=K==null?P(W):typeof K=="function"?K.apply(this,arguments):K;return n(ih.translate(te[0],te[1]).scale(Q.k).translate(typeof L=="function"?-L.apply(this,arguments):-L,typeof U=="function"?-U.apply(this,arguments):-U),W,o)},K,V)};function w(M,L){return L=Math.max(i[0],Math.min(i[1],L)),L===M.k?M:new Ir(L,M.x,M.y)}function b(M,L,U){var K=L[0]-U[0]*M.k,V=L[1]-U[1]*M.k;return K===M.x&&V===M.y?M:new Ir(M.k,K,V)}function P(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function D(M,L,U,K){M.on("start.zoom",function(){j(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(K).end()}).tween("zoom",function(){var V=this,W=arguments,Q=j(V,W).event(K),te=e.apply(V,W),ae=U==null?P(te):typeof U=="function"?U.apply(V,W):U,$=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),Y=V.__zoom,X=typeof L=="function"?L.apply(V,W):L,ne=c(Y.invert(ae).concat($/Y.k),X.invert(ae).concat($/X.k));return function(ie){if(ie===1)ie=X;else{var ye=ne(ie),Me=$/ye[2];ie=new Ir(Me,ae[0]-ye[0]*Me,ae[1]-ye[1]*Me)}Q.zoom(null,ie)}})}function j(M,L,U){return!U&&M.__zooming||new I(M,L)}function I(M,L){this.that=M,this.args=L,this.active=0,this.sourceEvent=null,this.extent=e.apply(M,L),this.taps=0}I.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,L){return this.mouse&&M!=="mouse"&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var L=Mt(this.that).datum();d.call(M,this.that,new F4(M,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:d}),L)}};function v(M,...L){if(!t.apply(this,arguments))return;var U=j(this,L).event(M),K=this.__zoom,V=Math.max(i[0],Math.min(i[1],K.k*Math.pow(2,r.apply(this,arguments)))),W=Vs(M);if(U.wheel)(U.mouse[0][0]!==W[0]||U.mouse[0][1]!==W[1])&&(U.mouse[1]=K.invert(U.mouse[0]=W)),clearTimeout(U.wheel);else{if(K.k===V)return;U.mouse=[W,K.invert(W)],uu(this),U.start()}ta(M),U.wheel=setTimeout(Q,_),U.zoom("mouse",n(b(w(K,V),U.mouse[0],U.mouse[1]),U.extent,o));function Q(){U.wheel=null,U.end()}}function S(M,...L){if(f||!t.apply(this,arguments))return;var U=M.currentTarget,K=j(this,L,!0).event(M),V=Mt(M.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",$,!0),W=Vs(M,U),Q=M.clientX,te=M.clientY;gj(M.view),mf(M),K.mouse=[W,this.__zoom.invert(W)],uu(this),K.start();function ae(Y){if(ta(Y),!K.moved){var X=Y.clientX-Q,ne=Y.clientY-te;K.moved=X*X+ne*ne>x}K.event(Y).zoom("mouse",n(b(K.that.__zoom,K.mouse[0]=Vs(Y,U),K.mouse[1]),K.extent,o))}function $(Y){V.on("mousemove.zoom mouseup.zoom",null),yj(Y.view,K.moved),ta(Y),K.event(Y).end()}}function A(M,...L){if(t.apply(this,arguments)){var U=this.__zoom,K=Vs(M.changedTouches?M.changedTouches[0]:M,this),V=U.invert(K),W=U.k*(M.shiftKey?.5:2),Q=n(b(w(U,W),K,V),e.apply(this,L),o);ta(M),a>0?Mt(this).transition().duration(a).call(D,Q,K,M):Mt(this).call(E.transform,Q,K,M)}}function k(M,...L){if(t.apply(this,arguments)){var U=M.touches,K=U.length,V=j(this,L,M.changedTouches.length===K).event(M),W,Q,te,ae;for(mf(M),Q=0;Q<K;++Q)te=U[Q],ae=Vs(te,this),ae=[ae,this.__zoom.invert(ae),te.identifier],V.touch0?!V.touch1&&V.touch0[2]!==ae[2]&&(V.touch1=ae,V.taps=0):(V.touch0=ae,W=!0,V.taps=1+!!h);h&&(h=clearTimeout(h)),W&&(V.taps<2&&(p=ae[0],h=setTimeout(function(){h=null},g)),uu(this),V.start())}}function O(M,...L){if(this.__zooming){var U=j(this,L).event(M),K=M.changedTouches,V=K.length,W,Q,te,ae;for(ta(M),W=0;W<V;++W)Q=K[W],te=Vs(Q,this),U.touch0&&U.touch0[2]===Q.identifier?U.touch0[0]=te:U.touch1&&U.touch1[2]===Q.identifier&&(U.touch1[0]=te);if(Q=U.that.__zoom,U.touch1){var $=U.touch0[0],Y=U.touch0[1],X=U.touch1[0],ne=U.touch1[1],ie=(ie=X[0]-$[0])*ie+(ie=X[1]-$[1])*ie,ye=(ye=ne[0]-Y[0])*ye+(ye=ne[1]-Y[1])*ye;Q=w(Q,Math.sqrt(ie/ye)),te=[($[0]+X[0])/2,($[1]+X[1])/2],ae=[(Y[0]+ne[0])/2,(Y[1]+ne[1])/2]}else if(U.touch0)te=U.touch0[0],ae=U.touch0[1];else return;U.zoom("touch",n(b(Q,te,ae),U.extent,o))}}function R(M,...L){if(this.__zooming){var U=j(this,L).event(M),K=M.changedTouches,V=K.length,W,Q;for(mf(M),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),W=0;W<V;++W)Q=K[W],U.touch0&&U.touch0[2]===Q.identifier?delete U.touch0:U.touch1&&U.touch1[2]===Q.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(Q=Vs(Q,this),Math.hypot(p[0]-Q[0],p[1]-Q[1])<C)){var te=Mt(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return E.wheelDelta=function(M){return arguments.length?(r=typeof M=="function"?M:Oc(+M),E):r},E.filter=function(M){return arguments.length?(t=typeof M=="function"?M:Oc(!!M),E):t},E.touchable=function(M){return arguments.length?(s=typeof M=="function"?M:Oc(!!M),E):s},E.extent=function(M){return arguments.length?(e=typeof M=="function"?M:Oc([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),E):e},E.scaleExtent=function(M){return arguments.length?(i[0]=+M[0],i[1]=+M[1],E):[i[0],i[1]]},E.translateExtent=function(M){return arguments.length?(o[0][0]=+M[0][0],o[1][0]=+M[1][0],o[0][1]=+M[0][1],o[1][1]=+M[1][1],E):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},E.constrain=function(M){return arguments.length?(n=M,E):n},E.duration=function(M){return arguments.length?(a=+M,E):a},E.interpolate=function(M){return arguments.length?(c=M,E):c},E.on=function(){var M=d.on.apply(d,arguments);return M===d?E:M},E.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,E):Math.sqrt(x)},E.tapDistance=function(M){return arguments.length?(C=+M,E):C},E}function q4(t){return t}function K4(t){if(t==null)return q4;var e,n,r=t.scale[0],s=t.scale[1],i=t.translate[0],o=t.translate[1];return function(a,c){c||(e=n=0);var d=2,h=a.length,p=new Array(h);for(p[0]=(e+=a[0])*r+i,p[1]=(n+=a[1])*s+o;d<h;)p[d]=a[d],++d;return p}}function Y4(t,e){for(var n,r=t.length,s=r-e;s<--r;)n=t[s],t[s++]=t[r],t[r]=n}function Pc(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return ax(t,n)})}:ax(t,e)}function ax(t,e){var n=e.id,r=e.bbox,s=e.properties==null?{}:e.properties,i=Q4(t,e);return n==null&&r==null?{type:"Feature",properties:s,geometry:i}:r==null?{type:"Feature",id:n,properties:s,geometry:i}:{type:"Feature",id:n,bbox:r,properties:s,geometry:i}}function Q4(t,e){var n=K4(t.transform),r=t.arcs;function s(h,p){p.length&&p.pop();for(var f=r[h<0?~h:h],g=0,_=f.length;g<_;++g)p.push(n(f[g],g));h<0&&Y4(p,_)}function i(h){return n(h)}function o(h){for(var p=[],f=0,g=h.length;f<g;++f)s(h[f],p);return p.length<2&&p.push(p[0]),p}function a(h){for(var p=o(h);p.length<4;)p.push(p[0]);return p}function c(h){return h.map(a)}function d(h){var p=h.type,f;switch(p){case"GeometryCollection":return{type:p,geometries:h.geometries.map(d)};case"Point":f=i(h.coordinates);break;case"MultiPoint":f=h.coordinates.map(i);break;case"LineString":f=o(h.arcs);break;case"MultiLineString":f=h.arcs.map(o);break;case"Polygon":f=c(h.arcs);break;case"MultiPolygon":f=h.arcs.map(c);break;default:return null}return{type:p,coordinates:f}}return d(e)}const X4="https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json",Z4=async()=>{try{const t=await fetch(X4);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){throw console.error("Error fetching USA TopoJSON data:",t),t}},lx=({language:t,missions:e,completedMissionIds:n,onMissionSelect:r,onBunkerClick:s,factionStates:i,playerAlignment:o,worldStage:a,surferTurnCount:c=0})=>{const d=N.useRef(null),h=N.useRef(null),p=N.useRef(null),f=N.useRef(null),g=N.useRef(null),_=N.useRef(new Set),[x,C]=N.useState(null),[E,w]=N.useState(!0),[b,P]=N.useState(null),[D,j]=N.useState({width:0,height:0}),[I,v]=N.useState(!1),[S,A]=N.useState(null),[k,O]=N.useState([-98.5,39.8]),[R,M]=N.useState(null),L=N.useRef(null),U=N.useRef(null),K=N.useRef(null),V=N.useRef([-98.5,39.8]),W=N.useRef(!1),Q=Wn[t];N.useEffect(()=>{const X="map-animations";if(!document.getElementById(X)){const ne=document.createElement("style");ne.id=X,ne.innerHTML=`
            @keyframes dash-flow { to { stroke-dashoffset: -20; } }
            .line-flowing { animation: dash-flow 1s linear infinite; }

            @keyframes pulse-ring {
                0% { transform: scale(1); opacity: 0.8; stroke-width: 2px; }
                100% { transform: scale(2.5); opacity: 0; stroke-width: 0px; }
            }
            .shield-pulse {
                transform-box: fill-box; transform-origin: center;
                animation: pulse-ring 2s cubic-bezier(0, 0, 0.2, 1) infinite;
                pointer-events: none;
            }
          `,document.head.appendChild(ne)}},[]),N.useEffect(()=>{V.current=k},[k]),N.useEffect(()=>(a==="SURFER"?(v(!1),K.current&&clearTimeout(K.current),K.current=setTimeout(()=>v(!0),1500)):(v(!0),W.current=!1),()=>{K.current&&clearTimeout(K.current)}),[a]),N.useEffect(()=>{(async()=>{try{w(!0);const ne=await Z4();if(!ne||!ne.objects||!ne.objects.states)throw new Error("Formato TopoJSON invlido");C(ne)}catch(ne){P(`ERROR DE DATOS: ${ne.message}`)}finally{w(!1)}})()},[]),N.useEffect(()=>{if(!h.current)return;const X=new ResizeObserver(ne=>{window.requestAnimationFrame(()=>{if(!Array.isArray(ne)||!ne.length)return;const ie=ne[0],{width:ye,height:Me}=ie.contentRect;ye>0&&Me>0&&j({width:ye,height:Me})})});return X.observe(h.current),()=>X.disconnect()},[]);const{projection:te,pathGenerator:ae}=N.useMemo(()=>{if(!x||!x.objects||!x.objects.states||D.width===0||D.height===0)return{projection:null,pathGenerator:null};try{const X=Pc(x,x.objects.states),ne=U4().fitSize([D.width,D.height],X),ie=I4().projection(ne);return{projection:ne,pathGenerator:ie}}catch{return{projection:null,pathGenerator:null}}},[x,D]),$=X=>o!=="ZOMBIE"?!0:{magneto:!1,kingpin:!1,hulk:!1,doom:!1}[X],Y=X=>o==="ZOMBIE"?i.magneto.has(X)&&$("magneto")?Q.factions.magneto.name:i.kingpin.has(X)&&$("kingpin")?Q.factions.kingpin.name:i.hulk.has(X)&&$("hulk")?Q.factions.hulk.name:i.doom.has(X)&&$("doom")?Q.factions.doom.name:"TERRITORIO DE CAZA (EEUU)":i.magneto.has(X)?Q.factions.magneto.name:i.kingpin.has(X)?Q.factions.kingpin.name:i.hulk.has(X)?Q.factions.hulk.name:i.doom.has(X)?Q.factions.doom.name:Q.factions.neutral.name;return N.useEffect(()=>{if(!I||!x||!ae||!te)return;const X=(ie,ye)=>Math.sqrt(Math.pow(ie[0]-ye[0],2)+Math.pow(ie[1]-ye[1],2)),ne=()=>{if(W.current){L.current=setTimeout(ne,1e3);return}const ie=Pc(x,x.objects.states);let ye=ie.features;if(o==="ALIVE"&&(ye=ie.features.filter(Me=>i.hulk.has(Me.properties.name))),ye.length>0){const Me=[],rt=V.current;ye.forEach(Se=>{const q=ae.centroid(Se);if(te.invert&&q&&!isNaN(q[0])){const z=te.invert(q);if(z){const le=X(rt,z);le>.5&&Me.push({coords:z,dist:le})}}}),o==="ZOMBIE"?Me.sort(()=>Math.random()-.5):Me.sort((Se,q)=>Se.dist-q.dist);const be=Math.min(Me.length,4);if(be>0){const Se=Math.floor(Math.random()*be);O(Me[Se].coords),L.current=setTimeout(ne,6e3)}else L.current=setTimeout(ne,3e3)}};return L.current&&clearTimeout(L.current),L.current=setTimeout(ne,2e3),()=>{L.current&&clearTimeout(L.current)}},[I,x,ae,te,i,o]),N.useEffect(()=>{if(a!=="SURFER"||!x||!ae||!te){M(null),W.current=!1;return}const X=()=>{const ne=Pc(x,x.objects.states),ie=ne.features[Math.floor(Math.random()*ne.features.length)],ye=ae.centroid(ie);return te.invert&&ye&&!isNaN(ye[0])?te.invert(ye):[-98.5,39.8]};if(U.current&&clearTimeout(U.current),c===0)W.current=!0,R?(W.current=!0,M(V.current)):(M([-130,60]),U.current=setTimeout(()=>{M(V.current),U.current=setTimeout(()=>{W.current=!1;const ne=X();M(ne)},2e4)},500));else if(c>0&&c<=2){W.current=!1;const ne=X();M(ne)}else c>2&&(W.current=!1,M([-60,20]));return()=>{U.current&&clearTimeout(U.current)}},[a,c,x,ae,te]),N.useEffect(()=>{if(!x||!d.current||!te||!ae)return;const X=Mt(d.current);if(X.select("g.layer-map").empty()){X.selectAll("*").remove();const q=X.append("defs"),z=(Ee,De)=>{const Ie=q.append("filter").attr("id",Ee).attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");Ie.append("feGaussianBlur").attr("stdDeviation","3").attr("result","coloredBlur");const je=Ie.append("feMerge");je.append("feMergeNode").attr("in","coloredBlur"),je.append("feMergeNode").attr("in","SourceGraphic"),Ie.append("feDropShadow").attr("dx",0).attr("dy",0).attr("stdDeviation",4).attr("flood-color",De).attr("flood-opacity",.8)};z("glow-magneto","#ef4444"),z("glow-kingpin","#d946ef"),z("glow-hulk","#84cc16"),z("glow-doom","#06b6d4"),z("glow-neutral","#fbbf24"),z("glow-boss","#9333ea"),z("glow-shield","#06b6d4"),z("glow-surfer","#e2e8f0"),q.append("clipPath").attr("id","bunker-clip").append("circle").attr("cx",0).attr("cy",0).attr("r",12);const le=X.append("g").attr("class","g-main");p.current=le.append("g").attr("class","layer-map"),f.current=le.append("g").attr("class","layer-missions"),g.current=le.append("g").attr("class","layer-tokens");const ve=W4().scaleExtent([1,8]).on("zoom",Ee=>{le.attr("transform",Ee.transform.toString());const De=Ee.transform.k;X.selectAll(".bunker").attr("transform",function(){var je;const Ie=((je=Mt(this).attr("data-coords"))==null?void 0:je.split(",").map(Number))||[0,0];return`translate(${Ie[0]},${Ie[1]}) scale(${1/De})`}),X.selectAll("text.label").style("font-size",`${Math.max(6,10/De)}px`),f.current&&f.current.selectAll(".mission").attr("transform",function(Ie){const je=te(Ie.location.coordinates);return`translate(${je[0]}, ${je[1]}) scale(${1/De})`}),g.current&&g.current.selectAll(".token-group").each(function(){const Ie=Mt(this),je=Ie.attr("transform");if(je){const Rt=je.match(/translate\(([^)]+)\)/);Rt&&Ie.attr("transform",`${Rt[0]} scale(${1/De})`)}})});X.call(ve)}const ne=p.current;if(!ne)return;const ye=Pc(x,x.objects.states).features,Me=q=>o==="ZOMBIE"?i.magneto.has(q)&&$("magneto")?"fill-red-900/60 stroke-red-500 stroke-[1px] hover:fill-red-700 hover:stroke-red-300 hover:stroke-[2px]":i.kingpin.has(q)&&$("kingpin")?"fill-purple-900/60 stroke-purple-500 stroke-[1px] hover:fill-purple-700 hover:stroke-purple-300 hover:stroke-[2px]":i.hulk.has(q)&&$("hulk")?"fill-lime-900/40 stroke-lime-700 stroke-[1px] hover:fill-lime-900/70 hover:stroke-lime-400 hover:stroke-[2px]":i.doom.has(q)&&$("doom")?"fill-cyan-900/40 stroke-cyan-700 stroke-[1px] hover:fill-cyan-900/70 hover:stroke-cyan-400 hover:stroke-[2px]":"fill-slate-900/90 stroke-slate-700 stroke-[1px] hover:fill-lime-900/30 hover:stroke-lime-500 hover:stroke-[2px]":i.magneto.has(q)?"fill-red-900/60 stroke-red-500 stroke-[1px] hover:fill-red-700 hover:stroke-red-300 hover:stroke-[2px]":i.kingpin.has(q)?"fill-purple-900/60 stroke-purple-500 stroke-[1px] hover:fill-purple-700 hover:stroke-purple-300 hover:stroke-[2px]":i.hulk.has(q)?"fill-lime-900/40 stroke-lime-700 stroke-[1px] hover:fill-lime-900/70 hover:stroke-lime-400 hover:stroke-[2px]":i.doom.has(q)?"fill-cyan-900/40 stroke-cyan-700 stroke-[1px] hover:fill-cyan-900/70 hover:stroke-cyan-400 hover:stroke-[2px]":"fill-slate-800/60 stroke-slate-600 stroke-[1px] hover:fill-slate-700 hover:stroke-slate-400 hover:stroke-[2px]";ne.selectAll("path.state").data(ye).join("path").attr("class",q=>`state ${Me(q.properties.name)} transition-all duration-200 cursor-crosshair`).attr("d",ae).on("click",(q,z)=>{q.stopPropagation();const le=ae.bounds(z),ve=le[1][0]-le[0][0],Ee=le[1][1]-le[0][1],De=(le[0][0]+le[1][0])/2,Ie=(le[0][1]+le[1][1])/2,je=Math.max(1,Math.min(8,.9/Math.max(ve/D.width,Ee/D.height))),Rt=[D.width/2-je*De,D.height/2-je*Ie],nn=Mt(d.current);nn.transition().duration(750).call(nn.zoom().transform,ih.translate(Rt[0],Rt[1]).scale(je))}),ne.selectAll("text.label").data(ye).join("text").attr("class","label pointer-events-none font-mono select-none tracking-wider font-bold").attr("transform",q=>{const z=ae.centroid(q);return!z||isNaN(z[0])||isNaN(z[1])?"translate(-1000,-1000)":`translate(${z[0]},${z[1]})`}).attr("text-anchor","middle").attr("dominant-baseline","central").style("fill","rgba(255, 255, 255, 0.9)").style("font-size","10px").style("text-shadow","0px 0px 3px #000").text(q=>q.properties.name?q.properties.name.toUpperCase():"").raise();const rt=te([-82.9,40]),be=o==="ZOMBIE"?"https://i.pinimg.com/736x/7f/31/38/7f31382d4a5c35daa4ba1768a366a917.jpg":"https://i.pinimg.com/736x/63/1e/3a/631e3a68228c97963e78381ad11bf3bb.jpg",Se=o==="ZOMBIE"?"#65a30d":"#06b6d4";if(rt){let q=ne.select(".bunker");q.empty()&&(q=ne.append("g").attr("class","bunker cursor-pointer hover:opacity-100").on("click",z=>{z.stopPropagation(),s()}),q.append("circle").attr("r",12).attr("fill","none").attr("stroke-width",1).append("animate").attr("attributeName","r").attr("from","12").attr("to","25").attr("dur","2s").attr("repeatCount","indefinite"),q.append("image").attr("x",-12).attr("y",-12).attr("width",24).attr("height",24).attr("clip-path","url(#bunker-clip)").attr("referrerpolicy","no-referrer")),q.attr("transform",`translate(${rt[0]}, ${rt[1]})`).attr("data-coords",`${rt[0]},${rt[1]}`),q.select("circle").attr("stroke",Se),q.select("image").attr("href",be),q.raise()}},[x,D,te,ae,i,o,n]),N.useEffect(()=>{if(!te||!f.current||!g.current||!d.current)return;const X=f.current,ne=g.current,ie=tI(d.current).k||1,ye=e.filter(q=>{if(!q||!q.id||!q.location||!q.location.coordinates)return!1;const[z,le]=q.location.coordinates;return z!==0&&le!==0&&!isNaN(z)&&!isNaN(le)}),Me=[];ye.forEach(q=>{(q.prereqs||(q.prereq?[q.prereq]:[])).forEach(le=>Me.push({source:le,target:q.id}))}),X.selectAll("path.mission-line").data(Me,q=>`${q.source}-${q.target}`).join(q=>q.append("path").attr("class","mission-line"),q=>q,q=>q.remove()).attr("d",q=>{const z=e.find(Ie=>Ie.id===q.source),le=e.find(Ie=>Ie.id===q.target);if(!z||!le)return null;const ve=te(z.location.coordinates),Ee=te(le.location.coordinates);if(!ve||!Ee)return null;const De=Math.sqrt(Math.pow(Ee[0]-ve[0],2)+Math.pow(Ee[1]-ve[1],2));return`M${ve[0]},${ve[1]}A${De},${De} 0 0,1 ${Ee[0]},${Ee[1]}`}).attr("fill","none").attr("stroke-width",q=>n.has(q.source)?2:1.5).each(function(q){const z=Mt(this),le=n.has(q.source),ve=n.has(q.target),Ee=`${q.source}-${q.target}`;if(le&&ve)z.classed("line-flowing",!1).classed("animating",!1).style("stroke-dasharray","none").attr("stroke","#10b981").attr("opacity",.6);else if(le&&!ve)if(_.current.has(Ee))z.classed("line-flowing",!0).style("stroke-dasharray","4,4").attr("stroke","#fbbf24").attr("opacity",1);else{const De=this.getTotalLength();z.classed("animating",!0).attr("stroke-dasharray",`${De} ${De}`).attr("stroke-dashoffset",De).attr("opacity",1).attr("stroke","#fbbf24").transition().duration(2e3).ease(X5).attr("stroke-dashoffset",0).on("end",()=>{_.current.add(Ee),z.classed("animating",!1).classed("line-flowing",!0).style("stroke-dasharray","4,4")})}else z.classed("line-flowing",!1).classed("animating",!1).style("stroke-dasharray","4,4").attr("stroke","#475569").attr("opacity",.4)}),X.selectAll("g.mission").data(ye,q=>q.id).join(q=>{const z=q.append("g").attr("class","mission cursor-pointer hover:opacity-100");return z.append("circle").attr("class","effect-shield-pulse"),z.append("circle").attr("class","mission-ring"),z.append("circle").attr("class","mission-dot"),z}).attr("class",q=>`mission-marker cursor-pointer ${q.factionId==="UNDEAD"?"animate-glitch":""}`).attr("transform",q=>{const z=te(q.location.coordinates);return z?`translate(${z[0]}, ${z[1]}) scale(${1/ie})`:"translate(-100,-100)"}).on("click",(q,z)=>{q.stopPropagation(),!(a==="GALACTUS"&&z.type!=="BOSS"&&z.type!=="GALACTUS")&&r(z)}).on("mouseenter",(q,z)=>{const le=Y(z.location.state);A({x:q.clientX,y:q.clientY,mission:z,factionName:le})}).on("mousemove",q=>A(z=>z?{...z,x:q.clientX,y:q.clientY}:null)).on("mouseleave",()=>A(null)).each(function(q){const z=Mt(this),le=n.has(q.id),ve=q.type==="SHIELD_BASE",Ee=q.type&&q.type.startsWith("BOSS"),De=q.type==="GALACTUS";let Ie="#eab308",je="#ca8a04";le&&(Ie="#10b981",je="#059669"),ve&&(Ie="#06b6d4",je="#0891b2"),(Ee||De)&&(Ie="#9333ea",je="#7e22ce"),z.select(".mission-dot").attr("r",ve?4:5).attr("fill",ve&&!le?"#0f172a":Ie).attr("stroke",je).attr("stroke-width",2),ve?z.select(".mission-ring").style("display","block").attr("r",8).attr("fill","none").attr("stroke","#06b6d4").attr("stroke-width",1.5).attr("stroke-dasharray",le?"none":"2,1"):z.select(".mission-ring").style("display","none"),ve&&!le?z.select(".effect-shield-pulse").style("display","block").attr("r",8).attr("fill","none").attr("stroke","#06b6d4").attr("class","effect-shield-pulse shield-pulse"):z.select(".effect-shield-pulse").style("display","none")});let be=te(k),Se=R?te(R):null;if(be&&Se&&Math.sqrt(Math.pow(be[0]-Se[0],2)+Math.pow(be[1]-Se[1],2))<20&&(be=[be[0]-15,be[1]],Se=[Se[0]+15,Se[1]]),I&&be){let q=ne.select(".hulk-token");if(q.empty())q=ne.append("g").attr("class","token-group hulk-token cursor-pointer").attr("transform",`translate(${be[0]}, ${be[1]}) scale(${1/ie})`),q.append("circle").attr("r",15).attr("fill","#65a30d").attr("stroke","#365314").attr("stroke-width",2).style("filter","url(#glow-hulk)"),q.append("text").text("HULK").attr("dy",4).attr("text-anchor","middle").attr("font-size","8px").attr("font-weight","bold").attr("fill","white");else{const le=q.attr("transform").match(/translate\(([^)]+)\)/),[ve,Ee]=le?le[1].split(",").map(Number):[0,0];if(Math.sqrt(Math.pow(be[0]-ve,2)+Math.pow(be[1]-Ee,2))>10){const Ie=bn(ve,be[0]),je=bn(Ee,be[1]),Rt=1/ie;q.transition().duration(2e3).ease(Z5).attrTween("transform",function(){return function(nn){const En=Ie(nn),xn=je(nn),$r=Math.sin(nn*Math.PI)*2,lt=Rt*(1+$r);return`translate(${En},${xn}) scale(${lt})`}}).on("end",function(){Mt(this).attr("transform",`translate(${be[0]}, ${be[1]}) scale(${Rt})`),Mt(this).append("circle").attr("r",15).attr("fill","none").attr("stroke","#65a30d").attr("stroke-width",3).attr("opacity",1).transition().duration(600).attr("r",60).attr("opacity",0).remove()})}else q.attr("transform",`translate(${be[0]}, ${be[1]}) scale(${1/ie})`)}}else ne.selectAll(".hulk-token").remove();if(Se){let q=ne.select(".surfer-token");if(q.empty())q=ne.append("g").attr("class","token-group surfer-token cursor-pointer").attr("transform",`translate(${Se[0]}, ${Se[1]}) scale(${1/ie})`),q.append("circle").attr("r",12).attr("fill","#e2e8f0").attr("stroke","#94a3b8").attr("stroke-width",2).style("filter","url(#glow-surfer)"),q.append("text").text("SURFER").attr("dy",4).attr("text-anchor","middle").attr("font-size","6px").attr("font-weight","bold").attr("fill","#1e293b");else{const le=q.attr("transform").match(/translate\(([^)]+)\)/),[ve,Ee]=le?le[1].split(",").map(Number):[0,0],De=Math.sqrt(Math.pow(Se[0]-ve,2)+Math.pow(Se[1]-Ee,2));if(De>5){const Ie=bn(ve,Se[0]),je=bn(Ee,Se[1]),Rt=1/ie,nn=De>200?5e3:3e3;q.transition().duration(nn).ease(jA).attrTween("transform",function(){return function(En){const xn=Ie(En),$r=je(En);return`translate(${xn},${$r}) scale(${Rt})`}}).on("end",function(){Mt(this).attr("transform",`translate(${Se[0]}, ${Se[1]}) scale(${Rt})`)})}else q.attr("transform",`translate(${Se[0]}, ${Se[1]}) scale(${1/ie})`)}}else ne.selectAll(".surfer-token").remove()},[e,n,a,I,te,k,R]),E?u.jsxs("div",{ref:h,className:"flex flex-col items-center justify-center w-full h-full text-cyan-500 font-mono",children:[u.jsx("div",{className:"animate-spin text-4xl",children:""}),u.jsx("div",{children:Q.map.loading})]}):b?u.jsxs("div",{ref:h,className:"flex flex-col items-center justify-center w-full h-full text-red-500 font-mono border border-red-900 bg-red-900/20 p-4",children:[u.jsx("div",{className:"text-2xl mb-2",children:" SYSTEM FAILURE"}),u.jsx("div",{className:"text-xs",children:b})]}):u.jsxs("div",{ref:h,className:"w-full h-full relative bg-transparent overflow-hidden group",children:[u.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none",style:{backgroundImage:"radial-gradient(circle, #0e7490 1px, transparent 1px)",backgroundSize:"20px 20px",opacity:.2}}),a==="GALACTUS"&&u.jsxs("div",{className:"absolute inset-0 z-30 pointer-events-none overflow-hidden flex items-center justify-center",children:[u.jsx("div",{className:"absolute inset-0 bg-purple-900/30 mix-blend-overlay animate-pulse-slow"}),u.jsx("div",{className:"w-[120%] h-[120%] absolute animate-breathing opacity-60 flex items-center justify-center",style:{mixBlendMode:"hard-light",maskImage:"radial-gradient(circle, black 40%, transparent 80%)",WebkitMaskImage:"radial-gradient(circle, black 40%, transparent 80%)"},children:u.jsx("img",{src:"https://i.pinimg.com/736x/7d/99/05/7d9905d417620745edc2c724f94e56c8.jpg",className:"w-full h-full object-contain",referrerPolicy:"no-referrer"})})]}),u.jsx("svg",{ref:d,className:"w-full h-full relative z-10"}),S&&u.jsxs("div",{className:"fixed z-50 pointer-events-none glass-panel p-4 shadow-2xl rounded-sm min-w-[240px] font-sans animate-fade-in border-cyan-500/50",style:{left:Math.min(S.x+15,window.innerWidth-260),top:Math.min(S.y+15,window.innerHeight-150)},children:[u.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-cyan-500/20 pb-2",children:[u.jsx("div",{className:"text-[10px] font-black text-cyan-500 uppercase tracking-[0.2em]",children:S.factionName}),u.jsx("div",{className:`text-[9px] font-black px-2 py-0.5 rounded-full border ${S.mission.threatLevel==="EXTREMA"?"bg-red-950/40 text-red-500 border-red-500/50":"bg-orange-950/40 text-orange-500 border-orange-500/50"}`,children:S.mission.threatLevel})]}),u.jsx("div",{className:"text-base font-black text-white/90 mb-3 tracking-tight uppercase leading-tight",children:S.mission.title}),u.jsxs("div",{className:"flex flex-col gap-2",children:[S.mission.type==="SHIELD_BASE"&&u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-cyan-400 font-bold",children:[u.jsx("span",{className:"text-xs",children:""})," S.H.I.E.L.D. ASSET DETECTED"]}),u.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:"CLICK TO VIEW MISSION DETAILS"})]})]})]})},J4=t=>t.toLowerCase().replace(/\(z\)/g,"").replace(/\(zombie\)/g,"").replace(/\(artist\)/g,"").replace(/\(old man\)/g,"").trim(),e9=({isOpen:t,onClose:e,onRecruit:n,templates:r,existingAliases:s,language:i,playerAlignment:o})=>{const[a,c]=N.useState(""),[d,h]=N.useState("RECRUIT"),p=Wn[i].recruit,f=o==="ZOMBIE",g=N.useMemo(()=>r.filter(x=>{const C=x.alias.toLowerCase().includes(a.toLowerCase())||x.defaultName.toLowerCase().includes(a.toLowerCase()),E=J4(x.alias),w=s.has(E);let b=!0;return o&&(d==="RECRUIT"?b=x.defaultAlignment===o:b=x.defaultAlignment!==o),C&&!w&&b}),[r,a,o,s,d]),_=x=>{const C=d==="CAPTURE"?"CAPTURED":"AVAILABLE",E={id:`hero_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,templateId:x.id,name:x.defaultName,alias:x.alias,class:x.defaultClass,stats:x.defaultStats,imageUrl:x.imageUrl,characterSheetUrl:x.characterSheetUrl,bio:x.bio||"",status:C,assignedMissionId:null,objectives:x.objectives||[],completedObjectiveIndices:[],currentStory:x.currentStory||"",relatedHeroId:x.relatedHeroId,imageParams:x.imageParams};n(E)};return t?u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-950/90 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"w-full max-w-4xl bg-slate-900 border-2 border-cyan-500 shadow-[0_0_50px_rgba(6,182,212,0.3)] flex flex-col max-h-[85vh] overflow-hidden relative",children:[u.jsxs("div",{className:"bg-cyan-900/40 p-4 border-b border-cyan-600 flex justify-between items-center shrink-0",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-cyan-300 font-black tracking-[0.2em] uppercase text-xl",children:[p.title," // CEREBRO"]}),u.jsx("p",{className:"text-[10px] text-cyan-400 font-mono",children:f?"BUSCANDO BIOMASA...":"BUSCANDO ACTIVOS..."})]}),u.jsx("button",{onClick:e,className:"text-cyan-500 hover:text-white font-bold text-2xl",children:""})]}),u.jsxs("div",{className:"flex border-b border-cyan-900 bg-slate-950",children:[u.jsx("button",{onClick:()=>h("RECRUIT"),className:`flex-1 py-3 text-xs font-bold tracking-widest uppercase transition-all border-r border-cyan-900
                            ${d==="RECRUIT"?f?"bg-lime-900/40 text-lime-400":"bg-cyan-900/40 text-cyan-400":"text-gray-500 hover:text-white hover:bg-slate-800"}
                        `,children:f?"EXTENDER LA COLMENA (ALIADOS)":"RECLUTAR AGENTES (ALIADOS)"}),u.jsx("button",{onClick:()=>h("CAPTURE"),className:`flex-1 py-3 text-xs font-bold tracking-widest uppercase transition-all
                            ${d==="CAPTURE"?"bg-red-900/40 text-red-400":"text-gray-500 hover:text-white hover:bg-slate-800"}
                        `,children:f?"CAZAR COMIDA (HUMANOS)":"CAPTURAR ZOMBIES (ENEMIGOS)"})]}),u.jsx("div",{className:"p-4 bg-slate-950 border-b border-cyan-900",children:u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:a,onChange:x=>c(x.target.value),placeholder:i==="es"?"BUSCAR POR NOMBRE O ALIAS...":"SEARCH BY NAME OR ALIAS...",className:"w-full bg-slate-900 border border-cyan-700 p-3 pl-10 text-cyan-100 focus:border-cyan-400 outline-none font-mono uppercase",autoFocus:!0}),u.jsx("span",{className:"absolute left-3 top-3 text-cyan-600",children:""})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-thin scrollbar-thumb-cyan-900 bg-slate-950",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.map(x=>{const C=x.imageParams?{transform:`scale(${x.imageParams.scale}) translate(${x.imageParams.x}%, ${x.imageParams.y}%)`}:{};return u.jsxs("div",{onClick:()=>_(x),className:`group relative border bg-slate-900/50 transition-all cursor-pointer flex gap-3 p-2 overflow-hidden
                                        ${d==="RECRUIT"?"border-cyan-900 hover:bg-cyan-900/20 hover:border-cyan-500":"border-red-900 hover:bg-red-900/20 hover:border-red-500"}
                                    `,children:[u.jsx("div",{className:"w-16 h-16 shrink-0 border border-slate-700 group-hover:border-white overflow-hidden bg-black relative",children:u.jsx("img",{src:x.imageUrl,alt:x.alias,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity absolute inset-0",style:C,referrerPolicy:"no-referrer"})}),u.jsxs("div",{className:"flex flex-col justify-center min-w-0",children:[u.jsx("div",{className:`text-xs font-black truncate group-hover:text-white ${d==="RECRUIT"?"text-cyan-400":"text-red-400"}`,children:x.alias}),u.jsx("div",{className:"text-[9px] text-gray-500 font-mono truncate",children:x.defaultName}),u.jsx("div",{className:"mt-1 inline-block px-1.5 py-0.5 bg-slate-800 text-[8px] text-gray-400 border border-slate-700 uppercase font-bold w-fit",children:x.defaultClass})]}),u.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:`w-8 h-8 flex items-center justify-center text-black font-bold text-lg shadow-lg ${d==="RECRUIT"?"bg-cyan-600":"bg-red-600"}`,children:d==="RECRUIT"?"+":""})})]},x.id)}),g.length===0&&u.jsxs("div",{className:"col-span-full text-center py-10 text-gray-600 font-mono flex flex-col items-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsx("span",{children:"NO SE ENCONTRARON REGISTROS COMPATIBLES O YA POSEES ESTE AGENTE."})]})]})})]})}):null},t9=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s,confirmText:i,cancelText:o="CANCELAR",type:a})=>{if(!t)return null;let c="border-cyan-500 text-cyan-400",d="bg-cyan-600 hover:bg-cyan-500",h="shadow-[0_0_50px_rgba(6,182,212,0.2)]";return a==="CURE"?(c="border-emerald-500 text-emerald-400",d="bg-emerald-600 hover:bg-emerald-500",h="shadow-[0_0_50px_rgba(16,185,129,0.2)]"):a==="INFECT"?(c="border-lime-500 text-lime-400",d="bg-lime-600 hover:bg-lime-500",h="shadow-[0_0_50px_rgba(132,204,22,0.2)]"):a==="WARNING"&&(c="border-red-500 text-red-400",d="bg-red-600 hover:bg-red-500",h="shadow-[0_0_50px_rgba(239,68,68,0.2)]"),u.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-slate-950/40 backdrop-blur-md p-4 animate-fade-in",children:u.jsxs("div",{className:`w-full max-w-md glass-panel ${c} ${h} flex flex-col relative overflow-hidden shadow-2xl rounded-sm`,children:[u.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.1)_50%),linear-gradient(90deg,rgba(255,0,0,0.03),rgba(0,255,0,0.01),rgba(0,0,255,0.03))] bg-[length:100%_4px,6px_100%] pointer-events-none opacity-20"}),u.jsxs("div",{className:`p-4 border-b ${c} bg-slate-950/20 font-black tracking-[0.2em] uppercase text-lg flex items-center gap-2 font-mono`,children:[u.jsx("span",{className:"animate-pulse",children:""})," ",r]}),u.jsx("div",{className:"p-6 text-center relative z-10",children:u.jsx("p",{className:"font-sans text-sm md:text-base text-white/90 leading-relaxed whitespace-pre-line font-medium",children:s})}),u.jsxs("div",{className:"p-4 flex gap-4 justify-center bg-slate-950/40 border-t border-slate-800/50 relative z-10",children:[u.jsx("button",{onClick:e,className:"px-6 py-2 border border-slate-700 text-slate-400 hover:text-white hover:border-white text-[10px] font-bold tracking-widest uppercase transition-all font-mono",children:o}),u.jsx("button",{onClick:()=>{n(),e()},className:`px-8 py-2 text-black text-xs font-bold tracking-widest uppercase transition-all shadow-lg font-mono ${d}`,children:i})]})]})})},n9=t=>t.toLowerCase().replace(/\(z\)/g,"").replace(/\(zombie\)/g,"").replace(/\(artist\)/g,"").replace(/\(old man\)/g,"").trim(),Lc=({label:t,shieldVal:e,enemyVal:n,enemyColor:r})=>{const s=e+n,i=s===0?50:e/s*100,o=r.replace("text-","bg-");return u.jsxs("div",{className:"mb-4 group",children:[u.jsxs("div",{className:"flex justify-between text-[9px] font-black mb-1 uppercase tracking-wider px-1",children:[u.jsxs("span",{className:"text-cyan-400 drop-shadow-[0_0_3px_rgba(6,182,212,0.8)]",children:["S.H.I.E.L.D. ",u.jsxs("span",{className:"text-xs",children:["[",e,"]"]})]}),u.jsxs("span",{className:`${r} drop-shadow-[0_0_3px_currentColor]`,children:[t," ",u.jsxs("span",{className:"text-xs",children:["[",n,"]"]})]})]}),u.jsxs("div",{className:"h-4 w-full bg-slate-950 border border-slate-700 relative overflow-hidden flex skew-x-[-10deg]",children:[u.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-900 to-cyan-500 transition-all duration-1000 ease-out relative border-r-2 border-white",style:{width:`${i}%`},children:u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')] opacity-30"})}),u.jsx("div",{className:`flex-1 h-full bg-gradient-to-l from-slate-900 to-${o.split("-")[1]}-600 opacity-80 relative`,children:u.jsx("div",{className:`absolute inset-0 ${o} opacity-40`})})]})]})},gf=({hero:t,onClick:e,actionIcon:n,onAction:r})=>{const i={AVAILABLE:"border-emerald-500 shadow-emerald-500/20",DEPLOYED:"border-yellow-500 shadow-yellow-500/20",INJURED:"border-red-500 shadow-red-500/20",CAPTURED:"border-red-900 shadow-red-900/20 grayscale"}[t.status]||"border-slate-600",o=t.imageParams?{transform:`scale(${t.imageParams.scale}) translate(${t.imageParams.x}%, ${t.imageParams.y}%)`}:{};return u.jsxs("div",{onClick:e,className:`group relative h-28 w-full cursor-pointer overflow-hidden border-l-4 bg-slate-900/50 transition-all duration-300 hover:bg-slate-800 hover:scale-[1.02] hover:z-10 ${i} border-b border-slate-800`,children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[u.jsx("img",{src:t.imageUrl,alt:t.alias,className:"w-full h-full object-cover object-top opacity-50 group-hover:opacity-80 transition-all duration-500",style:o,referrerPolicy:"no-referrer"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-950 via-slate-950/80 to-transparent pointer-events-none"})]}),u.jsxs("div",{className:"absolute inset-0 p-4 flex flex-col justify-center z-10 pl-6 pointer-events-none",children:[u.jsx("h3",{className:"text-lg font-black uppercase tracking-wider truncate text-white group-hover:text-cyan-400 drop-shadow-md",style:{fontFamily:"Impact, sans-serif"},children:t.alias}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("span",{className:"text-[8px] font-bold bg-black/80 px-2 py-0.5 border border-slate-700 text-cyan-500 tracking-widest uppercase",children:t.class}),t.status!=="AVAILABLE"&&u.jsx("span",{className:`text-[8px] font-bold px-2 py-0.5 border uppercase tracking-widest ${t.status==="DEPLOYED"?"bg-yellow-900/50 text-yellow-500 border-yellow-700":"bg-red-900/50 text-red-500 border-red-700"}`,children:t.status})]})]}),n&&r&&u.jsx("button",{onClick:a=>{a.stopPropagation(),r()},className:"absolute right-2 top-2 w-8 h-8 flex items-center justify-center bg-black/50 border border-white/20 hover:bg-red-600 hover:border-red-500 text-white transition-all rounded-sm z-20 backdrop-blur-sm pointer-events-auto",children:n}),u.jsx("div",{className:"absolute inset-0 bg-scan opacity-0 group-hover:opacity-10 pointer-events-none transition-opacity"})]})},r9=({heroes:t,missions:e,completedMissionIds:n=new Set,onAssign:r,onUnassign:s,onAddHero:i,onToggleObjective:o,onBack:a,language:c,playerAlignment:d,onTransformHero:h,onTickerUpdate:p,omegaCylinders:f=0,onFindCylinder:g})=>{const[_,x]=N.useState("ROSTER"),[C,E]=N.useState(null),[w,b]=N.useState(!1),[P,D]=N.useState([]),[j,I]=N.useState(null),[v,S]=N.useState({isOpen:!1,title:"",message:"",confirmText:"",type:"WARNING",onConfirm:()=>{}}),A=t.find(V=>V.id===C),k=t.filter(V=>V.status==="AVAILABLE"),O=t.filter(V=>V.status==="DEPLOYED"),R=t.filter(V=>V.status==="INJURED"||V.status==="CAPTURED"),M=N.useMemo(()=>{const V=new Set;return t.forEach(W=>{V.add(n9(W.alias))}),V},[t]),L={magneto:{shield:2,enemy:5,color:"text-red-500"},kingpin:{shield:4,enemy:3,color:"text-purple-500"},hulk:{shield:1,enemy:8,color:"text-lime-500"},doom:{shield:3,enemy:4,color:"text-cyan-500"}},U=async()=>{const V=await ko();D(V),b(!0)},K=V=>{S(V)};return u.jsxs("div",{className:"w-full h-full bg-slate-950 text-cyan-400 font-mono flex flex-col overflow-hidden relative",children:[u.jsxs("div",{className:"h-16 border-b border-cyan-900 bg-slate-900/95 flex items-center justify-between px-6 shrink-0 z-20 shadow-[0_0_20px_rgba(0,0,0,0.5)]",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-xs font-bold border border-cyan-700 px-4 py-2 hover:bg-cyan-500 hover:text-black transition-all clip-tactical",children:[u.jsx("span",{children:""})," MAPA"]}),u.jsx("div",{className:"h-8 w-px bg-cyan-800/50"}),u.jsxs("h1",{className:"text-xl font-black tracking-[0.2em] text-white uppercase text-shadow-neon",children:["CENTRO DE MANDO // ",u.jsx("span",{className:d==="ZOMBIE"?"text-lime-500":"text-cyan-400",children:d})]})]}),u.jsxs("div",{className:"flex items-center gap-8 text-[10px] font-bold tracking-widest",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-gray-500",children:"FECHA"}),u.jsx("div",{className:"text-white",children:"OCT 31, 2025"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-gray-500",children:"ESTADO"}),u.jsx("div",{className:"text-emerald-400 animate-pulse",children:"OPERATIVO"})]})]})]}),u.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-0 overflow-hidden h-full",children:[u.jsxs("div",{className:"col-span-3 border-r border-cyan-900 bg-slate-900/30 flex flex-col min-w-[300px] h-full overflow-hidden relative",children:[u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-5 pointer-events-none"}),u.jsxs("div",{className:"flex border-b border-cyan-900 shrink-0 bg-slate-900",children:[u.jsxs("button",{onClick:()=>x("ROSTER"),className:`flex-1 py-4 text-[10px] font-black tracking-widest uppercase transition-all ${_==="ROSTER"?"bg-cyan-900/40 text-white border-b-2 border-cyan-500":"text-gray-500 hover:text-cyan-300"}`,children:["ACTIVOS (",k.length+O.length,")"]}),u.jsxs("button",{onClick:()=>x("MEDBAY"),className:`flex-1 py-4 text-[10px] font-black tracking-widest uppercase transition-all ${_==="MEDBAY"?"bg-red-900/20 text-red-300 border-b-2 border-red-500":"text-gray-500 hover:text-red-400"}`,children:["PRISIONEROS (",R.length,")"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-cyan-900 pb-24",children:_==="ROSTER"?u.jsxs(u.Fragment,{children:[k.map(V=>u.jsx(gf,{hero:V,onClick:()=>E(V.id)},V.id)),O.length>0&&u.jsx("div",{className:"text-[9px] font-black text-yellow-500 uppercase mt-6 mb-2 px-4 tracking-widest border-b border-yellow-900/30 pb-1",children:"DESPLEGADOS"}),O.map(V=>u.jsx(gf,{hero:V,onClick:()=>E(V.id),actionIcon:"",onAction:()=>s(V.id)},V.id))]}):R.map(V=>{const W=d==="ALIVE",Q=W?"":"",te=()=>{if(h){if(V.relatedHeroId==="NO_VARIANT"){K(W?{isOpen:!0,title:"ERROR GENTICO",message:`SUJETO IRRECUPERABLE.

El tejido de ${V.alias} ha sufrido una degradacin celular total. No queda ADN humano viable para la reestructuracin.

LA CURA ES INEFICAZ.`,confirmText:"ENTENDIDO",type:"WARNING",onConfirm:()=>{}}:{isOpen:!0,title:"ANOMALA DETECTADA",message:`SUJETO INMUNE.

La fisiologa de ${V.alias} rechaza el Evangelio del Hambre. Estructura molecular incompatible o sinttica.

NO SE PUEDE CONSUMIR.`,confirmText:"ENTENDIDO",type:"WARNING",onConfirm:()=>{}});return}W?f>0?K({isOpen:!0,title:"PROTOCOLO DE CURA",message:`INICIAR SECUENCIA DE REESTRUCTURACIN DE ADN PARA ${V.alias}?

COSTE: 1 CILINDRO OMEGA`,confirmText:"ADMINISTRAR CURA",type:"CURE",onConfirm:()=>h(V.id,"ALIVE")}):K({isOpen:!0,title:"RECURSOS INSUFICIENTES",message:`NO HAY CILINDROS OMEGA DISPONIBLES.

BUSCA SUMINISTROS EN EL MAPA.`,confirmText:"ENTENDIDO",type:"WARNING",onConfirm:()=>{}}):K({isOpen:!0,title:"EXPANDIR EL HAMBRE",message:`INFECTAR A ${V.alias}?

EL SUJETO SE UNIR A LA HORDA.`,confirmText:"DEVORAR / INFECTAR",type:"INFECT",onConfirm:()=>h(V.id,"ZOMBIE")})}};return u.jsx(gf,{hero:V,onClick:()=>E(V.id),actionIcon:Q,onAction:te},V.id)})})]}),u.jsxs("div",{className:"col-span-6 flex flex-col bg-slate-950 relative h-full overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none bg-[linear-gradient(45deg,transparent_25%,rgba(6,182,212,0.1)_50%,transparent_75%)] bg-[length:30px_30px]"}),u.jsxs("div",{className:"h-2/5 border-b border-cyan-900 p-6 flex gap-6 shrink-0 bg-slate-900/20",children:[u.jsxs("div",{className:"flex-1 border border-cyan-800/50 bg-slate-900/50 p-4 relative shadow-[0_0_30px_rgba(0,0,0,0.5)] clip-tactical",children:[u.jsx("h3",{className:"text-[10px] font-black text-cyan-500 uppercase tracking-[0.2em] mb-4 border-b border-cyan-900/50 pb-2",children:"CONTROL TERRITORIAL GLOBAL"}),u.jsx(Lc,{label:"MAGNETO",shieldVal:L.magneto.shield,enemyVal:L.magneto.enemy,enemyColor:L.magneto.color}),u.jsx(Lc,{label:"KINGPIN",shieldVal:L.kingpin.shield,enemyVal:L.kingpin.enemy,enemyColor:L.kingpin.color}),u.jsx(Lc,{label:"HULK",shieldVal:L.hulk.shield,enemyVal:L.hulk.enemy,enemyColor:L.hulk.color}),u.jsx(Lc,{label:"DOOM",shieldVal:L.doom.shield,enemyVal:L.doom.enemy,enemyColor:L.doom.color})]}),u.jsx("div",{className:"w-1/3 flex flex-col gap-4",children:u.jsxs("div",{className:"flex-1 bg-slate-900/50 border border-cyan-800/50 p-4 flex flex-col items-center justify-center text-center clip-tactical",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase tracking-widest mb-1",children:"MISIONES ACTIVAS"}),u.jsx("div",{className:"text-5xl font-black text-white text-shadow-neon",children:e.length}),u.jsx("div",{className:"text-[9px] text-cyan-400 mt-2 bg-cyan-900/30 px-2 py-1 rounded border border-cyan-800",children:"PRIORIDAD ALTA"})]})})]}),u.jsxs("div",{className:"flex-1 p-6 overflow-y-auto pb-24",children:[u.jsx("h3",{className:"text-[10px] font-black text-cyan-600 uppercase tracking-[0.2em] mb-4",children:"REGISTRO DE OPERACIONES"}),u.jsx("div",{className:"space-y-3",children:e.map(V=>u.jsxs("div",{className:"bg-slate-900/80 border-l-4 border-cyan-500 p-4 hover:bg-cyan-900/20 transition-all group cursor-pointer relative overflow-hidden shadow-lg",children:[u.jsxs("div",{className:"flex justify-between items-center relative z-10",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-bold text-white group-hover:text-cyan-300 uppercase tracking-wider",children:V.title}),u.jsxs("div",{className:"text-[10px] text-gray-400 mt-1 font-mono",children:[V.location.state," // ",V.threatLevel]})]}),u.jsxs("div",{className:"text-[9px] font-bold border border-cyan-700 px-3 py-1 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-black transition-colors",children:[t.filter(W=>W.assignedMissionId===V.id).length," AGENTES"]})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-900/0 via-cyan-900/10 to-cyan-900/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 pointer-events-none"})]},V.id))})]})]}),u.jsxs("div",{className:"col-span-3 border-l border-cyan-900 bg-slate-900/30 flex flex-col h-full overflow-hidden",children:[u.jsx("div",{className:"p-6 border-b border-cyan-900 shrink-0",children:u.jsxs("button",{onClick:U,className:"w-full aspect-square border-2 border-dashed border-cyan-800 hover:border-cyan-400 hover:bg-cyan-900/20 transition-all group flex flex-col items-center justify-center gap-4 rounded-xl relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-cyan-500/5 scale-0 group-hover:scale-100 transition-transform duration-500 rounded-full"}),u.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-950 border-2 border-cyan-600 flex items-center justify-center group-hover:scale-110 transition-transform shadow-[0_0_20px_rgba(6,182,212,0.3)] z-10",children:u.jsx("span",{className:"text-3xl text-cyan-400 font-light",children:"+"})}),u.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-cyan-400 uppercase z-10",children:"ACCESO CEREBRO"})]})}),u.jsxs("div",{className:"p-6 border-b border-cyan-900 bg-slate-900/50 shrink-0",children:[u.jsx("h3",{className:"text-[10px] font-bold text-blue-400 uppercase tracking-widest mb-4",children:"RECURSOS OMEGA"}),u.jsxs("div",{className:"flex items-center justify-between mb-6 bg-black/40 p-3 rounded border border-blue-900/30",children:[u.jsx("div",{className:"flex gap-1.5",children:[...Array(5)].map((V,W)=>u.jsx("div",{className:`w-3 h-10 skew-x-[-10deg] border border-slate-700 ${W<f?"bg-cyan-500 shadow-[0_0_10px_#06b6d4]":"bg-slate-800/50"}`},W))}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-3xl font-black text-white leading-none",children:f}),u.jsx("div",{className:"text-[8px] text-gray-500 uppercase",children:"UNIDADES"})]})]}),g&&u.jsx("button",{onClick:g,className:"w-full py-3 bg-blue-900/30 border border-blue-600 text-blue-300 text-[9px] font-bold hover:bg-blue-600 hover:text-white transition-all uppercase tracking-widest clip-tactical-inv",children:"BUSCAR SUMINISTROS"})]}),u.jsxs("div",{className:"flex-1 p-6 overflow-y-auto pb-24",children:[u.jsx("h3",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-4",children:"HISTORIAL DE EVENTOS"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"border-l-2 border-emerald-500 pl-3 py-1 relative",children:[u.jsx("div",{className:"absolute w-2 h-2 bg-emerald-500 rounded-full -left-[5px] top-1.5 shadow-[0_0_10px_#10b981]"}),u.jsx("div",{className:"text-[9px] text-emerald-400 font-bold uppercase mb-1",children:"MISIN COMPLETADA"}),u.jsx("div",{className:"text-xs text-gray-400",children:"Base Alpha asegurada."})]}),u.jsxs("div",{className:"border-l-2 border-red-500 pl-3 py-1 relative",children:[u.jsx("div",{className:"absolute w-2 h-2 bg-red-500 rounded-full -left-[5px] top-1.5 shadow-[0_0_10px_#ef4444]"}),u.jsx("div",{className:"text-[9px] text-red-400 font-bold uppercase mb-1",children:"BAJA CONFIRMADA"}),u.jsx("div",{className:"text-xs text-gray-400",children:"Agente Coulson perdido en accin."})]})]})]})]})]}),u.jsx(t9,{isOpen:v.isOpen,onClose:()=>S({...v,isOpen:!1}),onConfirm:v.onConfirm,title:v.title,message:v.message,confirmText:v.confirmText,type:v.type}),w&&u.jsx(e9,{isOpen:w,onClose:()=>b(!1),onRecruit:i,templates:P,existingAliases:M,language:c,playerAlignment:d||"ALIVE"}),j&&u.jsx("div",{className:"fixed inset-0 z-[200] bg-black/95 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",onClick:()=>I(null),children:u.jsxs("div",{className:"relative flex flex-col items-center justify-center w-full h-full",children:[u.jsx("img",{src:j,alt:"Tactical Sheet",className:"h-[85vh] w-auto max-w-[95vw] object-contain border-4 border-yellow-500 shadow-[0_0_50px_rgba(234,179,8,0.5)] rounded-xl bg-black",onClick:V=>V.stopPropagation(),referrerPolicy:"no-referrer"}),u.jsx("button",{onClick:()=>I(null),className:"mt-4 px-8 py-2 bg-red-900/80 text-white font-bold tracking-widest border border-red-600 hover:bg-red-800 uppercase text-xs shadow-lg rounded",children:"CERRAR"})]})}),A&&u.jsx("div",{className:"absolute inset-0 z-50 bg-slate-950/90 backdrop-blur-md flex items-center justify-center p-12",onClick:()=>E(null),children:u.jsxs("div",{className:"bg-slate-900 border-2 border-cyan-500 w-full max-w-5xl h-[70vh] shadow-[0_0_100px_rgba(6,182,212,0.2)] flex clip-tactical",onClick:V=>V.stopPropagation(),children:[u.jsxs("div",{className:"w-1/3 h-full relative",children:[u.jsx("img",{src:A.imageUrl,className:"w-full h-full object-cover",referrerPolicy:"no-referrer"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"}),u.jsxs("div",{className:"absolute bottom-4 left-4",children:[u.jsx("h2",{className:"text-3xl font-black text-white uppercase italic tracking-tighter",children:A.alias}),u.jsx("p",{className:"text-cyan-400 font-mono text-sm",children:A.name})]})]}),u.jsxs("div",{className:"flex-1 p-8 bg-slate-900/95 relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4",children:u.jsx("button",{onClick:()=>E(null),className:"text-cyan-500 hover:text-white font-bold text-xl",children:""})}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-slate-950 p-4 border border-red-900/50 text-center",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"FUERZA"}),u.jsx("div",{className:"text-2xl font-black text-red-500",children:A.stats.strength})]}),u.jsxs("div",{className:"bg-slate-950 p-4 border border-green-900/50 text-center",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"AGILIDAD"}),u.jsx("div",{className:"text-2xl font-black text-green-500",children:A.stats.agility})]}),u.jsxs("div",{className:"bg-slate-950 p-4 border border-blue-900/50 text-center",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"INTELECTO"}),u.jsx("div",{className:"text-2xl font-black text-blue-500",children:A.stats.intellect})]})]}),u.jsx("div",{className:"prose prose-invert flex-1 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-cyan-900",children:u.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed border-l-2 border-cyan-800 pl-4 italic",children:['"',A.bio,'"']})}),u.jsxs("div",{className:"mt-8 flex gap-4 justify-end items-center border-t border-cyan-900/50 pt-6",children:[A.characterSheetUrl&&u.jsxs("button",{onClick:()=>I(A.characterSheetUrl),className:"px-6 py-3 bg-yellow-900/20 border border-yellow-600 text-yellow-500 hover:bg-yellow-900/40 hover:text-yellow-200 font-bold uppercase tracking-widest text-xs transition-all flex items-center gap-2 group",children:[u.jsx("span",{className:"text-lg group-hover:scale-110 transition-transform",children:""}),"FICHA TCTICA"]}),u.jsx("button",{className:"px-8 py-3 bg-cyan-600 hover:bg-cyan-500 text-black font-black uppercase tracking-widest clip-tactical shadow-[0_0_20px_rgba(6,182,212,0.5)] transition-all",children:"ASIGNAR MISIN"})]})]})]})})]})},s9=({url:t,title:e,onClose:n})=>{const[r,s]=N.useState({x:50,y:50}),[i,o]=N.useState({w:600,h:500}),[a,c]=N.useState(!1),[d,h]=N.useState(!1),[p,f]=N.useState(!1),[g,_]=N.useState(!1),[x,C]=N.useState({x:0,y:0}),E=N.useRef({x:50,y:50,w:600,h:500}),b=(A=>A.includes("drive.google.com")?A.replace(/\/view.*/,"/preview").replace(/\/edit.*/,"/preview"):A.includes("dropbox.com")?A.replace("?dl=0","").replace("?dl=1","")+"?raw=1":A)(t),P=t.includes("drive.google.com"),D=A=>{a||(f(!0),C({x:A.clientX-r.x,y:A.clientY-r.y}))},j=A=>{A.stopPropagation(),_(!0)};N.useEffect(()=>{const A=O=>{p&&s({x:O.clientX-x.x,y:O.clientY-x.y}),g&&o({w:Math.max(300,O.clientX-r.x),h:Math.max(200,O.clientY-r.y)})},k=()=>{f(!1),_(!1)};return p||g?(window.addEventListener("mousemove",A),window.addEventListener("mouseup",k),document.body.style.userSelect="none"):document.body.style.userSelect="",()=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",k),document.body.style.userSelect=""}},[p,g,x,r]);const I=()=>{a?(s({x:E.current.x,y:E.current.y}),o({w:E.current.w,h:E.current.h})):(E.current={...r,...i},s({x:0,y:0})),c(!a),h(!1)},v=()=>{h(!d),a&&c(!1)},S={left:r.x,top:r.y,width:a?"100vw":i.w,height:d?"auto":a?"100vh":i.h,position:"fixed",zIndex:1e3};return u.jsxs("div",{style:S,className:`flex flex-col bg-slate-900 border-2 border-cyan-500 shadow-[0_0_30px_rgba(0,0,0,0.8)] rounded-sm overflow-hidden transition-all duration-75 ${a?"rounded-none border-0":""}`,children:[u.jsxs("div",{onMouseDown:D,className:`flex justify-between items-center p-2 bg-slate-800 border-b border-cyan-700 select-none ${a?"":"cursor-move"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 text-cyan-400 font-bold text-xs tracking-widest overflow-hidden",children:[u.jsx("span",{children:""}),u.jsx("span",{className:"truncate max-w-[200px]",children:e})]}),u.jsxs("div",{className:"flex gap-1 items-center",children:[u.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"w-6 h-6 flex items-center justify-center bg-slate-700 hover:bg-cyan-800 text-cyan-300 text-xs border border-slate-600 mr-2",title:"Abrir en pestaa nueva",onMouseDown:A=>A.stopPropagation(),children:""}),u.jsx("button",{onClick:v,className:"w-6 h-6 flex items-center justify-center bg-slate-700 hover:bg-cyan-800 text-white text-xs border border-slate-600",children:"_"}),u.jsx("button",{onClick:I,className:"w-6 h-6 flex items-center justify-center bg-slate-700 hover:bg-cyan-800 text-white text-xs border border-slate-600",children:a?"":""}),u.jsx("button",{onClick:n,className:"w-6 h-6 flex items-center justify-center bg-red-900 hover:bg-red-700 text-white text-xs border border-red-700",children:""})]})]}),!d&&u.jsxs("div",{className:"flex-1 relative bg-gray-800 flex flex-col",children:[(p||g)&&u.jsx("div",{className:"absolute inset-0 z-50 bg-transparent"}),P?u.jsx("iframe",{src:b,className:"w-full h-full border-0 bg-white",title:"PDF Viewer",allow:"autoplay"}):u.jsx("object",{data:b,type:"application/pdf",className:"w-full h-full border-0 bg-white",children:u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 gap-4",children:[u.jsx("p",{children:"El navegador no puede visualizar este archivo directamente."}),u.jsx("a",{href:t,target:"_blank",rel:"noreferrer",className:"px-4 py-2 bg-cyan-600 text-white rounded",children:"Descargar PDF"})]})}),!a&&u.jsx("div",{onMouseDown:j,className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50 bg-cyan-500/50 hover:bg-cyan-400 clip-triangle",style:{clipPath:"polygon(100% 0, 0 100%, 100% 100%)"}})]})]})},nI=({mission:t,isOpen:e,onClose:n,onComplete:r,onReactivate:s,onEdit:i,onDelete:o,language:a,isCompleted:c,isEditorMode:d})=>{const[h,p]=N.useState(!1),[f,g]=N.useState(!1),[_,x]=N.useState(!1),[C,E]=N.useState(!1),[w,b]=N.useState([]),[P,D]=N.useState(!1),j=Wn[a].missionModal,I=N.useRef([]);if(N.useEffect(()=>{if(p(!1),g(!1),x(!1),E(!1),e&&t.description&&!c&&!f){b([]),D(!0);let O=0,R=0;const M=t.description,L=Array(M.length).fill(""),U=()=>{if(O>=M.length){D(!1);return}L[O]=M[O].substring(0,R+1),b([...L]),R++,R>=M[O].length&&(O++,R=0);const V=Math.random()*10+5,W=setTimeout(U,V);I.current.push(W)},K=setTimeout(U,300);I.current.push(K)}else b(t.description||[]),D(!1);return()=>{I.current.forEach(clearTimeout),I.current=[]}},[t,e]),!e)return null;const v=()=>{p(!0);const O=setTimeout(()=>{if(p(!1),g(!0),!t.outcomeText){const R=setTimeout(()=>{r(t.id),n()},1500);I.current.push(R)}},3e3);I.current.push(O)},S=()=>{r(t.id),n()},A=()=>{s&&(s(t.id),n())},k=f&&t.outcomeText;return u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[u.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-md",onClick:n}),C&&t.pdfUrl&&u.jsx(s9,{url:t.pdfUrl,title:`DOC CLASIFICADO: ${t.title}`,onClose:()=>E(!1)}),u.jsxs("div",{className:`relative w-full max-w-3xl glass-panel shadow-[0_0_80px_rgba(0,0,0,0.6)] flex flex-col max-h-[90vh] overflow-hidden rounded-sm ${c||f?"border-emerald-600/50 shadow-emerald-900/10":"border-cyan-600/50 shadow-cyan-900/10"}`,children:[u.jsxs("div",{className:`border-b p-5 flex justify-between items-center relative ${c||f?"bg-emerald-900/20 border-emerald-600/50":"bg-cyan-900/20 border-cyan-600/50"}`,children:[u.jsx("div",{className:`absolute top-0 left-0 w-32 h-1 ${c||f?"bg-emerald-400 shadow-[0_0_8px_rgba(52,211,153,0.5)]":"bg-cyan-400 shadow-[0_0_8px_rgba(34,211,238,0.5)]"}`}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h2",{className:`text-xl md:text-2xl font-black tracking-[0.2em] font-mono uppercase ${c||f?"text-emerald-400":"text-cyan-400"}`,children:c||f?"MISSION COMPLETE":j.title}),u.jsxs("span",{className:"text-[9px] font-mono text-cyan-700/80 tracking-widest font-bold",children:["SERIAL_KEY: ",t.id]})]}),u.jsx("div",{className:"flex gap-2 items-center",children:u.jsx("div",{className:`font-bold border-2 px-3 py-1 text-[10px] tracking-widest font-mono ${c||f?"text-emerald-400 border-emerald-500/50 bg-emerald-950/20":"text-red-500 border-red-500/50 bg-red-950/20 animate-pulse"}`,children:c||f?"ARCHIVED":"TOP SECRET"})})]}),u.jsxs("div",{className:"p-8 overflow-y-auto font-sans text-cyan-50/90 scrollbar-thin scrollbar-thumb-cyan-900 scrollbar-track-slate-950/50",children:[u.jsxs("div",{className:"mb-8 border-b border-cyan-900/50 pb-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 mb-4",children:[u.jsx("h3",{className:"text-3xl md:text-4xl font-black text-white/90 tracking-tight leading-none uppercase",children:t.title}),u.jsxs("div",{className:"text-right border-l md:border-l-0 md:pl-0 pl-4 border-cyan-800",children:[u.jsx("div",{className:"text-[9px] text-cyan-600 font-bold uppercase tracking-[0.3em] mb-1",children:j.threat}),u.jsx("div",{className:`text-lg md:text-xl font-black tracking-widest font-mono ${c?"text-emerald-500":"text-red-600"}`,children:c?"NEUTRALIZED":t.threatLevel||"UNKNOWN"})]})]}),u.jsxs("div",{className:"flex flex-wrap gap-2 text-[10px] font-mono font-bold text-cyan-500/80",children:[u.jsxs("span",{className:"bg-cyan-950/30 px-3 py-1 border border-cyan-800/30 rounded-full tracking-tighter",children:["OS_ZONE: ",t.location.state.toUpperCase()]}),u.jsxs("span",{className:"bg-cyan-950/30 px-3 py-1 border border-cyan-800/30 rounded-full tracking-tighter",children:["NAV_POS: ",t.location.coordinates[1].toFixed(4),", ",t.location.coordinates[0].toFixed(4)]})]}),t.requirements&&t.requirements.length>0&&u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-[9px] text-cyan-600 font-bold uppercase mb-1 tracking-widest",children:"REQUISITOS TCTICOS"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:t.requirements.map((O,R)=>u.jsxs("span",{className:"text-[10px] font-bold bg-blue-950 text-blue-300 border border-blue-800 px-2 py-0.5 rounded shadow-sm",children:[" ",O]},R))})]})]}),k?u.jsxs("div",{className:"animate-fade-in space-y-4",children:[u.jsxs("h4",{className:"text-[10px] font-black tracking-[0.4em] uppercase text-emerald-500 flex items-center gap-2",children:[u.jsx("span",{className:"w-8 h-[1px] bg-emerald-500/30"})," ",j.outcomeTitle]}),u.jsx("div",{className:"p-6 bg-emerald-950/20 border border-emerald-500/30 text-emerald-100 text-sm md:text-base leading-relaxed whitespace-pre-wrap font-medium rounded-sm",children:t.outcomeText})]}):u.jsxs(u.Fragment,{children:[t.pdfUrl&&u.jsx("div",{className:"mb-6 animate-fade-in",children:u.jsxs("button",{onClick:()=>E(!0),className:"w-full py-3 bg-red-900/20 border border-red-500/50 hover:bg-red-900/40 hover:border-red-500 text-red-300 font-bold tracking-widest flex items-center justify-center gap-3 transition-all group shadow-[0_0_15px_rgba(220,38,38,0.2)]",children:[u.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform",children:""}),u.jsx("span",{children:"ABRIR DOCUMENTO CLASIFICADO (PDF)"}),u.jsx("span",{className:"text-xs opacity-50 group-hover:opacity-100 border-l border-red-700 pl-2 ml-2",children:"CLICK TO OPEN"})]})}),u.jsxs("div",{className:"mb-8 group",children:[u.jsxs("h4",{className:`text-[10px] font-black tracking-[0.4em] mb-4 uppercase flex items-center gap-2 ${c?"text-emerald-500":"text-cyan-500"}`,children:[u.jsx("span",{className:`w-8 h-[1px] ${c?"bg-emerald-500/30":"bg-cyan-500/30"}`})," ",j.briefing]}),u.jsx("div",{className:"space-y-4 text-sm md:text-base leading-relaxed text-slate-300 font-medium font-sans",children:(P?w:t.description).map((O,R)=>u.jsx("p",{className:P&&R===w.length-1?"after:content-['_'] after:animate-pulse after:text-cyan-400":"",children:O},R))})]}),u.jsxs("div",{className:"bg-slate-950/40 border border-white/5 p-6 rounded-sm mb-8",children:[u.jsxs("h4",{className:`text-[10px] font-black tracking-[0.4em] mb-6 uppercase flex items-center gap-2 ${c?"text-emerald-500":"text-cyan-500"}`,children:[u.jsx("span",{className:`w-8 h-[1px] ${c?"bg-emerald-500/30":"bg-cyan-500/30"}`})," ",j.objectives]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.objectives.map((O,R)=>u.jsxs("div",{className:"flex gap-4 group",children:[u.jsx("div",{className:`w-8 h-8 shrink-0 border-2 rounded-sm flex items-center justify-center text-[10px] font-black transition-all duration-500 ${c||f?"bg-emerald-500 border-emerald-500 text-black":"bg-slate-900 border-slate-700 text-slate-500 group-hover:border-cyan-500 group-hover:text-cyan-400"}`,children:c||f?"DONE":(R+1).toString().padStart(2,"0")}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h5",{className:`font-black text-xs tracking-widest uppercase mb-1 transition-colors ${c||f?"text-emerald-400":"text-white/80 group-hover:text-cyan-400"}`,children:O.title}),u.jsx("p",{className:"text-[11px] text-slate-500 leading-snug font-medium",children:O.desc})]})]},R))})]})]})]}),u.jsx("div",{className:"p-6 border-t border-cyan-900/50 bg-slate-950/40 flex justify-between items-center gap-4",children:k?u.jsx("div",{className:"w-full flex justify-end",children:u.jsx("button",{onClick:S,className:"px-8 py-3 bg-emerald-600 hover:bg-emerald-600 text-black text-[10px] font-black tracking-[0.3em] shadow-[0_0_30px_rgba(16,185,129,0.2)] transition-all uppercase font-mono",children:j.closeReport})}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:n,disabled:h,className:"px-6 py-3 border border-cyan-700/50 text-cyan-500 text-[10px] font-black tracking-widest hover:bg-cyan-900/20 hover:text-cyan-300 transition-all disabled:opacity-50 uppercase font-mono",children:j.cancel}),u.jsxs("div",{className:"flex gap-4",children:[t.layoutUrl&&u.jsxs("button",{onClick:()=>x(!0),className:"px-5 py-3 bg-yellow-600 hover:bg-yellow-500 text-black text-[10px] font-black tracking-widest shadow-[0_0_20px_rgba(234,179,8,0.3)] transition-all flex items-center gap-2 uppercase font-mono",children:[u.jsx("span",{children:""})," MAP"]}),c&&s&&u.jsx("button",{onClick:A,className:"px-6 py-3 border border-yellow-600/50 text-yellow-500 text-[10px] font-black tracking-widest hover:bg-yellow-900/20 hover:text-yellow-300 transition-all uppercase font-mono",children:j.reactivate}),u.jsx("button",{disabled:c||h||f,className:`px-8 py-3 text-black text-[10px] font-black tracking-widest border-2 shadow transition-all uppercase font-mono
                                ${c||f?"bg-emerald-900/30 border-emerald-800 text-emerald-500 cursor-not-allowed":"bg-emerald-500 hover:bg-emerald-400 border-emerald-400 shadow-[0_0_25px_rgba(16,185,129,0.4)]"}
                                ${h?"animate-pulse cursor-wait":""}
                            `,onClick:()=>{c||v()},children:h?j.sending:f||c?` ${j.sent}`:j.complete}),!c&&!h&&!f&&u.jsx("button",{className:"px-8 py-3 bg-red-600 hover:bg-red-500 text-white text-[10px] font-black tracking-widest shadow-[0_0_20px_rgba(239,68,68,0.3)] transition-all uppercase font-mono",onClick:n,children:j.accept})]})]})}),_&&t.layoutUrl&&u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",onClick:()=>x(!1),children:u.jsxs("div",{className:"relative max-w-full max-h-full flex flex-col items-center",children:[u.jsx("img",{src:t.layoutUrl,alt:"Tactical Map",className:"max-w-[95vw] max-h-[85vh] object-contain border-2 border-cyan-500 shadow-[0_0_50px_rgba(6,182,212,0.3)]",onClick:O=>O.stopPropagation(),referrerPolicy:"no-referrer"}),u.jsx("button",{onClick:()=>x(!1),className:"mt-4 px-6 py-2 bg-red-900/80 text-white font-bold tracking-widest border border-red-600 hover:bg-red-800",children:"CERRAR VISOR"})]})}),u.jsx("div",{className:`absolute bottom-2 right-2 w-4 h-4 border-b border-r ${c||f?"border-emerald-500":"border-cyan-500"}`}),u.jsx("div",{className:`absolute bottom-2 left-2 w-4 h-4 border-b border-l ${c||f?"border-emerald-500":"border-cyan-500"}`})]})]})},i9=({event:t,isOpen:e,onAcknowledge:n,language:r,playerAlignment:s})=>{if(!e)return null;const i=Wn[r].events;let o="anomaly";t.stage==="SURFER"&&(o="surfer"),t.stage==="GALACTUS"&&(o="galactus");const a=s==="ZOMBIE"?"zombie":"alive",c=i[o][a],d=s==="ZOMBIE",h=d?"border-lime-600":"border-red-600",p=d?"text-lime-500":"text-red-500",f=d?"bg-lime-900/50 border-lime-500 text-lime-200 hover:bg-lime-600":"bg-red-900/50 border-red-500 text-red-200 hover:bg-red-600",g=d?"shadow-[0_0_100px_rgba(101,163,13,0.5)]":"shadow-[0_0_100px_rgba(220,38,38,0.5)]";return u.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-sm animate-fade-in",children:u.jsxs("div",{className:`w-full max-w-2xl bg-slate-900 border-4 ${h} ${g} flex flex-col overflow-hidden relative`,children:[u.jsxs("div",{className:`${d?"bg-lime-600":"bg-red-600"} text-black font-bold text-center py-2 tracking-[0.5em] text-lg animate-pulse`,children:["/// ",d?"HUNGER ALERT":"EMERGENCY INTERRUPTION"," ///"]}),u.jsxs("div",{className:"p-8 flex flex-col items-center text-center max-h-[80vh] overflow-y-auto",children:["image"in c&&c.image&&u.jsx("div",{className:`w-full mb-6 relative border-2 ${d?"border-lime-500/50":"border-red-500/50"} shadow-lg overflow-hidden group bg-black/50`,children:u.jsxs("div",{className:"relative w-full",children:[u.jsx("div",{className:`absolute top-2 left-2 ${d?"bg-lime-600":"bg-red-600"} text-white text-[10px] font-bold px-2 py-0.5 animate-pulse z-10`,children:"LIVE FEED // SIGNAL UNSTABLE"}),u.jsx("img",{src:c.image,alt:"Event Visual",className:"w-full h-auto object-cover opacity-90 contrast-125 saturate-50 animate-flash",referrerPolicy:"no-referrer"}),u.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(transparent_50%,rgba(0,0,0,0.5)_50%)] bg-[length:100%_4px] pointer-events-none opacity-50"}),u.jsx("div",{className:"absolute inset-0 bg-white/5 animate-pulse pointer-events-none mix-blend-overlay"})]})}),u.jsx("h2",{className:`text-2xl md:text-3xl font-bold ${p} mb-6 font-mono tracking-widest drop-shadow-md`,children:c.title}),u.jsx("div",{className:`w-full h-px ${d?"bg-lime-900":"bg-red-900"} mb-6`}),u.jsx("p",{className:`text-base md:text-lg ${d?"text-lime-100":"text-red-100"} font-mono leading-relaxed max-w-prose`,children:c.desc}),u.jsx("div",{className:`w-full h-px ${d?"bg-lime-900":"bg-red-900"} mt-6 mb-8`}),u.jsx("button",{onClick:n,className:`px-8 py-4 border-2 font-bold tracking-widest transition-all duration-300 shadow-lg ${f}`,children:c.ack})]}),u.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10 bg-[linear-gradient(transparent_50%,rgba(0,0,0,0.5)_50%)] bg-[length:100%_4px]"})]})})},rI={Alabama:[-86.9,32.8],Alaska:[-152.4,61.3],Arizona:[-111.4,34],Arkansas:[-92.3,34.9],California:[-119.6,36.1],Colorado:[-105.3,39],Connecticut:[-72.7,41.6],Delaware:[-75.5,39.3],"District of Columbia":[-77,38.9],Florida:[-81.6,27.7],Georgia:[-83.6,33],Hawaii:[-157.5,20.5],Idaho:[-114.4,44.2],Illinois:[-89,40.3],Indiana:[-86.1,40.2],Iowa:[-93.2,42],Kansas:[-96.7,38.5],Kentucky:[-84.2,37.6],Louisiana:[-91.8,31.1],Maine:[-69.3,45.3],Maryland:[-76.8,39],Massachusetts:[-71.5,42.2],Michigan:[-84.5,43.3],Minnesota:[-94.6,45.6],Mississippi:[-89.6,32.7],Missouri:[-92.2,38.4],Montana:[-110.4,46.9],Nebraska:[-99.9,41.1],Nevada:[-117,38.8],"New Hampshire":[-71.5,43.4],"New Jersey":[-74.5,40.2],"New Mexico":[-106.2,34.8],"New York":[-74.9,42.1],"North Carolina":[-79.8,35.6],"North Dakota":[-99.9,47.5],Ohio:[-82.7,40.3],Oklahoma:[-96.9,35.5],Oregon:[-120.6,44],Pennsylvania:[-77.2,40.5],"Rhode Island":[-71.5,41.6],"South Carolina":[-80.9,33.8],"South Dakota":[-99.9,44.2],Tennessee:[-86.3,35.7],Texas:[-97.5,31],Utah:[-111.8,39.2],Vermont:[-72.7,44],Virginia:[-78.1,37.7],Washington:[-120.7,47.4],"West Virginia":[-80.9,38.4],Wisconsin:[-89.6,44.2],Wyoming:[-107.3,42.7]},yf=Object.keys(rI).sort(),Dc=["Infeccin latente (Fcil)","Hambre insaciable (Intermedia)","Plaga desatada (Difcil)","Apocalipsis Gamma (Muy difcil)"],sI=({isOpen:t,onClose:e,onSave:n,language:r,initialData:s,existingMissions:i=[]})=>{const o=Wn[r].missionEditor,[a,c]=N.useState(""),[d,h]=N.useState(""),[p,f]=N.useState(""),[g,_]=N.useState(yf[0]),[x,C]=N.useState(Dc[1]),[E,w]=N.useState("STANDARD"),[b,P]=N.useState("BOTH"),[D,j]=N.useState(!1),[I,v]=N.useState("NORMAL"),[S,A]=N.useState([]),[k,O]=N.useState(""),[R,M]=N.useState([{title:"",desc:""}]),[L,U]=N.useState([]),[K,V]=N.useState(cn[0].id),[W,Q]=N.useState(""),[te,ae]=N.useState(""),[$,Y]=N.useState(!1);if(N.useEffect(()=>{s?(c(s.title),h(s.description.join(`
`)),f(s.outcomeText||""),_(s.location.state),C(s.threatLevel||Dc[1]),w(s.type||"STANDARD"),P(s.alignment||"BOTH"),v(s.triggerStage||"NORMAL"),j(s.isIntroMission||!1),s.prereqs&&s.prereqs.length>0?A(s.prereqs):s.prereq?A([s.prereq]):A([]),M(s.objectives.length>0?s.objectives:[{title:"",desc:""}]),U(s.requirements||[]),Q(s.layoutUrl||""),ae(s.pdfUrl||"")):(c(""),h(""),f(""),_(yf[0]),C(Dc[1]),w("STANDARD"),P("BOTH"),j(!1),v("NORMAL"),A([]),M([{title:"",desc:""}]),U([]),Q(""),ae(""))},[s,t]),!t)return null;const X=()=>{M([...R,{title:"",desc:""}])},ne=(z,le,ve)=>{const Ee=[...R];Ee[z]={...Ee[z],[le]:ve},M(Ee)},ie=()=>{L.includes(K)||U([...L,K])},ye=z=>{U(L.filter(le=>le!==z))},Me=()=>{k&&!S.includes(k)&&(A([...S,k]),O(""))},rt=z=>{A(S.filter(le=>le!==z))},be=async z=>{z.preventDefault(),Y(!0);let le;if(s&&s.location.state===g)le=s.location.coordinates;else{const Ee=rI[g]||[-98.5,39.8],De=(Math.random()-.5)*2,Ie=(Math.random()-.5)*1.5;le=[Ee[0]+De,Ee[1]+Ie]}const ve={title:a,description:d.split(`
`).filter(Ee=>Ee.trim()!==""),outcomeText:p.trim()||null,location:{state:g,coordinates:le},threatLevel:x,type:E,alignment:b,isIntroMission:D,triggerStage:E==="GALACTUS"?I:null,objectives:R.filter(Ee=>Ee.title&&Ee.desc),prereq:S.length>0?S[0]:null,prereqs:S,requirements:L,layoutUrl:W.trim()||null,pdfUrl:te.trim()||null};try{if(s&&s.id)await lA(s.id,ve),n({...ve,id:s.id});else{const Ee=await aA(ve);n({...ve,id:Ee})}e()}catch(Ee){console.error(Ee),alert("Failed to save mission: "+Ee.message)}finally{Y(!1)}},Se=i.filter(z=>{if(s&&z.id===s.id||S.includes(z.id))return!1;const le=z.alignment||"ALIVE";return b==="BOTH"||le==="BOTH"?!0:le===b}),q=z=>{const le=cn.find(ve=>ve.id===z);return le?le.name:z};return u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-950/90 backdrop-blur-sm p-4",children:u.jsxs("div",{className:"w-full max-w-4xl bg-slate-900 border-2 border-cyan-500 shadow-2xl flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"bg-cyan-900/40 p-4 border-b border-cyan-600 flex justify-between items-center",children:[u.jsx("h3",{className:"text-cyan-300 font-bold tracking-widest uppercase",children:s?`EDITING: ${s.title}`:o.title}),u.jsx("button",{onClick:e,className:"text-cyan-500 hover:text-white",children:""})]}),u.jsxs("form",{onSubmit:be,className:"p-6 overflow-y-auto font-mono flex flex-col gap-4 scrollbar-thin scrollbar-thumb-cyan-900",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:o.missionTitle}),u.jsx("input",{value:a,onChange:z=>c(z.target.value),required:!0,className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 focus:border-cyan-400 outline-none"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:o.location}),u.jsx("select",{value:g,onChange:z=>_(z.target.value),className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200",children:yf.map(z=>u.jsx("option",{value:z,children:z},z))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:o.threat}),u.jsx("select",{value:x,onChange:z=>C(z.target.value),className:"w-full bg-slate-950 border border-cyan-800 p-2 text-yellow-400 font-bold",children:Dc.map(z=>u.jsx("option",{value:z,children:z},z))})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:o.type}),u.jsxs("select",{value:E,onChange:z=>w(z.target.value),className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200",children:[u.jsx("option",{value:"STANDARD",children:"STANDARD"}),u.jsx("option",{value:"INTRODUCTORY",children:"INTRODUCTORIA (VERDE)"}),u.jsx("option",{value:"SHIELD_BASE",children:"BASE S.H.I.E.L.D."}),u.jsx("option",{value:"BOSS_KINGPIN",children:"BOSS - KINGPIN"}),u.jsx("option",{value:"BOSS_MAGNETO",children:"BOSS - MAGNETO"}),u.jsx("option",{value:"BOSS_DOOM",children:"BOSS - DOOM"}),u.jsx("option",{value:"BOSS_HULK",children:"BOSS - HULK"}),u.jsx("option",{value:"GALACTUS",children:"EVENTO GALACTUS"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"MODO"}),u.jsxs("select",{value:b,onChange:z=>{P(z.target.value),A([])},className:"w-full bg-slate-950 border border-cyan-800 p-2 text-white font-bold",children:[u.jsx("option",{value:"ALIVE",children:" HROES"}),u.jsx("option",{value:"ZOMBIE",children:" ZOMBIES"}),u.jsx("option",{value:"BOTH",children:" AMBOS"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-3 p-3 border border-emerald-500/50 bg-emerald-900/10",children:[u.jsx("input",{type:"checkbox",id:"isIntro",checked:D,onChange:z=>j(z.target.checked),className:"w-5 h-5 accent-emerald-500 cursor-pointer"}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"isIntro",className:"text-xs font-bold text-emerald-400 cursor-pointer uppercase",children:"ES MISIN INICIAL (INTRO)"}),u.jsx("div",{className:"text-[9px] text-emerald-600",children:"Aparecer automticamente tras la intro."})]})]}),E==="GALACTUS"&&u.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/50 p-2 animate-fade-in",children:[u.jsx("label",{className:"text-[10px] text-purple-400 font-bold block mb-1 uppercase",children:"ETAPA DE ACTIVACIN"}),u.jsxs("select",{value:I,onChange:z=>v(z.target.value),className:"w-full bg-slate-950 border border-purple-500 p-2 text-purple-200 font-bold",children:[u.jsx("option",{value:"SURFER",children:"LLEGADA DE SILVER SURFER (ETAPA 2)"}),u.jsx("option",{value:"GALACTUS",children:"LLEGADA DE GALACTUS (ETAPA 3)"})]})]}),u.jsxs("div",{className:"bg-slate-900/50 border border-cyan-900/30 p-3",children:[u.jsxs("label",{className:"text-[10px] text-cyan-600 font-bold block mb-2 uppercase",children:[o.prereq," (MLTIPLES)"]}),u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsxs("select",{value:k,onChange:z=>O(z.target.value),className:"flex-1 bg-slate-950 border border-cyan-800 p-2 text-xs text-cyan-200 min-w-0",children:[u.jsx("option",{value:"",children:"-- SELECCIONAR MISIN --"}),Se.map(z=>u.jsxs("option",{value:z.id,children:[z.title," (ID: ",z.id,")"]},z.id))]}),u.jsx("button",{type:"button",onClick:Me,disabled:!k,className:"bg-cyan-900/50 border border-cyan-600 text-cyan-300 px-3 py-1 text-[10px] font-bold uppercase disabled:opacity-50 shrink-0",children:"+ AADIR"})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.map(z=>{const le=i.find(ve=>ve.id===z);return u.jsxs("div",{className:"flex items-center gap-2 bg-cyan-950 border border-cyan-800 px-2 py-1 rounded",children:[u.jsx("span",{className:"text-[10px] text-cyan-300 truncate max-w-[150px]",children:le?le.title:z}),u.jsx("button",{type:"button",onClick:()=>rt(z),className:"text-red-400 font-bold hover:text-red-200",children:""})]},z)}),S.length===0&&u.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"Sin requisitos previos"})]})]}),u.jsxs("div",{className:"bg-slate-900/50 border border-blue-900/30 p-3",children:[u.jsx("label",{className:"text-[10px] text-blue-400 font-bold block mb-2 uppercase",children:"REQUISITOS (EXPANSIONES)"}),u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsx("select",{value:K,onChange:z=>V(z.target.value),className:"flex-1 bg-slate-950 border border-blue-800 p-2 text-xs text-blue-200 min-w-0",children:cn.map(z=>u.jsx("option",{value:z.id,children:z.name},z.id))}),u.jsx("button",{type:"button",onClick:ie,className:"bg-blue-900/50 border border-blue-600 text-blue-300 px-3 py-1 text-[10px] font-bold uppercase shrink-0",children:"+ AADIR"})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:L.map((z,le)=>u.jsxs("div",{className:"flex items-center gap-2 bg-blue-950 border border-blue-800 px-2 py-1 rounded",children:[u.jsx("span",{className:"text-[10px] text-blue-300",children:q(z)}),u.jsx("button",{type:"button",onClick:()=>ye(z),className:"text-red-400 font-bold",children:""})]},le))})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-slate-900/50 border border-cyan-900/30 p-3",children:[u.jsx("label",{className:"text-[10px] text-cyan-500 font-bold block mb-2 uppercase",children:"RECURSOS EXTERNOS"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-cyan-700 block mb-1",children:"URL IMAGEN MAPA (LAYOUT)"}),u.jsx("input",{value:W,onChange:z=>Q(z.target.value),placeholder:"https://...",className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 text-xs"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-cyan-700 block mb-1",children:"URL ARCHIVO PDF (MISIN)"}),u.jsx("input",{value:te,onChange:z=>ae(z.target.value),placeholder:"https://... (Drive/Dropbox/Direct Link)",className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 text-xs"})]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:[o.description," (FLAVOR TEXT)"]}),u.jsx("textarea",{value:d,onChange:z=>h(z.target.value),rows:8,className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 text-xs"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-emerald-600 font-bold block mb-1 uppercase",children:o.outcome}),u.jsx("textarea",{value:p,onChange:z=>f(z.target.value),rows:4,placeholder:"Texto que aparecer al completar la misin...",className:"w-full bg-slate-950 border border-emerald-800 p-2 text-emerald-200 text-xs focus:border-emerald-500 outline-none"})]})]})]}),u.jsxs("div",{className:"bg-slate-950/50 p-4 border border-cyan-900/50 mt-2",children:[u.jsxs("div",{className:"flex justify-between mb-2",children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold uppercase",children:o.objectives}),u.jsxs("button",{type:"button",onClick:X,className:"text-[10px] text-cyan-400 hover:text-white border border-cyan-700 px-2 uppercase",children:["+ ",o.addObjective]})]}),R.map((z,le)=>u.jsxs("div",{className:"mb-2 grid grid-cols-1 md:grid-cols-2 gap-2",children:[u.jsx("input",{placeholder:o.objTitle,value:z.title,onChange:ve=>ne(le,"title",ve.target.value),className:"bg-slate-900 border border-cyan-900 p-1 text-xs text-cyan-200"}),u.jsx("input",{placeholder:o.objDesc,value:z.desc,onChange:ve=>ne(le,"desc",ve.target.value),className:"bg-slate-900 border border-cyan-900 p-1 text-xs text-gray-400"})]},le))]}),u.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-cyan-800",children:[u.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-red-900 text-red-500 text-xs font-bold uppercase hover:bg-red-900/20",children:o.cancel}),u.jsx("button",{type:"submit",disabled:$,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold uppercase shadow-[0_0_15px_rgba(6,182,212,0.4)] transition-all",children:$?"GUARDANDO...":o.save})]})]})]})})},o9=["BRAWLER","SCOUT","TACTICIAN","BLASTER"],iI=({isOpen:t,onClose:e,language:n,initialData:r,onSave:s})=>{const[i,o]=N.useState(""),[a,c]=N.useState(""),[d,h]=N.useState("BRAWLER"),[p,f]=N.useState({strength:5,agility:5,intellect:5}),[g,_]=N.useState(""),[x,C]=N.useState(""),[E,w]=N.useState(""),[b,P]=N.useState("ALIVE"),[D,j]=N.useState(void 0),[I,v]=N.useState(1),[S,A]=N.useState(0),[k,O]=N.useState(0),[R,M]=N.useState(!1),[L,U]=N.useState(!1),[K,V]=N.useState([]),[W,Q]=N.useState("");if(N.useEffect(()=>{r?(o(r.defaultName),c(r.alias||""),h(r.defaultClass),f(r.defaultStats),_(r.bio||""),C(r.imageUrl),w(r.characterSheetUrl||""),P(r.defaultAlignment||"ALIVE"),j(r.relatedHeroId),r.imageParams?(v(r.imageParams.scale),A(r.imageParams.x),O(r.imageParams.y)):(v(1),A(0),O(0))):(o(""),c(""),h("BRAWLER"),f({strength:5,agility:5,intellect:5}),_(""),C(""),w(""),P("ALIVE"),j(void 0),v(1),A(0),O(0))},[r,t]),N.useEffect(()=>{L&&K.length===0&&ko().then(V)},[L]),!t)return null;const te=async Y=>{Y.preventDefault(),M(!0);const X={scale:I,x:S,y:k},ne={defaultName:i,alias:a.toUpperCase(),defaultClass:d,defaultStats:p,bio:g,imageUrl:x,characterSheetUrl:E,defaultAlignment:b,objectives:(r==null?void 0:r.objectives)||[],currentStory:(r==null?void 0:r.currentStory)||"",relatedHeroId:D||null,imageParams:X};try{r&&r.id?(await rA(r.id,ne),alert("PERSONAJE ACTUALIZADO")):(await sA(ne),alert("PERSONAJE CREADO")),s&&s(),e()}catch(ie){console.error(ie),alert("ERROR AL GUARDAR")}finally{M(!1)}},ae=K.filter(Y=>{const X=Y.defaultAlignment!==b,ne=Y.alias.toLowerCase().includes(W.toLowerCase()),ie=Y.id!==(r==null?void 0:r.id);return X&&ne&&ie}),$=()=>{if(D==="NO_VARIANT")return" SIN VARIANTE (INMUNE/IRREVERSIBLE)";if(D){const Y=K.find(X=>X.id===D);return Y?`VINCULADO A: ${Y.alias}`:`ID: ${D}`}return"SIN VINCULACIN"};return u.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-slate-950/60 backdrop-blur-md p-4 animate-fade-in",children:u.jsxs("div",{className:"w-full max-w-3xl glass-panel shadow-2xl flex flex-col max-h-[95vh] relative rounded-sm shadow-cyan-900/10",children:[L&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-950/95 flex flex-col p-6 animate-fade-in",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-cyan-700 pb-2",children:[u.jsxs("h4",{className:"text-cyan-400 font-bold uppercase tracking-widest",children:["SELECCIONAR CONTRAPARTE (",b==="ALIVE"?"ZOMBIE":"ALIVE",")"]}),u.jsx("button",{onClick:()=>U(!1),className:"text-red-500 font-bold",children:"CERRAR"})]}),u.jsx("input",{placeholder:"BUSCAR POR NOMBRE...",value:W,onChange:Y=>Q(Y.target.value),className:"w-full bg-black border border-cyan-800 p-2 text-cyan-200 mb-4 uppercase",autoFocus:!0}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2 scrollbar-thin scrollbar-thumb-cyan-900",children:ae.map(Y=>u.jsxs("div",{onClick:()=>{j(Y.id),U(!1)},className:"p-3 border border-slate-700 hover:border-cyan-500 hover:bg-cyan-900/20 cursor-pointer flex justify-between items-center group",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:Y.imageUrl,className:"w-8 h-8 object-cover border border-slate-600",referrerPolicy:"no-referrer"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-bold text-white group-hover:text-cyan-300",children:Y.alias}),u.jsx("div",{className:"text-[8px] text-gray-500",children:Y.defaultName})]})]}),u.jsx("div",{className:`text-[9px] font-bold px-2 py-1 border ${Y.defaultAlignment==="ZOMBIE"?"border-lime-600 text-lime-500":"border-cyan-600 text-cyan-500"}`,children:Y.defaultAlignment})]},Y.id))})]}),u.jsxs("div",{className:"bg-cyan-900/40 p-4 border-b border-cyan-600 flex justify-between items-center",children:[u.jsx("h3",{className:"text-cyan-300 font-bold tracking-widest uppercase",children:r?`EDITING: ${r.alias}`:"CREATE NEW CHARACTER (DB)"}),u.jsx("button",{onClick:e,className:"text-cyan-500 hover:text-white",children:""})]}),u.jsxs("form",{onSubmit:te,className:"p-6 overflow-y-auto font-mono flex flex-col gap-4 scrollbar-thin scrollbar-thumb-cyan-900",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"REAL NAME"}),u.jsx("input",{value:i,onChange:Y=>o(Y.target.value),required:!0,className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 focus:border-cyan-400 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"ALIAS (CODENAME)"}),u.jsx("input",{value:a,onChange:Y=>c(Y.target.value),required:!0,className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 focus:border-cyan-400 outline-none"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"CLASS"}),u.jsx("select",{value:d,onChange:Y=>h(Y.target.value),className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200",children:o9.map(Y=>u.jsx("option",{value:Y,children:Y},Y))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"ALIGNMENT"}),u.jsxs("select",{value:b,onChange:Y=>P(Y.target.value),className:"w-full bg-slate-950 border border-cyan-800 p-2 text-white font-bold",children:[u.jsx("option",{value:"ALIVE",children:" HERO (ALIVE)"}),u.jsx("option",{value:"ZOMBIE",children:" ZOMBIE (UNDEAD)"})]})]})]}),u.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/30 p-3 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 p-1 opacity-20 text-purple-500 text-4xl font-black pointer-events-none",children:""}),u.jsx("label",{className:"text-[10px] text-purple-400 font-bold block mb-2 uppercase",children:"VINCULACIN CUNTICA"}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:"flex-1 bg-slate-950 border border-purple-800 p-2 text-xs text-purple-200 flex justify-between items-center",children:[u.jsx("span",{className:D==="NO_VARIANT"?"text-red-400 font-bold":"",children:$()}),D&&u.jsx("button",{type:"button",onClick:()=>j(void 0),className:"text-red-500 hover:text-white font-bold px-2",children:""})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:()=>U(!0),className:"flex-1 bg-purple-900/50 border border-purple-600 text-purple-300 px-3 py-2 text-[10px] font-bold uppercase hover:bg-purple-800 transition-colors",children:"BUSCAR"}),u.jsx("button",{type:"button",onClick:()=>j("NO_VARIANT"),className:"flex-1 bg-slate-800 border border-slate-600 text-gray-400 px-3 py-2 text-[10px] font-bold uppercase hover:bg-slate-700 hover:text-white transition-colors",children:"SIN VARIANTE"})]})]})]}),u.jsxs("div",{className:"bg-slate-900/50 border border-cyan-900/30 p-3",children:[u.jsx("label",{className:"text-[10px] text-cyan-500 font-bold block mb-2 uppercase",children:"BASE STATS"}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-red-400 block",children:"STRENGTH"}),u.jsx("input",{type:"number",min:"1",max:"10",value:p.strength,onChange:Y=>f({...p,strength:parseInt(Y.target.value)}),className:"w-full bg-slate-950 border border-red-900 p-1 text-center text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-green-400 block",children:"AGILITY"}),u.jsx("input",{type:"number",min:"1",max:"10",value:p.agility,onChange:Y=>f({...p,agility:parseInt(Y.target.value)}),className:"w-full bg-slate-950 border border-green-900 p-1 text-center text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-blue-400 block",children:"INTELLECT"}),u.jsx("input",{type:"number",min:"1",max:"10",value:p.intellect,onChange:Y=>f({...p,intellect:parseInt(Y.target.value)}),className:"w-full bg-slate-950 border border-blue-900 p-1 text-center text-white"})]})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"IMAGE URL (RETRATO)"}),u.jsx("input",{value:x,onChange:Y=>C(Y.target.value),placeholder:"https://...",className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 text-xs"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-yellow-600 font-bold block mb-1 uppercase",children:"GAME CARD URL (FICHA JUEGO)"}),u.jsx("input",{value:E,onChange:Y=>w(Y.target.value),placeholder:"https://...",className:"w-full bg-slate-950 border border-yellow-800 p-2 text-yellow-200 text-xs focus:border-yellow-500"}),u.jsx("p",{className:"text-[8px] text-gray-500 mt-1",children:"URL de la imagen de la carta de Zombicide/Marvel Zombies."})]}),u.jsxs("div",{className:"bg-black border border-cyan-700 p-4",children:[u.jsx("label",{className:"text-[10px] text-cyan-400 font-bold block mb-2 uppercase text-center",children:"AJUSTE DE ENCUADRE (PREVIEW)"}),u.jsxs("div",{className:"w-32 h-32 mx-auto border-2 border-white overflow-hidden relative bg-slate-800 mb-4 shadow-lg",children:[x?u.jsx("img",{src:x,alt:"Preview",className:"absolute w-full h-full object-cover transition-transform duration-100",style:{transform:`scale(${I}) translate(${S}%, ${k}%)`},referrerPolicy:"no-referrer"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 text-xs",children:"NO IMAGE"}),u.jsx("div",{className:"absolute inset-0 border border-white/20 pointer-events-none"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-[9px] text-cyan-500 mb-1",children:[u.jsx("span",{children:"ZOOM"}),u.jsxs("span",{children:[I.toFixed(1),"x"]})]}),u.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:I,onChange:Y=>v(parseFloat(Y.target.value)),className:"w-full h-1 bg-cyan-900 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-[9px] text-cyan-500 mb-1",children:[u.jsx("span",{children:"POSICIN X (Horizontal)"}),u.jsxs("span",{children:[S,"%"]})]}),u.jsx("input",{type:"range",min:"-50",max:"50",step:"1",value:S,onChange:Y=>A(parseInt(Y.target.value)),className:"w-full h-1 bg-cyan-900 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-[9px] text-cyan-500 mb-1",children:[u.jsx("span",{children:"POSICIN Y (Vertical)"}),u.jsxs("span",{children:[k,"%"]})]}),u.jsx("input",{type:"range",min:"-50",max:"50",step:"1",value:k,onChange:Y=>O(parseInt(Y.target.value)),className:"w-full h-1 bg-cyan-900 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),u.jsx("button",{type:"button",onClick:()=>{v(1),A(0),O(0)},className:"w-full text-[9px] text-red-400 border border-red-900 py-1 hover:bg-red-900/20",children:"RESET AJUSTES"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-cyan-600 font-bold block mb-1 uppercase",children:"BIO / LORE"}),u.jsx("textarea",{value:g,onChange:Y=>_(Y.target.value),rows:4,className:"w-full bg-slate-950 border border-cyan-800 p-2 text-cyan-200 text-xs"})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-cyan-800",children:[u.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-red-900 text-red-500 text-xs font-bold uppercase hover:bg-red-900/20",children:"CANCEL"}),u.jsx("button",{type:"submit",disabled:R,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold uppercase shadow-[0_0_15px_rgba(6,182,212,0.4)] transition-all",children:R?"SAVING...":r?"UPDATE CHARACTER":"CREATE CHARACTER"})]})]})]})})},a9=[" ALERTA: Horda masiva detectada movindose hacia la Costa Este."," COMUNICACIONES: La seal del Helicarrier es dbil pero constante."," CIENCIA: Reed Richards solicita muestras de tejido necrtico nivel 5."," SHIELD: Se buscan reclutas con inmunidad psquica para operacin en Genosha."," URGENTE: Evacuar sector 7, Hulk ha sido avistado."," VIGILANCIA: Satlites detectan actividad inusual en Latveria."," SUMINISTROS: Convoy de medicinas emboscado en la Ruta 66."],l9=[" HAMBRE: La reserva de carne en Nueva York se agota."," CAZA: Detectado asentamiento humano en los tneles de Morlock."," KINGPIN: Ofrece recompensa por la cabeza de Punisher (preferiblemente cruda)."," PELIGRO: Magneto est fortificando la atmsfera. Difcil acceso areo."," COLMENA: La seal de Galactus se intensifica. El plato principal se acerca."," FESTN: Buffet libre detectado en la Mansin X."," EVOLUCIN: Nuevas cepas detectadas. El virus se adapta."],c9=[" ALERTA OMEGA: ENTIDAD CSMICA EN LA ATMSFERA."," CIELOS PRPURAS: La radiacin csmica aumenta un 500%."," PRIORIDAD ABSOLUTA: Todas las hostilidades deben cesar. Enfocad fuego en el Gigante."," FIN DEL MUNDO: El devorador ha comenzado el proceso de conversin."," SHIELD: Protocolo 'Juicio Final' activado. No hay evacuacin posible."," ENERGA: Lecturas de poder infinito detectadas en Kansas."," MISIONES BLOQUEADAS: Todo el personal redirigido a la defensa planetaria."],u9=({alignment:t,worldStage:e,urgentMessage:n})=>{const[r,s]=N.useState(null);N.useEffect(()=>{if(n){s(n);const d=setTimeout(()=>s(null),1e4);return()=>clearTimeout(d)}},[n]);let i=t==="ALIVE"?a9:l9,o=t==="ALIVE"?"text-cyan-400 bg-cyan-950/90 border-cyan-800":"text-lime-400 bg-lime-950/90 border-lime-800",a="LIVE FEED",c="text-red-500";return e==="GALACTUS"&&(i=c9,o="text-purple-300 bg-purple-950/95 border-purple-600 shadow-[0_0_30px_rgba(147,51,234,0.5)]",a="OMEGA THREAT",c="text-purple-500"),r&&(o="text-white bg-blue-600 border-blue-400 shadow-[0_0_20px_rgba(37,99,235,0.8)]",a="BREAKING NEWS",c="text-white"),u.jsxs("div",{className:`w-full flex-none relative h-8 ${o} border-t flex items-center overflow-hidden z-50 select-none shadow-[0_-5px_20px_rgba(0,0,0,0.5)] transition-all duration-500`,children:[u.jsxs("div",{className:"flex items-center gap-2 px-4 bg-slate-900 h-full z-10 border-r border-inherit shrink-0",children:[u.jsx("span",{className:`animate-pulse ${c}`,children:""}),u.jsx("span",{className:"text-[10px] font-bold tracking-widest",children:a})]}),u.jsx("div",{className:"whitespace-nowrap overflow-hidden flex-1 relative flex items-center",children:r?u.jsx("div",{className:"w-full text-center font-bold tracking-[0.2em] text-xs animate-pulse",children:r}):u.jsxs("div",{className:"inline-block animate-[ticker_120s_linear_infinite] pl-[100%]",children:[i.map((d,h)=>u.jsxs("span",{className:"mx-8 text-xs font-mono tracking-wide uppercase",children:[d," ",u.jsx("span",{className:"opacity-50 mx-2",children:"///"})]},h)),i.map((d,h)=>u.jsxs("span",{className:"mx-8 text-xs font-mono tracking-wide uppercase",children:[d," ",u.jsx("span",{className:"opacity-50 mx-2",children:"///"})]},`dup-${h}`))]})}),u.jsx("style",{children:`
                @keyframes ticker {
                    0% { transform: translateX(0); }
                    100% { transform: translateX(-100%); }
                }
            `})]})},d9=({onConfirm:t,onBack:e,language:n,playerAlignment:r,ownedExpansions:s,onToggleExpansion:i,onToggleAllExpansions:o})=>{const[a,c]=N.useState([]),[d,h]=N.useState(""),[p,f]=N.useState(null),[g,_]=N.useState([]),[x,C]=N.useState(!0),E=r==="ZOMBIE",w=E?"border-lime-500":"border-cyan-500",b=E?"text-lime-400":"text-cyan-400",P=E?"bg-lime-600":"bg-cyan-600";N.useEffect(()=>{(async()=>{try{const S=await ko();_(S)}catch(S){console.error("Error cargando hroes de DB",S)}finally{C(!1)}})()},[]);const D=N.useMemo(()=>{if(x)return[];let v=[];const S=new Set;for(const k of cn){if(!s.has(k.id))continue;const R=(E?k.zombieHeroes:k.heroes).map(M=>{const L=g.find(U=>U.id===M.id);return S.add(M.id),L?{...M,name:L.defaultName,alias:L.alias,class:L.defaultClass,stats:L.defaultStats,imageUrl:L.imageUrl,bio:L.bio||M.bio,imageParams:L.imageParams,characterSheetUrl:L.characterSheetUrl}:M});v=[...v,...R]}const A=g.filter(k=>{const O=!S.has(k.id),R=k.defaultAlignment===r,M=!k.expansionId||k.expansionId==="custom_database";return O&&R&&M});if(A.length>0){const k=A.map(O=>({id:O.id,templateId:O.id,name:O.defaultName,alias:O.alias,class:O.defaultClass,bio:O.bio||"",status:"AVAILABLE",imageUrl:O.imageUrl,stats:O.defaultStats,assignedMissionId:null,objectives:O.objectives||[],completedObjectiveIndices:[],currentStory:O.currentStory||"",imageParams:O.imageParams,characterSheetUrl:O.characterSheetUrl}));v=[...v,...k]}return d&&(v=v.filter(k=>k.alias.toLowerCase().includes(d.toLowerCase())||k.name.toLowerCase().includes(d.toLowerCase()))),v},[E,d,g,x,r,s]),j=v=>{if(a.some(A=>A.id===v.id))c(A=>A.filter(k=>k.id!==v.id));else{if(a.length>=6)return;c(A=>[...A,v])}},I=()=>{if(a.length===0){alert(n==="es"?"DEBES SELECCIONAR AL MENOS UN HROE.":"YOU MUST SELECT AT LEAST ONE HERO.");return}t(a)};return u.jsxs("div",{className:"fixed inset-0 z-[80] bg-slate-950 flex flex-col font-mono h-screen w-screen overflow-hidden",children:[p&&u.jsx("div",{className:"fixed inset-0 z-[200] bg-black/95 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",onClick:()=>f(null),children:u.jsxs("div",{className:"relative flex flex-col items-center justify-center w-full h-full",children:[u.jsx("img",{src:p,alt:"Tactical Sheet",className:"h-[85vh] w-auto max-w-[95vw] object-contain border-4 border-yellow-500 shadow-[0_0_50px_rgba(234,179,8,0.5)] rounded-xl bg-black",onClick:v=>v.stopPropagation(),referrerPolicy:"no-referrer"}),u.jsx("button",{onClick:()=>f(null),className:"mt-4 px-8 py-2 bg-red-900/80 text-white font-bold tracking-widest border border-red-600 hover:bg-red-800 uppercase text-xs shadow-lg rounded",children:"CERRAR"})]})}),u.jsxs("div",{className:"flex-none h-16 border-b border-slate-800 bg-slate-900 flex items-center justify-between px-6 z-20 shadow-lg",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-xl font-bold",children:""}),u.jsx("h2",{className:`text-xl font-black tracking-[0.2em] uppercase ${b}`,children:n==="es"?"RECLUTAMIENTO TCTICO":"TACTICAL RECRUITMENT"})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative w-64",children:[u.jsx("input",{type:"text",value:d,onChange:v=>h(v.target.value),placeholder:n==="es"?"BUSCAR AGENTE...":"SEARCH AGENT...",className:"w-full bg-slate-950 border border-slate-700 p-2 pl-8 text-xs text-white focus:border-cyan-500 outline-none rounded-sm"}),u.jsx("span",{className:"absolute left-2 top-2 text-gray-500 text-xs",children:""})]}),u.jsx("button",{onClick:I,disabled:a.length===0,className:`px-6 py-2 font-bold text-xs tracking-widest uppercase transition-all ${a.length>0?`${P} text-white hover:brightness-110 shadow-lg`:"bg-slate-800 text-gray-500 cursor-not-allowed"}`,children:n==="es"?"DESPLEGAR EQUIPO":"DEPLOY SQUAD"})]})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[u.jsxs("div",{className:"w-1/5 bg-slate-900 border-r border-slate-800 flex flex-col min-w-[250px]",children:[u.jsxs("div",{className:"p-3 bg-slate-950 border-b border-slate-800 flex justify-between items-center",children:[u.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"ARSENAL (EXPANSIONES)"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>o(!0),className:"text-[9px] text-cyan-500 hover:text-white px-1",children:"ALL"}),u.jsx("span",{className:"text-gray-600",children:"|"}),u.jsx("button",{onClick:()=>o(!1),className:"text-[9px] text-gray-500 hover:text-white px-1",children:"NONE"})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 scrollbar-thin scrollbar-thumb-slate-700",children:[cn.map(v=>{const S=s.has(v.id);return u.jsxs("div",{onClick:()=>i(v.id),className:`flex items-center gap-3 p-3 cursor-pointer transition-all border-l-2 ${S?`bg-slate-800 ${E?"border-lime-500":"border-cyan-500"}`:"bg-transparent border-transparent hover:bg-slate-800/50"}`,children:[u.jsx("div",{className:`w-4 h-4 border flex items-center justify-center ${S?`${E?"bg-lime-600 border-lime-500":"bg-cyan-600 border-cyan-500"} text-black`:"border-slate-600"}`,children:S&&u.jsx("span",{className:"text-[10px] font-bold",children:""})}),u.jsx("span",{className:`text-[10px] font-bold uppercase ${S?"text-white":"text-gray-500"}`,children:v.name})]},v.id)}),u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-800/30 border-l-2 border-purple-500 cursor-default opacity-80",children:[u.jsx("div",{className:"w-4 h-4 bg-purple-600 flex items-center justify-center text-black text-[10px] font-bold",children:""}),u.jsx("span",{className:"text-[10px] font-bold uppercase text-purple-300",children:"CUSTOM DATABASE"})]})]})]}),u.jsxs("div",{className:"flex-1 bg-slate-950 relative overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"p-3 border-b border-slate-800 flex justify-between items-center bg-slate-900/50",children:[u.jsxs("h3",{className:`text-xs font-bold uppercase tracking-widest ${b}`,children:["AGENTES DISPONIBLES (",D.length,")"]}),u.jsx("div",{className:"text-[10px] text-gray-500",children:"SELECCIONA PARA AADIR AL ESCUADRN"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-thin scrollbar-thumb-slate-700",children:x?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 animate-pulse",children:[u.jsx("div",{className:"text-2xl mb-2",children:""}),u.jsx("div",{className:"text-xs tracking-widest",children:"ACCEDIENDO A LA BASE DE DATOS..."})]}):u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:D.map(v=>{const S=a.some(O=>O.id===v.id),A=!S&&a.length>=6,k=v.imageParams?{transform:`scale(${v.imageParams.scale}) translate(${v.imageParams.x}%, ${v.imageParams.y}%)`}:{};return u.jsxs("div",{onClick:()=>!A&&j(v),className:`
                                                relative group cursor-pointer border transition-all duration-200 overflow-hidden aspect-[3/4]
                                                ${S?`${w} ring-2 ring-offset-2 ring-offset-slate-950 ${E?"ring-lime-500/50":"ring-cyan-500/50"}`:A?"border-slate-800 opacity-30 grayscale cursor-not-allowed":"border-slate-700 hover:border-white hover:scale-[1.02] hover:shadow-xl hover:z-10"}
                                            `,children:[u.jsx("div",{className:"absolute inset-0 overflow-hidden",children:u.jsx("img",{src:v.imageUrl,alt:v.alias,className:"w-full h-full object-cover",style:k,referrerPolicy:"no-referrer"})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80 pointer-events-none"}),v.characterSheetUrl&&u.jsx("button",{onClick:O=>{O.stopPropagation(),f(v.characterSheetUrl)},className:"absolute top-2 left-2 w-6 h-6 bg-yellow-600 hover:bg-yellow-400 text-black flex items-center justify-center rounded-sm shadow-lg z-20 transition-transform hover:scale-110 border border-yellow-300",title:"Ver Ficha de Juego",children:""}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 pointer-events-none",children:[u.jsx("div",{className:`text-[10px] font-black uppercase truncate ${S?b:"text-white"}`,children:v.alias}),u.jsx("div",{className:"text-[8px] text-gray-400 font-mono",children:v.class})]}),S&&u.jsx("div",{className:`absolute top-2 right-2 w-6 h-6 ${P} flex items-center justify-center text-black font-bold shadow-lg`,children:""})]},v.id)})})})]}),u.jsxs("div",{className:"w-1/5 bg-slate-900 border-l border-slate-800 flex flex-col min-w-[200px]",children:[u.jsxs("div",{className:`p-4 border-b border-slate-800 ${a.length===6?"bg-red-900/20":"bg-slate-950"}`,children:[u.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:"ESCUADRN ACTIVO"}),u.jsxs("div",{className:`text-2xl font-black ${a.length===6?"text-red-500 animate-pulse":b}`,children:[a.length," / 6"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 scrollbar-thin scrollbar-thumb-slate-700",children:[...Array(6)].map((v,S)=>{const A=a[S],k=A!=null&&A.imageParams?{transform:`scale(${A.imageParams.scale}) translate(${A.imageParams.x}%, ${A.imageParams.y}%)`}:{};return u.jsx("div",{className:`
                                        relative h-20 border flex items-center justify-center transition-all
                                        ${A?`${w} bg-slate-800 cursor-pointer group`:"border-slate-800 border-dashed bg-slate-950/50"}
                                    `,onClick:()=>A&&j(A),children:A?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"absolute inset-0 flex",children:[u.jsxs("div",{className:"w-20 h-full shrink-0 relative overflow-hidden",children:[u.jsx("img",{src:A.imageUrl,className:"w-full h-full object-cover",alt:"",style:k,referrerPolicy:"no-referrer"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent to-slate-800 pointer-events-none"})]}),u.jsxs("div",{className:"flex-1 p-2 flex flex-col justify-center min-w-0",children:[u.jsx("div",{className:`text-[10px] font-bold truncate ${b}`,children:A.alias}),u.jsx("div",{className:"text-[8px] text-gray-500",children:A.class})]})]}),u.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:"w-6 h-6 bg-red-600 text-white flex items-center justify-center rounded-full text-[10px] font-bold shadow-md",children:""})})]}):u.jsx("span",{className:"text-slate-700 font-black text-2xl select-none",children:S+1})},S)})}),u.jsx("div",{className:"p-4 border-t border-slate-800 bg-slate-950",children:u.jsx("button",{onClick:I,disabled:a.length===0,className:`w-full py-3 font-bold text-xs tracking-widest uppercase transition-all ${a.length>0?`${P} text-white hover:brightness-110`:"bg-slate-800 text-gray-600 cursor-not-allowed"}`,children:"CONFIRMAR"})})]})]})]})},h9=({isOpen:t,onClose:e,ownedExpansions:n,onToggle:r,onToggleAll:s,language:i})=>t?u.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-slate-950/90 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"w-full max-w-lg bg-slate-900 border-2 border-cyan-500 shadow-[0_0_50px_rgba(6,182,212,0.3)] flex flex-col max-h-[80vh]",children:[u.jsxs("div",{className:"bg-cyan-900/40 p-4 border-b border-cyan-600 flex justify-between items-center shrink-0",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-cyan-300 font-bold tracking-widest uppercase text-lg",children:i==="es"?"CONFIGURACIN TCTICA":"TACTICAL CONFIG"}),u.jsx("p",{className:"text-[10px] text-cyan-400",children:i==="es"?"SELECCIONA LAS EXPANSIONES DISPONIBLES":"SELECT AVAILABLE EXPANSIONS"})]}),u.jsx("button",{onClick:e,className:"text-cyan-500 hover:text-white font-bold text-xl",children:""})]}),u.jsxs("div",{className:"p-3 bg-slate-950 border-b border-cyan-900 flex gap-3 justify-end",children:[u.jsx("button",{onClick:()=>s(!0),className:"text-[10px] bg-cyan-900/30 hover:bg-cyan-800 text-cyan-300 px-3 py-1 border border-cyan-700 rounded",children:i==="es"?"MARCAR TODO":"SELECT ALL"}),u.jsx("button",{onClick:()=>s(!1),className:"text-[10px] bg-slate-800 hover:bg-slate-700 text-gray-400 px-3 py-1 border border-slate-600 rounded",children:i==="es"?"DESMARCAR TODO":"DESELECT ALL"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 scrollbar-thin scrollbar-thumb-cyan-900",children:cn.map(o=>{const a=n.has(o.id);return u.jsxs("div",{onClick:()=>r(o.id),className:`
                                    flex items-center gap-3 p-3 border cursor-pointer transition-all
                                    ${a?"bg-cyan-900/20 border-cyan-500 shadow-[inset_0_0_10px_rgba(6,182,212,0.1)]":"bg-slate-950 border-slate-700 opacity-60 hover:opacity-100"}
                                `,children:[u.jsx("div",{className:`
                                    w-5 h-5 border flex items-center justify-center transition-colors
                                    ${a?"bg-cyan-500 border-cyan-400 text-black":"bg-slate-900 border-slate-600"}
                                `,children:a&&""}),u.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${a?"text-white":"text-gray-500"}`,children:o.name})]},o.id)})}),u.jsx("div",{className:"p-4 border-t border-cyan-800 bg-slate-900 flex justify-end",children:u.jsx("button",{onClick:e,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold uppercase tracking-widest shadow-[0_0_15px_rgba(6,182,212,0.4)]",children:i==="es"?"CONFIRMAR":"CONFIRM"})})]})}):null,Mc={magneto:new Set(["Washington","Oregon","California","Nevada","Idaho","Montana","Wyoming","Utah","Arizona","Colorado","Alaska","Hawaii"]),kingpin:new Set(["Maine","New Hampshire","Vermont","New York","Massachusetts","Rhode Island","Connecticut","New Jersey","Pennsylvania","Delaware","Maryland","West Virginia","Virginia","District of Columbia"]),hulk:new Set(["North Dakota","South Dakota","Nebraska","Kansas","Oklahoma","Texas","New Mexico","Minnesota","Iowa","Missouri","Wisconsin","Illinois","Michigan","Indiana","Ohio"]),doom:new Set(["Arkansas","Louisiana","Mississippi","Alabama","Tennessee","Kentucky","Georgia","Florida","South Carolina","North Carolina"])},f9=t=>Mc.magneto.has(t)?"MAGNETO":Mc.kingpin.has(t)?"KINGPIN":Mc.hulk.has(t)?"HULK":Mc.doom.has(t)?"DOOM":"NEUTRAL",p9=[{id:"m_intro_0",title:"MH0: CADENAS ROTAS",description:[],objectives:[],location:{state:"Ohio",coordinates:[0,0]},threatLevel:"N/A"}],m9=({isOpen:t,onClose:e,language:n})=>{const[r,s]=N.useState("MISSIONS"),[i,o]=N.useState([]),[a,c]=N.useState([]),[d,h]=N.useState(!1),[p,f]=N.useState(""),[g,_]=N.useState("ALL"),[x,C]=N.useState("ALL"),[E,w]=N.useState("ALL"),[b,P]=N.useState("ALL"),[D,j]=N.useState("ALL"),[I,v]=N.useState(new Set(["KINGPIN","MAGNETO","HULK","DOOM","NEUTRAL","GALACTUS"])),[S,A]=N.useState(null),[k,O]=N.useState(null),R=async()=>{h(!0);try{const[$,Y]=await Promise.all([ko(),nd()]);o($),c(Y)}catch($){console.error("Error cargando datos:",$),alert("Error al conectar con la base de datos.")}finally{h(!1)}};N.useEffect(()=>{t&&R()},[t]);const M=()=>{const $=r==="HEROES"?i:a,Y=r==="HEROES"?"shield_heroes_backup.json":"shield_missions_backup.json",X=JSON.stringify($,null,2),ne=new Blob([X],{type:"application/json"}),ie=URL.createObjectURL(ne),ye=document.createElement("a");ye.href=ie,ye.download=Y,document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),URL.revokeObjectURL(ie)},L=N.useMemo(()=>{const $={KINGPIN:[],MAGNETO:[],HULK:[],DOOM:[],NEUTRAL:[],GALACTUS:[]};let Y=a.filter(X=>X.title.toLowerCase().includes(p.toLowerCase()));return b!=="ALL"&&(Y=Y.filter(X=>X.alignment===b||X.alignment==="BOTH")),D!=="ALL"&&(Y=Y.filter(X=>X.threatLevel.includes(D))),Y.forEach(X=>{if(X.type==="GALACTUS")$.GALACTUS.push(X);else{const ne=f9(X.location.state);$[ne]?$[ne].push(X):$.NEUTRAL.push(X)}}),$},[a,p,b,D]),U=$=>{v(Y=>{const X=new Set(Y);return X.has($)?X.delete($):X.add($),X})},K=()=>{const $=vs==null?void 0:vs.currentUser;return!$||!["TU_UID_DE_FIREBASE_AQUI","OTRO_UID_SI_ES_NECESARIO"].includes($.uid)?(alert(" ACCESO DENEGADO: No tienes permisos de administrador (UID no autorizado)."),!1):!0},V=async $=>{K()&&window.confirm("ESTS SEGURO? Esta accin es irreversible.")&&(h(!0),await n0($),await R())},W=async $=>{K()&&window.confirm("ESTS SEGURO? Esta accin es irreversible.")&&(h(!0),await iA($),await R())},Q=$=>{const Y=a.find(X=>X.id===$);return Y?Y.title:$},te=$=>$.includes("Fcil")||$.includes("Latente")?"border-emerald-500 text-emerald-400":$.includes("Intermedia")||$.includes("Insaciable")?"border-yellow-500 text-yellow-400":$.includes("Difcil")||$.includes("Desatada")?"border-orange-500 text-orange-400":$.includes("Muy difcil")||$.includes("Gamma")||$.includes("OMEGA")?"border-red-600 text-red-500":"border-gray-500 text-gray-400",ae=i.filter($=>{const Y=($.alias+$.defaultName).toLowerCase().includes(p.toLowerCase()),X=g==="ALL"||$.defaultAlignment===g,ne=x==="ALL"||$.defaultClass===x;let ie=!0;return E==="LINKED"?ie=!!$.relatedHeroId:E==="UNLINKED"&&(ie=!$.relatedHeroId),Y&&X&&ne&&ie});return t?u.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 flex flex-col font-mono",children:[S&&u.jsx(iI,{isOpen:!0,onClose:()=>A(null),language:n,initialData:S,onSave:R}),k&&u.jsx(sI,{isOpen:!0,onClose:()=>O(null),language:n,initialData:k,existingMissions:[...p9,...a],onSave:()=>{O(null),R()}}),u.jsxs("div",{className:"bg-slate-900 border-b border-cyan-600 p-4 flex justify-between items-center shadow-lg z-10",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("h2",{className:"text-xl font-black text-cyan-400 tracking-widest uppercase",children:"DATABASE MANAGER"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>s("HEROES"),className:`px-4 py-1 text-xs font-bold border ${r==="HEROES"?"bg-cyan-600 text-white border-cyan-400":"text-cyan-600 border-cyan-900"}`,children:["HROES (",i.length,")"]}),u.jsxs("button",{onClick:()=>s("MISSIONS"),className:`px-4 py-1 text-xs font-bold border ${r==="MISSIONS"?"bg-cyan-600 text-white border-cyan-400":"text-cyan-600 border-cyan-900"}`,children:["MISIONES (",a.length,")"]})]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("button",{onClick:M,className:"bg-emerald-900/50 border border-emerald-500 text-emerald-300 px-4 py-2 text-xs font-bold hover:bg-emerald-800 flex items-center gap-2",children:[u.jsx("span",{children:""})," EXPORTAR JSON"]}),u.jsx("button",{onClick:e,className:"bg-red-900/50 border border-red-500 text-red-300 px-4 py-2 text-xs font-bold hover:bg-red-800",children:"CERRAR"})]})]}),u.jsxs("div",{className:"bg-slate-900/50 p-4 border-b border-cyan-900 flex flex-wrap gap-4 items-center",children:[u.jsx("input",{type:"text",placeholder:"BUSCAR...",value:p,onChange:$=>f($.target.value),className:"bg-slate-950 border border-cyan-700 p-2 text-cyan-200 text-xs w-64 focus:outline-none focus:border-cyan-400"}),r==="HEROES"&&u.jsxs(u.Fragment,{children:[u.jsxs("select",{value:g,onChange:$=>_($.target.value),className:"bg-slate-950 border border-cyan-800 text-xs text-cyan-300 p-2",children:[u.jsx("option",{value:"ALL",children:"TODOS LOS BANDOS"}),u.jsx("option",{value:"ALIVE",children:" VIVOS (ALIVE)"}),u.jsx("option",{value:"ZOMBIE",children:" ZOMBIES"})]}),u.jsxs("select",{value:x,onChange:$=>C($.target.value),className:"bg-slate-950 border border-cyan-800 text-xs text-cyan-300 p-2",children:[u.jsx("option",{value:"ALL",children:"TODAS LAS CLASES"}),u.jsx("option",{value:"BRAWLER",children:" BRAWLER"}),u.jsx("option",{value:"SCOUT",children:" SCOUT"}),u.jsx("option",{value:"TACTICIAN",children:" TACTICIAN"}),u.jsx("option",{value:"BLASTER",children:" BLASTER"})]}),u.jsxs("select",{value:E,onChange:$=>w($.target.value),className:"bg-slate-950 border border-purple-800 text-xs text-purple-300 p-2",children:[u.jsx("option",{value:"ALL",children:"VINCULACIN (TODOS)"}),u.jsx("option",{value:"LINKED",children:" VINCULADOS / SIN VARIANTE"}),u.jsx("option",{value:"UNLINKED",children:" SIN VINCULAR"})]})]}),r==="MISSIONS"&&u.jsxs(u.Fragment,{children:[u.jsxs("select",{value:b,onChange:$=>P($.target.value),className:"bg-slate-950 border border-cyan-800 text-xs text-cyan-300 p-2",children:[u.jsx("option",{value:"ALL",children:"TODOS LOS BANDOS"}),u.jsx("option",{value:"ALIVE",children:" HROES"}),u.jsx("option",{value:"ZOMBIE",children:" ZOMBIES"}),u.jsx("option",{value:"BOTH",children:" AMBOS"})]}),u.jsxs("select",{value:D,onChange:$=>j($.target.value),className:"bg-slate-950 border border-cyan-800 text-xs text-cyan-300 p-2",children:[u.jsx("option",{value:"ALL",children:"CUALQUIER DIFICULTAD"}),u.jsx("option",{value:"Fcil",children:"FCIL (VERDE)"}),u.jsx("option",{value:"Intermedia",children:"INTERMEDIA (AMARILLO)"}),u.jsx("option",{value:"Difcil",children:"DIFCIL (NARANJA)"}),u.jsx("option",{value:"Muy difcil",children:"EXTREMA (ROJO)"})]})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-slate-950 relative",children:[d&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-950/80 z-20 text-cyan-500 animate-pulse",children:"CARGANDO DATOS..."}),r==="HEROES"?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:ae.map($=>u.jsxs("div",{className:`p-3 border flex gap-3 group relative transition-all ${$.relatedHeroId?"border-purple-500/50 bg-purple-900/10":"border-cyan-900 bg-cyan-950/10"}`,children:[u.jsxs("div",{className:"w-12 h-12 bg-black border border-gray-700 shrink-0 relative",children:[u.jsx("img",{src:$.imageUrl,alt:"",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"}),$.relatedHeroId&&u.jsx("div",{className:`absolute -top-1 -right-1 w-4 h-4 rounded-full flex items-center justify-center text-[8px] text-white font-bold border border-white ${$.relatedHeroId==="NO_VARIANT"?"bg-red-600":"bg-purple-600"}`,title:$.relatedHeroId==="NO_VARIANT"?"Sin Variante":"Vinculado",children:$.relatedHeroId==="NO_VARIANT"?"":""})]}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"font-bold text-xs text-cyan-400 truncate",title:$.alias,children:$.alias}),u.jsx("div",{className:"text-[9px] text-gray-500 truncate",children:$.defaultName}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("span",{className:`text-[8px] font-bold px-1 rounded border ${$.defaultAlignment==="ZOMBIE"?"border-lime-600 text-lime-500":"border-blue-600 text-blue-400"}`,children:$.defaultAlignment}),u.jsx("span",{className:"text-[8px] font-bold px-1 rounded border border-gray-600 text-gray-400",children:$.defaultClass})]})]}),u.jsxs("div",{className:"absolute right-2 bottom-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900/90 p-1 rounded z-10",children:[u.jsx("button",{onClick:()=>A($),className:"bg-blue-900 text-blue-300 px-2 py-1 text-[9px] border border-blue-700 hover:bg-blue-800",children:"EDIT"}),u.jsx("button",{onClick:()=>W($.id),className:"bg-red-900 text-red-300 px-2 py-1 text-[9px] border border-red-700 hover:bg-red-800",children:"DEL"})]})]},$.id))}):u.jsx("div",{className:"space-y-6",children:Object.entries(L).map(([$,Y])=>{if(Y.length===0)return null;const X=I.has($);let ne="bg-slate-800 border-slate-600 text-slate-300";return $==="KINGPIN"&&(ne="bg-purple-900/40 border-purple-600 text-purple-300"),$==="MAGNETO"&&(ne="bg-red-900/40 border-red-600 text-red-300"),$==="HULK"&&(ne="bg-lime-900/40 border-lime-600 text-lime-300"),$==="DOOM"&&(ne="bg-cyan-900/40 border-cyan-600 text-cyan-300"),$==="GALACTUS"&&(ne="bg-fuchsia-900/40 border-fuchsia-600 text-fuchsia-300"),u.jsxs("div",{className:"border border-gray-800 rounded overflow-hidden",children:[u.jsxs("button",{onClick:()=>U($),className:`w-full p-3 flex justify-between items-center border-b ${ne} transition-colors hover:brightness-110`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"font-black tracking-widest text-sm uppercase",children:$}),u.jsx("span",{className:"text-xs bg-black/30 px-2 py-0.5 rounded",children:Y.length})]}),u.jsx("span",{className:"text-xs",children:X?"":""})]}),X&&u.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 bg-slate-900/50",children:Y.map(ie=>{const ye=te(ie.threatLevel),Me=ie.isIntroMission||ie.type==="INTRODUCTORY",rt=ie.type&&ie.type.startsWith("BOSS"),be=ie.prereqs&&ie.prereqs.length>0||ie.prereq;let Se="bg-slate-800/40 hover:bg-slate-800",q=ye.replace("text-","border-");return rt&&(Se="bg-gradient-to-br from-purple-900/30 to-slate-900 hover:from-purple-900/50",q="border-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.2)]"),u.jsxs("div",{className:`p-3 border-l-4 transition-all relative group flex flex-col gap-2 ${Se} ${q}`,children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[Me&&u.jsx("div",{className:"text-[9px] font-black text-emerald-400 uppercase tracking-widest mb-1",children:" INTRODUCCIN"}),rt&&u.jsx("div",{className:"text-[9px] font-black text-purple-400 uppercase tracking-widest mb-1",children:" JEFE DE ZONA"}),u.jsx("h4",{className:"font-bold text-xs text-white truncate",title:ie.title,children:ie.title}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("span",{className:`text-[9px] font-bold ${ye.split(" ")[1]}`,children:ie.threatLevel}),u.jsxs("span",{className:"text-[8px] text-gray-500",children:["| ",ie.location.state]})]})]}),u.jsx("div",{className:`text-[9px] px-1.5 py-0.5 rounded border ${ie.alignment==="ZOMBIE"?"border-lime-600 text-lime-400":ie.alignment==="ALIVE"?"border-cyan-600 text-cyan-400":"border-gray-600 text-gray-400"}`,children:ie.alignment==="BOTH"?"AMBOS":ie.alignment})]}),be&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700/50",children:[u.jsx("div",{className:"text-[8px] text-gray-500 uppercase font-bold mb-1",children:"REQUIERE COMPLETAR:"}),u.jsx("div",{className:"flex flex-col gap-1",children:(ie.prereqs||[ie.prereq]).map(z=>u.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-yellow-500/80 truncate",children:[u.jsx("span",{children:""}),u.jsx("span",{title:z,children:Q(z)})]},z))})]}),u.jsxs("div",{className:"mt-auto pt-2 text-[8px] text-gray-600 font-mono truncate",children:["ID: ",ie.id]}),u.jsxs("div",{className:"absolute right-2 bottom-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900/90 p-1 rounded",children:[u.jsx("button",{onClick:()=>O(ie),className:"bg-blue-900 text-blue-300 px-2 py-1 text-[9px] border border-blue-700 hover:bg-blue-800",children:"EDIT"}),u.jsx("button",{onClick:()=>V(ie.id),className:"bg-red-900 text-red-300 px-2 py-1 text-[9px] border border-red-700 hover:bg-red-800",children:"DEL"})]})]},ie.id)})})]},$)})})]})]}):null},g9="https://i.pinimg.com/736x/63/1e/3a/631e3a68228c97963e78381ad11bf3bb.jpg",y9="https://i.pinimg.com/736x/7f/31/38/7f31382d4a5c35daa4ba1768a366a917.jpg",cx=({children:t})=>{const{state:e,actions:n}=uA(),r=gl(),{lang:s,playerAlignment:i,completedMissionIds:o,isSaving:a,tickerMessage:c,worldStage:d}=e,h=Wn[s],p=e.customMissions.length+7,f=Math.min(100,Math.round(o.size/Math.max(1,p)*100)),g=2*Math.PI*18,_=g-f/100*g;return u.jsxs("div",{className:`flex flex-col h-screen w-full bg-slate-950 text-cyan-400 font-sans overflow-hidden relative ${i==="ZOMBIE"?"animate-pulse-slow grayscale-[0.3] sepia-[0.2] contrast-125":""}`,children:[u.jsx(iI,{isOpen:e.showCharacterEditor,onClose:()=>n.setShowCharacterEditor(!1),language:s}),u.jsx(sI,{isOpen:e.showMissionEditor,onClose:()=>{n.setShowMissionEditor(!1),n.setMissionToEdit(null)},onSave:async()=>{n.setCustomMissions(await n1(()=>Promise.resolve().then(()=>xD),[]).then(x=>x.getCustomMissions()))},language:s,initialData:e.missionToEdit,existingMissions:e.allMissions}),e.activeGlobalEvent&&u.jsx(i9,{event:e.activeGlobalEvent,isOpen:!!e.activeGlobalEvent,onAcknowledge:n.handleEventAcknowledge,language:s,playerAlignment:i}),e.selectedMission&&u.jsx(nI,{mission:e.selectedMission,isOpen:!!e.selectedMission,onClose:()=>n.setSelectedMission(null),onComplete:n.handleMissionComplete,onReactivate:n.handleMissionReactivate,language:s,isCompleted:o.has(e.selectedMission.id),isEditorMode:e.isEditorMode,onEdit:x=>{n.setMissionToEdit(x),n.setShowMissionEditor(!0),n.setSelectedMission(null)},onDelete:n.handleDeleteMission}),u.jsx(m9,{isOpen:e.showDbManager,onClose:()=>n.setShowDbManager(!1),language:s}),u.jsx(h9,{isOpen:e.showExpansionConfig,onClose:()=>n.setShowExpansionConfig(!1),ownedExpansions:e.ownedExpansions,onToggle:n.toggleExpansion,onToggleAll:n.toggleAllExpansions,language:s}),u.jsxs("header",{className:"flex-none h-16 border-b border-cyan-900 bg-slate-900/90 flex items-center justify-between px-6 z-30 relative",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`w-10 h-10 border-2 ${i==="ZOMBIE"?"border-lime-600":"border-cyan-500"} rounded-full flex items-center justify-center overflow-hidden bg-slate-950 shadow-[0_0_10px_rgba(6,182,212,0.3)]`,children:u.jsx("img",{src:i==="ZOMBIE"?y9:g9,alt:"Logo",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold tracking-[0.2em] text-cyan-100 leading-none",children:h.header.project}),u.jsx("div",{className:"text-[10px] text-red-500 font-bold tracking-widest animate-pulse",children:h.header.failure})]})]}),u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsxs("button",{onClick:n.toggleDimension,className:`hidden md:flex items-center gap-2 px-3 py-1 border rounded transition-all duration-500 ${i==="ZOMBIE"?"border-lime-600 bg-lime-900/20 text-lime-400 hover:bg-lime-900/40":"border-cyan-500 bg-cyan-900/20 text-cyan-300 hover:bg-cyan-900/40"}`,children:[u.jsx("span",{className:"text-lg",children:i==="ZOMBIE"?"":""}),u.jsxs("div",{className:"flex flex-col items-start leading-none",children:[u.jsx("span",{className:"text-[8px] font-bold tracking-widest opacity-70",children:"DIMENSION"}),u.jsx("span",{className:"text-[10px] font-bold",children:i==="ZOMBIE"?"EARTH-Z":"EARTH-616"})]})]}),u.jsx("button",{onClick:()=>n.setShowExpansionConfig(!0),className:"hidden md:flex items-center gap-2 px-3 py-1 border border-cyan-700 bg-slate-900/50 text-cyan-400 hover:bg-cyan-900/80 rounded transition-colors",title:"Configurar Expansiones",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{className:"text-right hidden lg:block",children:[u.jsx("div",{className:"text-[10px] text-cyan-600 font-bold",children:h.header.biohazard}),u.jsx("div",{className:"text-xs text-cyan-300 tracking-widest",children:h.header.clearance})]}),u.jsxs("div",{className:"flex items-center gap-3 border-l border-cyan-900 pl-6",children:[u.jsx("div",{className:"flex flex-col items-end mr-2",children:a?u.jsx("div",{className:"text-[9px] font-bold tracking-widest text-yellow-500 animate-pulse",children:h.header.saving}):u.jsx("div",{className:"text-[9px] font-bold tracking-widest text-emerald-500/80",children:h.header.saved})}),u.jsx("button",{onClick:()=>n.setLang(s==="es"?"en":"es"),className:"text-xs border border-cyan-700 px-2 py-1 hover:bg-cyan-900/50 transition-colors",children:s.toUpperCase()}),u.jsx("button",{onClick:n.handleLogout,className:"text-xs bg-red-900/20 text-red-400 border border-red-900 px-3 py-1 hover:bg-red-900/40 transition-colors",children:h.header.logout})]})]})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[u.jsxs("aside",{className:`flex-none glass-panel border-r border-cyan-900/50 flex flex-col z-20 shadow-2xl overflow-hidden relative transition-all duration-300 ${e.isSidebarCollapsed?"w-12":"w-80"}`,children:[u.jsx("button",{onClick:()=>n.setIsSidebarCollapsed(!e.isSidebarCollapsed),className:"absolute top-1/2 -right-3 w-6 h-12 bg-cyan-900 border border-cyan-600 rounded-l flex items-center justify-center z-50 hover:bg-cyan-800 transition-colors",style:{transform:"translateY(-50%)"},children:u.jsx("span",{className:"text-xs text-cyan-200",children:e.isSidebarCollapsed?"":""})}),e.isSidebarCollapsed?u.jsxs("div",{className:"flex flex-col items-center py-4 gap-4 h-full",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-red-600 flex items-center justify-center bg-red-900/20 animate-pulse",title:"Nivel de Amenaza: CRTICO",children:u.jsx("span",{className:"text-xs",children:""})}),u.jsx("button",{onClick:()=>r("/bunker"),className:"w-8 h-8 rounded border border-cyan-500 flex items-center justify-center hover:bg-cyan-900/50 text-cyan-300",title:"Bnker",children:u.jsx("span",{className:"text-xs",children:""})}),u.jsx("div",{className:"flex-1 w-full flex flex-col items-center justify-end pb-4",children:u.jsx("div",{className:"relative w-8 h-8 flex items-center justify-center",title:`Progreso: ${f}%`,children:u.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[u.jsx("circle",{cx:"16",cy:"16",r:"14",stroke:"#1e293b",strokeWidth:"3",fill:"transparent"}),u.jsx("circle",{cx:"16",cy:"16",r:"14",stroke:"#10b981",strokeWidth:"3",fill:"transparent",strokeDasharray:2*Math.PI*14,strokeDashoffset:2*Math.PI*14-f/100*2*Math.PI*14})]})})})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-4 border-b border-cyan-900/50 bg-red-950/20 flex justify-between items-center font-sans",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] font-bold text-red-500 tracking-widest",children:"AMENAZA"}),u.jsx("span",{className:"text-sm font-black text-red-600 tracking-tighter",children:"CRTICO"})]}),u.jsxs("div",{className:"relative w-14 h-14 flex items-center justify-center",children:[u.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 44 44",children:[u.jsx("circle",{cx:"22",cy:"22",r:"18",stroke:"#1e293b",strokeWidth:"4",fill:"transparent"}),u.jsx("circle",{cx:"22",cy:"22",r:"18",stroke:"#10b981",strokeWidth:"4",fill:"transparent",strokeDasharray:g,strokeDashoffset:_,className:"transition-all duration-1000 ease-out"})]}),u.jsxs("span",{className:"absolute text-[10px] font-bold text-emerald-400",children:[f,"%"]})]})]}),u.jsx("div",{className:"p-3 border-b border-cyan-900",children:u.jsxs("button",{id:"tutorial-bunker-btn",onClick:()=>r("/bunker"),className:`w-full py-3 border-2 flex items-center justify-center gap-2 transition-all duration-300 group relative overflow-hidden ${i==="ZOMBIE"?"border-lime-600 bg-lime-900/10 hover:bg-lime-900/30 text-lime-400":"border-cyan-500 bg-cyan-900/10 hover:bg-cyan-900/30 text-cyan-300"}`,children:[u.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ${i==="ZOMBIE"?"bg-[linear-gradient(45deg,transparent_25%,rgba(132,204,22,0.1)_50%,transparent_75%)]":"bg-[linear-gradient(45deg,transparent_25%,rgba(6,182,212,0.1)_50%,transparent_75%)]"} bg-[length:250%_250%] animate-[shimmer_2s_linear_infinite]`}),u.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform",children:i==="ZOMBIE"?"":""}),u.jsx("span",{className:"font-bold tracking-widest text-[10px]",children:i==="ZOMBIE"?h.sidebar.hiveBtn:h.sidebar.bunkerBtn})]})}),u.jsxs("div",{id:"tutorial-sidebar-missions",className:"flex-1 overflow-y-auto p-3 scrollbar-thin scrollbar-thumb-cyan-900",children:[u.jsx("h4",{className:"text-[10px] font-bold text-cyan-600 uppercase mb-2 tracking-widest border-b border-cyan-900 pb-1",children:h.sidebar.activeMissions}),u.jsxs("div",{className:"space-y-1",children:[e.groupedMissions.galactus.length>0&&u.jsxs("div",{className:"mb-2 border border-purple-600 bg-purple-900/20 animate-pulse",children:[u.jsx("div",{className:"p-1 bg-purple-900/80 text-white text-[9px] font-black tracking-widest uppercase text-center",children:" OMEGA "}),u.jsx("div",{className:"p-1",children:e.groupedMissions.galactus.map(x=>u.jsx("div",{onClick:()=>n.setSelectedMission(x),className:"p-2 bg-purple-600 hover:bg-purple-500 text-white font-bold text-[10px] cursor-pointer text-center shadow-sm border border-purple-400 mb-1",children:x.title},x.id))})]}),Object.entries(e.groupedMissions).map(([x,C])=>{if(x==="galactus"||C.length===0)return null;const E=e.expandedZones.has(x),w=(()=>{var P,D;if(x.startsWith("shield_")){const j=x.replace("shield_","");return`S.H.I.E.L.D. (${((P=h.factions[j])==null?void 0:P.name)||j.toUpperCase()})`}return((D=h.factions[x])==null?void 0:D.name)||x.toUpperCase()})(),b=d==="GALACTUS";return u.jsxs("div",{className:`mb-1 border border-cyan-900/30 bg-slate-900/30 ${b?"opacity-40 pointer-events-none grayscale":""}`,children:[u.jsxs("button",{type:"button",onClick:()=>n.toggleZone(x),className:"w-full flex justify-between items-center p-2 bg-slate-800/80 hover:bg-cyan-900/30 transition-colors border-b border-cyan-900/30",children:[u.jsx("span",{className:"text-[10px] font-bold text-cyan-400 uppercase tracking-widest truncate max-w-[140px]",children:w}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"text-[9px] bg-cyan-900/50 text-cyan-200 px-1 py-0.5 rounded font-mono border border-cyan-700",children:C.length}),u.jsx("span",{className:`text-[8px] text-cyan-500 transform transition-transform duration-200 ${E?"rotate-180":""}`,children:""})]})]}),E&&u.jsx("div",{className:"p-1 space-y-1 animate-fade-in bg-slate-950/20",children:C.map(P=>{const D=P.type==="SHIELD_BASE",j=P.type==="INTRODUCTORY",I=P.type&&P.type.startsWith("BOSS");let v="border-yellow-500/30 bg-yellow-900/5 hover:bg-yellow-900/20",S="bg-yellow-500",A="text-yellow-200";return I?(v="border-purple-500/30 bg-purple-900/20 hover:bg-purple-900/40 animate-pulse",S="bg-purple-500",A="text-purple-200"):D?(v="border-cyan-500/30 bg-cyan-900/5 hover:bg-cyan-900/20",S="bg-cyan-500",A="text-cyan-200"):j&&(v="border-emerald-500/30 bg-emerald-900/5 hover:bg-emerald-900/20",S="bg-emerald-500",A="text-emerald-200"),u.jsxs("div",{onClick:()=>n.handleMissionSelect(P),className:`p-2 border cursor-pointer transition-all group relative overflow-hidden ${v}`,children:[u.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${S} group-hover:w-1.5 transition-all`}),u.jsx("div",{className:`text-xs font-bold ${A} group-hover:text-white uppercase tracking-wider pl-2 truncate`,children:P.title||"UNKNOWN MISSION"})]},P.id)})})]},x)})]})]})]})]}),u.jsx("main",{className:"flex-1 relative bg-slate-950 overflow-hidden",children:t})]}),u.jsx(u9,{alignment:i||"ALIVE",worldStage:d,urgentMessage:c})]})},v9=()=>{const{state:t,actions:e}=uA(),n=gl(),{loading:r,loadingAuth:s,lang:i,playerAlignment:o,heroes:a,completedMissionIds:c,omegaCylinders:d,worldStage:h,isEditorMode:p,surferTurnCount:f}=t;return r||s?u.jsx("div",{className:"bg-slate-950 text-cyan-500 h-screen flex items-center justify-center font-mono",children:"LOADING SHIELD OS..."}):u.jsxs(J1,{children:[u.jsx(Yn,{path:"/",element:u.jsx(ND,{onLogin:e.handleGuestLogin,onGoogleLogin:()=>{},onEditorLogin:e.handleEditorLogin,language:i,setLanguage:e.setLang})}),u.jsx(Yn,{path:"/story",element:u.jsx(RD,{language:i,onComplete:g=>{e.setPlayerAlignment(g),n("/setup")},onSkip:()=>{e.setPlayerAlignment("ALIVE");const g=cn.find(_=>_.id==="core_box");g&&e.setHeroes(g.heroes),n("/map")},startAtChoice:t.startStoryAtChoice})}),u.jsx(Yn,{path:"/setup",element:o?u.jsx(d9,{language:i,playerAlignment:o,onConfirm:e.handleExpansionConfirm,onBack:()=>{e.setPlayerAlignment(null),n("/story")},ownedExpansions:t.ownedExpansions,onToggleExpansion:e.toggleExpansion,onToggleAllExpansions:e.toggleAllExpansions}):u.jsx(vc,{to:"/"})}),u.jsx(Yn,{path:"/intro",element:o?u.jsx(kD,{language:i,playerAlignment:o,onComplete:()=>{t.introMission?n("/mission0"):n("/tutorial")}}):u.jsx(vc,{to:"/"})}),u.jsx(Yn,{path:"/mission0",element:o&&t.introMission?u.jsx(nI,{mission:t.introMission,isOpen:!0,onClose:()=>n("/tutorial"),onComplete:()=>{e.handleMissionComplete(t.introMission.id),n("/tutorial")},language:i,isCompleted:!1}):u.jsx(vc,{to:"/map"})}),u.jsx(Yn,{path:"/map",element:u.jsxs(cx,{children:[u.jsx(lx,{language:i,missions:t.visibleMissions,completedMissionIds:c,onMissionComplete:e.handleMissionComplete,onMissionSelect:e.handleMissionSelect,onBunkerClick:()=>n("/bunker"),factionStates:t.FACTION_STATES,playerAlignment:o,worldStage:h,surferTurnCount:f}),p&&u.jsxs("div",{className:"absolute top-20 right-4 z-50 flex flex-col gap-2 bg-slate-900/95 p-4 border border-cyan-500 shadow-[0_0_20px_rgba(6,182,212,0.3)] rounded-sm min-w-[200px] max-h-[80vh] overflow-y-auto scrollbar-thin scrollbar-thumb-cyan-700",children:[u.jsx("h3",{className:"text-xs font-bold text-cyan-400 border-b border-cyan-800 pb-1 mb-2 tracking-widest uppercase",children:"EDITOR TOOLS"}),u.jsx("button",{onClick:()=>e.setShowMissionEditor(!0),className:"bg-cyan-900/50 hover:bg-cyan-800 text-cyan-200 text-[10px] font-bold py-2 px-3 border border-cyan-700 uppercase tracking-wider transition-colors",children:"+ CREAR MISIN"}),u.jsx("button",{onClick:()=>e.setShowCharacterEditor(!0),className:"bg-blue-900/50 hover:bg-blue-800 text-blue-200 text-[10px] font-bold py-2 px-3 border border-blue-700 uppercase tracking-wider transition-colors",children:"+ CREAR PERSONAJE"}),u.jsx("button",{onClick:()=>e.setShowDbManager(!0),className:"bg-purple-900/50 hover:bg-purple-800 text-purple-200 text-[10px] font-bold py-2 px-3 border border-purple-700 uppercase tracking-wider transition-colors",children:" GESTOR BBDD (ADMIN)"}),u.jsx("div",{className:"h-px bg-cyan-900 my-1"}),u.jsx("button",{onClick:()=>e.handleSimulateProgress(5),className:"bg-emerald-900/50 hover:bg-emerald-800 text-emerald-200 text-[10px] font-bold py-2 px-3 border border-emerald-700 uppercase tracking-wider transition-colors",children:"+5 MISIONES (SIM)"}),u.jsx("button",{onClick:e.handleResetProgress,className:"bg-red-900/50 hover:bg-red-800 text-red-200 text-[10px] font-bold py-2 px-3 border border-red-700 uppercase tracking-wider transition-colors",children:"RESET PROGRESO"}),u.jsxs("div",{className:"mt-2 text-[9px] text-gray-500 font-mono text-center border-t border-gray-800 pt-2",children:["SURFER TURN: ",u.jsx("span",{className:"text-white font-bold",children:f})]})]})]})}),u.jsx(Yn,{path:"/bunker",element:u.jsx(cx,{children:u.jsx(r9,{heroes:a,missions:t.visibleMissions.filter(g=>g&&!c.has(g.id)),onAssign:(g,_)=>{const x=a.findIndex(C=>C.id===g);if(x>=0){const C=[...a];return C[x]={...C[x],status:"DEPLOYED",assignedMissionId:_},e.setHeroes(C),!0}return!1},onUnassign:g=>{const _=a.findIndex(x=>x.id===g);if(_>=0){const x=[...a];x[_]={...x[_],status:"AVAILABLE",assignedMissionId:null},e.setHeroes(x)}},onAddHero:g=>e.setHeroes([...a,g]),onToggleObjective:e.handleToggleHeroObjective,onBack:()=>n("/map"),language:i,playerAlignment:o,isEditorMode:p,onTransformHero:e.handleTransformHero,onTickerUpdate:e.handleTickerUpdate,omegaCylinders:d,onFindCylinder:()=>e.setOmegaCylinders(g=>g+1)})})}),u.jsx(Yn,{path:"/tutorial",element:u.jsxs("div",{className:"absolute inset-0 z-40",children:[u.jsx(lx,{language:i,missions:t.visibleMissions,completedMissionIds:c,onMissionComplete:()=>{},onMissionSelect:()=>{},onBunkerClick:()=>{},factionStates:t.FACTION_STATES,playerAlignment:o,worldStage:h}),u.jsx(OD,{language:i,onComplete:()=>{t.user&&localStorage.setItem(`shield_tutorial_seen_${t.user.uid}`,"true"),n("/map")},onStepChange:g=>{["roster","file","recruit"].includes(g)&&n("/bunker")}})]})}),u.jsx(Yn,{path:"*",element:u.jsx(vc,{to:"/"})})]})},E9=()=>u.jsx(bR,{children:u.jsx(TD,{children:u.jsx(v9,{})})}),oI=document.getElementById("root");if(!oI)throw new Error("Could not find root element to mount to");const x9=vf.createRoot(oI);x9.render(u.jsx(zI.StrictMode,{children:u.jsx(E9,{})}));
